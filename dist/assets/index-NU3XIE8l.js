const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BbM5LZm-.js","assets/vendor-D8ObPovc.js","assets/index.es-B76waWaV.js","assets/router-B4_bAxJa.js"])))=>i.map(i=>d[i]);
import{r as Ah,b as _0,a as N0,g as Lh,c as oc}from"./vendor-D8ObPovc.js";import{r as re,u as j0,a as As,R as Ch,L as Ic,B as Nx,b as jx,c as Hn}from"./router-B4_bAxJa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var id={exports:{}},Do={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef;function kx(){if(Ef)return Do;Ef=1;var n=Ah(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,c,u){var d,f={},g=null,p=null;u!==void 0&&(g=""+u),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)r.call(c,d)&&!i.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:o,key:g,ref:p,props:f,_owner:s.current}}return Do.Fragment=t,Do.jsx=a,Do.jsxs=a,Do}var Tf;function Sx(){return Tf||(Tf=1,id.exports=kx()),id.exports}var l=Sx(),lc={exports:{}},Hs={},ad={exports:{}},od,Ff;function Ax(){if(Ff)return od;Ff=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return od=n,od}var ld,If;function Lx(){if(If)return ld;If=1;var n=Ax();function e(){}function t(){}return t.resetWarningCache=e,ld=function(){function r(a,o,c,u,d,f){if(f!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},ld}var Rf;function k0(){return Rf||(Rf=1,ad.exports=Lx()()),ad.exports}var cc={exports:{}},gr={},uc={exports:{}},Bf;function S0(){return Bf||(Bf=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var t="none",r="contents",s=/^(input|select|textarea|button|object|iframe)$/;function i(f,g){return g.getPropertyValue("overflow")!=="visible"||f.scrollWidth<=0&&f.scrollHeight<=0}function a(f){var g=f.offsetWidth<=0&&f.offsetHeight<=0;if(g&&!f.innerHTML)return!0;try{var p=window.getComputedStyle(f),y=p.getPropertyValue("display");return g?y!==r&&i(f,p):y===t}catch{return console.warn("Failed to inspect element style"),!1}}function o(f){for(var g=f,p=f.getRootNode&&f.getRootNode();g&&g!==document.body;){if(p&&g===p&&(g=p.host.parentNode),a(g))return!1;g=g.parentNode}return!0}function c(f,g){var p=f.nodeName.toLowerCase(),y=s.test(p)&&!f.disabled||p==="a"&&f.href||g;return y&&o(f)}function u(f){var g=f.getAttribute("tabindex");g===null&&(g=void 0);var p=isNaN(g);return(p||g>=0)&&c(f,!p)}function d(f){var g=[].slice.call(f.querySelectorAll("*"),0).reduce(function(p,y){return p.concat(y.shadowRoot?d(y.shadowRoot):[y])},[]);return g.filter(u)}n.exports=e.default}(uc,uc.exports)),uc.exports}var zf;function Cx(){if(zf)return gr;zf=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.resetState=a,gr.log=o,gr.handleBlur=c,gr.handleFocus=u,gr.markForFocusLater=d,gr.returnFocus=f,gr.popWithoutFocus=g,gr.setupScopedFocus=p,gr.teardownScopedFocus=y;var n=S0(),e=t(n);function t(v){return v&&v.__esModule?v:{default:v}}var r=[],s=null,i=!1;function a(){r=[]}function o(){}function c(){i=!0}function u(){if(i){if(i=!1,!s)return;setTimeout(function(){if(!s.contains(document.activeElement)){var v=(0,e.default)(s)[0]||s;v.focus()}},0)}}function d(){r.push(document.activeElement)}function f(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,w=null;try{r.length!==0&&(w=r.pop(),w.focus({preventScroll:v}));return}catch{console.warn(["You tried to return focus to",w,"but it is not in the DOM anymore"].join(" "))}}function g(){r.length>0&&r.pop()}function p(v){s=v,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",u))}function y(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",u))}return gr}var dc={exports:{}},qf;function Px(){return qf||(qf=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=S0(),r=s(t);function s(o){return o&&o.__esModule?o:{default:o}}function i(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return o.activeElement.shadowRoot?i(o.activeElement.shadowRoot):o.activeElement}function a(o,c){var u=(0,r.default)(o);if(!u.length){c.preventDefault();return}var d=void 0,f=c.shiftKey,g=u[0],p=u[u.length-1],y=i();if(o===y){if(!f)return;d=p}if(p===y&&!f&&(d=g),g===y&&f&&(d=p),d){c.preventDefault(),d.focus();return}var v=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),w=v!=null&&v[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(w){var N=u.indexOf(y);if(N>-1&&(N+=f?-1:1),d=u[N],typeof d>"u"){c.preventDefault(),d=f?p:g,d.focus();return}c.preventDefault(),d.focus()}}n.exports=e.default}(dc,dc.exports)),dc.exports}var Pr={},cd,Hf;function Dx(){if(Hf)return cd;Hf=1;var n=function(){};return cd=n,cd}var $r={},ud={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/var Uf;function Mx(){return Uf||(Uf=1,function(n){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};n.exports?n.exports=t:window.ExecutionEnvironment=t})()}(ud)),ud.exports}var Wf;function Ph(){if(Wf)return $r;Wf=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.canUseDOM=$r.SafeNodeList=$r.SafeHTMLCollection=void 0;var n=Mx(),e=t(n);function t(i){return i&&i.__esModule?i:{default:i}}var r=e.default,s=r.canUseDOM?window.HTMLElement:{};return $r.SafeHTMLCollection=r.canUseDOM?window.HTMLCollection:{},$r.SafeNodeList=r.canUseDOM?window.NodeList:{},$r.canUseDOM=r.canUseDOM,$r.default=s,$r}var $f;function A0(){if($f)return Pr;$f=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.resetState=i,Pr.log=a,Pr.assertNodeList=o,Pr.setElement=c,Pr.validateElement=u,Pr.hide=d,Pr.show=f,Pr.documentNotReadyOrSSRTesting=g;var n=Dx(),e=r(n),t=Ph();function r(p){return p&&p.__esModule?p:{default:p}}var s=null;function i(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):s.length!=null?s.forEach(function(p){return p.removeAttribute("aria-hidden")}):document.querySelectorAll(s).forEach(function(p){return p.removeAttribute("aria-hidden")})),s=null}function a(){}function o(p,y){if(!p||!p.length)throw new Error("react-modal: No elements were found for selector "+y+".")}function c(p){var y=p;if(typeof y=="string"&&t.canUseDOM){var v=document.querySelectorAll(y);o(v,y),y=v}return s=y||s,s}function u(p){var y=p||s;return y?Array.isArray(y)||y instanceof HTMLCollection||y instanceof NodeList?y:[y]:((0,e.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function d(p){var y=!0,v=!1,w=void 0;try{for(var N=u(p)[Symbol.iterator](),P;!(y=(P=N.next()).done);y=!0){var M=P.value;M.setAttribute("aria-hidden","true")}}catch(W){v=!0,w=W}finally{try{!y&&N.return&&N.return()}finally{if(v)throw w}}}function f(p){var y=!0,v=!1,w=void 0;try{for(var N=u(p)[Symbol.iterator](),P;!(y=(P=N.next()).done);y=!0){var M=P.value;M.removeAttribute("aria-hidden")}}catch(W){v=!0,w=W}finally{try{!y&&N.return&&N.return()}finally{if(v)throw w}}}function g(){s=null}return Pr}var bi={},Vf;function Ox(){if(Vf)return bi;Vf=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.resetState=r,bi.log=s;var n={},e={};function t(u,d){u.classList.remove(d)}function r(){var u=document.getElementsByTagName("html")[0];for(var d in n)t(u,n[d]);var f=document.body;for(var g in e)t(f,e[g]);n={},e={}}function s(){}var i=function(d,f){return d[f]||(d[f]=0),d[f]+=1,f},a=function(d,f){return d[f]&&(d[f]-=1),f},o=function(d,f,g){g.forEach(function(p){i(f,p),d.add(p)})},c=function(d,f,g){g.forEach(function(p){a(f,p),f[p]===0&&d.remove(p)})};return bi.add=function(d,f){return o(d.classList,d.nodeName.toLowerCase()=="html"?n:e,f.split(" "))},bi.remove=function(d,f){return c(d.classList,d.nodeName.toLowerCase()=="html"?n:e,f.split(" "))},bi}var va={},Gf;function L0(){if(Gf)return va;Gf=1,Object.defineProperty(va,"__esModule",{value:!0}),va.log=r,va.resetState=s;function n(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function i(){var a=this;n(this,i),this.register=function(o){a.openInstances.indexOf(o)===-1&&(a.openInstances.push(o),a.emit("register"))},this.deregister=function(o){var c=a.openInstances.indexOf(o);c!==-1&&(a.openInstances.splice(c,1),a.emit("deregister"))},this.subscribe=function(o){a.subscribers.push(o)},this.emit=function(o){a.subscribers.forEach(function(c){return c(o,a.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},t=new e;function r(){console.log("portalOpenInstances ----------"),console.log(t.openInstances.length),t.openInstances.forEach(function(i){return console.log(i)}),console.log("end portalOpenInstances ----------")}function s(){t=new e}return va.default=t,va}var Mo={},Yf;function Ex(){if(Yf)return Mo;Yf=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.resetState=a,Mo.log=o;var n=L0(),e=t(n);function t(d){return d&&d.__esModule?d:{default:d}}var r=void 0,s=void 0,i=[];function a(){for(var d=[r,s],f=0;f<d.length;f++){var g=d[f];g&&g.parentNode&&g.parentNode.removeChild(g)}r=s=null,i=[]}function o(){console.log("bodyTrap ----------"),console.log(i.length);for(var d=[r,s],f=0;f<d.length;f++){var g=d[f],p=g||{};console.log(p.nodeName,p.className,p.id)}console.log("edn bodyTrap ----------")}function c(){i.length!==0&&i[i.length-1].focusContent()}function u(d,f){!r&&!s&&(r=document.createElement("div"),r.setAttribute("data-react-modal-body-trap",""),r.style.position="absolute",r.style.opacity="0",r.setAttribute("tabindex","0"),r.addEventListener("focus",c),s=r.cloneNode(),s.addEventListener("focus",c)),i=f,i.length>0?(document.body.firstChild!==r&&document.body.insertBefore(r,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(r.parentElement&&r.parentElement.removeChild(r),s.parentElement&&s.parentElement.removeChild(s))}return e.default.subscribe(u),Mo}var Kf;function Tx(){return Kf||(Kf=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(O){for(var V=1;V<arguments.length;V++){var ee=arguments[V];for(var B in ee)Object.prototype.hasOwnProperty.call(ee,B)&&(O[B]=ee[B])}return O},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},s=function(){function O(V,ee){for(var B=0;B<ee.length;B++){var Z=ee[B];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(V,Z.key,Z)}}return function(V,ee,B){return ee&&O(V.prototype,ee),B&&O(V,B),V}}(),i=Ah(),a=k0(),o=K(a),c=Cx(),u=W(c),d=Px(),f=K(d),g=A0(),p=W(g),y=Ox(),v=W(y),w=Ph(),N=K(w),P=L0(),M=K(P);Ex();function W(O){if(O&&O.__esModule)return O;var V={};if(O!=null)for(var ee in O)Object.prototype.hasOwnProperty.call(O,ee)&&(V[ee]=O[ee]);return V.default=O,V}function K(O){return O&&O.__esModule?O:{default:O}}function le(O,V){if(!(O instanceof V))throw new TypeError("Cannot call a class as a function")}function X(O,V){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:O}function j(O,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);O.prototype=Object.create(V&&V.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(O,V):O.__proto__=V)}var D={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},H=function(V){return V.code==="Tab"||V.keyCode===9},A=function(V){return V.code==="Escape"||V.keyCode===27},S=0,q=function(O){j(V,O);function V(ee){le(this,V);var B=X(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,ee));return B.setOverlayRef=function(Z){B.overlay=Z,B.props.overlayRef&&B.props.overlayRef(Z)},B.setContentRef=function(Z){B.content=Z,B.props.contentRef&&B.props.contentRef(Z)},B.afterClose=function(){var Z=B.props,ne=Z.appElement,de=Z.ariaHideApp,xe=Z.htmlOpenClassName,k=Z.bodyOpenClassName,T=Z.parentSelector,I=T&&T().ownerDocument||document;k&&v.remove(I.body,k),xe&&v.remove(I.getElementsByTagName("html")[0],xe),de&&S>0&&(S-=1,S===0&&p.show(ne)),B.props.shouldFocusAfterRender&&(B.props.shouldReturnFocusAfterClose?(u.returnFocus(B.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),B.props.onAfterClose&&B.props.onAfterClose(),M.default.deregister(B)},B.open=function(){B.beforeOpen(),B.state.afterOpen&&B.state.beforeClose?(clearTimeout(B.closeTimer),B.setState({beforeClose:!1})):(B.props.shouldFocusAfterRender&&(u.setupScopedFocus(B.node),u.markForFocusLater()),B.setState({isOpen:!0},function(){B.openAnimationFrame=requestAnimationFrame(function(){B.setState({afterOpen:!0}),B.props.isOpen&&B.props.onAfterOpen&&B.props.onAfterOpen({overlayEl:B.overlay,contentEl:B.content})})}))},B.close=function(){B.props.closeTimeoutMS>0?B.closeWithTimeout():B.closeWithoutTimeout()},B.focusContent=function(){return B.content&&!B.contentHasFocus()&&B.content.focus({preventScroll:!0})},B.closeWithTimeout=function(){var Z=Date.now()+B.props.closeTimeoutMS;B.setState({beforeClose:!0,closesAt:Z},function(){B.closeTimer=setTimeout(B.closeWithoutTimeout,B.state.closesAt-Date.now())})},B.closeWithoutTimeout=function(){B.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},B.afterClose)},B.handleKeyDown=function(Z){H(Z)&&(0,f.default)(B.content,Z),B.props.shouldCloseOnEsc&&A(Z)&&(Z.stopPropagation(),B.requestClose(Z))},B.handleOverlayOnClick=function(Z){B.shouldClose===null&&(B.shouldClose=!0),B.shouldClose&&B.props.shouldCloseOnOverlayClick&&(B.ownerHandlesClose()?B.requestClose(Z):B.focusContent()),B.shouldClose=null},B.handleContentOnMouseUp=function(){B.shouldClose=!1},B.handleOverlayOnMouseDown=function(Z){!B.props.shouldCloseOnOverlayClick&&Z.target==B.overlay&&Z.preventDefault()},B.handleContentOnClick=function(){B.shouldClose=!1},B.handleContentOnMouseDown=function(){B.shouldClose=!1},B.requestClose=function(Z){return B.ownerHandlesClose()&&B.props.onRequestClose(Z)},B.ownerHandlesClose=function(){return B.props.onRequestClose},B.shouldBeClosed=function(){return!B.state.isOpen&&!B.state.beforeClose},B.contentHasFocus=function(){return document.activeElement===B.content||B.content.contains(document.activeElement)},B.buildClassName=function(Z,ne){var de=(typeof ne>"u"?"undefined":r(ne))==="object"?ne:{base:D[Z],afterOpen:D[Z]+"--after-open",beforeClose:D[Z]+"--before-close"},xe=de.base;return B.state.afterOpen&&(xe=xe+" "+de.afterOpen),B.state.beforeClose&&(xe=xe+" "+de.beforeClose),typeof ne=="string"&&ne?xe+" "+ne:xe},B.attributesFromObject=function(Z,ne){return Object.keys(ne).reduce(function(de,xe){return de[Z+"-"+xe]=ne[xe],de},{})},B.state={afterOpen:!1,beforeClose:!1},B.shouldClose=null,B.moveFromContentToOverlay=null,B}return s(V,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(B,Z){this.props.isOpen&&!B.isOpen?this.open():!this.props.isOpen&&B.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!Z.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var B=this.props,Z=B.appElement,ne=B.ariaHideApp,de=B.htmlOpenClassName,xe=B.bodyOpenClassName,k=B.parentSelector,T=k&&k().ownerDocument||document;xe&&v.add(T.body,xe),de&&v.add(T.getElementsByTagName("html")[0],de),ne&&(S+=1,p.hide(Z)),M.default.register(this)}},{key:"render",value:function(){var B=this.props,Z=B.id,ne=B.className,de=B.overlayClassName,xe=B.defaultStyles,k=B.children,T=ne?{}:xe.content,I=de?{}:xe.overlay;if(this.shouldBeClosed())return null;var Y={ref:this.setOverlayRef,className:this.buildClassName("overlay",de),style:t({},I,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},Q=t({id:Z,ref:this.setContentRef,style:t({},T,this.props.style.content),className:this.buildClassName("content",ne),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),fe=this.props.contentElement(Q,k);return this.props.overlayElement(Y,fe)}}]),V}(i.Component);q.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},q.propTypes={isOpen:o.default.bool.isRequired,defaultStyles:o.default.shape({content:o.default.object,overlay:o.default.object}),style:o.default.shape({content:o.default.object,overlay:o.default.object}),className:o.default.oneOfType([o.default.string,o.default.object]),overlayClassName:o.default.oneOfType([o.default.string,o.default.object]),parentSelector:o.default.func,bodyOpenClassName:o.default.string,htmlOpenClassName:o.default.string,ariaHideApp:o.default.bool,appElement:o.default.oneOfType([o.default.instanceOf(N.default),o.default.instanceOf(w.SafeHTMLCollection),o.default.instanceOf(w.SafeNodeList),o.default.arrayOf(o.default.instanceOf(N.default))]),onAfterOpen:o.default.func,onAfterClose:o.default.func,onRequestClose:o.default.func,closeTimeoutMS:o.default.number,shouldFocusAfterRender:o.default.bool,shouldCloseOnOverlayClick:o.default.bool,shouldReturnFocusAfterClose:o.default.bool,preventScroll:o.default.bool,role:o.default.string,contentLabel:o.default.string,aria:o.default.object,data:o.default.object,children:o.default.node,shouldCloseOnEsc:o.default.bool,overlayRef:o.default.func,contentRef:o.default.func,id:o.default.string,overlayElement:o.default.func,contentElement:o.default.func,testId:o.default.string},e.default=q,n.exports=e.default}(cc,cc.exports)),cc.exports}function C0(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function P0(n){function e(t){var r=this.constructor.getDerivedStateFromProps(n,t);return r??null}this.setState(e.bind(this))}function D0(n,e){try{var t=this.props,r=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,r)}finally{this.props=t,this.state=r}}C0.__suppressDeprecationWarning=!0;P0.__suppressDeprecationWarning=!0;D0.__suppressDeprecationWarning=!0;function Fx(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,r=null,s=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?s="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),t!==null||r!==null||s!==null){var i=n.displayName||n.name,a=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(r!==null?`
  `+r:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=C0,e.componentWillReceiveProps=P0),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=D0;var o=e.componentDidUpdate;e.componentDidUpdate=function(u,d,f){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;o.call(this,u,d,g)}}return n}const Ix=Object.freeze(Object.defineProperty({__proto__:null,polyfill:Fx},Symbol.toStringTag,{value:"Module"})),Rx=_0(Ix);var Jf;function Bx(){if(Jf)return Hs;Jf=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.bodyOpenClassName=Hs.portalClassName=void 0;var n=Object.assign||function(A){for(var S=1;S<arguments.length;S++){var q=arguments[S];for(var O in q)Object.prototype.hasOwnProperty.call(q,O)&&(A[O]=q[O])}return A},e=function(){function A(S,q){for(var O=0;O<q.length;O++){var V=q[O];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(S,V.key,V)}}return function(S,q,O){return q&&A(S.prototype,q),O&&A(S,O),S}}(),t=Ah(),r=w(t),s=N0(),i=w(s),a=k0(),o=w(a),c=Tx(),u=w(c),d=A0(),f=v(d),g=Ph(),p=w(g),y=Rx;function v(A){if(A&&A.__esModule)return A;var S={};if(A!=null)for(var q in A)Object.prototype.hasOwnProperty.call(A,q)&&(S[q]=A[q]);return S.default=A,S}function w(A){return A&&A.__esModule?A:{default:A}}function N(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function P(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function M(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var W=Hs.portalClassName="ReactModalPortal",K=Hs.bodyOpenClassName="ReactModal__Body--open",le=g.canUseDOM&&i.default.createPortal!==void 0,X=function(S){return document.createElement(S)},j=function(){return le?i.default.createPortal:i.default.unstable_renderSubtreeIntoContainer};function D(A){return A()}var H=function(A){M(S,A);function S(){var q,O,V,ee;N(this,S);for(var B=arguments.length,Z=Array(B),ne=0;ne<B;ne++)Z[ne]=arguments[ne];return ee=(O=(V=P(this,(q=S.__proto__||Object.getPrototypeOf(S)).call.apply(q,[this].concat(Z))),V),V.removePortal=function(){!le&&i.default.unmountComponentAtNode(V.node);var de=D(V.props.parentSelector);de&&de.contains(V.node)?de.removeChild(V.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},V.portalRef=function(de){V.portal=de},V.renderPortal=function(de){var xe=j(),k=xe(V,r.default.createElement(u.default,n({defaultStyles:S.defaultStyles},de)),V.node);V.portalRef(k)},O),P(V,ee)}return e(S,[{key:"componentDidMount",value:function(){if(g.canUseDOM){le||(this.node=X("div")),this.node.className=this.props.portalClassName;var O=D(this.props.parentSelector);O.appendChild(this.node),!le&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(O){var V=D(O.parentSelector),ee=D(this.props.parentSelector);return{prevParent:V,nextParent:ee}}},{key:"componentDidUpdate",value:function(O,V,ee){if(g.canUseDOM){var B=this.props,Z=B.isOpen,ne=B.portalClassName;O.portalClassName!==ne&&(this.node.className=ne);var de=ee.prevParent,xe=ee.nextParent;xe!==de&&(de.removeChild(this.node),xe.appendChild(this.node)),!(!O.isOpen&&!Z)&&!le&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!g.canUseDOM||!this.node||!this.portal)){var O=this.portal.state,V=Date.now(),ee=O.isOpen&&this.props.closeTimeoutMS&&(O.closesAt||V+this.props.closeTimeoutMS);ee?(O.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,ee-V)):this.removePortal()}}},{key:"render",value:function(){if(!g.canUseDOM||!le)return null;!this.node&&le&&(this.node=X("div"));var O=j();return O(r.default.createElement(u.default,n({ref:this.portalRef,defaultStyles:S.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(O){f.setElement(O)}}]),S}(t.Component);return H.propTypes={isOpen:o.default.bool.isRequired,style:o.default.shape({content:o.default.object,overlay:o.default.object}),portalClassName:o.default.string,bodyOpenClassName:o.default.string,htmlOpenClassName:o.default.string,className:o.default.oneOfType([o.default.string,o.default.shape({base:o.default.string.isRequired,afterOpen:o.default.string.isRequired,beforeClose:o.default.string.isRequired})]),overlayClassName:o.default.oneOfType([o.default.string,o.default.shape({base:o.default.string.isRequired,afterOpen:o.default.string.isRequired,beforeClose:o.default.string.isRequired})]),appElement:o.default.oneOfType([o.default.instanceOf(p.default),o.default.instanceOf(g.SafeHTMLCollection),o.default.instanceOf(g.SafeNodeList),o.default.arrayOf(o.default.instanceOf(p.default))]),onAfterOpen:o.default.func,onRequestClose:o.default.func,closeTimeoutMS:o.default.number,ariaHideApp:o.default.bool,shouldFocusAfterRender:o.default.bool,shouldCloseOnOverlayClick:o.default.bool,shouldReturnFocusAfterClose:o.default.bool,preventScroll:o.default.bool,parentSelector:o.default.func,aria:o.default.object,data:o.default.object,role:o.default.string,contentLabel:o.default.string,shouldCloseOnEsc:o.default.bool,overlayRef:o.default.func,contentRef:o.default.func,id:o.default.string,overlayElement:o.default.func,contentElement:o.default.func},H.defaultProps={isOpen:!1,portalClassName:W,bodyOpenClassName:K,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(S,q){return r.default.createElement("div",S,q)},contentElement:function(S,q){return r.default.createElement("div",S,q)}},H.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,y.polyfill)(H),Hs.default=H,Hs}var Xf;function zx(){return Xf||(Xf=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Bx(),r=s(t);function s(i){return i&&i.__esModule?i:{default:i}}e.default=r.default,n.exports=e.default}(lc,lc.exports)),lc.exports}zx();const qx="modulepreload",Hx=function(n){return"/"+n},Qf={},ks=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let a=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=a(t.map(u=>{if(u=Hx(u),u in Qf)return;Qf[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":qx,d||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((p,y)=>{g.addEventListener("load",p),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Ux=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Xa);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Dh extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Wx extends Dh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $x extends Dh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vx extends Dh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $d;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})($d||($d={}));var Gx=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};class Yx{constructor(e,{headers:t={},customFetch:r,region:s=$d.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=Ux(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Gx(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(y=>{throw new Wx(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new $x(d);if(!d.ok)throw new Vx(d);let g=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield d.json():g==="application/octet-stream"?p=yield d.blob():g==="text/event-stream"?p=d:g==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var vn={},wa={},_a={},Na={},ja={},ka={},Kx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Va=Kx();const Jx=Va.fetch,M0=Va.fetch.bind(Va),O0=Va.Headers,Xx=Va.Request,Qx=Va.Response,Xa=Object.freeze(Object.defineProperty({__proto__:null,Headers:O0,Request:Xx,Response:Qx,default:M0,fetch:Jx},Symbol.toStringTag,{value:"Module"})),Zx=_0(Xa);var hc={},Zf;function E0(){if(Zf)return hc;Zf=1,Object.defineProperty(hc,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return hc.default=n,hc}var ep;function T0(){if(ep)return ka;ep=1;var n=ka&&ka.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ka,"__esModule",{value:!0});const e=n(Zx),t=n(E0());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,g;let p=null,y=null,v=null,w=u.status,N=u.statusText;if(u.ok){if(this.method!=="HEAD"){const K=await u.text();K===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=K:y=JSON.parse(K))}const M=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),W=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");M&&W&&W.length>1&&(v=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,w=406,N="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const M=await u.text();try{p=JSON.parse(M),Array.isArray(p)&&u.status===404&&(y=[],p=null,w=200,N="OK")}catch{u.status===404&&M===""?(w=204,N="No Content"):p={message:M}}if(p&&this.isMaybeSingle&&(!((g=p?.details)===null||g===void 0)&&g.includes("0 rows"))&&(p=null,w=200,N="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:y,count:v,status:w,statusText:N}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,f,g;return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:`${(f=u?.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(g=u?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,a)}returns(){return this}overrideTypes(){return this}}return ka.default=r,ka}var tp;function F0(){if(tp)return ja;tp=1;var n=ja&&ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ja,"__esModule",{value:!0});const e=n(T0());class t extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[s?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),g=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${g}"; options=${f};`,u==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ja.default=t,ja}var np;function Mh(){if(np)return Na;np=1;var n=Na&&Na.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Na,"__esModule",{value:!0});const e=n(F0());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${u}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return Na.default=t,Na}var rp;function I0(){if(rp)return _a;rp=1;var n=_a&&_a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_a,"__esModule",{value:!0});const e=n(Mh());class t{constructor(s,{headers:i={},schema:a,fetch:o}){this.url=s,this.headers=i,this.schema=a,this.fetch=o}select(s,{head:i=!1,count:a}={}){const o=i?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const o="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const u=s.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){const u="POST",d=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const f=s.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(f.length>0){const g=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return _a.default=t,_a}var Oo={},Eo={},sp;function eb(){return sp||(sp=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.version=void 0,Eo.version="0.0.0-automated"),Eo}var ip;function tb(){if(ip)return Oo;ip=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.DEFAULT_HEADERS=void 0;const n=eb();return Oo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Oo}var ap;function nb(){if(ap)return wa;ap=1;var n=wa&&wa.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wa,"__esModule",{value:!0});const e=n(I0()),t=n(Mh()),r=tb();class s{constructor(a,{headers:o={},schema:c,fetch:u}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),o),this.schemaName=c,this.fetch=u}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:c=!1,get:u=!1,count:d}={}){let f;const g=new URL(`${this.url}/rpc/${a}`);let p;c||u?(f=c?"HEAD":"GET",Object.entries(o).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{g.searchParams.append(v,w)})):(f="POST",p=o);const y=Object.assign({},this.headers);return d&&(y.Prefer=`count=${d}`),new t.default({method:f,url:g,headers:y,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return wa.default=s,wa}var op;function rb(){if(op)return vn;op=1;var n=vn&&vn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(vn,"__esModule",{value:!0}),vn.PostgrestError=vn.PostgrestBuilder=vn.PostgrestTransformBuilder=vn.PostgrestFilterBuilder=vn.PostgrestQueryBuilder=vn.PostgrestClient=void 0;const e=n(nb());vn.PostgrestClient=e.default;const t=n(I0());vn.PostgrestQueryBuilder=t.default;const r=n(Mh());vn.PostgrestFilterBuilder=r.default;const s=n(F0());vn.PostgrestTransformBuilder=s.default;const i=n(T0());vn.PostgrestBuilder=i.default;const a=n(E0());return vn.PostgrestError=a.default,vn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},vn}var sb=rb();const ib=Lh(sb),{PostgrestClient:ab,PostgrestQueryBuilder:h6,PostgrestFilterBuilder:f6,PostgrestTransformBuilder:p6,PostgrestBuilder:m6,PostgrestError:g6}=ib,ob="2.11.2",lb={"X-Client-Info":`realtime-js/${ob}`},cb="1.0.0",R0=1e4,ub=1e3;var Ra;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ra||(Ra={}));var sr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(sr||(sr={}));var Er;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Er||(Er={}));var Vd;(function(n){n.websocket="websocket"})(Vd||(Vd={}));var Ci;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ci||(Ci={}));class db{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class B0{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Bt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Bt||(Bt={}));const lp=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=hb(a,n,e,s),i),{})},hb=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s?.type,a=t[n];return i&&!r.includes(i)?z0(i,a):Gd(a)},z0=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return gb(e,t)}switch(n){case Bt.bool:return fb(e);case Bt.float4:case Bt.float8:case Bt.int2:case Bt.int4:case Bt.int8:case Bt.numeric:case Bt.oid:return pb(e);case Bt.json:case Bt.jsonb:return mb(e);case Bt.timestamp:return xb(e);case Bt.abstime:case Bt.date:case Bt.daterange:case Bt.int4range:case Bt.int8range:case Bt.money:case Bt.reltime:case Bt.text:case Bt.time:case Bt.timestamptz:case Bt.timetz:case Bt.tsrange:case Bt.tstzrange:return Gd(e);default:return Gd(e)}},Gd=n=>n,fb=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},pb=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},mb=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},gb=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>z0(e,o))}return n},xb=n=>typeof n=="string"?n.replace(" ","T"):n,q0=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dd{constructor(e,t,r={},s=R0){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(cp||(cp={}));class Yo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Yo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Yo.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=i[u];if(f){const g=d.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),y=d.filter(w=>p.indexOf(w.presence_ref)<0),v=f.filter(w=>g.indexOf(w.presence_ref)<0);y.length>0&&(o[u]=y),v.length>0&&(c[u]=v)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const f=e[o].map(p=>p.presence_ref),g=d.filter(p=>f.indexOf(p.presence_ref)<0);e[o].unshift(...g)}r(o,d,c)}),this.map(a,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,s(o,u,c),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var up;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(up||(up={}));var dp;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(dp||(dp={}));var ys;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class Oh{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new dd(this,Er.join,this.params,this.timeout),this.rejoinTimer=new B0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=sr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=sr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Er.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Yo(this),this.broadcastEndpointURL=q0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e?.(ys.CHANNEL_ERROR,d)),this._onClose(()=>e?.(ys.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e?.(ys.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,p=(f=g?.length)!==null&&f!==void 0?f:0,y=[];for(let v=0;v<p;v++){const w=g[v],{filter:{event:N,schema:P,table:M,filter:W}}=w,K=d&&d[v];if(K&&K.event===N&&K.schema===P&&K.table===M&&K.filter===W)y.push(Object.assign(Object.assign({},w),{id:K.id}));else{this.unsubscribe(),e?.(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ys.SUBSCRIBED);return}}).receive("error",d=>{e?.(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e?.(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=sr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Er.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new dd(this,Er.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dd(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=Er;if(r&&[o,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let g=this._onMessage(a,t,r);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,v,w;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(v=p.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(p=>p.callback(g,r)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var y,v,w,N,P,M;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const W=p.id,K=(y=p.filter)===null||y===void 0?void 0:y.event;return W&&((v=t.ids)===null||v===void 0?void 0:v.includes(W))&&(K==="*"||K?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const W=(P=(N=p?.filter)===null||N===void 0?void 0:N.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return W==="*"||W===((M=t?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:v,table:w,commit_timestamp:N,type:P,errors:M}=y;g=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:N,eventType:P,new:{},old:{},errors:M}),this._getPayloadRecords(y))}p.callback(g,r)})}_isClosed(){return this.state===sr.closed}_isJoined(){return this.state===sr.joined}_isJoining(){return this.state===sr.joining}_isLeaving(){return this.state===sr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Oh.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Er.close,{},e)}_onError(e){this._on(Er.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=sr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=lp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=lp(e.columns,e.old_record)),t}}const bb=()=>{},yb=typeof WebSocket<"u",vb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wb{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=lb,this.params={},this.timeout=R0,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=bb,this.conn=null,this.sendBuffer=[],this.serializer=new db,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>ks(async()=>{const{default:c}=await Promise.resolve().then(()=>Xa);return{default:c}},void 0).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Vd.websocket}`,this.httpEndpoint=q0(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new B0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(yb){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new _b(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ks(async()=>{const{default:e}=await import("./browser-BbM5LZm-.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cb}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ra.connecting:return Ci.Connecting;case Ra.open:return Ci.Open;case Ra.closing:return Ci.Closing;default:return Ci.Closed}}isConnected(){return this.connectionState()===Ci.Open}channel(e,t={config:{}}){const r=new Oh(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(Er.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ub,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Er.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([vb],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class _b{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ra.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Eh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Nb extends Eh{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Yd extends Eh{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var jb=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};const H0=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Xa);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},kb=()=>jb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ks(()=>Promise.resolve().then(()=>Xa),void 0)).Response:Response}),Kd=n=>{if(Array.isArray(n))return n.map(t=>Kd(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Kd(r)}),e};var qi=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};const hd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Sb=(n,e,t)=>qi(void 0,void 0,void 0,function*(){const r=yield kb();n instanceof r&&!t?.noResolveJson?n.json().then(s=>{e(new Nb(hd(s),n.status||500))}).catch(s=>{e(new Yd(hd(s),s))}):e(new Yd(hd(n),n))}),Ab=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function ml(n,e,t,r,s,i){return qi(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,Ab(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Sb(c,o,r))})})}function Vc(n,e,t,r){return qi(this,void 0,void 0,function*(){return ml(n,"GET",e,t,r)})}function Ks(n,e,t,r,s){return qi(this,void 0,void 0,function*(){return ml(n,"POST",e,r,s,t)})}function Lb(n,e,t,r,s){return qi(this,void 0,void 0,function*(){return ml(n,"PUT",e,r,s,t)})}function Cb(n,e,t,r){return qi(this,void 0,void 0,function*(){return ml(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function U0(n,e,t,r,s){return qi(this,void 0,void 0,function*(){return ml(n,"DELETE",e,r,s,t)})}var Yn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};const Pb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Db{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=H0(s)}uploadOrUpdate(e,t,r,s){return Yn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},hp),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a?.duplex?{duplex:a.duplex}:{})),g=yield f.json();return f.ok?{data:{path:u,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(wn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Yn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:hp.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:d}),g=yield f.json();return f.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(c){if(wn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Yn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const i=yield Ks(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Eh("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}})}update(e,t,r){return Yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Yn(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(wn(s))return{data:null,error:s};throw s}})}copy(e,t,r){return Yn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ks(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(wn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return Yn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ks(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(wn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Yn(this,void 0,void 0,function*(){try{const s=yield Ks(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(wn(s))return{data:null,error:s};throw s}})}download(e,t){return Yn(this,void 0,void 0,function*(){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Vc(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(wn(o))return{data:null,error:o};throw o}})}info(e){return Yn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Vc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Kd(r),error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}})}exists(e){return Yn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Cb(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(wn(r)&&r instanceof Yd){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Yn(this,void 0,void 0,function*(){try{return{data:yield U0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(wn(t))return{data:null,error:t};throw t}})}list(e,t,r){return Yn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Pb),t),{prefix:e||""});return{data:yield Ks(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(wn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Mb="2.7.1",Ob={"X-Client-Info":`storage-js/${Mb}`};var Sa=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};class Eb{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Ob),t),this.fetch=H0(r)}listBuckets(){return Sa(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(wn(e))return{data:null,error:e};throw e}})}getBucket(e){return Sa(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(wn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Sa(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Sa(this,void 0,void 0,function*(){try{return{data:yield Lb(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Sa(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(wn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Sa(this,void 0,void 0,function*(){try{return{data:yield U0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(wn(t))return{data:null,error:t};throw t}})}}class Tb extends Eb{constructor(e,t={},r){super(e,t,r)}from(e){return new Db(this.url,this.headers,e,this.fetch)}}const Fb="2.49.4";let Uo="";typeof Deno<"u"?Uo="deno":typeof document<"u"?Uo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Uo="react-native":Uo="node";const Ib={"X-Client-Info":`supabase-js-${Uo}/${Fb}`},Rb={headers:Ib},Bb={schema:"public"},zb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qb={};var Hb=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};const Ub=n=>{let e;return n?e=n:typeof fetch>"u"?e=M0:e=fetch,(...t)=>e(...t)},Wb=()=>typeof Headers>"u"?O0:Headers,$b=(n,e,t)=>{const r=Ub(t),s=Wb();return(i,a)=>Hb(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:n;let u=new s(a?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var Vb=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};function Gb(n){return n.replace(/\/$/,"")}function Yb(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:a,auth:o,realtime:c,global:u}=e,d={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>Vb(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}const W0="2.69.1",Ea=30*1e3,Jd=3,fd=Jd*Ea,Kb="http://localhost:9999",Jb="supabase.auth.token",Xb={"X-Client-Info":`gotrue-js/${W0}`},Xd="X-Supabase-Api-Version",$0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zb=6e5;class Th extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ft(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class e2 extends Th{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function t2(n){return ft(n)&&n.name==="AuthApiError"}class V0 extends Th{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ai extends Th{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Vs extends ai{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n2(n){return ft(n)&&n.name==="AuthSessionMissingError"}class pd extends ai{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fc extends ai{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pc extends ai{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function r2(n){return ft(n)&&n.name==="AuthImplicitGrantRedirectError"}class fp extends ai{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qd extends ai{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function md(n){return ft(n)&&n.name==="AuthRetryableFetchError"}class pp extends ai{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ko extends ai{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gp=` 	
\r=`.split(""),s2=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<gp.length;e+=1)n[gp[e].charCodeAt(0)]=-2;for(let e=0;e<mp.length;e+=1)n[mp[e].charCodeAt(0)]=e;return n})();function G0(n,e,t){const r=s2[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function xp(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{o2(a,r,t)};for(let a=0;a<n.length;a+=1)G0(n.charCodeAt(a),s,i);return e.join("")}function i2(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function a2(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}i2(r,e)}}function o2(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function l2(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)G0(n.charCodeAt(s),t,r);return new Uint8Array(e)}function c2(n){const e=[];return a2(n,t=>e.push(t)),new Uint8Array(e)}function u2(n){return Math.round(Date.now()/1e3)+n}function d2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Gr=()=>typeof window<"u"&&typeof document<"u",yi={tested:!1,writable:!1},Jo=()=>{if(!Gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yi.tested)return yi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),yi.tested=!0,yi.writable=!0}catch{yi.tested=!0,yi.writable=!1}return yi.writable};function h2(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Y0=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>Xa);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},f2=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",K0=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},mc=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},gc=async(n,e)=>{await n.removeItem(e)};class au{constructor(){this.promise=new au.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}au.promiseConstructor=Promise;function gd(n){const e=n.split(".");if(e.length!==3)throw new Ko("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Qb.test(e[r]))throw new Ko("JWT not in base64url format");return{header:JSON.parse(xp(e[0])),payload:JSON.parse(xp(e[1])),signature:l2(e[2]),raw:{header:e[0],payload:e[1]}}}async function p2(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function m2(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function g2(n){return("0"+n.toString(16)).substr(-2)}function x2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,g2).join("")}async function b2(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function y2(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await b2(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Aa(n,e,t=!1){const r=x2();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await K0(n,`${e}-code-verifier`,s);const i=await y2(r);return[i,r===i?"plain":"s256"]}const v2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w2(n){const e=n.headers.get(Xd);if(!e||!e.match(v2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _2(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function N2(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var j2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ji=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),k2=[502,503,504];async function bp(n){var e;if(!f2(n))throw new Qd(ji(n),0);if(k2.includes(n.status))throw new Qd(ji(n),n.status);let t;try{t=await n.json()}catch(i){throw new V0(ji(i),i)}let r;const s=w2(n);if(s&&s.getTime()>=$0["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new pp(ji(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Vs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new pp(ji(t),n.status,t.weak_password.reasons);throw new e2(ji(t),n.status||500,r)}const S2=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function gt(n,e,t,r){var s;const i=Object.assign({},r?.headers);i[Xd]||(i[Xd]=$0["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await A2(n,e,t+o,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function A2(n,e,t,r,s,i){const a=S2(e,r,s,i);let o;try{o=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new Qd(ji(c),0)}if(o.ok||await bp(o),r?.noResolveJson)return o;try{return await o.json()}catch(c){await bp(c)}}function Gs(n){var e;let t=null;D2(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=u2(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function yp(n){const e=Gs(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Js(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function L2(n){return{data:n,error:null}}function C2(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=j2(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function P2(n){return n}function D2(n){return n.access_token&&n.refresh_token&&n.expires_in}var M2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class O2{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Y0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await gt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await gt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Js})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=M2(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await gt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:C2,redirectTo:t?.redirectTo})}catch(t){if(ft(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await gt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Js})}catch(t){if(ft(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await gt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P2});if(d.error)throw d.error;const f=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ft(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await gt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Js})}catch(t){if(ft(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await gt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Js})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await gt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Js})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await gt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await gt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ft(t))return{data:null,error:t};throw t}}}const E2={getItem:n=>Jo()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Jo()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Jo()&&globalThis.localStorage.removeItem(n)}};function vp(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function T2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const La={debug:!!(globalThis&&Jo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class J0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class F2 extends J0{}async function I2(n,e,t){La.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),La.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){La.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{La.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw La.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new F2(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(La.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}T2();const R2={url:Kb,storageKey:Jb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wp(n,e,t){return await t()}class il{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=il.nextInstanceID,il.nextInstanceID+=1,this.instanceID>0&&Gr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},R2),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new O2({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Y0(s.fetch),this.lock=s.lock||wp,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Gr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=I2:this.lock=wp,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Jo()?this.storage=E2:(this.memoryStorage={},this.storage=vp(this.memoryStorage)):(this.memoryStorage={},this.storage=vp(this.memoryStorage)),Gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${W0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=h2(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Gr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),r2(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ft(t)?{error:t}:{error:new V0("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gs}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ft(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:d,password:f,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Aa(this.storage,this.storageKey)),i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:d,password:f,data:(t=g?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:p,code_challenge_method:y},xform:Gs})}else if("phone"in e){const{phone:d,password:f,options:g}=e;i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=g?.data)!==null&&r!==void 0?r:{},channel:(s=g?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Gs})}else throw new fc("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ft(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:yp})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:yp})}else throw new fc("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await mc(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gs});if(await gc(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new pd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ft(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Gs}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new pd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Aa(this.storage,this.storageKey));const{error:f}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new fc("You must provide either an email or phone number.")}catch(o){if(ft(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await gt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Gs});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ft(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Aa(this.storage,this.storageKey)),await gt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:L2})}catch(i){if(ft(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Vs;const{error:s}=await gt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ft(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await gt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await gt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:o}}throw new fc("You must provide either an email or phone number and a type")}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await mc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Js}):await this._useSession(async t=>{var r,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vs}:await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Js})})}catch(t){if(ft(t))return n2(t)&&(await this._removeSession(),await gc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Vs;const a=s.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Aa(this.storage,this.storageKey));const{data:u,error:d}=await gt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Js});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vs;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=gd(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ft(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Vs;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Gr())throw new pc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pc("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fp("No code detected.");const{data:P,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:c,token_type:u}=e;if(!i||!o||!a||!u)throw new pc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let g=d+f;c&&(g=parseInt(c));const p=g-d;p*1e3<=Ea&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const y=g-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,d);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const N={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:g,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(r){if(ft(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(t2(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await gc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=d2(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Aa(this.storage,this.storageKey,!0));try{return await gt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ft(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,c,u,d;const{data:f,error:g}=i;if(g)throw g;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await gt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Gr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(ft(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await gt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await m2(async s=>(s>0&&await p2(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await gt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gs})),(s,i)=>{const a=200*Math.pow(2,s);return i&&md(i)&&Date.now()+a-r<Ea})}catch(r){if(this._debug(t,"error",r),ft(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Gr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await mc(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<fd;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${fd}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),md(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Vs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new au;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Vs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),ft(i)){const a={session:null,error:i};return md(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await K0(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await gc(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ea);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ea);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ea}ms, refresh threshold is ${Jd} ticks`),s<=Jd&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof J0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Aa(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await gt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await gt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await gt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(ft(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await gt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ft(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=gd(s.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r||(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Zb>Date.now()))return r;const{data:s,error:i}=await gt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Ko("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(a=>a.kid===e),!r)throw new Ko("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};r=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:c}}=gd(r);if(_2(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const u=N2(s.alg),d=await this.fetchJwk(s.kid,t),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,a,c2(`${o}.${c}`)))throw new Ko("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}}il.nextInstanceID=0;const B2=il;class z2 extends B2{constructor(e){super(e)}}var q2=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(n,e||[])).next())})};class H2{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Gb(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Bb,realtime:qb,auth:Object.assign(Object.assign({},zb),{storageKey:c}),global:Rb},d=Yb(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=$b(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ab(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Yx(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tb(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return q2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z2({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new wb(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const U2=(n,e,t)=>new H2(n,e,t);let xd=null;const W2="https://uprveordqyluvqyaslfx.supabase.co",$2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVwcnZlb3JkcXlsdXZxeWFzbGZ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MzUwMjUsImV4cCI6MjA2MTAxMTAyNX0.50FI4uJAPKbnhA0C9U8puR_3EXVd8qEZ3s_Rb6RExEM";function V2(){return xd||(xd=U2(W2,$2)),xd}const Te=V2(),X0=6048e5,G2=864e5,Fh=6e4,Ih=36e5,Y2=1e3,_p=Symbol.for("constructDateFrom");function gn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&_p in n?n[_p](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ot(n,e){return gn(e||n,n)}function Q0(n,e,t){const r=Ot(n,t?.in);return isNaN(e)?gn(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}let K2={};function Qa(){return K2}function ti(n,e){const t=Qa(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=Ot(n,e?.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ga(n,e){return ti(n,{...e,weekStartsOn:1})}function Z0(n,e){const t=Ot(n,e?.in),r=t.getFullYear(),s=gn(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Ga(s),a=gn(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Ga(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Gc(n){const e=Ot(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function ou(n,...e){const t=gn.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function Np(n,e){const t=Ot(n,e?.in);return t.setHours(0,0,0,0),t}function eg(n,e,t){const[r,s]=ou(t?.in,n,e),i=Np(r),a=Np(s),o=+i-Gc(i),c=+a-Gc(a);return Math.round((o-c)/G2)}function J2(n,e){const t=Z0(n,e),r=gn(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ga(r)}function bd(n,e){const t=+Ot(n)-+Ot(e);return t<0?-1:t>0?1:t}function X2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Q2(n){return!(!X2(n)&&typeof n!="number"||isNaN(+Ot(n)))}function Z2(n,e,t){const[r,s]=ou(t?.in,n,e),i=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return i*12+a}function yd(n,e,t){const[r,s]=ou(t?.in,n,e),i=jp(r,s),a=Math.abs(eg(r,s));r.setDate(r.getDate()-i*a);const o=+(jp(r,s)===-i),c=i*(a-o);return c===0?0:c}function jp(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function ey(n,e){const t=Ot(n,e?.in);return t.setHours(23,59,59,999),t}function ty(n,e){const t=Ot(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ny(n,e){const t=Ot(n,e?.in);return+ey(t,e)==+ty(t,e)}function ry(n,e,t){const[r,s,i]=ou(t?.in,n,n,e),a=bd(s,i),o=Math.abs(Z2(s,i));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let c=bd(s,i)===-a;ny(r)&&o===1&&bd(r,i)===1&&(c=!1);const u=a*(o-+c);return u===0?0:u}function sy(n,e){const t=Ot(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const iy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ay=(n,e,t)=>{let r;const s=iy[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ba(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const oy={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ly={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uy={date:Ba({formats:oy,defaultWidth:"full"}),time:Ba({formats:ly,defaultWidth:"full"}),dateTime:Ba({formats:cy,defaultWidth:"full"})},dy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hy=(n,e,t,r)=>dy[n];function Xr(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t?.width?String(t.width):a;s=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t?.width?String(t.width):n.defaultWidth;s=n.values[o]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const fy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},py={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},my={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},by={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yy=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},vy={ordinalNumber:yy,era:Xr({values:fy,defaultWidth:"wide"}),quarter:Xr({values:py,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Xr({values:my,defaultWidth:"wide"}),day:Xr({values:gy,defaultWidth:"wide"}),dayPeriod:Xr({values:xy,defaultWidth:"wide",formattingValues:by,defaultFormattingWidth:"wide"})};function Qr(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?_y(o,f=>f.test(a)):wy(o,f=>f.test(a));let u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function wy(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function _y(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function tg(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const Ny=/^(\d+)(th|st|nd|rd)?/i,jy=/\d+/i,ky={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sy={any:[/^b/i,/^(a|c)/i]},Ay={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ly={any:[/1/i,/2/i,/3/i,/4/i]},Cy={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Py={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Dy={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},My={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ey={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ty={ordinalNumber:tg({matchPattern:Ny,parsePattern:jy,valueCallback:n=>parseInt(n,10)}),era:Qr({matchPatterns:ky,defaultMatchWidth:"wide",parsePatterns:Sy,defaultParseWidth:"any"}),quarter:Qr({matchPatterns:Ay,defaultMatchWidth:"wide",parsePatterns:Ly,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Qr({matchPatterns:Cy,defaultMatchWidth:"wide",parsePatterns:Py,defaultParseWidth:"any"}),day:Qr({matchPatterns:Dy,defaultMatchWidth:"wide",parsePatterns:My,defaultParseWidth:"any"}),dayPeriod:Qr({matchPatterns:Oy,defaultMatchWidth:"any",parsePatterns:Ey,defaultParseWidth:"any"})},ng={code:"en-US",formatDistance:ay,formatLong:uy,formatRelative:hy,localize:vy,match:Ty,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fy(n,e){const t=Ot(n,e?.in);return eg(t,sy(t))+1}function rg(n,e){const t=Ot(n,e?.in),r=+Ga(t)-+J2(t);return Math.round(r/X0)+1}function Rh(n,e){const t=Ot(n,e?.in),r=t.getFullYear(),s=Qa(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=gn(e?.in||n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=ti(a,e),c=gn(e?.in||n,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=ti(c,e);return+t>=+o?r+1:+t>=+u?r:r-1}function Iy(n,e){const t=Qa(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=Rh(n,e),i=gn(e?.in||n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ti(i,e)}function sg(n,e){const t=Ot(n,e?.in),r=+ti(t,e)-+Iy(t,e);return Math.round(r/X0)+1}function Ct(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Us={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Ct(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ct(t+1,2)},d(n,e){return Ct(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ct(n.getHours()%12||12,e.length)},H(n,e){return Ct(n.getHours(),e.length)},m(n,e){return Ct(n.getMinutes(),e.length)},s(n,e){return Ct(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return Ct(s,e.length)}},Ca={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kp={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return Us.y(n,e)},Y:function(n,e,t,r){const s=Rh(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Ct(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Ct(i,e.length)},R:function(n,e){const t=Z0(n);return Ct(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ct(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ct(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ct(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Us.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ct(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=sg(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Ct(s,e.length)},I:function(n,e,t){const r=rg(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Ct(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Us.d(n,e)},D:function(n,e,t){const r=Fy(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Ct(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ct(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ct(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ct(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=Ca.noon:r===0?s=Ca.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=Ca.evening:r>=12?s=Ca.afternoon:r>=4?s=Ca.morning:s=Ca.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Us.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Us.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Ct(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Ct(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Us.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Us.s(n,e)},S:function(n,e){return Us.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Ap(r);case"XXXX":case"XX":return ki(r);case"XXXXX":case"XXX":default:return ki(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return Ap(r);case"xxxx":case"xx":return ki(r);case"xxxxx":case"xxx":default:return ki(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Sp(r,":");case"OOOO":default:return"GMT"+ki(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Sp(r,":");case"zzzz":default:return"GMT"+ki(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Ct(r,e.length)},T:function(n,e,t){return Ct(+n,e.length)}};function Sp(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+Ct(i,2)}function Ap(n,e){return n%60===0?(n>0?"-":"+")+Ct(Math.abs(n)/60,2):ki(n,e)}function ki(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Ct(Math.trunc(r/60),2),i=Ct(r%60,2);return t+s+e+i}const Lp=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ig=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ry=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return Lp(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Lp(r,e)).replace("{{time}}",ig(s,e))},Zd={p:ig,P:Ry},By=/^D+$/,zy=/^Y+$/,qy=["D","DD","YY","YYYY"];function ag(n){return By.test(n)}function og(n){return zy.test(n)}function eh(n,e,t){const r=Hy(n,e,t);if(console.warn(r),qy.includes(n))throw new RangeError(r)}function Hy(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Uy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$y=/^'([^]*?)'?$/,Vy=/''/g,Gy=/[a-zA-Z]/;function Vt(n,e,t){const r=Qa(),s=t?.locale??r.locale??ng,i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Ot(n,t?.in);if(!Q2(o))throw new RangeError("Invalid time value");let c=e.match(Wy).map(d=>{const f=d[0];if(f==="p"||f==="P"){const g=Zd[f];return g(d,s.formatLong)}return d}).join("").match(Uy).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:Yy(d)};if(kp[f])return{isToken:!0,value:d};if(f.match(Gy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!t?.useAdditionalWeekYearTokens&&og(f)||!t?.useAdditionalDayOfYearTokens&&ag(f))&&eh(f,e,String(n));const g=kp[f[0]];return g(o,f,s.localize,u)}).join("")}function Yy(n){const e=n.match($y);return e?e[1].replace(Vy,"'"):n}function Ky(){return Object.assign({},Qa())}function Jy(n,e){const t=Ot(n,e?.in).getDay();return t===0?7:t}function vd(n,e){return+Ot(n)<+Ot(e)}function Xy(n,e){const t=Qy(e)?new e(0):gn(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function Qy(n){return typeof n=="function"&&n.prototype?.constructor===n}const Zy=10;class lg{subPriority=0;validate(e,t){return!0}}class ev extends lg{constructor(e,t,r,s,i){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class tv extends lg{priority=Zy;subPriority=-1;constructor(e,t){super(),this.context=e||(r=>gn(t,r))}set(e,t){return t.timestampIsSet?e:gn(e,Xy(e,this.context))}}class St{run(e,t,r,s){const i=this.parse(e,t,r,s);return i?{setter:new ev(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,r){return!0}}class nv extends St{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const ln={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Zr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function cn(n,e){return n&&{value:e(n.value),rest:n.rest}}function Gt(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function es(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(s*Ih+i*Fh+a*Y2),rest:e.slice(t[0].length)}}function cg(n){return Gt(ln.anyDigitsSigned,n)}function Zt(n,e){switch(n){case 1:return Gt(ln.singleDigit,e);case 2:return Gt(ln.twoDigits,e);case 3:return Gt(ln.threeDigits,e);case 4:return Gt(ln.fourDigits,e);default:return Gt(new RegExp("^\\d{1,"+n+"}"),e)}}function Yc(n,e){switch(n){case 1:return Gt(ln.singleDigitSigned,e);case 2:return Gt(ln.twoDigitsSigned,e);case 3:return Gt(ln.threeDigitsSigned,e);case 4:return Gt(ln.fourDigitsSigned,e);default:return Gt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Bh(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ug(n,e){const t=e>0,r=t?e:1-e;let s;if(r<=50)s=n||100;else{const i=r+50,a=Math.trunc(i/100)*100,o=n>=i%100;s=n+a-(o?100:0)}return t?s:1-s}function dg(n){return n%400===0||n%4===0&&n%100!==0}class rv extends St{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const s=i=>({year:i,isTwoDigitYear:t==="yy"});switch(t){case"y":return cn(Zt(4,e),s);case"yo":return cn(r.ordinalNumber(e,{unit:"year"}),s);default:return cn(Zt(t.length,e),s)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const s=e.getFullYear();if(r.isTwoDigitYear){const a=ug(r.year,s);return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}const i=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class sv extends St{priority=130;parse(e,t,r){const s=i=>({year:i,isTwoDigitYear:t==="YY"});switch(t){case"Y":return cn(Zt(4,e),s);case"Yo":return cn(r.ordinalNumber(e,{unit:"year"}),s);default:return cn(Zt(t.length,e),s)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,s){const i=Rh(e,s);if(r.isTwoDigitYear){const o=ug(r.year,i);return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),ti(e,s)}const a=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(a,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),ti(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class iv extends St{priority=130;parse(e,t){return Yc(t==="R"?4:t.length,e)}set(e,t,r){const s=gn(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Ga(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class av extends St{priority=130;parse(e,t){return Yc(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class ov extends St{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return Zt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class lv extends St{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return Zt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class cv extends St{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const s=i=>i-1;switch(t){case"M":return cn(Gt(ln.month,e),s);case"MM":return cn(Zt(2,e),s);case"Mo":return cn(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class uv extends St{priority=110;parse(e,t,r){const s=i=>i-1;switch(t){case"L":return cn(Gt(ln.month,e),s);case"LL":return cn(Zt(2,e),s);case"Lo":return cn(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function dv(n,e,t){const r=Ot(n,t?.in),s=sg(r,t)-e;return r.setDate(r.getDate()-s*7),Ot(r,t?.in)}class hv extends St{priority=100;parse(e,t,r){switch(t){case"w":return Gt(ln.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Zt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,s){return ti(dv(e,r,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function fv(n,e,t){const r=Ot(n,t?.in),s=rg(r,t)-e;return r.setDate(r.getDate()-s*7),r}class pv extends St{priority=100;parse(e,t,r){switch(t){case"I":return Gt(ln.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Zt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return Ga(fv(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const mv=[31,28,31,30,31,30,31,31,30,31,30,31],gv=[31,29,31,30,31,30,31,31,30,31,30,31];class xv extends St{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return Gt(ln.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Zt(t.length,e)}}validate(e,t){const r=e.getFullYear(),s=dg(r),i=e.getMonth();return s?t>=1&&t<=gv[i]:t>=1&&t<=mv[i]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class bv extends St{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return Gt(ln.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Zt(t.length,e)}}validate(e,t){const r=e.getFullYear();return dg(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function zh(n,e,t){const r=Qa(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Ot(n,t?.in),a=i.getDay(),c=(e%7+7)%7,u=7-s,d=e<0||e>6?e-(a+u)%7:(c+u)%7-(a+u)%7;return Q0(i,d,t)}class yv extends St{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,s){return e=zh(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class vv extends St{priority=90;parse(e,t,r,s){const i=a=>{const o=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return cn(Zt(t.length,e),i);case"eo":return cn(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,s){return e=zh(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class wv extends St{priority=90;parse(e,t,r,s){const i=a=>{const o=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return cn(Zt(t.length,e),i);case"co":return cn(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,s){return e=zh(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function _v(n,e,t){const r=Ot(n,t?.in),s=Jy(r,t),i=e-s;return Q0(r,i,t)}class Nv extends St{priority=90;parse(e,t,r){const s=i=>i===0?7:i;switch(t){case"i":case"ii":return Zt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return cn(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return cn(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return cn(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return cn(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=_v(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class jv extends St{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Bh(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class kv extends St{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Bh(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Sv extends St{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Bh(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Av extends St{priority=70;parse(e,t,r){switch(t){case"h":return Gt(ln.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Lv extends St{priority=70;parse(e,t,r){switch(t){case"H":return Gt(ln.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Cv extends St{priority=70;parse(e,t,r){switch(t){case"K":return Gt(ln.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Pv extends St{priority=70;parse(e,t,r){switch(t){case"k":return Gt(ln.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Zt(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Dv extends St{priority=60;parse(e,t,r){switch(t){case"m":return Gt(ln.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Zt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class Mv extends St{priority=50;parse(e,t,r){switch(t){case"s":return Gt(ln.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Zt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Ov extends St{priority=30;parse(e,t){const r=s=>Math.trunc(s*Math.pow(10,-t.length+3));return cn(Zt(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class Ev extends St{priority=10;parse(e,t){switch(t){case"X":return es(Zr.basicOptionalMinutes,e);case"XX":return es(Zr.basic,e);case"XXXX":return es(Zr.basicOptionalSeconds,e);case"XXXXX":return es(Zr.extendedOptionalSeconds,e);case"XXX":default:return es(Zr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:gn(e,e.getTime()-Gc(e)-r)}incompatibleTokens=["t","T","x"]}class Tv extends St{priority=10;parse(e,t){switch(t){case"x":return es(Zr.basicOptionalMinutes,e);case"xx":return es(Zr.basic,e);case"xxxx":return es(Zr.basicOptionalSeconds,e);case"xxxxx":return es(Zr.extendedOptionalSeconds,e);case"xxx":default:return es(Zr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:gn(e,e.getTime()-Gc(e)-r)}incompatibleTokens=["t","T","X"]}class Fv extends St{priority=40;parse(e){return cg(e)}set(e,t,r){return[gn(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Iv extends St{priority=20;parse(e){return cg(e)}set(e,t,r){return[gn(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Rv={G:new nv,y:new rv,Y:new sv,R:new iv,u:new av,Q:new ov,q:new lv,M:new cv,L:new uv,w:new hv,I:new pv,d:new xv,D:new bv,E:new yv,e:new vv,c:new wv,i:new Nv,a:new jv,b:new kv,B:new Sv,h:new Av,H:new Lv,K:new Cv,k:new Pv,m:new Dv,s:new Mv,S:new Ov,X:new Ev,x:new Tv,t:new Fv,T:new Iv},Bv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qv=/^'([^]*?)'?$/,Hv=/''/g,Uv=/\S/,Wv=/[a-zA-Z]/;function wd(n,e,t,r){const s=()=>gn(t,NaN),i=Ky(),a=i.locale??ng,o=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,u={firstWeekContainsDate:o,weekStartsOn:c,locale:a},d=[new tv(r?.in,t)],f=e.match(zv).map(w=>{const N=w[0];if(N in Zd){const P=Zd[N];return P(w,a.formatLong)}return w}).join("").match(Bv),g=[];for(let w of f){og(w)&&eh(w,e,n),ag(w)&&eh(w,e,n);const N=w[0],P=Rv[N];if(P){const{incompatibleTokens:M}=P;if(Array.isArray(M)){const K=g.find(le=>M.includes(le.token)||le.token===N);if(K)throw new RangeError(`The format string mustn't contain \`${K.fullToken}\` and \`${w}\` at the same time`)}else if(P.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);g.push({token:N,fullToken:w});const W=P.run(n,w,a.match,u);if(!W)return s();d.push(W.setter),n=W.rest}else{if(N.match(Wv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(w==="''"?w="'":N==="'"&&(w=$v(w)),n.indexOf(w)===0)n=n.slice(w.length);else return s()}}if(n.length>0&&Uv.test(n))return s();const p=d.map(w=>w.priority).sort((w,N)=>N-w).filter((w,N,P)=>P.indexOf(w)===N).map(w=>d.filter(N=>N.priority===w).sort((N,P)=>P.subPriority-N.subPriority)).map(w=>w[0]);let y=Ot(t,r?.in);if(isNaN(+y))return s();const v={};for(const w of p){if(!w.validate(y,u))return s();const N=w.set(y,v,u);Array.isArray(N)?(y=N[0],Object.assign(v,N[1])):y=N}return y}function $v(n){return n.match(qv)[1].replace(Hv,"'")}function vs(n,e){const t=()=>gn(e?.in,NaN),s=Kv(n);let i;if(s.date){const u=Jv(s.date,2);i=Xv(u.restDateString,u.year)}if(!i||isNaN(+i))return t();const a=+i;let o=0,c;if(s.time&&(o=Qv(s.time),isNaN(o)))return t();if(s.timezone){if(c=Zv(s.timezone),isNaN(c))return t()}else{const u=new Date(a+o),d=Ot(0,e?.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return Ot(a+o+c,e?.in)}const xc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Vv=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Gv=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Yv=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Kv(n){const e={},t=n.split(xc.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],xc.timeZoneDelimiter.test(e.date)&&(e.date=n.split(xc.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const s=xc.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Jv(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:n.slice((r[1]||r[2]).length)}}function Xv(n,e){if(e===null)return new Date(NaN);const t=n.match(Vv);if(!t)return new Date(NaN);const r=!!t[4],s=To(t[1]),i=To(t[2])-1,a=To(t[3]),o=To(t[4]),c=To(t[5])-1;if(r)return s5(e,o,c)?e5(e,o,c):new Date(NaN);{const u=new Date(0);return!n5(e,i,a)||!r5(e,s)?new Date(NaN):(u.setUTCFullYear(e,i,Math.max(s,a)),u)}}function To(n){return n?parseInt(n):1}function Qv(n){const e=n.match(Gv);if(!e)return NaN;const t=_d(e[1]),r=_d(e[2]),s=_d(e[3]);return i5(t,r,s)?t*Ih+r*Fh+s*1e3:NaN}function _d(n){return n&&parseFloat(n.replace(",","."))||0}function Zv(n){if(n==="Z")return 0;const e=n.match(Yv);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return a5(r,s)?t*(r*Ih+s*Fh):NaN}function e5(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+t+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const t5=[31,null,31,30,31,30,31,31,30,31,30,31];function hg(n){return n%400===0||n%4===0&&n%100!==0}function n5(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(t5[e]||(hg(n)?29:28))}function r5(n,e){return e>=1&&e<=(hg(n)?366:365)}function s5(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function i5(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function a5(n,e){return e>=0&&e<=59}function Dt(n){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(n)}var In=Uint8Array,ir=Uint16Array,qh=Int32Array,lu=new In([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cu=new In([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),th=new In([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fg=function(n,e){for(var t=new ir(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var s=new qh(t[30]),r=1;r<30;++r)for(var i=t[r];i<t[r+1];++i)s[i]=i-t[r]<<5|r;return{b:t,r:s}},pg=fg(lu,2),mg=pg.b,nh=pg.r;mg[28]=258,nh[258]=28;var gg=fg(cu,0),o5=gg.b,Cp=gg.r,rh=new ir(32768);for(var Ht=0;Ht<32768;++Ht){var Ws=(Ht&43690)>>1|(Ht&21845)<<1;Ws=(Ws&52428)>>2|(Ws&13107)<<2,Ws=(Ws&61680)>>4|(Ws&3855)<<4,rh[Ht]=((Ws&65280)>>8|(Ws&255)<<8)>>1}var ns=function(n,e,t){for(var r=n.length,s=0,i=new ir(e);s<r;++s)n[s]&&++i[n[s]-1];var a=new ir(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(t){o=new ir(1<<e);var c=15-e;for(s=0;s<r;++s)if(n[s])for(var u=s<<4|n[s],d=e-n[s],f=a[n[s]-1]++<<d,g=f|(1<<d)-1;f<=g;++f)o[rh[f]>>c]=u}else for(o=new ir(r),s=0;s<r;++s)n[s]&&(o[s]=rh[a[n[s]-1]++]>>15-n[s]);return o},ni=new In(288);for(var Ht=0;Ht<144;++Ht)ni[Ht]=8;for(var Ht=144;Ht<256;++Ht)ni[Ht]=9;for(var Ht=256;Ht<280;++Ht)ni[Ht]=7;for(var Ht=280;Ht<288;++Ht)ni[Ht]=8;var al=new In(32);for(var Ht=0;Ht<32;++Ht)al[Ht]=5;var l5=ns(ni,9,0),c5=ns(ni,9,1),u5=ns(al,5,0),d5=ns(al,5,1),Nd=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Dr=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},jd=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Hh=function(n){return(n+7)/8|0},xg=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new In(n.subarray(e,t))},h5=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Or=function(n,e,t){var r=new Error(e||h5[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Or),!t)throw r;return r},f5=function(n,e,t,r){var s=n.length,i=0;if(!s||e.f&&!e.l)return t||new In(0);var a=!t,o=a||e.i!=2,c=e.i;a&&(t=new In(s*3));var u=function(we){var Fe=t.length;if(we>Fe){var Le=new In(Math.max(Fe*2,we));Le.set(t),t=Le}},d=e.f||0,f=e.p||0,g=e.b||0,p=e.l,y=e.d,v=e.m,w=e.n,N=s*8;do{if(!p){d=Dr(n,f,1);var P=Dr(n,f+1,3);if(f+=3,P)if(P==1)p=c5,y=d5,v=9,w=5;else if(P==2){var le=Dr(n,f,31)+257,X=Dr(n,f+10,15)+4,j=le+Dr(n,f+5,31)+1;f+=14;for(var D=new In(j),H=new In(19),A=0;A<X;++A)H[th[A]]=Dr(n,f+A*3,7);f+=X*3;for(var S=Nd(H),q=(1<<S)-1,O=ns(H,S,1),A=0;A<j;){var V=O[Dr(n,f,q)];f+=V&15;var M=V>>4;if(M<16)D[A++]=M;else{var ee=0,B=0;for(M==16?(B=3+Dr(n,f,3),f+=2,ee=D[A-1]):M==17?(B=3+Dr(n,f,7),f+=3):M==18&&(B=11+Dr(n,f,127),f+=7);B--;)D[A++]=ee}}var Z=D.subarray(0,le),ne=D.subarray(le);v=Nd(Z),w=Nd(ne),p=ns(Z,v,1),y=ns(ne,w,1)}else Or(1);else{var M=Hh(f)+4,W=n[M-4]|n[M-3]<<8,K=M+W;if(K>s){c&&Or(0);break}o&&u(g+W),t.set(n.subarray(M,K),g),e.b=g+=W,e.p=f=K*8,e.f=d;continue}if(f>N){c&&Or(0);break}}o&&u(g+131072);for(var de=(1<<v)-1,xe=(1<<w)-1,k=f;;k=f){var ee=p[jd(n,f)&de],T=ee>>4;if(f+=ee&15,f>N){c&&Or(0);break}if(ee||Or(2),T<256)t[g++]=T;else if(T==256){k=f,p=null;break}else{var I=T-254;if(T>264){var A=T-257,Y=lu[A];I=Dr(n,f,(1<<Y)-1)+mg[A],f+=Y}var Q=y[jd(n,f)&xe],fe=Q>>4;Q||Or(3),f+=Q&15;var ne=o5[fe];if(fe>3){var Y=cu[fe];ne+=jd(n,f)&(1<<Y)-1,f+=Y}if(f>N){c&&Or(0);break}o&&u(g+131072);var ce=g+I;if(g<ne){var ue=i-ne,ke=Math.min(ne,ce);for(ue+g<0&&Or(3);g<ke;++g)t[g]=r[ue+g]}for(;g<ce;++g)t[g]=t[g-ne]}}e.l=p,e.p=k,e.b=g,e.f=d,p&&(d=1,e.m=v,e.d=y,e.n=w)}while(!d);return g!=t.length&&a?xg(t,0,g):t.subarray(0,g)},ms=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Fo=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},kd=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var s=t.length,i=t.slice();if(!s)return{t:yg,l:0};if(s==1){var a=new In(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(K,le){return K.f-le.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,d=1,f=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=s-1;)o=t[t[u].f<t[f].f?u++:f++],c=t[u!=d&&t[u].f<t[f].f?u++:f++],t[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var g=i[0].s,r=1;r<s;++r)i[r].s>g&&(g=i[r].s);var p=new ir(g+1),y=sh(t[d-1],p,0);if(y>e){var r=0,v=0,w=y-e,N=1<<w;for(i.sort(function(le,X){return p[X.s]-p[le.s]||le.f-X.f});r<s;++r){var P=i[r].s;if(p[P]>e)v+=N-(1<<y-p[P]),p[P]=e;else break}for(v>>=w;v>0;){var M=i[r].s;p[M]<e?v-=1<<e-p[M]++-1:++r}for(;r>=0&&v;--r){var W=i[r].s;p[W]==e&&(--p[W],++v)}y=e}return{t:new In(p),l:y}},sh=function(n,e,t){return n.s==-1?Math.max(sh(n.l,e,t+1),sh(n.r,e,t+1)):e[n.s]=t},Pp=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ir(++e),r=0,s=n[0],i=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(n[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=n[o]}return{c:t.subarray(0,r),n:e}},Io=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},bg=function(n,e,t){var r=t.length,s=Hh(e+2);n[s]=r&255,n[s+1]=r>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var i=0;i<r;++i)n[s+i+4]=t[i];return(s+4+r)*8},Dp=function(n,e,t,r,s,i,a,o,c,u,d){ms(e,d++,t),++s[256];for(var f=kd(s,15),g=f.t,p=f.l,y=kd(i,15),v=y.t,w=y.l,N=Pp(g),P=N.c,M=N.n,W=Pp(v),K=W.c,le=W.n,X=new ir(19),j=0;j<P.length;++j)++X[P[j]&31];for(var j=0;j<K.length;++j)++X[K[j]&31];for(var D=kd(X,7),H=D.t,A=D.l,S=19;S>4&&!H[th[S-1]];--S);var q=u+5<<3,O=Io(s,ni)+Io(i,al)+a,V=Io(s,g)+Io(i,v)+a+14+3*S+Io(X,H)+2*X[16]+3*X[17]+7*X[18];if(c>=0&&q<=O&&q<=V)return bg(e,d,n.subarray(c,c+u));var ee,B,Z,ne;if(ms(e,d,1+(V<O)),d+=2,V<O){ee=ns(g,p,0),B=g,Z=ns(v,w,0),ne=v;var de=ns(H,A,0);ms(e,d,M-257),ms(e,d+5,le-1),ms(e,d+10,S-4),d+=14;for(var j=0;j<S;++j)ms(e,d+3*j,H[th[j]]);d+=3*S;for(var xe=[P,K],k=0;k<2;++k)for(var T=xe[k],j=0;j<T.length;++j){var I=T[j]&31;ms(e,d,de[I]),d+=H[I],I>15&&(ms(e,d,T[j]>>5&127),d+=T[j]>>12)}}else ee=l5,B=ni,Z=u5,ne=al;for(var j=0;j<o;++j){var Y=r[j];if(Y>255){var I=Y>>18&31;Fo(e,d,ee[I+257]),d+=B[I+257],I>7&&(ms(e,d,Y>>23&31),d+=lu[I]);var Q=Y&31;Fo(e,d,Z[Q]),d+=ne[Q],Q>3&&(Fo(e,d,Y>>5&8191),d+=cu[Q])}else Fo(e,d,ee[Y]),d+=B[Y]}return Fo(e,d,ee[256]),d+B[256]},p5=new qh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yg=new In(0),m5=function(n,e,t,r,s,i){var a=i.z||n.length,o=new In(r+a+5*(1+Math.ceil(a/7e3))+s),c=o.subarray(r,o.length-s),u=i.l,d=(i.r||0)&7;if(e){d&&(c[0]=i.r>>3);for(var f=p5[e-1],g=f>>13,p=f&8191,y=(1<<t)-1,v=i.p||new ir(32768),w=i.h||new ir(y+1),N=Math.ceil(t/3),P=2*N,M=function(qe){return(n[qe]^n[qe+1]<<N^n[qe+2]<<P)&y},W=new qh(25e3),K=new ir(288),le=new ir(32),X=0,j=0,D=i.i||0,H=0,A=i.w||0,S=0;D+2<a;++D){var q=M(D),O=D&32767,V=w[q];if(v[O]=V,w[q]=O,A<=D){var ee=a-D;if((X>7e3||H>24576)&&(ee>423||!u)){d=Dp(n,c,0,W,K,le,j,H,S,D-S,d),H=X=j=0,S=D;for(var B=0;B<286;++B)K[B]=0;for(var B=0;B<30;++B)le[B]=0}var Z=2,ne=0,de=p,xe=O-V&32767;if(ee>2&&q==M(D-xe))for(var k=Math.min(g,ee)-1,T=Math.min(32767,D),I=Math.min(258,ee);xe<=T&&--de&&O!=V;){if(n[D+Z]==n[D+Z-xe]){for(var Y=0;Y<I&&n[D+Y]==n[D+Y-xe];++Y);if(Y>Z){if(Z=Y,ne=xe,Y>k)break;for(var Q=Math.min(xe,Y-2),fe=0,B=0;B<Q;++B){var ce=D-xe+B&32767,ue=v[ce],ke=ce-ue&32767;ke>fe&&(fe=ke,V=ce)}}}O=V,V=v[O],xe+=O-V&32767}if(ne){W[H++]=268435456|nh[Z]<<18|Cp[ne];var we=nh[Z]&31,Fe=Cp[ne]&31;j+=lu[we]+cu[Fe],++K[257+we],++le[Fe],A=D+Z,++X}else W[H++]=n[D],++K[n[D]]}}for(D=Math.max(D,A);D<a;++D)W[H++]=n[D],++K[n[D]];d=Dp(n,c,u,W,K,le,j,H,S,D-S,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=w,i.p=v,i.i=D,i.w=A)}else{for(var D=i.w||0;D<a+u;D+=65535){var Le=D+65535;Le>=a&&(c[d/8|0]=u,Le=a),d=bg(c,d+1,n.subarray(D,Le))}i.i=a}return xg(o,0,r+Hh(d)+s)},vg=function(){var n=1,e=0;return{p:function(t){for(var r=n,s=e,i=t.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=r+=t[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}n=r,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},g5=function(n,e,t,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new In(i.length+n.length);a.set(i),a.set(n,i.length),n=a,s.w=i.length}return m5(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,s)},wg=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},x5=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=vg();s.p(e.dictionary),wg(n,2,s.d())}},b5=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Or(6,"invalid zlib data"),(n[1]>>5&1)==1&&Or(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ih(n,e){e||(e={});var t=vg();t.p(n);var r=g5(n,e,e.dictionary?6:2,4);return x5(r,e),wg(r,r.length-4,t.d()),r}function y5(n,e){return f5(n.subarray(b5(n),-4),{i:2},e,e)}var v5=typeof TextDecoder<"u"&&new TextDecoder,w5=0;try{v5.decode(yg,{stream:!0}),w5=1}catch{}var st=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Sd(){st.console&&typeof st.console.log=="function"&&st.console.log.apply(st.console,arguments)}var Tt={log:Sd,warn:function(n){st.console&&(typeof st.console.warn=="function"?st.console.warn.apply(st.console,arguments):Sd.call(null,arguments))},error:function(n){st.console&&(typeof st.console.error=="function"?st.console.error.apply(st.console,arguments):Sd(n))}};function Ad(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Si(r.response,e,t)},r.onerror=function(){Tt.error("could not download file")},r.send()}function Mp(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function bc(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Xo,ah,Si=st.saveAs||((typeof window>"u"?"undefined":Dt(window))!=="object"||window!==st?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=st.URL||st.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?Mp(s.href)?Ad(n,e,t):bc(s,s.target="_blank"):bc(s)):(s.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){bc(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Mp(n))Ad(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){bc(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Dt(i)!=="object"&&(Tt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Ad(n,e,t);var s=n.type==="application/octet-stream",i=/constructor/i.test(st.HTMLElement)||st.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Dt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(n)}else{var c=st.URL||st.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _g(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var s=t[r].re,i=t[r].process,a=s.exec(n);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ld(n,e){var t=n[0],r=n[1],s=n[2],i=n[3];t=Dn(t,r,s,i,e[0],7,-680876936),i=Dn(i,t,r,s,e[1],12,-389564586),s=Dn(s,i,t,r,e[2],17,606105819),r=Dn(r,s,i,t,e[3],22,-1044525330),t=Dn(t,r,s,i,e[4],7,-176418897),i=Dn(i,t,r,s,e[5],12,1200080426),s=Dn(s,i,t,r,e[6],17,-1473231341),r=Dn(r,s,i,t,e[7],22,-45705983),t=Dn(t,r,s,i,e[8],7,1770035416),i=Dn(i,t,r,s,e[9],12,-1958414417),s=Dn(s,i,t,r,e[10],17,-42063),r=Dn(r,s,i,t,e[11],22,-1990404162),t=Dn(t,r,s,i,e[12],7,1804603682),i=Dn(i,t,r,s,e[13],12,-40341101),s=Dn(s,i,t,r,e[14],17,-1502002290),t=Mn(t,r=Dn(r,s,i,t,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Mn(i,t,r,s,e[6],9,-1069501632),s=Mn(s,i,t,r,e[11],14,643717713),r=Mn(r,s,i,t,e[0],20,-373897302),t=Mn(t,r,s,i,e[5],5,-701558691),i=Mn(i,t,r,s,e[10],9,38016083),s=Mn(s,i,t,r,e[15],14,-660478335),r=Mn(r,s,i,t,e[4],20,-405537848),t=Mn(t,r,s,i,e[9],5,568446438),i=Mn(i,t,r,s,e[14],9,-1019803690),s=Mn(s,i,t,r,e[3],14,-187363961),r=Mn(r,s,i,t,e[8],20,1163531501),t=Mn(t,r,s,i,e[13],5,-1444681467),i=Mn(i,t,r,s,e[2],9,-51403784),s=Mn(s,i,t,r,e[7],14,1735328473),t=On(t,r=Mn(r,s,i,t,e[12],20,-1926607734),s,i,e[5],4,-378558),i=On(i,t,r,s,e[8],11,-2022574463),s=On(s,i,t,r,e[11],16,1839030562),r=On(r,s,i,t,e[14],23,-35309556),t=On(t,r,s,i,e[1],4,-1530992060),i=On(i,t,r,s,e[4],11,1272893353),s=On(s,i,t,r,e[7],16,-155497632),r=On(r,s,i,t,e[10],23,-1094730640),t=On(t,r,s,i,e[13],4,681279174),i=On(i,t,r,s,e[0],11,-358537222),s=On(s,i,t,r,e[3],16,-722521979),r=On(r,s,i,t,e[6],23,76029189),t=On(t,r,s,i,e[9],4,-640364487),i=On(i,t,r,s,e[12],11,-421815835),s=On(s,i,t,r,e[15],16,530742520),t=En(t,r=On(r,s,i,t,e[2],23,-995338651),s,i,e[0],6,-198630844),i=En(i,t,r,s,e[7],10,1126891415),s=En(s,i,t,r,e[14],15,-1416354905),r=En(r,s,i,t,e[5],21,-57434055),t=En(t,r,s,i,e[12],6,1700485571),i=En(i,t,r,s,e[3],10,-1894986606),s=En(s,i,t,r,e[10],15,-1051523),r=En(r,s,i,t,e[1],21,-2054922799),t=En(t,r,s,i,e[8],6,1873313359),i=En(i,t,r,s,e[15],10,-30611744),s=En(s,i,t,r,e[6],15,-1560198380),r=En(r,s,i,t,e[13],21,1309151649),t=En(t,r,s,i,e[4],6,-145523070),i=En(i,t,r,s,e[11],10,-1120210379),s=En(s,i,t,r,e[2],15,718787259),r=En(r,s,i,t,e[9],21,-343485551),n[0]=Qs(t,n[0]),n[1]=Qs(r,n[1]),n[2]=Qs(s,n[2]),n[3]=Qs(i,n[3])}function uu(n,e,t,r,s,i){return e=Qs(Qs(e,n),Qs(r,i)),Qs(e<<s|e>>>32-s,t)}function Dn(n,e,t,r,s,i,a){return uu(e&t|~e&r,n,e,s,i,a)}function Mn(n,e,t,r,s,i,a){return uu(e&r|t&~r,n,e,s,i,a)}function On(n,e,t,r,s,i,a){return uu(e^t^r,n,e,s,i,a)}function En(n,e,t,r,s,i,a){return uu(t^(e|~r),n,e,s,i,a)}function Ng(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Ld(r,_5(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Ld(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,Ld(r,s),r}function _5(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Xo=st.atob.bind(st),ah=st.btoa.bind(st);var Op="0123456789abcdef".split("");function N5(n){for(var e="",t=0;t<4;t++)e+=Op[n>>8*t+4&15]+Op[n>>8*t&15];return e}function j5(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function oh(n){return Ng(n).map(j5).join("")}var k5=function(n){for(var e=0;e<n.length;e++)n[e]=N5(n[e]);return n.join("")}(Ng("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qs(n,e){if(k5){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lh(n,e){var t,r,s,i;if(n!==t){for(var a=(s=n,i=1+(256/n.length>>0),new Array(i+1).join(s)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+a.charCodeAt(c))%256,o[c]=o[u],o[u]=d}t=n,r=o}else o=r;var f=e.length,g=0,p=0,y="";for(c=0;c<f;c++)p=(p+(d=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=d,a=o[(o[g]+o[p])%256],y+=String.fromCharCode(e.charCodeAt(c)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ep={print:4,modify:8,copy:16,"annot-forms":32};function Ta(n,e,t,r){this.v=1,this.r=2;var s=192;n.forEach(function(o){if(Ep.perm!==void 0)throw new Error("Invalid permission: "+o);s+=Ep[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=oh(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=lh(this.encryptionKey,this.padding)}function Fa(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var s=n.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=n[r]}return e}function Tp(n){if(Dt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,s){if(s=s||!1,typeof t!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[r,!!s],i},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[t]){var a=e[t][i];try{a[0].apply(n,r)}catch(o){st.console&&Tt.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kc(n){if(!(this instanceof Kc))return new Kc(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function jg(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Pi(n,e,t,r,s){if(!(this instanceof Pi))return new Pi(n,e,t,r,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,jg.call(this,r,s)}function Ia(n,e,t,r,s){if(!(this instanceof Ia))return new Ia(n,e,t,r,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,jg.call(this,r,s)}function nt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,c=16,u="S",d=null;Dt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,s=n.format||s,i=n.compress||n.compressPdf||i,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=Tp;var y="1.3",v=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(x){y=x};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return w};var N=p.__private__.getPageFormat=function(x){return w[x]};s=s||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},M=P.COMPAT;function W(){this.saveGraphicsState(),U(new Xe(Pe,0,0,-Pe,0,Ps()*Pe).toString()+" cm"),this.setFontSize(this.getFontSize()/Pe),u="n",M=P.ADVANCED}function K(){this.restoreGraphicsState(),u="S",M=P.COMPAT}var le=p.__private__.combineFontStyleAndFontWeight=function(x,C){if(x=="bold"&&C=="normal"||x=="bold"&&C==400||x=="normal"&&C=="italic"||x=="bold"&&C=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return C&&(x=C==400||C==="normal"?x==="italic"?"italic":"normal":C!=700&&C!=="bold"||x!=="normal"?(C==700?"bold":C)+""+x:"bold"),x};p.advancedAPI=function(x){var C=M===P.COMPAT;return C&&W.call(this),typeof x!="function"||(x(this),C&&K.call(this)),this},p.compatAPI=function(x){var C=M===P.ADVANCED;return C&&K.call(this),typeof x!="function"||(x(this),C&&W.call(this)),this},p.isAdvancedAPI=function(){return M===P.ADVANCED};var X,j=function(x){if(M!==P.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=p.roundToPrecision=p.__private__.roundToPrecision=function(x,C){var J=e||C;if(isNaN(x)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(J).replace(/0+$/,"")};X=p.hpf=p.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return D(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return D(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return D(x,16)};var H=p.f2=p.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return D(x,2)},A=p.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return D(x,3)},S=p.scale=p.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return M===P.COMPAT?x*Pe:M===P.ADVANCED?x:void 0},q=function(x){return M===P.COMPAT?Ps()-x:M===P.ADVANCED?x:void 0},O=function(x){return S(q(x))};p.__private__.setPrecision=p.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var V,ee="00000000000000000000000000000000",B=p.__private__.getFileId=function(){return ee},Z=p.__private__.setFileId=function(x){return ee=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Cn=new Ta(d.userPermissions,d.userPassword,d.ownerPassword,ee)),ee};p.setFileId=function(x){return Z(x),this},p.getFileId=function(){return B()};var ne=p.__private__.convertDateToPDFDate=function(x){var C=x.getTimezoneOffset(),J=C<0?"+":"-",se=Math.floor(Math.abs(C/60)),ge=Math.abs(C%60),Se=[J,I(se),"'",I(ge),"'"].join("");return["D:",x.getFullYear(),I(x.getMonth()+1),I(x.getDate()),I(x.getHours()),I(x.getMinutes()),I(x.getSeconds()),Se].join("")},de=p.__private__.convertPDFDateToDate=function(x){var C=parseInt(x.substr(2,4),10),J=parseInt(x.substr(6,2),10)-1,se=parseInt(x.substr(8,2),10),ge=parseInt(x.substr(10,2),10),Se=parseInt(x.substr(12,2),10),Re=parseInt(x.substr(14,2),10);return new Date(C,J,se,ge,Se,Re,0)},xe=p.__private__.setCreationDate=function(x){var C;if(x===void 0&&(x=new Date),x instanceof Date)C=ne(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");C=x}return V=C},k=p.__private__.getCreationDate=function(x){var C=V;return x==="jsDate"&&(C=de(V)),C};p.setCreationDate=function(x){return xe(x),this},p.getCreationDate=function(x){return k(x)};var T,I=p.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Y=p.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},Q=0,fe=[],ce=[],ue=0,ke=[],we=[],Fe=!1,Le=ce,qe=function(){Q=0,ue=0,ce=[],fe=[],ke=[],is=dn(),_r=dn()};p.__private__.setCustomOutputDestination=function(x){Fe=!0,Le=x};var me=function(x){Fe||(Le=x)};p.__private__.resetCustomOutputDestination=function(){Fe=!1,Le=ce};var U=p.__private__.out=function(x){return x=x.toString(),ue+=x.length+1,Le.push(x),Le},$e=p.__private__.write=function(x){return U(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Ee=p.__private__.getArrayBuffer=function(x){for(var C=x.length,J=new ArrayBuffer(C),se=new Uint8Array(J);C--;)se[C]=x.charCodeAt(C);return J},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ne};var te=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(x){return te=M===P.ADVANCED?x/Pe:x,this};var Ae,G=p.__private__.getFontSize=p.getFontSize=function(){return M===P.COMPAT?te:te*Pe},ve=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(x){return ve=x,this},p.__private__.getR2L=p.getR2L=function(){return ve};var Be,oe=p.__private__.setZoomMode=function(x){var C=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Ae=x;else if(isNaN(x)){if(C.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Ae=x}else Ae=parseInt(x,10)};p.__private__.getZoomMode=function(){return Ae};var _e,ze=p.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Be=x};p.__private__.getPageMode=function(){return Be};var Ke=p.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');_e=x};p.__private__.getLayoutMode=function(){return _e},p.__private__.setDisplayMode=p.setDisplayMode=function(x,C,J){return oe(x),Ke(C),ze(J),this};var He={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(x){if(Object.keys(He).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return He[x]},p.__private__.getDocumentProperties=function(){return He},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(x){for(var C in He)He.hasOwnProperty(C)&&x[C]&&(He[C]=x[C]);return this},p.__private__.setDocumentProperty=function(x,C){if(Object.keys(He).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return He[x]=C};var Ge,Pe,ot,tt,Ft,ut={},wt={},ar=[],yt={},Rr={},Ut={},Ln={},Qn=null,Wt=0,it=[],_t=new Tp(p),Ce=n.hotfixes||[],Ue={},Ze={},Nt=[],Xe=function x(C,J,se,ge,Se,Re){if(!(this instanceof x))return new x(C,J,se,ge,Se,Re);isNaN(C)&&(C=1),isNaN(J)&&(J=0),isNaN(se)&&(se=0),isNaN(ge)&&(ge=1),isNaN(Se)&&(Se=0),isNaN(Re)&&(Re=0),this._matrix=[C,J,se,ge,Se,Re]};Object.defineProperty(Xe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(Xe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(Xe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(Xe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(Xe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(Xe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(Xe.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(Xe.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(Xe.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(Xe.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(Xe.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(Xe.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(Xe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xe.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(X).join(x)},Xe.prototype.multiply=function(x){var C=x.sx*this.sx+x.shy*this.shx,J=x.sx*this.shy+x.shy*this.sy,se=x.shx*this.sx+x.sy*this.shx,ge=x.shx*this.shy+x.sy*this.sy,Se=x.tx*this.sx+x.ty*this.shx+this.tx,Re=x.tx*this.shy+x.ty*this.sy+this.ty;return new Xe(C,J,se,ge,Se,Re)},Xe.prototype.decompose=function(){var x=this.sx,C=this.shy,J=this.shx,se=this.sy,ge=this.tx,Se=this.ty,Re=Math.sqrt(x*x+C*C),Ye=(x/=Re)*J+(C/=Re)*se;J-=x*Ye,se-=C*Ye;var et=Math.sqrt(J*J+se*se);return Ye/=et,x*(se/=et)<C*(J/=et)&&(x=-x,C=-C,Ye=-Ye,Re=-Re),{scale:new Xe(Re,0,0,et,0,0),translate:new Xe(1,0,0,1,ge,Se),rotate:new Xe(x,C,-C,x,0,0),skew:new Xe(1,0,Ye,1,0,0)}},Xe.prototype.toString=function(x){return this.join(" ")},Xe.prototype.inversed=function(){var x=this.sx,C=this.shy,J=this.shx,se=this.sy,ge=this.tx,Se=this.ty,Re=1/(x*se-C*J),Ye=se*Re,et=-C*Re,dt=-J*Re,lt=x*Re;return new Xe(Ye,et,dt,lt,-Ye*ge-dt*Se,-et*ge-lt*Se)},Xe.prototype.applyToPoint=function(x){var C=x.x*this.sx+x.y*this.shx+this.tx,J=x.x*this.shy+x.y*this.sy+this.ty;return new sa(C,J)},Xe.prototype.applyToRectangle=function(x){var C=this.applyToPoint(x),J=this.applyToPoint(new sa(x.x+x.w,x.y+x.h));return new uo(C.x,C.y,J.x-C.x,J.y-C.y)},Xe.prototype.clone=function(){var x=this.sx,C=this.shy,J=this.shx,se=this.sy,ge=this.tx,Se=this.ty;return new Xe(x,C,J,se,ge,Se)},p.Matrix=Xe;var Yt=p.matrixMult=function(x,C){return C.multiply(x)},or=new Xe(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=or;var Kt=function(x,C){if(!Rr[x]){var J=(C instanceof Pi?"Sh":"P")+(Object.keys(yt).length+1).toString(10);C.id=J,Rr[x]=J,yt[J]=C,_t.publish("addPattern",C)}};p.ShadingPattern=Pi,p.TilingPattern=Ia,p.addShadingPattern=function(x,C){return j("addShadingPattern()"),Kt(x,C),this},p.beginTilingPattern=function(x){j("beginTilingPattern()"),Tl(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},p.endTilingPattern=function(x,C){j("endTilingPattern()"),C.stream=we[T].join(`
`),Kt(x,C),_t.publish("endTilingPattern",C),Nt.pop().restore()};var en=p.__private__.newObject=function(){var x=dn();return Zn(x,!0),x},dn=p.__private__.newObjectDeferred=function(){return Q++,fe[Q]=function(){return ue},Q},Zn=function(x,C){return C=typeof C=="boolean"&&C,fe[x]=ue,C&&U(x+" 0 obj"),x},$i=p.__private__.newAdditionalObject=function(){var x={objId:dn(),content:""};return ke.push(x),x},is=dn(),_r=dn(),Nr=p.__private__.decodeColorString=function(x){var C=x.split(" ");if(C.length!==2||C[1]!=="g"&&C[1]!=="G")C.length===5&&(C[4]==="k"||C[4]==="K")&&(C=[(1-C[0])*(1-C[3]),(1-C[1])*(1-C[3]),(1-C[2])*(1-C[3]),"r"]);else{var J=parseFloat(C[0]);C=[J,J,J,"r"]}for(var se="#",ge=0;ge<3;ge++)se+=("0"+Math.floor(255*parseFloat(C[ge])).toString(16)).slice(-2);return se},jr=p.__private__.encodeColorString=function(x){var C;typeof x=="string"&&(x={ch1:x});var J=x.ch1,se=x.ch2,ge=x.ch3,Se=x.ch4,Re=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var Ye=new _g(J);if(Ye.ok)J=Ye.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var et=parseInt(J.substr(1),16);J=et>>16&255,se=et>>8&255,ge=255&et}if(se===void 0||Se===void 0&&J===se&&se===ge)if(typeof J=="string")C=J+" "+Re[0];else switch(x.precision){case 2:C=H(J/255)+" "+Re[0];break;case 3:default:C=A(J/255)+" "+Re[0]}else if(Se===void 0||Dt(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return C=["1.","1.","1.",Re[1]].join(" ");if(typeof J=="string")C=[J,se,ge,Re[1]].join(" ");else switch(x.precision){case 2:C=[H(J/255),H(se/255),H(ge/255),Re[1]].join(" ");break;default:case 3:C=[A(J/255),A(se/255),A(ge/255),Re[1]].join(" ")}}else if(typeof J=="string")C=[J,se,ge,Se,Re[2]].join(" ");else switch(x.precision){case 2:C=[H(J),H(se),H(ge),H(Se),Re[2]].join(" ");break;case 3:default:C=[A(J),A(se),A(ge),A(Se),Re[2]].join(" ")}return C},Br=p.__private__.getFilters=function(){return a},lr=p.__private__.putStream=function(x){var C=(x=x||{}).data||"",J=x.filters||Br(),se=x.alreadyAppliedFilters||[],ge=x.addLength1||!1,Se=C.length,Re=x.objectId,Ye=function(Pn){return Pn};if(d!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ye=Cn.encryptor(Re,0));var et={};J===!0&&(J=["FlateEncode"]);var dt=x.additionalKeyValues||[],lt=(et=nt.API.processDataByFilters!==void 0?nt.API.processDataByFilters(C,J):{data:C,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(et.data.length!==0&&(dt.push({key:"Length",value:et.data.length}),ge===!0&&dt.push({key:"Length1",value:Se})),lt.length!=0)if(lt.split("/").length-1==1)dt.push({key:"Filter",value:lt});else{dt.push({key:"Filter",value:"["+lt+"]"});for(var xt=0;xt<dt.length;xt+=1)if(dt[xt].key==="DecodeParms"){for(var $t=[],Jt=0;Jt<et.reverseChain.split("/").length-1;Jt+=1)$t.push("null");$t.push(dt[xt].value),dt[xt].value="["+$t.join(" ")+"]"}}U("<<");for(var hn=0;hn<dt.length;hn++)U("/"+dt[hn].key+" "+dt[hn].value);U(">>"),et.data.length!==0&&(U("stream"),U(Ye(et.data)),U("endstream"))},zr=p.__private__.putPage=function(x){var C=x.number,J=x.data,se=x.objId,ge=x.contentsObjId;Zn(se,!0),U("<</Type /Page"),U("/Parent "+x.rootDictionaryObjId+" 0 R"),U("/Resources "+x.resourceDictionaryObjId+" 0 R"),U("/MediaBox ["+parseFloat(X(x.mediaBox.bottomLeftX))+" "+parseFloat(X(x.mediaBox.bottomLeftY))+" "+X(x.mediaBox.topRightX)+" "+X(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&U("/CropBox ["+X(x.cropBox.bottomLeftX)+" "+X(x.cropBox.bottomLeftY)+" "+X(x.cropBox.topRightX)+" "+X(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&U("/BleedBox ["+X(x.bleedBox.bottomLeftX)+" "+X(x.bleedBox.bottomLeftY)+" "+X(x.bleedBox.topRightX)+" "+X(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&U("/TrimBox ["+X(x.trimBox.bottomLeftX)+" "+X(x.trimBox.bottomLeftY)+" "+X(x.trimBox.topRightX)+" "+X(x.trimBox.topRightY)+"]"),x.artBox!==null&&U("/ArtBox ["+X(x.artBox.bottomLeftX)+" "+X(x.artBox.bottomLeftY)+" "+X(x.artBox.topRightX)+" "+X(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&U("/UserUnit "+x.userUnit),_t.publish("putPage",{objId:se,pageContext:it[C],pageNumber:C,page:J}),U("/Contents "+ge+" 0 R"),U(">>"),U("endobj");var Se=J.join(`
`);return M===P.ADVANCED&&(Se+=`
Q`),Zn(ge,!0),lr({data:Se,filters:Br(),objectId:ge}),U("endobj"),se},oi=p.__private__.putPages=function(){var x,C,J=[];for(x=1;x<=Wt;x++)it[x].objId=dn(),it[x].contentsObjId=dn();for(x=1;x<=Wt;x++)J.push(zr({number:x,data:we[x],objId:it[x].objId,contentsObjId:it[x].contentsObjId,mediaBox:it[x].mediaBox,cropBox:it[x].cropBox,bleedBox:it[x].bleedBox,trimBox:it[x].trimBox,artBox:it[x].artBox,userUnit:it[x].userUnit,rootDictionaryObjId:is,resourceDictionaryObjId:_r}));Zn(is,!0),U("<</Type /Pages");var se="/Kids [";for(C=0;C<Wt;C++)se+=J[C]+" 0 R ";U(se+"]"),U("/Count "+Wt),U(">>"),U("endobj"),_t.publish("postPutPages")},Vi=function(x){_t.publish("putFont",{font:x,out:U,newObject:en,putStream:lr}),x.isAlreadyPutted!==!0&&(x.objectNumber=en(),U("<<"),U("/Type /Font"),U("/BaseFont /"+Fa(x.postScriptName)),U("/Subtype /Type1"),typeof x.encoding=="string"&&U("/Encoding /"+x.encoding),U("/FirstChar 32"),U("/LastChar 255"),U(">>"),U("endobj"))},Gi=function(){for(var x in ut)ut.hasOwnProperty(x)&&(f===!1||f===!0&&g.hasOwnProperty(x))&&Vi(ut[x])},Yi=function(x){x.objectNumber=en();var C=[];C.push({key:"Type",value:"/XObject"}),C.push({key:"Subtype",value:"/Form"}),C.push({key:"BBox",value:"["+[X(x.x),X(x.y),X(x.x+x.width),X(x.y+x.height)].join(" ")+"]"}),C.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var J=x.pages[1].join(`
`);lr({data:J,additionalKeyValues:C,objectId:x.objectNumber}),U("endobj")},Ki=function(){for(var x in Ue)Ue.hasOwnProperty(x)&&Yi(Ue[x])},xl=function(x,C){var J,se=[],ge=1/(C-1);for(J=0;J<1;J+=ge)se.push(J);if(se.push(1),x[0].offset!=0){var Se={offset:0,color:x[0].color};x.unshift(Se)}if(x[x.length-1].offset!=1){var Re={offset:1,color:x[x.length-1].color};x.push(Re)}for(var Ye="",et=0,dt=0;dt<se.length;dt++){for(J=se[dt];J>x[et+1].offset;)et++;var lt=x[et].offset,xt=(J-lt)/(x[et+1].offset-lt),$t=x[et].color,Jt=x[et+1].color;Ye+=Y(Math.round((1-xt)*$t[0]+xt*Jt[0]).toString(16))+Y(Math.round((1-xt)*$t[1]+xt*Jt[1]).toString(16))+Y(Math.round((1-xt)*$t[2]+xt*Jt[2]).toString(16))}return Ye.trim()},xu=function(x,C){C||(C=21);var J=en(),se=xl(x.colors,C),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+C+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lr({data:se,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),U("endobj"),x.objectNumber=en(),U("<< /ShadingType "+x.type),U("/ColorSpace /DeviceRGB");var Se="/Coords ["+X(parseFloat(x.coords[0]))+" "+X(parseFloat(x.coords[1]))+" ";x.type===2?Se+=X(parseFloat(x.coords[2]))+" "+X(parseFloat(x.coords[3])):Se+=X(parseFloat(x.coords[2]))+" "+X(parseFloat(x.coords[3]))+" "+X(parseFloat(x.coords[4]))+" "+X(parseFloat(x.coords[5])),U(Se+="]"),x.matrix&&U("/Matrix ["+x.matrix.toString()+"]"),U("/Function "+J+" 0 R"),U("/Extend [true true]"),U(">>"),U("endobj")},bu=function(x,C){var J=dn(),se=en();C.push({resourcesOid:J,objectOid:se}),x.objectNumber=se;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+x.boundingBox.map(X).join(" ")+"]"}),ge.push({key:"XStep",value:X(x.xStep)}),ge.push({key:"YStep",value:X(x.yStep)}),ge.push({key:"Resources",value:J+" 0 R"}),x.matrix&&ge.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),lr({data:x.stream,additionalKeyValues:ge,objectId:x.objectNumber}),U("endobj")},Ji=function(x){var C;for(C in yt)yt.hasOwnProperty(C)&&(yt[C]instanceof Pi?xu(yt[C]):yt[C]instanceof Ia&&bu(yt[C],x))},bl=function(x){for(var C in x.objectNumber=en(),U("<<"),x)switch(C){case"opacity":U("/ca "+H(x[C]));break;case"stroke-opacity":U("/CA "+H(x[C]))}U(">>"),U("endobj")},yu=function(){var x;for(x in Ut)Ut.hasOwnProperty(x)&&bl(Ut[x])},eo=function(){for(var x in U("/XObject <<"),Ue)Ue.hasOwnProperty(x)&&Ue[x].objectNumber>=0&&U("/"+x+" "+Ue[x].objectNumber+" 0 R");_t.publish("putXobjectDict"),U(">>")},vu=function(){Cn.oid=en(),U("<<"),U("/Filter /Standard"),U("/V "+Cn.v),U("/R "+Cn.r),U("/U <"+Cn.toHexString(Cn.U)+">"),U("/O <"+Cn.toHexString(Cn.O)+">"),U("/P "+Cn.P),U(">>"),U("endobj")},yl=function(){for(var x in U("/Font <<"),ut)ut.hasOwnProperty(x)&&(f===!1||f===!0&&g.hasOwnProperty(x))&&U("/"+x+" "+ut[x].objectNumber+" 0 R");U(">>")},wu=function(){if(Object.keys(yt).length>0){for(var x in U("/Shading <<"),yt)yt.hasOwnProperty(x)&&yt[x]instanceof Pi&&yt[x].objectNumber>=0&&U("/"+x+" "+yt[x].objectNumber+" 0 R");_t.publish("putShadingPatternDict"),U(">>")}},Xi=function(x){if(Object.keys(yt).length>0){for(var C in U("/Pattern <<"),yt)yt.hasOwnProperty(C)&&yt[C]instanceof p.TilingPattern&&yt[C].objectNumber>=0&&yt[C].objectNumber<x&&U("/"+C+" "+yt[C].objectNumber+" 0 R");_t.publish("putTilingPatternDict"),U(">>")}},_u=function(){if(Object.keys(Ut).length>0){var x;for(x in U("/ExtGState <<"),Ut)Ut.hasOwnProperty(x)&&Ut[x].objectNumber>=0&&U("/"+x+" "+Ut[x].objectNumber+" 0 R");_t.publish("putGStateDict"),U(">>")}},tn=function(x){Zn(x.resourcesOid,!0),U("<<"),U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),yl(),wu(),Xi(x.objectOid),_u(),eo(),U(">>"),U("endobj")},vl=function(){var x=[];Gi(),yu(),Ki(),Ji(x),_t.publish("putResources"),x.forEach(tn),tn({resourcesOid:_r,objectOid:Number.MAX_SAFE_INTEGER}),_t.publish("postPutResources")},wl=function(){_t.publish("putAdditionalObjects");for(var x=0;x<ke.length;x++){var C=ke[x];Zn(C.objId,!0),U(C.content),U("endobj")}_t.publish("postPutAdditionalObjects")},_l=function(x){wt[x.fontName]=wt[x.fontName]||{},wt[x.fontName][x.fontStyle]=x.id},to=function(x,C,J,se,ge){var Se={id:"F"+(Object.keys(ut).length+1).toString(10),postScriptName:x,fontName:C,fontStyle:J,encoding:se,isStandardFont:ge||!1,metadata:{}};return _t.publish("addFont",{font:Se,instance:this}),ut[Se.id]=Se,_l(Se),Se.id},Nu=function(x){for(var C=0,J=Ne.length;C<J;C++){var se=to.call(this,x[C][0],x[C][1],x[C][2],Ne[C][3],!0);f===!1&&(g[se]=!0);var ge=x[C][0].split("-");_l({id:se,fontName:ge[0],fontStyle:ge[1]||""})}_t.publish("addFonts",{fonts:ut,dictionary:wt})},kr=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(se){var C=se.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var J="Error in function "+C.split(`
`)[0].split("<")[0]+": "+se.message;if(!st.console)throw new Error(J);st.console.error(J,se),st.alert&&alert(J)}},x.foo.bar=x,x.foo},Qi=function(x,C){var J,se,ge,Se,Re,Ye,et,dt,lt;if(ge=(C=C||{}).sourceEncoding||"Unicode",Re=C.outputEncoding,(C.autoencode||Re)&&ut[Ge].metadata&&ut[Ge].metadata[ge]&&ut[Ge].metadata[ge].encoding&&(Se=ut[Ge].metadata[ge].encoding,!Re&&ut[Ge].encoding&&(Re=ut[Ge].encoding),!Re&&Se.codePages&&(Re=Se.codePages[0]),typeof Re=="string"&&(Re=Se[Re]),Re)){for(et=!1,Ye=[],J=0,se=x.length;J<se;J++)(dt=Re[x.charCodeAt(J)])?Ye.push(String.fromCharCode(dt)):Ye.push(x[J]),Ye[J].charCodeAt(0)>>8&&(et=!0);x=Ye.join("")}for(J=x.length;et===void 0&&J!==0;)x.charCodeAt(J-1)>>8&&(et=!0),J--;if(!et)return x;for(Ye=C.noBOM?[]:[254,255],J=0,se=x.length;J<se;J++){if((lt=(dt=x.charCodeAt(J))>>8)>>8)throw new Error("Character at position "+J+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ye.push(lt),Ye.push(dt-(lt<<8))}return String.fromCharCode.apply(void 0,Ye)},Un=p.__private__.pdfEscape=p.pdfEscape=function(x,C){return Qi(x,C).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},no=p.__private__.beginPage=function(x){we[++Wt]=[],it[Wt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},jl(Wt),me(we[T])},Nl=function(x,C){var J,se,ge;switch(t=C||t,typeof x=="string"&&(J=N(x.toLowerCase()),Array.isArray(J)&&(se=J[0],ge=J[1])),Array.isArray(x)&&(se=x[0]*Pe,ge=x[1]*Pe),isNaN(se)&&(se=s[0],ge=s[1]),(se>14400||ge>14400)&&(Tt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),ge=Math.min(14400,ge)),s=[se,ge],t.substr(0,1)){case"l":ge>se&&(s=[ge,se]);break;case"p":se>ge&&(s=[ge,se])}no(s),Pl(ao),U(Sr),lo!==0&&U(lo+" J"),co!==0&&U(co+" j"),_t.publish("addPage",{pageNumber:Wt})},ju=function(x){x>0&&x<=Wt&&(we.splice(x,1),it.splice(x,1),Wt--,T>Wt&&(T=Wt),this.setPage(T))},jl=function(x){x>0&&x<=Wt&&(T=x)},ku=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return we.length-1},kl=function(x,C,J){var se,ge=void 0;return J=J||{},x=x!==void 0?x:ut[Ge].fontName,C=C!==void 0?C:ut[Ge].fontStyle,se=x.toLowerCase(),wt[se]!==void 0&&wt[se][C]!==void 0?ge=wt[se][C]:wt[x]!==void 0&&wt[x][C]!==void 0?ge=wt[x][C]:J.disableWarning===!1&&Tt.warn("Unable to look up font label for font '"+x+"', '"+C+"'. Refer to getFontList() for available fonts."),ge||J.noFallback||(ge=wt.times[C])==null&&(ge=wt.times.normal),ge},Su=p.__private__.putInfo=function(){var x=en(),C=function(se){return se};for(var J in d!==null&&(C=Cn.encryptor(x,0)),U("<<"),U("/Producer ("+Un(C("jsPDF "+nt.version))+")"),He)He.hasOwnProperty(J)&&He[J]&&U("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+Un(C(He[J]))+")");U("/CreationDate ("+Un(C(V))+")"),U(">>"),U("endobj")},ro=p.__private__.putCatalog=function(x){var C=(x=x||{}).rootDictionaryObjId||is;switch(en(),U("<<"),U("/Type /Catalog"),U("/Pages "+C+" 0 R"),Ae||(Ae="fullwidth"),Ae){case"fullwidth":U("/OpenAction [3 0 R /FitH null]");break;case"fullheight":U("/OpenAction [3 0 R /FitV null]");break;case"fullpage":U("/OpenAction [3 0 R /Fit]");break;case"original":U("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+Ae;J.substr(J.length-1)==="%"&&(Ae=parseInt(Ae)/100),typeof Ae=="number"&&U("/OpenAction [3 0 R /XYZ null null "+H(Ae)+"]")}switch(_e||(_e="continuous"),_e){case"continuous":U("/PageLayout /OneColumn");break;case"single":U("/PageLayout /SinglePage");break;case"two":case"twoleft":U("/PageLayout /TwoColumnLeft");break;case"tworight":U("/PageLayout /TwoColumnRight")}Be&&U("/PageMode /"+Be),_t.publish("putCatalog"),U(">>"),U("endobj")},Au=p.__private__.putTrailer=function(){U("trailer"),U("<<"),U("/Size "+(Q+1)),U("/Root "+Q+" 0 R"),U("/Info "+(Q-1)+" 0 R"),d!==null&&U("/Encrypt "+Cn.oid+" 0 R"),U("/ID [ <"+ee+"> <"+ee+"> ]"),U(">>")},Lu=p.__private__.putHeader=function(){U("%PDF-"+y),U("%ºß¬à")},Cu=p.__private__.putXRef=function(){var x="0000000000";U("xref"),U("0 "+(Q+1)),U("0000000000 65535 f ");for(var C=1;C<=Q;C++)typeof fe[C]=="function"?U((x+fe[C]()).slice(-10)+" 00000 n "):fe[C]!==void 0?U((x+fe[C]).slice(-10)+" 00000 n "):U("0000000000 00000 n ")},as=p.__private__.buildDocument=function(){qe(),me(ce),_t.publish("buildDocument"),Lu(),oi(),wl(),vl(),d!==null&&vu(),Su(),ro();var x=ue;return Cu(),Au(),U("startxref"),U(""+x),U("%%EOF"),me(we[T]),ce.join(`
`)},Zi=p.__private__.getBlob=function(x){return new Blob([Ee(x)],{type:"application/pdf"})},ea=p.output=p.__private__.output=kr(function(x,C){switch(typeof(C=C||{})=="string"?C={filename:C}:C.filename=C.filename||"generated.pdf",x){case void 0:return as();case"save":p.save(C.filename);break;case"arraybuffer":return Ee(as());case"blob":return Zi(as());case"bloburi":case"bloburl":if(st.URL!==void 0&&typeof st.URL.createObjectURL=="function")return st.URL&&st.URL.createObjectURL(Zi(as()))||void 0;Tt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",se=as();try{J=ah(se)}catch{J=ah(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+C.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';C.pdfObjectUrl&&(ge=C.pdfObjectUrl,Se="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(C)+");<\/script></body></html>",Ye=st.open();return Ye!==null&&Ye.document.write(Re),Ye}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(C.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+C.filename+'" width="500px" height="400px" /></body></html>',dt=st.open();if(dt!==null){dt.document.write(et);var lt=this;dt.document.documentElement.querySelector("#pdfViewer").onload=function(){dt.document.title=C.filename,dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(lt.output("bloburl"))}}return dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(st)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",C)+'"></iframe></body></html>',$t=st.open();if($t!==null&&($t.document.write(xt),$t.document.title=C.filename),$t||typeof safari>"u")return $t;break;case"datauri":case"dataurl":return st.document.location.href=this.output("datauristring",C);default:return null}}),Sl=function(x){return Array.isArray(Ce)===!0&&Ce.indexOf(x)>-1};switch(r){case"pt":Pe=1;break;case"mm":Pe=72/25.4;break;case"cm":Pe=72/2.54;break;case"in":Pe=72;break;case"px":Pe=Sl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pe=12;break;case"ex":Pe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Pe=r}var Cn=null;xe(),Z();var Pu=function(x){return d!==null?Cn.encryptor(x,0):function(C){return C}},Al=p.__private__.getPageInfo=p.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[x].objId,pageNumber:x,pageContext:it[x]}},at=p.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var C in it)if(it[C].objId===x)break;return Al(C)},Du=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:it[T].objId,pageNumber:T,pageContext:it[T]}};p.addPage=function(){return Nl.apply(this,arguments),this},p.setPage=function(){return jl.apply(this,arguments),me.call(this,we[T]),this},p.insertPage=function(x){return this.addPage(),this.movePage(T,x),this},p.movePage=function(x,C){var J,se;if(x>C){J=we[x],se=it[x];for(var ge=x;ge>C;ge--)we[ge]=we[ge-1],it[ge]=it[ge-1];we[C]=J,it[C]=se,this.setPage(C)}else if(x<C){J=we[x],se=it[x];for(var Se=x;Se<C;Se++)we[Se]=we[Se+1],it[Se]=it[Se+1];we[C]=J,it[C]=se,this.setPage(C)}return this},p.deletePage=function(){return ju.apply(this,arguments),this},p.__private__.text=p.text=function(x,C,J,se,ge){var Se,Re,Ye,et,dt,lt,xt,$t,Jt,hn=(se=se||{}).scope||this;if(typeof x=="number"&&typeof C=="number"&&(typeof J=="string"||Array.isArray(J))){var Pn=J;J=C,C=x,x=Pn}if(arguments[3]instanceof Xe?(j("The transform parameter of text() with a Matrix value"),Jt=ge):(Ye=arguments[4],et=arguments[5],Dt(xt=arguments[3])==="object"&&xt!==null||(typeof Ye=="string"&&(et=Ye,Ye=null),typeof xt=="string"&&(et=xt,xt=null),typeof xt=="number"&&(Ye=xt,xt=null),se={flags:xt,angle:Ye,align:et})),isNaN(C)||isNaN(J)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return hn;var xn="",Ar=!1,er=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:ci,Ur=hn.internal.scaleFactor;function Fl(It){return It=It.split("	").join(Array(se.TabLen||9).join(" ")),Un(It,xt)}function mo(It){for(var Rt,rn=It.concat(),mn=[],ds=rn.length;ds--;)typeof(Rt=rn.shift())=="string"?mn.push(Rt):Array.isArray(It)&&(Rt.length===1||Rt[1]===void 0&&Rt[2]===void 0)?mn.push(Rt[0]):mn.push([Rt[0],Rt[1],Rt[2]]);return mn}function go(It,Rt){var rn;if(typeof It=="string")rn=Rt(It)[0];else if(Array.isArray(It)){for(var mn,ds,jo=It.concat(),ma=[],ql=jo.length;ql--;)typeof(mn=jo.shift())=="string"?ma.push(Rt(mn)[0]):Array.isArray(mn)&&typeof mn[0]=="string"&&(ds=Rt(mn[0],mn[1],mn[2]),ma.push([ds[0],ds[1],ds[2]]));rn=ma}return rn}var aa=!1,xo=!0;if(typeof x=="string")aa=!0;else if(Array.isArray(x)){var bo=x.concat();Re=[];for(var oa,Sn=bo.length;Sn--;)(typeof(oa=bo.shift())!="string"||Array.isArray(oa)&&typeof oa[0]!="string")&&(xo=!1);aa=xo}if(aa===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var la=te/hn.internal.scaleFactor,ca=la*(er-1);switch(se.baseline){case"bottom":J-=ca;break;case"top":J+=la-ca;break;case"hanging":J+=la-2*ca;break;case"middle":J+=la/2-ca}if((lt=se.maxWidth||0)>0&&(typeof x=="string"?x=hn.splitTextToSize(x,lt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(It,Rt){return It.concat(hn.splitTextToSize(Rt,lt))},[]))),Se={text:x,x:C,y:J,options:se,mutex:{pdfEscape:Un,activeFontKey:Ge,fonts:ut,activeFontSize:te}},_t.publish("preProcessText",Se),x=Se.text,Ye=(se=Se.options).angle,!(Jt instanceof Xe)&&Ye&&typeof Ye=="number"){Ye*=Math.PI/180,se.rotationDirection===0&&(Ye=-Ye),M===P.ADVANCED&&(Ye=-Ye);var ua=Math.cos(Ye),yo=Math.sin(Ye);Jt=new Xe(ua,yo,-yo,ua,0,0)}else Ye&&Ye instanceof Xe&&(Jt=Ye);M!==P.ADVANCED||Jt||(Jt=or),(dt=se.charSpace||ra)!==void 0&&(xn+=X(S(dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),($t=se.horizontalScale)!==void 0&&(xn+=X(100*$t)+` Tz
`),se.lang;var Wn=-1,qu=se.renderingMode!==void 0?se.renderingMode:se.stroke,vo=hn.internal.getCurrentPageInfo().pageContext;switch(qu){case 0:case!1:case"fill":Wn=0;break;case 1:case!0:case"stroke":Wn=1;break;case 2:case"fillThenStroke":Wn=2;break;case 3:case"invisible":Wn=3;break;case 4:case"fillAndAddForClipping":Wn=4;break;case 5:case"strokeAndAddPathForClipping":Wn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wn=6;break;case 7:case"addToPathForClipping":Wn=7}var Il=vo.usedRenderingMode!==void 0?vo.usedRenderingMode:-1;Wn!==-1?xn+=Wn+` Tr
`:Il!==-1&&(xn+=`0 Tr
`),Wn!==-1&&(vo.usedRenderingMode=Wn),et=se.align||"left";var cr,da=te*er,Rl=hn.internal.pageSize.getWidth(),Bl=ut[Ge];dt=se.charSpace||ra,lt=se.maxWidth||0,xt=Object.assign({autoencode:!0,noBOM:!0},se.flags);var Ds=[],hi=function(It){return hn.getStringUnitWidth(It,{font:Bl,charSpace:dt,fontSize:te,doKerning:!1})*te/Ur};if(Object.prototype.toString.call(x)==="[object Array]"){var $n;Re=mo(x),et!=="left"&&(cr=Re.map(hi));var Bn,Ms=0;if(et==="right"){C-=cr[0],x=[],Sn=Re.length;for(var ls=0;ls<Sn;ls++)ls===0?(Bn=Hr(C),$n=os(J)):(Bn=S(Ms-cr[ls]),$n=-da),x.push([Re[ls],Bn,$n]),Ms=cr[ls]}else if(et==="center"){C-=cr[0]/2,x=[],Sn=Re.length;for(var cs=0;cs<Sn;cs++)cs===0?(Bn=Hr(C),$n=os(J)):(Bn=S((Ms-cr[cs])/2),$n=-da),x.push([Re[cs],Bn,$n]),Ms=cr[cs]}else if(et==="left"){x=[],Sn=Re.length;for(var ha=0;ha<Sn;ha++)x.push(Re[ha])}else if(et==="justify"&&Bl.encoding==="Identity-H"){x=[],Sn=Re.length,lt=lt!==0?lt:Rl;for(var us=0,nn=0;nn<Sn;nn++)if($n=nn===0?os(J):-da,Bn=nn===0?Hr(C):us,nn<Sn-1){var wo=S((lt-cr[nn])/(Re[nn].split(" ").length-1)),zn=Re[nn].split(" ");x.push([zn[0]+" ",Bn,$n]),us=0;for(var ur=1;ur<zn.length;ur++){var fa=(hi(zn[ur-1]+" "+zn[ur])-hi(zn[ur]))*Ur+wo;ur==zn.length-1?x.push([zn[ur],fa,0]):x.push([zn[ur]+" ",fa,0]),us-=fa}}else x.push([Re[nn],Bn,$n]);x.push(["",us,0])}else{if(et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Sn=Re.length,lt=lt!==0?lt:Rl,nn=0;nn<Sn;nn++)$n=nn===0?os(J):-da,Bn=nn===0?Hr(C):0,nn<Sn-1?Ds.push(X(S((lt-cr[nn])/(Re[nn].split(" ").length-1)))):Ds.push(0),x.push([Re[nn],Bn,$n])}}var zl=typeof se.R2L=="boolean"?se.R2L:ve;zl===!0&&(x=go(x,function(It,Rt,rn){return[It.split("").reverse().join(""),Rt,rn]})),Se={text:x,x:C,y:J,options:se,mutex:{pdfEscape:Un,activeFontKey:Ge,fonts:ut,activeFontSize:te}},_t.publish("postProcessText",Se),x=Se.text,Ar=Se.mutex.isHex||!1;var _o=ut[Ge].encoding;_o!=="WinAnsiEncoding"&&_o!=="StandardEncoding"||(x=go(x,function(It,Rt,rn){return[Fl(It),Rt,rn]})),Re=mo(x),x=[];for(var fi,pi,Os,mi=0,pa=1,gi=Array.isArray(Re[0])?pa:mi,Es="",No=function(It,Rt,rn){var mn="";return rn instanceof Xe?(rn=typeof se.angle=="number"?Yt(rn,new Xe(1,0,0,1,It,Rt)):Yt(new Xe(1,0,0,1,It,Rt),rn),M===P.ADVANCED&&(rn=Yt(new Xe(1,0,0,-1,0,0),rn)),mn=rn.join(" ")+` Tm
`):mn=X(It)+" "+X(Rt)+` Td
`,mn},dr=0;dr<Re.length;dr++){switch(Es="",gi){case pa:Os=(Ar?"<":"(")+Re[dr][0]+(Ar?">":")"),fi=parseFloat(Re[dr][1]),pi=parseFloat(Re[dr][2]);break;case mi:Os=(Ar?"<":"(")+Re[dr]+(Ar?">":")"),fi=Hr(C),pi=os(J)}Ds!==void 0&&Ds[dr]!==void 0&&(Es=Ds[dr]+` Tw
`),dr===0?x.push(Es+No(fi,pi,Jt)+Os):gi===mi?x.push(Es+Os):gi===pa&&x.push(Es+No(fi,pi,Jt)+Os)}x=gi===mi?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var hr=`BT
/`;return hr+=Ge+" "+te+` Tf
`,hr+=X(te*er)+` TL
`,hr+=ui+`
`,hr+=xn,hr+=x,U(hr+="ET"),g[Ge]=!0,hn};var Mu=p.__private__.clip=p.clip=function(x){return U(x==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Mu("evenodd")},p.__private__.discardPath=p.discardPath=function(){return U("n"),this};var qr=p.__private__.isValidStyle=function(x){var C=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(C=!0),C};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(x){return qr(x)&&(u=x),this};var Ll=p.__private__.getStyle=p.getStyle=function(x){var C=u;switch(x){case"D":case"S":C="S";break;case"F":C="f";break;case"FD":case"DF":C="B";break;case"f":case"f*":case"B":case"B*":C=x}return C},Cl=p.close=function(){return U("h"),this};p.stroke=function(){return U("S"),this},p.fill=function(x){return ta("f",x),this},p.fillEvenOdd=function(x){return ta("f*",x),this},p.fillStroke=function(x){return ta("B",x),this},p.fillStrokeEvenOdd=function(x){return ta("B*",x),this};var ta=function(x,C){Dt(C)==="object"?Eu(C,x):U(x)},so=function(x){x===null||M===P.ADVANCED&&x===void 0||(x=Ll(x),U(x))};function Ou(x,C,J,se,ge){var Se=new Ia(C||this.boundingBox,J||this.xStep,se||this.yStep,this.gState,ge||this.matrix);Se.stream=this.stream;var Re=x+"$$"+this.cloneIndex+++"$$";return Kt(Re,Se),Se}var Eu=function(x,C){var J=Rr[x.key],se=yt[J];if(se instanceof Pi)U("q"),U(Tu(C)),se.gState&&p.setGState(se.gState),U(x.matrix.toString()+" cm"),U("/"+J+" sh"),U("Q");else if(se instanceof Ia){var ge=new Xe(1,0,0,-1,0,Ps());x.matrix&&(ge=ge.multiply(x.matrix||or),J=Ou.call(se,x.key,x.boundingBox,x.xStep,x.yStep,ge).id),U("q"),U("/Pattern cs"),U("/"+J+" scn"),se.gState&&p.setGState(se.gState),U(C),U("Q")}},Tu=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},io=p.moveTo=function(x,C){return U(X(S(x))+" "+X(O(C))+" m"),this},li=p.lineTo=function(x,C){return U(X(S(x))+" "+X(O(C))+" l"),this},Ls=p.curveTo=function(x,C,J,se,ge,Se){return U([X(S(x)),X(O(C)),X(S(J)),X(O(se)),X(S(ge)),X(O(Se)),"c"].join(" ")),this};p.__private__.line=p.line=function(x,C,J,se,ge){if(isNaN(x)||isNaN(C)||isNaN(J)||isNaN(se)||!qr(ge))throw new Error("Invalid arguments passed to jsPDF.line");return M===P.COMPAT?this.lines([[J-x,se-C]],x,C,[1,1],ge||"S"):this.lines([[J-x,se-C]],x,C,[1,1]).stroke()},p.__private__.lines=p.lines=function(x,C,J,se,ge,Se){var Re,Ye,et,dt,lt,xt,$t,Jt,hn,Pn,xn,Ar;if(typeof x=="number"&&(Ar=J,J=C,C=x,x=Ar),se=se||[1,1],Se=Se||!1,isNaN(C)||isNaN(J)||!Array.isArray(x)||!Array.isArray(se)||!qr(ge)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(io(C,J),Re=se[0],Ye=se[1],dt=x.length,Pn=C,xn=J,et=0;et<dt;et++)(lt=x[et]).length===2?(Pn=lt[0]*Re+Pn,xn=lt[1]*Ye+xn,li(Pn,xn)):(xt=lt[0]*Re+Pn,$t=lt[1]*Ye+xn,Jt=lt[2]*Re+Pn,hn=lt[3]*Ye+xn,Pn=lt[4]*Re+Pn,xn=lt[5]*Ye+xn,Ls(xt,$t,Jt,hn,Pn,xn));return Se&&Cl(),so(ge),this},p.path=function(x){for(var C=0;C<x.length;C++){var J=x[C],se=J.c;switch(J.op){case"m":io(se[0],se[1]);break;case"l":li(se[0],se[1]);break;case"c":Ls.apply(this,se);break;case"h":Cl()}}return this},p.__private__.rect=p.rect=function(x,C,J,se,ge){if(isNaN(x)||isNaN(C)||isNaN(J)||isNaN(se)||!qr(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return M===P.COMPAT&&(se=-se),U([X(S(x)),X(O(C)),X(S(J)),X(S(se)),"re"].join(" ")),so(ge),this},p.__private__.triangle=p.triangle=function(x,C,J,se,ge,Se,Re){if(isNaN(x)||isNaN(C)||isNaN(J)||isNaN(se)||isNaN(ge)||isNaN(Se)||!qr(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-x,se-C],[ge-J,Se-se],[x-ge,C-Se]],x,C,[1,1],Re,!0),this},p.__private__.roundedRect=p.roundedRect=function(x,C,J,se,ge,Se,Re){if(isNaN(x)||isNaN(C)||isNaN(J)||isNaN(se)||isNaN(ge)||isNaN(Se)||!qr(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ye=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*J),Se=Math.min(Se,.5*se),this.lines([[J-2*ge,0],[ge*Ye,0,ge,Se-Se*Ye,ge,Se],[0,se-2*Se],[0,Se*Ye,-ge*Ye,Se,-ge,Se],[2*ge-J,0],[-ge*Ye,0,-ge,-Se*Ye,-ge,-Se],[0,2*Se-se],[0,-Se*Ye,ge*Ye,-Se,ge,-Se]],x+ge,C,[1,1],Re,!0),this},p.__private__.ellipse=p.ellipse=function(x,C,J,se,ge){if(isNaN(x)||isNaN(C)||isNaN(J)||isNaN(se)||!qr(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*J,Re=4/3*(Math.SQRT2-1)*se;return io(x+J,C),Ls(x+J,C-Re,x+Se,C-se,x,C-se),Ls(x-Se,C-se,x-J,C-Re,x-J,C),Ls(x-J,C+Re,x-Se,C+se,x,C+se),Ls(x+Se,C+se,x+J,C+Re,x+J,C),so(ge),this},p.__private__.circle=p.circle=function(x,C,J,se){if(isNaN(x)||isNaN(C)||isNaN(J)||!qr(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,C,J,J,se)},p.setFont=function(x,C,J){return J&&(C=le(C,J)),Ge=kl(x,C,{disableWarning:!1}),this};var Fu=p.__private__.getFont=p.getFont=function(){return ut[kl.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var x,C,J={};for(x in wt)if(wt.hasOwnProperty(x))for(C in J[x]=[],wt[x])wt[x].hasOwnProperty(C)&&J[x].push(C);return J},p.addFont=function(x,C,J,se,ge){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(J=le(J,se)),ge=ge||"Identity-H",to.call(this,x,C,J,ge)};var ci,ao=n.lineWidth||.200025,na=p.__private__.getLineWidth=p.getLineWidth=function(){return ao},Pl=p.__private__.setLineWidth=p.setLineWidth=function(x){return ao=x,U(X(S(x))+" w"),this};p.__private__.setLineDash=nt.API.setLineDash=nt.API.setLineDashPattern=function(x,C){if(x=x||[],C=C||0,isNaN(C)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(J){return X(S(J))}).join(" "),C=X(S(C)),U("["+x+"] "+C+" d"),this};var Dl=p.__private__.getLineHeight=p.getLineHeight=function(){return te*ci};p.__private__.getLineHeight=p.getLineHeight=function(){return te*ci};var Ml=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(ci=x),this},Ol=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ci};Ml(n.lineHeight);var Hr=p.__private__.getHorizontalCoordinate=function(x){return S(x)},os=p.__private__.getVerticalCoordinate=function(x){return M===P.ADVANCED?x:it[T].mediaBox.topRightY-it[T].mediaBox.bottomLeftY-S(x)},Iu=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(x){return X(Hr(x))},Cs=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(x){return X(os(x))},Sr=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Nr(Sr)},p.__private__.setStrokeColor=p.setDrawColor=function(x,C,J,se){return Sr=jr({ch1:x,ch2:C,ch3:J,ch4:se,pdfColorType:"draw",precision:2}),U(Sr),this};var oo=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Nr(oo)},p.__private__.setFillColor=p.setFillColor=function(x,C,J,se){return oo=jr({ch1:x,ch2:C,ch3:J,ch4:se,pdfColorType:"fill",precision:2}),U(oo),this};var ui=n.textColor||"0 g",Ru=p.__private__.getTextColor=p.getTextColor=function(){return Nr(ui)};p.__private__.setTextColor=p.setTextColor=function(x,C,J,se){return ui=jr({ch1:x,ch2:C,ch3:J,ch4:se,pdfColorType:"text",precision:3}),this};var ra=n.charSpace,Bu=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ra||0)};p.__private__.setCharSpace=p.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ra=x,this};var lo=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(x){var C=p.CapJoinStyles[x];if(C===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lo=C,U(C+" J"),this};var co=0;p.__private__.setLineJoin=p.setLineJoin=function(x){var C=p.CapJoinStyles[x];if(C===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return co=C,U(C+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return U(X(S(x))+" M"),this},p.GState=Kc,p.setGState=function(x){(x=typeof x=="string"?Ut[Ln[x]]:El(null,x)).equals(Qn)||(U("/"+x.id+" gs"),Qn=x)};var El=function(x,C){if(!x||!Ln[x]){var J=!1;for(var se in Ut)if(Ut.hasOwnProperty(se)&&Ut[se].equals(C)){J=!0;break}if(J)C=Ut[se];else{var ge="GS"+(Object.keys(Ut).length+1).toString(10);Ut[ge]=C,C.id=ge}return x&&(Ln[x]=C.id),_t.publish("addGState",C),C}};p.addGState=function(x,C){return El(x,C),this},p.saveGraphicsState=function(){return U("q"),ar.push({key:Ge,size:te,color:ui}),this},p.restoreGraphicsState=function(){U("Q");var x=ar.pop();return Ge=x.key,te=x.size,ui=x.color,Qn=null,this},p.setCurrentTransformationMatrix=function(x){return U(x.toString()+" cm"),this},p.comment=function(x){return U("#"+x),this};var sa=function(x,C){var J=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(Se){isNaN(Se)||(J=parseFloat(Se))}});var se=C||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(Se){isNaN(Se)||(se=parseFloat(Se))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Se){ge=Se.toString()}}),this},uo=function(x,C,J,se){sa.call(this,x,C),this.type="rect";var ge=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Re){isNaN(Re)||(ge=parseFloat(Re))}});var Se=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(Re){isNaN(Re)||(Se=parseFloat(Re))}}),this},ho=function(){this.page=Wt,this.currentPage=T,this.pages=we.slice(0),this.pagesContext=it.slice(0),this.x=ot,this.y=tt,this.matrix=Ft,this.width=di(T),this.height=Ps(T),this.outputDestination=Le,this.id="",this.objectNumber=-1};ho.prototype.restore=function(){Wt=this.page,T=this.currentPage,it=this.pagesContext,we=this.pages,ot=this.x,tt=this.y,Ft=this.matrix,fo(T,this.width),po(T,this.height),Le=this.outputDestination};var Tl=function(x,C,J,se,ge){Nt.push(new ho),Wt=T=0,we=[],ot=x,tt=C,Ft=ge,no([J,se])},zu=function(x){if(Ze[x])Nt.pop().restore();else{var C=new ho,J="Xo"+(Object.keys(Ue).length+1).toString(10);C.id=J,Ze[x]=J,Ue[J]=C,_t.publish("addFormObject",C),Nt.pop().restore()}};for(var ia in p.beginFormObject=function(x,C,J,se,ge){return Tl(x,C,J,se,ge),this},p.endFormObject=function(x){return zu(x),this},p.doFormObject=function(x,C){var J=Ue[Ze[x]];return U("q"),U(C.toString()+" cm"),U("/"+J.id+" Do"),U("Q"),this},p.getFormObject=function(x){var C=Ue[Ze[x]];return{x:C.x,y:C.y,width:C.width,height:C.height,matrix:C.matrix}},p.save=function(x,C){return x=x||"generated.pdf",(C=C||{}).returnPromise=C.returnPromise||!1,C.returnPromise===!1?(Si(Zi(as()),x),typeof Si.unload=="function"&&st.setTimeout&&setTimeout(Si.unload,911),this):new Promise(function(J,se){try{var ge=Si(Zi(as()),x);typeof Si.unload=="function"&&st.setTimeout&&setTimeout(Si.unload,911),J(ge)}catch(Se){se(Se.message)}})},nt.API)nt.API.hasOwnProperty(ia)&&(ia==="events"&&nt.API.events.length?function(x,C){var J,se,ge;for(ge=C.length-1;ge!==-1;ge--)J=C[ge][0],se=C[ge][1],x.subscribe.apply(x,[J].concat(typeof se=="function"?[se]:se))}(_t,nt.API.events):p[ia]=nt.API[ia]);var di=p.getPageWidth=function(x){return(it[x=x||T].mediaBox.topRightX-it[x].mediaBox.bottomLeftX)/Pe},fo=p.setPageWidth=function(x,C){it[x].mediaBox.topRightX=C*Pe+it[x].mediaBox.bottomLeftX},Ps=p.getPageHeight=function(x){return(it[x=x||T].mediaBox.topRightY-it[x].mediaBox.bottomLeftY)/Pe},po=p.setPageHeight=function(x,C){it[x].mediaBox.topRightY=C*Pe+it[x].mediaBox.bottomLeftY};return p.internal={pdfEscape:Un,getStyle:Ll,getFont:Fu,getFontSize:G,getCharSpace:Bu,getTextColor:Ru,getLineHeight:Dl,getLineHeightFactor:Ol,getLineWidth:na,write:$e,getHorizontalCoordinate:Hr,getVerticalCoordinate:os,getCoordinateString:Iu,getVerticalCoordinateString:Cs,collections:{},newObject:en,newAdditionalObject:$i,newObjectDeferred:dn,newObjectDeferredBegin:Zn,getFilters:Br,putStream:lr,events:_t,scaleFactor:Pe,pageSize:{getWidth:function(){return di(T)},setWidth:function(x){fo(T,x)},getHeight:function(){return Ps(T)},setHeight:function(x){po(T,x)}},encryptionOptions:d,encryption:Cn,getEncryptor:Pu,output:ea,getNumberOfPages:ku,pages:we,out:U,f2:H,f3:A,getPageInfo:Al,getPageInfoByObjId:at,getCurrentPageInfo:Du,getPDFVersion:v,Point:sa,Rectangle:uo,Matrix:Xe,hasHotfix:Sl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return di(T)},set:function(x){fo(T,x)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ps(T)},set:function(x){po(T,x)},enumerable:!0,configurable:!0}),Nu.call(p,Ne),Ge="F1",Nl(s,t),_t.publish("initialized"),p}Ta.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ta.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ta.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ta.prototype.processOwnerPassword=function(n,e){return lh(oh(e).substr(0,5),n)},Ta.prototype.encryptor=function(n,e){var t=oh(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return lh(t,r)}},Kc.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Dt(n)!==Dt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},nt.API={events:[]},nt.version="3.0.1";var Qt=nt.API,Uh=1,Hi=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pa=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ct=function(n){return n.toFixed(2)},$s=function(n){return n.toFixed(5)};Qt.__acroform__={};var Xn=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Fp=function(n){return n*Uh},Yr=function(n){var e=new Sg,t=Qe.internal.getHeight(n)||0,r=Qe.internal.getWidth(n)||0;return e.BBox=[0,0,Number(ct(r)),Number(ct(t))],e},S5=Qt.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},A5=Qt.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},L5=Qt.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},sn=Qt.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return L5(n,e-1)},an=Qt.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return S5(n,e-1)},on=Qt.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return A5(n,e-1)},C5=Qt.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=n[0],i=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(s)||0,c.lowerLeft_Y=r(i+o)||0,c.upperRight_X=t(s+a)||0,c.upperRight_Y=r(i)||0,[Number(ct(c.lowerLeft_X)),Number(ct(c.lowerLeft_Y)),Number(ct(c.upperRight_X)),Number(ct(c.upperRight_Y))]},P5=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=ch(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+ct(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Yr(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},ch=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function(A){return A.split(`
`)}):s.map(function(A){return[A]});var i=t,a=Qe.internal.getHeight(n)||0;a=a<0?-a:a;var o=Qe.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(A,S,q){if(A+1<s.length){var O=S+" "+s[A+1][0];return yc(O,n,q).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var u,d,f=yc("3",n,i).height,g=n.multiline?a-i:(a-f)/2,p=g+=2,y=0,v=0,w=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+yc(e,n,i=12).width+", FieldWidth:"+o+`
`;break}for(var N="",P=0,M=0;M<s.length;M++)if(s.hasOwnProperty(M)){var W=!1;if(s[M].length!==1&&w!==s[M].length-1){if((f+2)*(P+2)+2>a)continue e;N+=s[M][w],W=!0,v=M,M--}else{N=(N+=s[M][w]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var K=parseInt(M),le=c(K,N,i),X=M>=s.length-1;if(le&&!X){N+=" ",w=0;continue}if(le||X){if(X)v=K;else if(n.multiline&&(f+2)*(P+2)+2>a)continue e}else{if(!n.multiline||(f+2)*(P+2)+2>a)continue e;v=K}}for(var j="",D=y;D<=v;D++){var H=s[D];if(n.multiline){if(D===v){j+=H[w]+" ",w=(w+1)%H.length;continue}if(D===y){j+=H[H.length-1]+" ";continue}}j+=H[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,d=yc(j,n,i).width,n.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=ct(u)+" "+ct(p)+` Td
`,e+="("+Hi(j)+`) Tj
`,e+=-ct(u)+` 0 Td
`,p=-(i+2),d=0,y=W?v:v+1,P++,N=""}break}return r.text=e,r.fontSize=i,r},yc=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},D5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},M5=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},O5=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,s=n[t];e.internal.newObjectDeferredBegin(s.objId,!0),Dt(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[r]}},E5=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Fr.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(D5)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Uh=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Ag,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&M5(i,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=C5(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Qe.createDefaultAppearanceStream(o),Dt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=P5(o);c.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(f+="/"+g+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var y=p[a];typeof y=="function"&&(y=y.call(s,o)),f+="/"+a+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,o)),f+="/"+a+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:o.objId}),s.internal.out("endobj")}i&&O5(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},kg=Qt.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var s="[",i=0;i<n.length;i++)switch(i!==0&&(s+=" "),Dt(n[i])){case"boolean":case"number":case"object":s+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),s+="("+Hi(r(n[i].toString()))+")"):s+=n[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Cd=function(n,e,t){var r=function(s){return s};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Hi(r(n))+")"},ts=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ts.prototype.toString=function(){return this.objId+" 0 R"},ts.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ts.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],s=this[r];s&&(Array.isArray(s)?n.push({key:r,value:kg(s,this.objId,this.scope)}):s instanceof ts?(s.scope=this.scope,n.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:r,value:s}))}return n};var Sg=function(){ts.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Xn(Sg,ts);var Ag=function(){ts.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Hi(t(n))+")"}},set:function(t){n=t}})};Xn(Ag,ts);var Fr=function n(){ts.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!sn(e,3)},set:function(N){N?this.F=an(e,3):this.F=on(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');t=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Jc)return;i="FieldObject"+n.FieldNum++}var N=function(P){return P};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Hi(N(i))+")"},set:function(N){i=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(N){i=N}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Uh:u},set:function(N){u=N}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Jc||this instanceof Fi))return Cd(f,this.objId,this.scope)},set:function(N){N=N.toString(),f=N}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof _n?g:Cd(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=this instanceof _n?N:N.substr(0,1)==="("?Pa(N.substr(1,N.length-2)):Pa(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _n?Pa(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof _n?"/"+N:N}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof _n?p:Cd(p,this.objId,this.scope)},set:function(N){N=N.toString(),p=this instanceof _n?N:N.substr(0,1)==="("?Pa(N.substr(1,N.length-2)):Pa(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _n?Pa(p.substr(1,p.length-1)):p},set:function(N){N=N.toString(),p=this instanceof _n?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(N){N=!!N,v=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(N){y=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,1)},set:function(N){N?this.Ff=an(this.Ff,1):this.Ff=on(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,2)},set:function(N){N?this.Ff=an(this.Ff,2):this.Ff=on(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,3)},set:function(N){N?this.Ff=an(this.Ff,3):this.Ff=on(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');w=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(w){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};Xn(Fr,ts);var za=function(){Fr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kg(e,this.objId,this.scope)},set:function(t){var r,s;s=[],typeof(r=t)=="string"&&(s=function(i,a,o){o||(o=1);for(var c,u=[];c=a.exec(i);)u.push(c[o]);return u}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,18)},set:function(t){t?this.Ff=an(this.Ff,18):this.Ff=on(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=an(this.Ff,19):this.Ff=on(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,20)},set:function(t){t?(this.Ff=an(this.Ff,20),e.sort()):this.Ff=on(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,22)},set:function(t){t?this.Ff=an(this.Ff,22):this.Ff=on(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,23)},set:function(t){t?this.Ff=an(this.Ff,23):this.Ff=on(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,27)},set:function(t){t?this.Ff=an(this.Ff,27):this.Ff=on(this.Ff,27)}}),this.hasAppearanceStream=!1};Xn(za,Fr);var qa=function(){za.call(this),this.fontName="helvetica",this.combo=!1};Xn(qa,za);var Ha=function(){qa.call(this),this.combo=!0};Xn(Ha,qa);var Rc=function(){Ha.call(this),this.edit=!0};Xn(Rc,Ha);var _n=function(){Fr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,15)},set:function(t){t?this.Ff=an(this.Ff,15):this.Ff=on(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,16)},set:function(t){t?this.Ff=an(this.Ff,16):this.Ff=on(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,17)},set:function(t){t?this.Ff=an(this.Ff,17):this.Ff=on(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,26)},set:function(t){t?this.Ff=an(this.Ff,26):this.Ff=on(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+Hi(t(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){Dt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Xn(_n,Fr);var Bc=function(){_n.call(this),this.pushButton=!0};Xn(Bc,_n);var Ua=function(){_n.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Xn(Ua,_n);var Jc=function(){var n,e;Fr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+Hi(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Dt(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xn(Jc,Fr),Ua.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ua.prototype.createOption=function(n){var e=new Jc;return e.Parent=this,e.optionName=n,this.Kids.push(e),T5.call(this.scope,e),e};var zc=function(){_n.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qe.CheckBox.createAppearanceStream()};Xn(zc,_n);var Fi=function(){Fr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,13)},set:function(e){e?this.Ff=an(this.Ff,13):this.Ff=on(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,21)},set:function(e){e?this.Ff=an(this.Ff,21):this.Ff=on(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,23)},set:function(e){e?this.Ff=an(this.Ff,23):this.Ff=on(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,24)},set:function(e){e?this.Ff=an(this.Ff,24):this.Ff=on(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,25)},set:function(e){e?this.Ff=an(this.Ff,25):this.Ff=on(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,26)},set:function(e){e?this.Ff=an(this.Ff,26):this.Ff=on(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xn(Fi,Fr);var qc=function(){Fi.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!sn(this.Ff,14)},set:function(n){n?this.Ff=an(this.Ff,14):this.Ff=on(this.Ff,14)}}),this.password=!0};Xn(qc,Fi);var Qe={CheckBox:{createAppearanceStream:function(){return{N:{On:Qe.CheckBox.YesNormal},D:{On:Qe.CheckBox.YesPushDown,Off:Qe.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Yr(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=ch(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+ct(Qe.internal.getWidth(n))+" "+ct(Qe.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+ct(i.fontSize)+" Tf "+s),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Yr(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=[],i=Qe.internal.getHeight(n),a=Qe.internal.getWidth(n),o=ch(n,n.caption);return s.push("1 g"),s.push("0 0 "+ct(a)+" "+ct(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ct(a-1)+" "+ct(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+ct(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Yr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+ct(Qe.internal.getWidth(n))+" "+ct(Qe.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Qe.RadioButton.Circle.YesNormal,e.D[n]=Qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Yr(n);e.scope=n.scope;var t=[],r=Qe.internal.getWidth(n)<=Qe.internal.getHeight(n)?Qe.internal.getWidth(n)/4:Qe.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Qe.internal.Bezier_C,i=Number((r*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+$s(Qe.internal.getWidth(n)/2)+" "+$s(Qe.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Yr(n);e.scope=n.scope;var t=[],r=Qe.internal.getWidth(n)<=Qe.internal.getHeight(n)?Qe.internal.getWidth(n)/4:Qe.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Qe.internal.Bezier_C).toFixed(5)),a=Number((r*Qe.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$s(Qe.internal.getWidth(n)/2)+" "+$s(Qe.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+$s(Qe.internal.getWidth(n)/2)+" "+$s(Qe.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Yr(n);e.scope=n.scope;var t=[],r=Qe.internal.getWidth(n)<=Qe.internal.getHeight(n)?Qe.internal.getWidth(n)/4:Qe.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Qe.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$s(Qe.internal.getWidth(n)/2)+" "+$s(Qe.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Qe.RadioButton.Cross.YesNormal,e.D[n]=Qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Yr(n);e.scope=n.scope;var t=[],r=Qe.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+ct(Qe.internal.getWidth(n)-2)+" "+ct(Qe.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(ct(r.x1.x)+" "+ct(r.x1.y)+" m"),t.push(ct(r.x2.x)+" "+ct(r.x2.y)+" l"),t.push(ct(r.x4.x)+" "+ct(r.x4.y)+" m"),t.push(ct(r.x3.x)+" "+ct(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Yr(n);e.scope=n.scope;var t=Qe.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+ct(Qe.internal.getWidth(n))+" "+ct(Qe.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ct(Qe.internal.getWidth(n)-2)+" "+ct(Qe.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(ct(t.x1.x)+" "+ct(t.x1.y)+" m"),r.push(ct(t.x2.x)+" "+ct(t.x2.y)+" l"),r.push(ct(t.x4.x)+" "+ct(t.x4.y)+" m"),r.push(ct(t.x3.x)+" "+ct(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Yr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+ct(Qe.internal.getWidth(n))+" "+ct(Qe.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Qe.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Qe.internal.getWidth(n),t=Qe.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Qe.internal.getWidth=function(n){var e=0;return Dt(n)==="object"&&(e=Fp(n.Rect[2])),e},Qe.internal.getHeight=function(n){var e=0;return Dt(n)==="object"&&(e=Fp(n.Rect[3])),e};var T5=Qt.addField=function(n){if(E5(this,n),!(n instanceof Fr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Qt.AcroFormChoiceField=za,Qt.AcroFormListBox=qa,Qt.AcroFormComboBox=Ha,Qt.AcroFormEditBox=Rc,Qt.AcroFormButton=_n,Qt.AcroFormPushButton=Bc,Qt.AcroFormRadioButton=Ua,Qt.AcroFormCheckBox=zc,Qt.AcroFormTextField=Fi,Qt.AcroFormPasswordField=qc,Qt.AcroFormAppearance=Qe,Qt.AcroForm={ChoiceField:za,ListBox:qa,ComboBox:Ha,EditBox:Rc,Button:_n,PushButton:Bc,RadioButton:Ua,CheckBox:zc,TextField:Fi,PasswordField:qc,Appearance:Qe},nt.AcroForm={ChoiceField:za,ListBox:qa,ComboBox:Ha,EditBox:Rc,Button:_n,PushButton:Bc,RadioButton:Ua,CheckBox:zc,TextField:Fi,PasswordField:qc,Appearance:Qe};nt.AcroForm;function Lg(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(A,S){var q,O,V,ee,B,Z=e;if((S=S||e)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(le(A))for(B in t)for(V=t[B],q=0;q<V.length;q+=1){for(ee=!0,O=0;O<V[q].length;O+=1)if(V[q][O]!==void 0&&V[q][O]!==A[O]){ee=!1;break}if(ee===!0){Z=B;break}}else for(B in t)for(V=t[B],q=0;q<V.length;q+=1){for(ee=!0,O=0;O<V[q].length;O+=1)if(V[q][O]!==void 0&&V[q][O]!==A.charCodeAt(O)){ee=!1;break}if(ee===!0){Z=B;break}}return Z===e&&S!==e&&(Z=S),Z},s=function A(S){for(var q=this.internal.write,O=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:S.width}),ee.push({key:"Height",value:S.height}),S.colorSpace===w.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===w.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var B="",Z=0,ne=S.transparency.length;Z<ne;Z++)B+=S.transparency[Z]+" "+S.transparency[Z]+" ";ee.push({key:"Mask",value:"["+B+"]"})}S.sMask!==void 0&&ee.push({key:"SMask",value:S.objectId+1+" 0 R"});var de=S.filter!==void 0?["/"+S.filter]:void 0;if(O({data:S.data,additionalKeyValues:ee,alreadyAppliedFilters:de,objectId:S.objectId}),q("endobj"),"sMask"in S&&S.sMask!==void 0){var xe="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,k={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:xe,data:S.sMask};"filter"in S&&(k.filter=S.filter),A.call(this,k)}if(S.colorSpace===w.INDEXED){var T=this.internal.newObject();O({data:j(new Uint8Array(S.palette)),objectId:T}),q("endobj")}},i=function(){var A=this.internal.collections.addImage_images;for(var S in A)s.call(this,A[S])},a=function(){var A,S=this.internal.collections.addImage_images,q=this.internal.write;for(var O in S)q("/I"+(A=S[O]).index,A.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var A=this.internal.collections.addImage_images;return o.call(this),A},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(A){return typeof n["process"+A.toUpperCase()]=="function"},f=function(A){return Dt(A)==="object"&&A.nodeType===1},g=function(A,S){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var q=""+A.getAttribute("src");if(q.indexOf("data:image/")===0)return Xo(unescape(q).split("base64,").pop());var O=n.loadFile(q,!0);if(O!==void 0)return O}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var V;switch(S){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;case"JPEG":case"JPG":default:V="image/jpeg"}return Xo(A.toDataURL(V,1).split("base64,").pop())}},p=function(A){var S=this.internal.collections.addImage_images;if(S){for(var q in S)if(A===S[q].alias)return S[q]}},y=function(A,S,q){return A||S||(A=-96,S=-96),A<0&&(A=-1*q.width*72/A/this.internal.scaleFactor),S<0&&(S=-1*q.height*72/S/this.internal.scaleFactor),A===0&&(A=S*q.width/q.height),S===0&&(S=A*q.height/q.width),[A,S]},v=function(A,S,q,O,V,ee){var B=y.call(this,q,O,V),Z=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,de=c.call(this);if(q=B[0],O=B[1],de[V.index]=V,ee){ee*=Math.PI/180;var xe=Math.cos(ee),k=Math.sin(ee),T=function(Y){return Y.toFixed(4)},I=[T(xe),T(k),T(-1*k),T(xe),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,Z(A),ne(S+O),"cm"].join(" ")),this.internal.write(I.join(" ")),this.internal.write([Z(q),"0","0",Z(O),"0","0","cm"].join(" "))):this.internal.write([Z(q),"0","0",Z(O),Z(A),ne(S+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},w=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=n.__addimage__.sHashCode=function(A){var S,q,O=0;if(typeof A=="string")for(q=A.length,S=0;S<q;S++)O=(O<<5)-O+A.charCodeAt(S),O|=0;else if(le(A))for(q=A.byteLength/2,S=0;S<q;S++)O=(O<<5)-O+A[S],O|=0;return O},M=n.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var S=!0;return A.length===0&&(S=!1),A.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(S=!1),S},W=n.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var S=A.indexOf(",");return S<0?null:A.substring(0,S).trim().endsWith("base64")?A.substring(S+1):null},K=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(A){return K()&&A instanceof ArrayBuffer};var le=n.__addimage__.isArrayBufferView=function(A){return K()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},X=n.__addimage__.binaryStringToUint8Array=function(A){for(var S=A.length,q=new Uint8Array(S),O=0;O<S;O++)q[O]=A.charCodeAt(O);return q},j=n.__addimage__.arrayBufferToBinaryString=function(A){for(var S="",q=le(A)?A:new Uint8Array(A),O=0;O<q.length;O+=8192)S+=String.fromCharCode.apply(null,q.subarray(O,O+8192));return S};n.addImage=function(){var A,S,q,O,V,ee,B,Z,ne;if(typeof arguments[1]=="number"?(S=e,q=arguments[1],O=arguments[2],V=arguments[3],ee=arguments[4],B=arguments[5],Z=arguments[6],ne=arguments[7]):(S=arguments[1],q=arguments[2],O=arguments[3],V=arguments[4],ee=arguments[5],B=arguments[6],Z=arguments[7],ne=arguments[8]),Dt(A=arguments[0])==="object"&&!f(A)&&"imageData"in A){var de=A;A=de.imageData,S=de.format||S||e,q=de.x||q||0,O=de.y||O||0,V=de.w||de.width||V,ee=de.h||de.height||ee,B=de.alias||B,Z=de.compression||Z,ne=de.rotation||de.angle||ne}var xe=this.internal.getFilters();if(Z===void 0&&xe.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(q)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var k=D.call(this,A,S,B,Z);return v.call(this,q,O,V,ee,k,ne),this};var D=function(A,S,q,O){var V,ee,B;if(typeof A=="string"&&r(A)===e){A=unescape(A);var Z=H(A,!1);(Z!==""||(Z=n.loadFile(A,!0))!==void 0)&&(A=Z)}if(f(A)&&(A=g(A,S)),S=r(A,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((B=q)==null||B.length===0)&&(q=function(ne){return typeof ne=="string"||le(ne)?P(ne):le(ne.data)?P(ne.data):null}(A)),(V=p.call(this,q))||(K()&&(A instanceof Uint8Array||S==="RGBA"||(ee=A,A=X(A))),V=this["process"+S.toUpperCase()](A,u.call(this),q,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in n.image_compression?ne:N.NONE}(O),ee)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},H=n.__addimage__.convertBase64ToBinaryString=function(A,S){S=typeof S!="boolean"||S;var q,O="";if(typeof A=="string"){var V;q=(V=W(A))!==null&&V!==void 0?V:A;try{O=Xo(q)}catch(ee){if(S)throw M(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};n.getImageProperties=function(A){var S,q,O="";if(f(A)&&(A=g(A)),typeof A=="string"&&r(A)===e&&((O=H(A,!1))===""&&(O=n.loadFile(A)||""),A=O),q=r(A),!d(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!K()||A instanceof Uint8Array||(A=X(A)),!(S=this["process"+q.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=q,S}})(nt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){r=u[g];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(v.objId),P=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(N(r.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(N(P))+") >>",v.content=i;var M=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+M,r.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(v.objId,"0 R",w.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var le=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+le+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,s,i,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+s),h:u(r+i)},options:a,type:"link"})},n.textWithLink=function(t,r,s,i){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(t,o).length;a=Math.ceil(u*d)}else o=c,a=u;return this.text(t,r,s,i),s+=.2*u,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,s-u,o,a,i),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(nt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=n.__arabicParser__.isArabicEndLetter=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(v){return a(v)&&s.indexOf(v.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(v){var w=0,N=t,P="",M=0;for(w=0;w<v.length;w+=1)N[v.charCodeAt(w)]!==void 0?(M++,typeof(N=N[v.charCodeAt(w)])=="number"&&(P+=String.fromCharCode(N),N=t,M=0),w===v.length-1&&(N=t,P+=v.charAt(w-(M-1)),w-=M-1,M=0)):(N=t,P+=v.charAt(w-M),w-=M,M=0);return P};n.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&r[v.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(v,w,N){return a(v)?i(v)===!1?-1:!u(v)||!a(w)&&!a(N)||!a(N)&&o(w)||o(v)&&!a(w)||o(v)&&c(w)||o(v)&&o(w)?0:d(v)&&a(w)&&!o(w)&&a(N)&&u(N)?3:o(v)||!a(N)?1:2:-1},p=function(v){var w=0,N=0,P=0,M="",W="",K="",le=(v=v||"").split("\\s+"),X=[];for(w=0;w<le.length;w+=1){for(X.push(""),N=0;N<le[w].length;N+=1)M=le[w][N],W=le[w][N-1],K=le[w][N+1],a(M)?(P=g(M,W,K),X[w]+=P!==-1?String.fromCharCode(e[M.charCodeAt(0)][P]):M):X[w]+=M;X[w]=f(X[w])}return X.join(" ")},y=n.__arabicParser__.processArabic=n.processArabic=function(){var v,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(w)){var P=0;for(N=[],P=0;P<w.length;P+=1)Array.isArray(w[P])?N.push([p(w[P][0]),w[P][1],w[P][2]]):N.push([p(w[P])]);v=N}else v=p(w);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};n.events.push(["preProcessText",y])}(nt.API),nt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var s;if((t=t||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(nt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(v){g=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,p=0,y=0,v=0,w=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=u.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(M,W){return M.concat(w.splitTextToSize(W,N))},[])):c=Array.isArray(c)?c:[c];for(var P=0;P<c.length;P++)p<(v=this.getStringUnitWidth(c[P],{font:f})*d)&&(p=v);return p!==0&&(y=c.length),{w:p/=g,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,d,f,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var p,y,v,w,N=[],P=[],M=[],W={},K={},le=[],X=[],j=(g=g||{}).autoSize||!1,D=g.printHeaders!==!1,H=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,A=g.margins||Object.assign({width:this.getPageWidth()},e),S=typeof g.padding=="number"?g.padding:3,q=g.headerBackgroundColor||"#c8c8c8",O=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=O,this.setFontSize(H),f==null)P=N=Object.keys(d[0]),M=N.map(function(){return"left"});else if(Array.isArray(f)&&Dt(f[0])==="object")for(N=f.map(function(de){return de.name}),P=f.map(function(de){return de.prompt||de.name||""}),M=f.map(function(de){return de.align||"left"}),p=0;p<f.length;p+=1)K[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(P=N=f,M=N.map(function(){return"left"}));if(j||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<N.length;p+=1){for(W[w=N[p]]=d.map(function(de){return de[w]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(P[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=W[w],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)le.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[w]=Math.max.apply(null,le)+S+S,le=[]}if(D){var V={};for(p=0;p<N.length;p+=1)V[N[p]]={},V[N[p]].text=P[p],V[N[p]].align=M[p];var ee=o.call(this,V,K);X=N.map(function(de){return new i(c,u,K[de],ee,V[de].text,void 0,V[de].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var B=f.reduce(function(de,xe){return de[xe.name]=xe.align,de},{});for(p=0;p<d.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:d[p]},this);var Z=o.call(this,d[p],K);for(v=0;v<N.length;v+=1){var ne=d[p][N[v]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:v,data:ne},this),a.call(this,new i(c,u,K[N[v]],Z,ne,p+2,B[N[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/g+d+d},this).reduce(function(p,y){return Math.max(p,y)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(y)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(nt.API);var Cg={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Pg=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uh=Lg(Pg),Dg=[100,200,300,400,500,600,700,800,900],F5=Lg(Dg);function dh(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return Cg[i=i||"normal"]?i:"normal"}(n.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(i){return typeof uh[i=i||"normal"]=="number"?i:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,r].join(" ")}}}function Ip(n,e,t,r){var s;for(s=t;s>=0&&s<e.length;s+=r)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=r)if(n[e[s]])return n[e[s]]}var I5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Rp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Bp(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function R5(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",s=Object.assign({},I5,t.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=dh(e[o])).family]&&(i.family=s[i.family]),n.hasOwnProperty(i.family)){a=n[i.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+Bp(i)+"' and default family '"+r+"'.");if(a=function(c,u){if(u[c])return u[c];var d=uh[c],f=d<=uh.normal?-1:1,g=Ip(u,Pg,d,f);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(i.stretch,a),a=function(c,u){if(u[c])return u[c];for(var d=Cg[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(i.style,a),!(a=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=F5[c],f=Ip(u,Dg,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Bp(i)+"'.");return a}function zp(n){return n.trimLeft()}function B5(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function z5(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var vc,qp,Hp,Pd=["times"];(function(n){var e,t,r,s,i,a,o,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new a,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new a,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var T=k;Object.defineProperty(this,"pdf",{get:function(){return T}});var I=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return I},set:function(me){I=!!me}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(me){Y=!!me}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(me){isNaN(me)||(Q=me)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(me){isNaN(me)||(fe=me)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(me){var U;typeof me=="number"?U=[me,me,me,me]:((U=new Array(4))[0]=me[0],U[1]=me.length>=2?me[1]:U[0],U[2]=me.length>=3?me[2]:U[0],U[3]=me.length>=4?me[3]:U[1]),u.margin=U}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(me){ce=me}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(me){ue=me}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(me){ke=me}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(me){me instanceof d&&(u=me)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(me){u.path=me}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(me){we=me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(me){var U;U=g(me),this.ctx.fillStyle=U.style,this.ctx.isFillTransparent=U.a===0,this.ctx.fillOpacity=U.a,this.pdf.setFillColor(U.r,U.g,U.b,{a:U.a}),this.pdf.setTextColor(U.r,U.g,U.b,{a:U.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(me){var U=g(me);this.ctx.strokeStyle=U.style,this.ctx.isStrokeTransparent=U.a===0,this.ctx.strokeOpacity=U.a,U.a===0?this.pdf.setDrawColor(255,255,255):(U.a,this.pdf.setDrawColor(U.r,U.g,U.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(me){["butt","round","square"].indexOf(me)!==-1&&(this.ctx.lineCap=me,this.pdf.setLineCap(me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(me){isNaN(me)||(this.ctx.lineWidth=me,this.pdf.setLineWidth(me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(me){["bevel","round","miter"].indexOf(me)!==-1&&(this.ctx.lineJoin=me,this.pdf.setLineJoin(me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(me){isNaN(me)||(this.ctx.miterLimit=me,this.pdf.setMiterLimit(me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(me){this.ctx.textBaseline=me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(me){["right","end","center","left","start"].indexOf(me)!==-1&&(this.ctx.textAlign=me)}});var Fe=null;function Le(me,U){if(Fe===null){var $e=function(Ee){var Ne=[];return Object.keys(Ee).forEach(function(te){Ee[te].forEach(function(Ae){var G=null;switch(Ae){case"bold":G={family:te,weight:"bold"};break;case"italic":G={family:te,style:"italic"};break;case"bolditalic":G={family:te,weight:"bold",style:"italic"};break;case"":case"normal":G={family:te}}G!==null&&(G.ref={name:te,style:Ae},Ne.push(G))})}),Ne}(me.getFontList());Fe=function(Ee){for(var Ne={},te=0;te<Ee.length;++te){var Ae=dh(Ee[te]),G=Ae.family,ve=Ae.stretch,Be=Ae.style,oe=Ae.weight;Ne[G]=Ne[G]||{},Ne[G][ve]=Ne[G][ve]||{},Ne[G][ve][Be]=Ne[G][ve][Be]||{},Ne[G][ve][Be][oe]=Ae}return Ne}($e.concat(U))}return Fe}var qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return qe},set:function(me){Fe=null,qe=me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(me){var U;if(this.ctx.font=me,(U=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(me))!==null){var $e=U[1];U[2];var Ee=U[3],Ne=U[4];U[5];var te=U[6],Ae=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Ae==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Ae==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var G=function(He){var Ge,Pe,ot=[],tt=He.trim();if(tt==="")return Pd;if(tt in Rp)return[Rp[tt]];for(;tt!=="";){switch(Pe=null,Ge=(tt=zp(tt)).charAt(0)){case'"':case"'":Pe=B5(tt.substring(1),Ge);break;default:Pe=z5(tt)}if(Pe===null||(ot.push(Pe[0]),(tt=zp(Pe[1]))!==""&&tt.charAt(0)!==","))return Pd;tt=tt.replace(/^,/,"")}return ot}(te);if(this.fontFaces){var ve=R5(Le(this.pdf,this.fontFaces),G.map(function(He){return{family:He,stretch:"normal",weight:Ee,style:$e}}));this.pdf.setFont(ve.ref.name,ve.ref.style)}else{var Be="";(Ee==="bold"||parseInt(Ee,10)>=700||$e==="bold")&&(Be="bold"),$e==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var oe="",_e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ze=0;ze<G.length;ze++){if(this.pdf.internal.getFont(G[ze],Be,{noFallback:!0,disableWarning:!0})!==void 0){oe=G[ze];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(G[ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)oe=G[ze],Be="bold";else if(this.pdf.internal.getFont(G[ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){oe=G[ze],Be="normal";break}}if(oe===""){for(var Ke=0;Ke<G.length;Ke++)if(_e[G[Ke]]){oe=_e[G[Ke]];break}}oe=oe===""?"Times":oe,this.pdf.setFont(oe,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(me){this.ctx.globalCompositeOperation=me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(me){this.ctx.globalAlpha=me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(me){this.ctx.lineDashOffset=me,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(me){this.ctx.lineDash=me,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(me){this.ctx.ignoreClearRect=!!me}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){W.call(this,"fill",!1)},f.prototype.stroke=function(){W.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,T){if(isNaN(k)||isNaN(T))throw Tt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var I=this.ctx.transform.applyToPoint(new a(k,T));this.path.push({type:"mt",x:I.x,y:I.y}),this.ctx.lastPoint=new a(k,T)},f.prototype.closePath=function(){var k=new a(0,0),T=0;for(T=this.path.length-1;T!==-1;T--)if(this.path[T].type==="begin"&&Dt(this.path[T+1])==="object"&&typeof this.path[T+1].x=="number"){k=new a(this.path[T+1].x,this.path[T+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(k.x,k.y)},f.prototype.lineTo=function(k,T){if(isNaN(k)||isNaN(T))throw Tt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var I=this.ctx.transform.applyToPoint(new a(k,T));this.path.push({type:"lt",x:I.x,y:I.y}),this.ctx.lastPoint=new a(I.x,I.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,T,I,Y){if(isNaN(I)||isNaN(Y)||isNaN(k)||isNaN(T))throw Tt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(I,Y)),fe=this.ctx.transform.applyToPoint(new a(k,T));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},f.prototype.bezierCurveTo=function(k,T,I,Y,Q,fe){if(isNaN(Q)||isNaN(fe)||isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y))throw Tt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new a(Q,fe)),ue=this.ctx.transform.applyToPoint(new a(k,T)),ke=this.ctx.transform.applyToPoint(new a(I,Y));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:ke.x,y2:ke.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new a(ce.x,ce.y)},f.prototype.arc=function(k,T,I,Y,Q,fe){if(isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y)||isNaN(Q))throw Tt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new a(k,T));k=ce.x,T=ce.y;var ue=this.ctx.transform.applyToPoint(new a(0,I)),ke=this.ctx.transform.applyToPoint(new a(0,0));I=Math.sqrt(Math.pow(ue.x-ke.x,2)+Math.pow(ue.y-ke.y,2))}Math.abs(Q-Y)>=2*Math.PI&&(Y=0,Q=2*Math.PI),this.path.push({type:"arc",x:k,y:T,radius:I,startAngle:Y,endAngle:Q,counterclockwise:fe})},f.prototype.arcTo=function(k,T,I,Y,Q){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,T,I,Y){if(isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y))throw Tt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,T),this.lineTo(k+I,T),this.lineTo(k+I,T+Y),this.lineTo(k,T+Y),this.lineTo(k,T),this.lineTo(k+I,T),this.lineTo(k,T)},f.prototype.fillRect=function(k,T,I,Y){if(isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y))throw Tt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,T,I,Y),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},f.prototype.strokeRect=function(k,T,I,Y){if(isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y))throw Tt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(k,T,I,Y),this.stroke())},f.prototype.clearRect=function(k,T,I,Y){if(isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y))throw Tt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,T,I,Y))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var T=this.pdf.internal.getCurrentPageInfo().pageNumber,I=0;I<this.pdf.internal.getNumberOfPages();I++)this.pdf.setPage(I+1),this.pdf.internal.out("q");if(this.pdf.setPage(T),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var T=this.pdf.internal.getCurrentPageInfo().pageNumber,I=0;I<this.pdf.internal.getNumberOfPages();I++)this.pdf.setPage(I+1),this.pdf.internal.out("Q");this.pdf.setPage(T),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(k){var T,I,Y,Q;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))T=0,I=0,Y=0,Q=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(fe!==null)T=parseInt(fe[1]),I=parseInt(fe[2]),Y=parseInt(fe[3]),Q=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)T=parseInt(fe[1]),I=parseInt(fe[2]),Y=parseInt(fe[3]),Q=parseFloat(fe[4]);else{if(Q=1,typeof k=="string"&&k.charAt(0)!=="#"){var ce=new _g(k);k=ce.ok?ce.toHex():"#000000"}k.length===4?(T=k.substring(1,2),T+=T,I=k.substring(2,3),I+=I,Y=k.substring(3,4),Y+=Y):(T=k.substring(1,3),I=k.substring(3,5),Y=k.substring(5,7)),T=parseInt(T,16),I=parseInt(I,16),Y=parseInt(Y,16)}}return{r:T,g:I,b:Y,a:Q,style:k}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,T,I,Y){if(isNaN(T)||isNaN(I)||typeof k!="string")throw Tt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!p.call(this)){var Q=Z(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;S.call(this,{text:k,x:T,y:I,scale:fe,angle:Q,align:this.textAlign,maxWidth:Y})}},f.prototype.strokeText=function(k,T,I,Y){if(isNaN(T)||isNaN(I)||typeof k!="string")throw Tt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){Y=isNaN(Y)?void 0:Y;var Q=Z(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;S.call(this,{text:k,x:T,y:I,scale:fe,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:Y})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Tt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var T=this.pdf,I=this.pdf.internal.scaleFactor,Y=T.internal.getFontSize(),Q=T.getStringUnitWidth(k)*Y/T.internal.scaleFactor,fe=function(ce){var ue=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new fe({width:Q*=Math.round(96*I/72*1e4)/1e4})},f.prototype.scale=function(k,T){if(isNaN(k)||isNaN(T))throw Tt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var I=new c(k,0,0,T,0,0);this.ctx.transform=this.ctx.transform.multiply(I)},f.prototype.rotate=function(k){if(isNaN(k))throw Tt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var T=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(T)},f.prototype.translate=function(k,T){if(isNaN(k)||isNaN(T))throw Tt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var I=new c(1,0,0,1,k,T);this.ctx.transform=this.ctx.transform.multiply(I)},f.prototype.transform=function(k,T,I,Y,Q,fe){if(isNaN(k)||isNaN(T)||isNaN(I)||isNaN(Y)||isNaN(Q)||isNaN(fe))throw Tt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new c(k,T,I,Y,Q,fe);this.ctx.transform=this.ctx.transform.multiply(ce)},f.prototype.setTransform=function(k,T,I,Y,Q,fe){k=isNaN(k)?1:k,T=isNaN(T)?0:T,I=isNaN(I)?0:I,Y=isNaN(Y)?1:Y,Q=isNaN(Q)?0:Q,fe=isNaN(fe)?0:fe,this.ctx.transform=new c(k,T,I,Y,Q,fe)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,T,I,Y,Q,fe,ce,ue,ke){var we=this.pdf.getImageProperties(k),Fe=1,Le=1,qe=1,me=1;Y!==void 0&&ue!==void 0&&(qe=ue/Y,me=ke/Q,Fe=we.width/Y*ue/Y,Le=we.height/Q*ke/Q),fe===void 0&&(fe=T,ce=I,T=0,I=0),Y!==void 0&&ue===void 0&&(ue=Y,ke=Q),Y===void 0&&ue===void 0&&(ue=we.width,ke=we.height);for(var U,$e=this.ctx.transform.decompose(),Ee=Z($e.rotate.shx),Ne=new c,te=(Ne=(Ne=(Ne=Ne.multiply($e.translate)).multiply($e.skew)).multiply($e.scale)).applyToRectangle(new o(fe-T*qe,ce-I*me,Y*Fe,Q*Le)),Ae=w.call(this,te),G=[],ve=0;ve<Ae.length;ve+=1)G.indexOf(Ae[ve])===-1&&G.push(Ae[ve]);if(M(G),this.autoPaging)for(var Be=G[0],oe=G[G.length-1],_e=Be;_e<oe+1;_e++){this.pdf.setPage(_e);var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=_e===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=_e===1?0:He+(_e-2)*Ge;if(this.ctx.clip_path.length!==0){var ot=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(U,this.posX+this.margin[3],-Pe+Ke+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=ot}var tt=JSON.parse(JSON.stringify(te));tt=P([tt],this.posX+this.margin[3],-Pe+Ke+this.ctx.prevPageLastElemOffset)[0];var Ft=(_e>Be||_e<oe)&&v.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Ge,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",tt.x,tt.y,tt.w,tt.h,null,null,Ee),Ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",te.x,te.y,te.w,te.h,null,null,Ee)};var w=function(k,T,I){var Y=[];T=T||this.pdf.internal.pageSize.width,I=I||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":Y.push(Math.floor((k.y+Q)/I)+1);break;case"arc":Y.push(Math.floor((k.y+Q-k.radius)/I)+1),Y.push(Math.floor((k.y+Q+k.radius)/I)+1);break;case"qct":var fe=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);Y.push(Math.floor((fe.y+Q)/I)+1),Y.push(Math.floor((fe.y+fe.h+Q)/I)+1);break;case"bct":var ce=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);Y.push(Math.floor((ce.y+Q)/I)+1),Y.push(Math.floor((ce.y+ce.h+Q)/I)+1);break;case"rect":Y.push(Math.floor((k.y+Q)/I)+1),Y.push(Math.floor((k.y+k.h+Q)/I)+1)}for(var ue=0;ue<Y.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ue];)N.call(this);return Y},N=function(){var k=this.fillStyle,T=this.strokeStyle,I=this.font,Y=this.lineCap,Q=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=T,this.font=I,this.lineCap=Y,this.lineWidth=Q,this.lineJoin=fe},P=function(k,T,I){for(var Y=0;Y<k.length;Y++)switch(k[Y].type){case"bct":k[Y].x2+=T,k[Y].y2+=I;case"qct":k[Y].x1+=T,k[Y].y1+=I;case"mt":case"lt":case"arc":default:k[Y].x+=T,k[Y].y+=I}return k},M=function(k){return k.sort(function(T,I){return T-I})},W=function(k,T){for(var I,Y,Q=this.fillStyle,fe=this.strokeStyle,ce=this.lineCap,ue=this.lineWidth,ke=Math.abs(ue*this.ctx.transform.scaleX),we=this.lineJoin,Fe=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),qe=[],me=0;me<Le.length;me++)if(Le[me].x!==void 0)for(var U=w.call(this,Le[me]),$e=0;$e<U.length;$e+=1)qe.indexOf(U[$e])===-1&&qe.push(U[$e]);for(var Ee=0;Ee<qe.length;Ee++)for(;this.pdf.internal.getNumberOfPages()<qe[Ee];)N.call(this);if(M(qe),this.autoPaging)for(var Ne=qe[0],te=qe[qe.length-1],Ae=Ne;Ae<te+1;Ae++){this.pdf.setPage(Ae),this.fillStyle=Q,this.strokeStyle=fe,this.lineCap=ce,this.lineWidth=ke,this.lineJoin=we;var G=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ve=Ae===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=Ae===1?0:Be+(Ae-2)*oe;if(this.ctx.clip_path.length!==0){var ze=this.path;I=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(I,this.posX+this.margin[3],-_e+ve+this.ctx.prevPageLastElemOffset),K.call(this,k,!0),this.path=ze}if(Y=JSON.parse(JSON.stringify(Fe)),this.path=P(Y,this.posX+this.margin[3],-_e+ve+this.ctx.prevPageLastElemOffset),T===!1||Ae===0){var Ke=(Ae>Ne||Ae<te)&&v.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],G,oe,null).clip().discardPath()),K.call(this,k,T),Ke&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=ke,K.call(this,k,T),this.lineWidth=ue;this.path=Fe},K=function(k,T){if((k!=="stroke"||T||!y.call(this))&&(k==="stroke"||T||!p.call(this))){for(var I,Y,Q=[],fe=this.path,ce=0;ce<fe.length;ce++){var ue=fe[ce];switch(ue.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:ue,deltas:[],abs:[]});break;case"lt":var ke=Q.length;if(fe[ce-1]&&!isNaN(fe[ce-1].x)&&(I=[ue.x-fe[ce-1].x,ue.y-fe[ce-1].y],ke>0)){for(;ke>=0;ke--)if(Q[ke-1].close!==!0&&Q[ke-1].begin!==!0){Q[ke-1].deltas.push(I),Q[ke-1].abs.push(ue);break}}break;case"bct":I=[ue.x1-fe[ce-1].x,ue.y1-fe[ce-1].y,ue.x2-fe[ce-1].x,ue.y2-fe[ce-1].y,ue.x-fe[ce-1].x,ue.y-fe[ce-1].y],Q[Q.length-1].deltas.push(I);break;case"qct":var we=fe[ce-1].x+2/3*(ue.x1-fe[ce-1].x),Fe=fe[ce-1].y+2/3*(ue.y1-fe[ce-1].y),Le=ue.x+2/3*(ue.x1-ue.x),qe=ue.y+2/3*(ue.y1-ue.y),me=ue.x,U=ue.y;I=[we-fe[ce-1].x,Fe-fe[ce-1].y,Le-fe[ce-1].x,qe-fe[ce-1].y,me-fe[ce-1].x,U-fe[ce-1].y],Q[Q.length-1].deltas.push(I);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(ue)}}Y=T?null:k==="stroke"?"stroke":"fill";for(var $e=!1,Ee=0;Ee<Q.length;Ee++)if(Q[Ee].arc)for(var Ne=Q[Ee].abs,te=0;te<Ne.length;te++){var Ae=Ne[te];Ae.type==="arc"?j.call(this,Ae.x,Ae.y,Ae.radius,Ae.startAngle,Ae.endAngle,Ae.counterclockwise,void 0,T,!$e):q.call(this,Ae.x,Ae.y),$e=!0}else if(Q[Ee].close===!0)this.pdf.internal.out("h"),$e=!1;else if(Q[Ee].begin!==!0){var G=Q[Ee].start.x,ve=Q[Ee].start.y;O.call(this,Q[Ee].deltas,G,ve),$e=!0}Y&&D.call(this,Y),T&&H.call(this)}},le=function(k){var T=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,I=T*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-I;case"top":return k+T-I;case"hanging":return k+T-2*I;case"middle":return k+T/2-I;case"ideographic":return k;case"alphabetic":default:return k}},X=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(T,I){this.colorStops.push([T,I])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(k,T,I,Y,Q,fe,ce,ue,ke){for(var we=ee.call(this,I,Y,Q,fe),Fe=0;Fe<we.length;Fe++){var Le=we[Fe];Fe===0&&(ke?A.call(this,Le.x1+k,Le.y1+T):q.call(this,Le.x1+k,Le.y1+T)),V.call(this,k,T,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}ue?H.call(this):D.call(this,ce)},D=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(k,T){this.pdf.internal.out(t(k)+" "+r(T)+" m")},S=function(k){var T;switch(k.align){case"right":case"end":T="right";break;case"center":T="center";break;case"left":case"start":default:T="left"}var I=this.pdf.getTextDimensions(k.text),Y=le.call(this,k.y),Q=X.call(this,Y)-I.h,fe=this.ctx.transform.applyToPoint(new a(k.x,Y)),ce=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var ke,we,Fe,Le=this.ctx.transform.applyToRectangle(new o(k.x,Y,I.w,I.h)),qe=ue.applyToRectangle(new o(k.x,Q,I.w,I.h)),me=w.call(this,qe),U=[],$e=0;$e<me.length;$e+=1)U.indexOf(me[$e])===-1&&U.push(me[$e]);if(M(U),this.autoPaging)for(var Ee=U[0],Ne=U[U.length-1],te=Ee;te<Ne+1;te++){this.pdf.setPage(te);var Ae=te===1?this.posY+this.margin[0]:this.margin[0],G=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[2],Be=ve-this.margin[0],oe=this.pdf.internal.pageSize.width-this.margin[1],_e=oe-this.margin[3],ze=te===1?0:G+(te-2)*Be;if(this.ctx.clip_path.length!==0){var Ke=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(ke,this.posX+this.margin[3],-1*ze+Ae),K.call(this,"fill",!0),this.path=Ke}var He=P([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-ze+Ae+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*k.scale),Fe=this.lineWidth,this.lineWidth=Fe*k.scale);var Ge=this.autoPaging!=="text";if(Ge||He.y+He.h<=ve){if(Ge||He.y>=Ae&&He.x<=oe){var Pe=Ge?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||oe-He.x)[0],ot=P([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-ze+Ae+this.ctx.prevPageLastElemOffset)[0],tt=Ge&&(te>Ee||te<Ne)&&v.call(this);tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,Be,null).clip().discardPath()),this.pdf.text(Pe,ot.x,ot.y,{angle:k.angle,align:T,renderingMode:k.renderingMode}),tt&&this.pdf.restoreGraphicsState()}}else He.y<ve&&(this.ctx.prevPageLastElemOffset+=ve-He.y);k.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Fe)}else k.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*k.scale),Fe=this.lineWidth,this.lineWidth=Fe*k.scale),this.pdf.text(k.text,fe.x+this.posX,fe.y+this.posY,{angle:k.angle,align:T,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Fe)},q=function(k,T,I,Y){I=I||0,Y=Y||0,this.pdf.internal.out(t(k+I)+" "+r(T+Y)+" l")},O=function(k,T,I){return this.pdf.lines(k,T,I,null,null)},V=function(k,T,I,Y,Q,fe,ce,ue){this.pdf.internal.out([e(s(I+k)),e(i(Y+T)),e(s(Q+k)),e(i(fe+T)),e(s(ce+k)),e(i(ue+T)),"c"].join(" "))},ee=function(k,T,I,Y){for(var Q=2*Math.PI,fe=Math.PI/2;T>I;)T-=Q;var ce=Math.abs(I-T);ce<Q&&Y&&(ce=Q-ce);for(var ue=[],ke=Y?-1:1,we=T;ce>1e-5;){var Fe=we+ke*Math.min(ce,fe);ue.push(B.call(this,k,we,Fe)),ce-=Math.abs(Fe-we),we=Fe}return ue},B=function(k,T,I){var Y=(I-T)/2,Q=k*Math.cos(Y),fe=k*Math.sin(Y),ce=Q,ue=-fe,ke=ce*ce+ue*ue,we=ke+ce*Q+ue*fe,Fe=4/3*(Math.sqrt(2*ke*we)-we)/(ce*fe-ue*Q),Le=ce-Fe*ue,qe=ue+Fe*ce,me=Le,U=-qe,$e=Y+T,Ee=Math.cos($e),Ne=Math.sin($e);return{x1:k*Math.cos(T),y1:k*Math.sin(T),x2:Le*Ee-qe*Ne,y2:Le*Ne+qe*Ee,x3:me*Ee-U*Ne,y3:me*Ne+U*Ee,x4:k*Math.cos(I),y4:k*Math.sin(I)}},Z=function(k){return 180*k/Math.PI},ne=function(k,T,I,Y,Q,fe){var ce=k+.5*(I-k),ue=T+.5*(Y-T),ke=Q+.5*(I-Q),we=fe+.5*(Y-fe),Fe=Math.min(k,Q,ce,ke),Le=Math.max(k,Q,ce,ke),qe=Math.min(T,fe,ue,we),me=Math.max(T,fe,ue,we);return new o(Fe,qe,Le-Fe,me-qe)},de=function(k,T,I,Y,Q,fe,ce,ue){var ke,we,Fe,Le,qe,me,U,$e,Ee,Ne,te,Ae,G,ve,Be=I-k,oe=Y-T,_e=Q-I,ze=fe-Y,Ke=ce-Q,He=ue-fe;for(we=0;we<41;we++)Ee=(U=(Fe=k+(ke=we/40)*Be)+ke*((qe=I+ke*_e)-Fe))+ke*(qe+ke*(Q+ke*Ke-qe)-U),Ne=($e=(Le=T+ke*oe)+ke*((me=Y+ke*ze)-Le))+ke*(me+ke*(fe+ke*He-me)-$e),we==0?(te=Ee,Ae=Ne,G=Ee,ve=Ne):(te=Math.min(te,Ee),Ae=Math.min(Ae,Ne),G=Math.max(G,Ee),ve=Math.max(ve,Ne));return new o(Math.round(te),Math.round(Ae),Math.round(G-te),Math.round(ve-Ae))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,T,I=(k=this.ctx.lineDash,T=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:T}));this.prevLineDash!==I&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=I)}}})(nt.API),function(n){var e=function(i){var a,o,c,u,d,f,g,p,y,v;for(o=[],c=0,u=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(d=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(v=d%85))/85)-(y=d%85))/85)-(p=d%85))/85)-(g=d%85))/85)%85,o.push(f+33,g+33,p+33,y+33,v+33)):o.push(122);return function(w,N){for(var P=N;P>0;P--)w.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(i){var a,o,c,u,d,f=String,g="length",p=255,y="charCodeAt",v="slice",w="replace";for(i[v](-2),i=i[v](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),c=[],u=0,d=(i+=a="uuuuu"[v](i[g]%5||5))[g];d>u;u+=5)o=52200625*(i[y](u)-33)+614125*(i[y](u+1)-33)+7225*(i[y](u+2)-33)+85*(i[y](u+3)-33)+(i[y](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(N,P){for(var M=P;M>0;M--)N.pop()}(c,a[g]),f.fromCharCode.apply(f,c)},r=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",c=0;c<i.length;c+=2)o+=String.fromCharCode("0x"+(i[c]+i[c+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=ih(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(i,a){var o=0,c=i||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(nt.API),function(n){n.loadFile=function(e,t,r){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,g=0,p=function(y){var v=y.length,w=[],N=String.fromCharCode;for(g=0;g<v;g+=1)w.push(N(255&y.charCodeAt(g)));return w.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(s,i,a)}catch{}return o}(e,t,r)},n.loadImageFile=n.loadFile}(nt.API),function(n){function e(){return(st.html2canvas?Promise.resolve(st.html2canvas):ks(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(st.DOMPurify?Promise.resolve(st.DOMPurify):ks(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Dt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},i=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:s("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||f.appendChild(c(g,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var p=u[g],y=p.src.find(function(v){return v.format==="truetype"});y&&c.addFont(y.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var c=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(c):c})},i.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},i.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=c.call(u,a,o);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(c){o=o.thenCore(c)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,nt.getPageSize=function(a,o,c){if(Dt(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,y=0,v=0;if(g.hasOwnProperty(f))y=g[f][1]/d,v=g[f][0]/d;else try{y=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",v>y&&(p=v,v=y,y=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",y>v&&(p=v,v=y,y=p)}return{width:v,height:y,unit:o,k:d,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(dh):null;var c=new i(o);return o.worker?c:c.from(a).doCallback()}}(nt.API),nt.API.addJS=function(n){return Hp=n,this.internal.events.subscribe("postPutResources",function(){vc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Hp+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vc!==void 0&&qp!==void 0&&this.internal.out("/Names <</JavaScript "+vc+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=r.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=t.internal.newObject();d.push(f);var g=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<d.length;i++)t.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(nt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,s,i,a,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(f){for(var g,p=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,v={width:0,height:0,numcomponents:1},w=4;w<y;w+=2){if(w+=p,e.indexOf(f.charCodeAt(w+1))!==-1){g=256*f.charCodeAt(w+5)+f.charCodeAt(w+6),v={width:256*f.charCodeAt(w+7)+f.charCodeAt(w+8),height:g,numcomponents:f.charCodeAt(w+9)};break}p=256*f.charCodeAt(w+2)+f.charCodeAt(w+3)}return v}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:s}}return d}}(nt.API);var Da,wc,Up,Wp,$p,q5=function(){var n,e,t;function r(i){var a,o,c,u,d,f,g,p,y,v,w,N,P,M;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),y=function(){var W,K;for(K=[],W=0;W<4;++W)K.push(String.fromCharCode(this.data[this.pos++]));return K}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,a-=4),i=f?.data||this.imgData,N=0;0<=a?N<a:N>a;0<=a?++N:--N)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(P=0;0<=v?P<v:P>v;0<=v?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(w=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,w.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,w.slice(g+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,g,p,y){var v,w,N,P,M,W,K,le,X,j,D,H,A,S,q,O,V,ee,B,Z,ne,de=Math.ceil((u.width-f)/p),xe=Math.ceil((u.height-g)/y),k=u.width==de&&u.height==xe;for(S=a*de,H=k?o:new Uint8Array(S*xe),W=i.length,A=0,w=0;A<xe&&c<W;){switch(i[c++]){case 0:for(P=V=0;V<S;P=V+=1)H[w++]=i[c++];break;case 1:for(P=ee=0;ee<S;P=ee+=1)v=i[c++],M=P<a?0:H[w-a],H[w++]=(v+M)%256;break;case 2:for(P=B=0;B<S;P=B+=1)v=i[c++],N=(P-P%a)/a,q=A&&H[(A-1)*S+N*a+P%a],H[w++]=(q+v)%256;break;case 3:for(P=Z=0;Z<S;P=Z+=1)v=i[c++],N=(P-P%a)/a,M=P<a?0:H[w-a],q=A&&H[(A-1)*S+N*a+P%a],H[w++]=(v+Math.floor((M+q)/2))%256;break;case 4:for(P=ne=0;ne<S;P=ne+=1)v=i[c++],N=(P-P%a)/a,M=P<a?0:H[w-a],A===0?q=O=0:(q=H[(A-1)*S+N*a+P%a],O=N&&H[(A-1)*S+(N-1)*a+P%a]),K=M+q-O,le=Math.abs(K-M),j=Math.abs(K-q),D=Math.abs(K-O),X=le<=j&&le<=D?M:j<=D?q:O,H[w++]=(v+X)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!k){var T=((g+A*y)*u.width+f)*a,I=A*S;for(P=0;P<de;P+=1){for(var Y=0;Y<a;Y+=1)o[T++]=H[I++];T+=(p-1)*a}}A++}}return i=y5(i),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var i,a,o,c,u,d,f,g,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,i=0,a=f=0,g=o.length;f<g;a=f+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(p=d[i++])!=null?p:255;return u},r.prototype.copyToImageData=function(i,a){var o,c,u,d,f,g,p,y,v,w,N;if(c=this.colors,v=null,o=this.hasAlphaChannel,this.palette.length&&(v=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),c=4,o=!0),y=(u=i.data||i).length,f=v||a,d=g=0,c===1)for(;d<y;)p=v?4*a[d/4]:g,w=f[p++],u[d++]=w,u[d++]=w,u[d++]=w,u[d++]=o?f[p++]:255,g=p;else for(;d<y;)p=v?4*a[d/4]:g,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,g=p},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(st)==="[object Window]"){try{e=st.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(i){var a;if(s()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var a,o,c,u,d,f,g,p;if(this.animation){for(p=[],o=d=0,f=(g=this.animation.frames).length;d<f;o=++d)a=g[o],c=i.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,p.push(a.image=n(c));return p}},r.prototype.renderFrame=function(i,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&i.clearRect(0,0,this.width,this.height),u?.disposeOp===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):u?.disposeOp===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(i){var a,o,c,u,d,f,g=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(a=function(){var p,y;if(p=o++%u,y=c[p],g.renderFrame(i,p),u>1&&o/u<d)return g.animation._timeout=setTimeout(a,y.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function H5(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,s=n[e++],i=s>>7,a=1<<(7&s)+1;n[e++],n[e++];var o=null,c=null;i&&(o=e,c=a,e+=3*a);var u=!0,d=[],f=0,g=null,p=0,y=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,y=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((A=n[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=n[e++];f=n[e++]|n[e++]<<8,g=n[e++],(1&v)==0&&(g=null),p=v>>2&7,e++;break;case 254:for(;;){if(!((A=n[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var w=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,M=n[e++]|n[e++]<<8,W=n[e++],K=W>>6&1,le=1<<(7&W)+1,X=o,j=c,D=!1;W>>7&&(D=!0,X=e,j=le,e+=3*le);var H=e;for(e++;;){var A;if(!((A=n[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}d.push({x:w,y:N,width:P,height:M,has_local_palette:D,palette_offset:X,palette_size:j,data_offset:H,data_length:e-H,transparent_index:g,interlaced:!!K,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,q){var O=this.frameInfo(S),V=O.width*O.height,ee=new Uint8Array(V);Vp(n,O.data_offset,ee,V);var B=O.palette_offset,Z=O.transparent_index;Z===null&&(Z=256);var ne=O.width,de=t-ne,xe=ne,k=4*(O.y*t+O.x),T=4*((O.y+O.height)*t+O.x),I=k,Y=4*de;O.interlaced===!0&&(Y+=4*t*7);for(var Q=8,fe=0,ce=ee.length;fe<ce;++fe){var ue=ee[fe];if(xe===0&&(xe=ne,(I+=Y)>=T&&(Y=4*de+4*t*(Q-1),I=k+(ne+de)*(Q<<1),Q>>=1)),ue===Z)I+=4;else{var ke=n[B+3*ue],we=n[B+3*ue+1],Fe=n[B+3*ue+2];q[I++]=Fe,q[I++]=we,q[I++]=ke,q[I++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(S,q){var O=this.frameInfo(S),V=O.width*O.height,ee=new Uint8Array(V);Vp(n,O.data_offset,ee,V);var B=O.palette_offset,Z=O.transparent_index;Z===null&&(Z=256);var ne=O.width,de=t-ne,xe=ne,k=4*(O.y*t+O.x),T=4*((O.y+O.height)*t+O.x),I=k,Y=4*de;O.interlaced===!0&&(Y+=4*t*7);for(var Q=8,fe=0,ce=ee.length;fe<ce;++fe){var ue=ee[fe];if(xe===0&&(xe=ne,(I+=Y)>=T&&(Y=4*de+4*t*(Q-1),I=k+(ne+de)*(Q<<1),Q>>=1)),ue===Z)I+=4;else{var ke=n[B+3*ue],we=n[B+3*ue+1],Fe=n[B+3*ue+2];q[I++]=ke,q[I++]=we,q[I++]=Fe,q[I++]=255}--xe}}}function Vp(n,e,t,r){for(var s=n[e++],i=1<<s,a=i+1,o=a+1,c=s+1,u=(1<<c)-1,d=0,f=0,g=0,p=n[e++],y=new Int32Array(4096),v=null;;){for(;d<16&&p!==0;)f|=n[e++]<<d,d+=8,p===1?p=n[e++]:--p;if(d<c)break;var w=f&u;if(f>>=c,d-=c,w!==i){if(w===a)break;for(var N=w<o?w:v,P=0,M=N;M>i;)M=y[M]>>8,++P;var W=M;if(g+P+(N!==w?1:0)>r)return void Tt.log("Warning, gif stream longer than expected.");t[g++]=W;var K=g+=P;for(N!==w&&(t[g++]=W),M=N;P--;)M=y[M],t[--K]=255&M,M>>=8;v!==null&&o<4096&&(y[o++]=v<<8|W,o>=u+1&&c<12&&(++c,u=u<<1|1)),v=w}else o=a+1,u=(1<<(c=s+1))-1,v=null}return g!==r&&Tt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Dd(n){var e,t,r,s,i,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),g=new Array(65535),p=new Array(64),y=new Array(64),v=[],w=0,N=7,P=new Array(64),M=new Array(64),W=new Array(64),K=new Array(256),le=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(k,T){for(var I=0,Y=0,Q=new Array,fe=1;fe<=16;fe++){for(var ce=1;ce<=k[fe];ce++)Q[T[Y]]=[],Q[T[Y]][0]=I,Q[T[Y]][1]=fe,Y++,I++;I*=2}return Q}function B(k){for(var T=k[0],I=k[1]-1;I>=0;)T&1<<I&&(w|=1<<N),I--,--N<0&&(w==255?(Z(255),Z(0)):Z(w),N=7,w=0)}function Z(k){v.push(k)}function ne(k){Z(k>>8&255),Z(255&k)}function de(k,T,I,Y,Q){for(var fe,ce=Q[0],ue=Q[240],ke=function(Ne,te){var Ae,G,ve,Be,oe,_e,ze,Ke,He,Ge,Pe=0;for(He=0;He<8;++He){Ae=Ne[Pe],G=Ne[Pe+1],ve=Ne[Pe+2],Be=Ne[Pe+3],oe=Ne[Pe+4],_e=Ne[Pe+5],ze=Ne[Pe+6];var ot=Ae+(Ke=Ne[Pe+7]),tt=Ae-Ke,Ft=G+ze,ut=G-ze,wt=ve+_e,ar=ve-_e,yt=Be+oe,Rr=Be-oe,Ut=ot+yt,Ln=ot-yt,Qn=Ft+wt,Wt=Ft-wt;Ne[Pe]=Ut+Qn,Ne[Pe+4]=Ut-Qn;var it=.707106781*(Wt+Ln);Ne[Pe+2]=Ln+it,Ne[Pe+6]=Ln-it;var _t=.382683433*((Ut=Rr+ar)-(Wt=ut+tt)),Ce=.5411961*Ut+_t,Ue=1.306562965*Wt+_t,Ze=.707106781*(Qn=ar+ut),Nt=tt+Ze,Xe=tt-Ze;Ne[Pe+5]=Xe+Ce,Ne[Pe+3]=Xe-Ce,Ne[Pe+1]=Nt+Ue,Ne[Pe+7]=Nt-Ue,Pe+=8}for(Pe=0,He=0;He<8;++He){Ae=Ne[Pe],G=Ne[Pe+8],ve=Ne[Pe+16],Be=Ne[Pe+24],oe=Ne[Pe+32],_e=Ne[Pe+40],ze=Ne[Pe+48];var Yt=Ae+(Ke=Ne[Pe+56]),or=Ae-Ke,Kt=G+ze,en=G-ze,dn=ve+_e,Zn=ve-_e,$i=Be+oe,is=Be-oe,_r=Yt+$i,Nr=Yt-$i,jr=Kt+dn,Br=Kt-dn;Ne[Pe]=_r+jr,Ne[Pe+32]=_r-jr;var lr=.707106781*(Br+Nr);Ne[Pe+16]=Nr+lr,Ne[Pe+48]=Nr-lr;var zr=.382683433*((_r=is+Zn)-(Br=en+or)),oi=.5411961*_r+zr,Vi=1.306562965*Br+zr,Gi=.707106781*(jr=Zn+en),Yi=or+Gi,Ki=or-Gi;Ne[Pe+40]=Ki+oi,Ne[Pe+24]=Ki-oi,Ne[Pe+8]=Yi+Vi,Ne[Pe+56]=Yi-Vi,Pe++}for(He=0;He<64;++He)Ge=Ne[He]*te[He],p[He]=Ge>0?Ge+.5|0:Ge-.5|0;return p}(k,T),we=0;we<64;++we)y[X[we]]=ke[we];var Fe=y[0]-I;I=y[0],Fe==0?B(Y[0]):(B(Y[g[fe=32767+Fe]]),B(f[fe]));for(var Le=63;Le>0&&y[Le]==0;)Le--;if(Le==0)return B(ce),I;for(var qe,me=1;me<=Le;){for(var U=me;y[me]==0&&me<=Le;)++me;var $e=me-U;if($e>=16){qe=$e>>4;for(var Ee=1;Ee<=qe;++Ee)B(ue);$e&=15}fe=32767+y[me],B(Q[($e<<4)+g[fe]]),B(f[fe]),me++}return Le!=63&&B(ce),I}function xe(k){k=Math.min(Math.max(k,1),100),i!=k&&(function(T){for(var I=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var Q=a((I[Y]*T+50)/100);Q=Math.min(Math.max(Q,1),255),o[X[Y]]=Q}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var ue=a((fe[ce]*T+50)/100);ue=Math.min(Math.max(ue,1),255),c[X[ce]]=ue}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Fe=0;Fe<8;Fe++)for(var Le=0;Le<8;Le++)u[we]=1/(o[X[we]]*ke[Fe]*ke[Le]*8),d[we]=1/(c[X[we]]*ke[Fe]*ke[Le]*8),we++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,T){T&&xe(T),v=new Array,w=0,N=7,ne(65496),ne(65504),ne(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),ne(1),ne(1),Z(0),Z(0),function(){ne(65499),ne(132),Z(0);for(var G=0;G<64;G++)Z(o[G]);Z(1);for(var ve=0;ve<64;ve++)Z(c[ve])}(),function(G,ve){ne(65472),ne(17),Z(8),ne(ve),ne(G),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(k.width,k.height),function(){ne(65476),ne(418),Z(0);for(var G=0;G<16;G++)Z(j[G+1]);for(var ve=0;ve<=11;ve++)Z(D[ve]);Z(16);for(var Be=0;Be<16;Be++)Z(H[Be+1]);for(var oe=0;oe<=161;oe++)Z(A[oe]);Z(1);for(var _e=0;_e<16;_e++)Z(S[_e+1]);for(var ze=0;ze<=11;ze++)Z(q[ze]);Z(17);for(var Ke=0;Ke<16;Ke++)Z(O[Ke+1]);for(var He=0;He<=161;He++)Z(V[He])}(),ne(65498),ne(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var I=0,Y=0,Q=0;w=0,N=7,this.encode.displayName="_encode_";for(var fe,ce,ue,ke,we,Fe,Le,qe,me,U=k.data,$e=k.width,Ee=k.height,Ne=4*$e,te=0;te<Ee;){for(fe=0;fe<Ne;){for(we=Ne*te+fe,Le=-1,qe=0,me=0;me<64;me++)Fe=we+(qe=me>>3)*Ne+(Le=4*(7&me)),te+qe>=Ee&&(Fe-=Ne*(te+1+qe-Ee)),fe+Le>=Ne&&(Fe-=fe+Le-Ne+4),ce=U[Fe++],ue=U[Fe++],ke=U[Fe++],P[me]=(le[ce]+le[ue+256>>0]+le[ke+512>>0]>>16)-128,M[me]=(le[ce+768>>0]+le[ue+1024>>0]+le[ke+1280>>0]>>16)-128,W[me]=(le[ce+1280>>0]+le[ue+1536>>0]+le[ke+1792>>0]>>16)-128;I=de(P,u,I,e,r),Y=de(M,d,Y,t,s),Q=de(W,d,Q,t,s),fe+=32}te+=8}if(N>=0){var Ae=[];Ae[1]=N+1,Ae[0]=(1<<N+1)-1,B(Ae)}return ne(65497),new Uint8Array(v)},n=n||50,function(){for(var k=String.fromCharCode,T=0;T<256;T++)K[T]=k(T)}(),e=ee(j,D),t=ee(S,q),r=ee(H,A),s=ee(O,V),function(){for(var k=1,T=2,I=1;I<=15;I++){for(var Y=k;Y<T;Y++)g[32767+Y]=I,f[32767+Y]=[],f[32767+Y][1]=I,f[32767+Y][0]=Y;for(var Q=-(T-1);Q<=-k;Q++)g[32767+Q]=I,f[32767+Q]=[],f[32767+Q][1]=I,f[32767+Q][0]=T-1+Q;k<<=1,T<<=1}}(),function(){for(var k=0;k<256;k++)le[k]=19595*k,le[k+256>>0]=38470*k,le[k+512>>0]=7471*k+32768,le[k+768>>0]=-11059*k,le[k+1024>>0]=-21709*k,le[k+1280>>0]=32768*k+8421375,le[k+1536>>0]=-27439*k,le[k+1792>>0]=-5329*k}(),xe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Mr(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Gp(n){function e(j){if(!j)throw Error("assert :P")}function t(j,D,H){for(var A=0;4>A;A++)if(j[D+A]!=H.charCodeAt(A))return!0;return!1}function r(j,D,H,A,S){for(var q=0;q<S;q++)j[D+q]=H[A+q]}function s(j,D,H,A){for(var S=0;S<A;S++)j[D+S]=H}function i(j){return new Int32Array(j)}function a(j,D){for(var H=[],A=0;A<j;A++)H.push(new D);return H}function o(j,D){var H=[];return function A(S,q,O){for(var V=O[q],ee=0;ee<V&&(S.push(O.length>q+1?[]:new D),!(O.length<q+1));ee++)A(S[ee],q+1,O)}(H,0,j),H}var c=function(){var j=this;function D(h,m){for(var b=1<<m-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function H(h,m,b,_,L){e(!(_%b));do h[m+(_-=b)]=L;while(0<_)}function A(h,m,b,_,L){if(e(2328>=L),512>=L)var E=i(512);else if((E=i(L))==null)return 0;return function(F,R,z,$,ie,be){var ye,pe,Oe=R,je=1<<z,ae=i(16),he=i(16);for(e(ie!=0),e($!=null),e(F!=null),e(0<z),pe=0;pe<ie;++pe){if(15<$[pe])return 0;++ae[$[pe]]}if(ae[0]==ie)return 0;for(he[1]=0,ye=1;15>ye;++ye){if(ae[ye]>1<<ye)return 0;he[ye+1]=he[ye]+ae[ye]}for(pe=0;pe<ie;++pe)ye=$[pe],0<$[pe]&&(be[he[ye]++]=pe);if(he[15]==1)return($=new S).g=0,$.value=be[0],H(F,Oe,1,je,$),je;var De,Ie=-1,Me=je-1,Je=0,We=1,rt=1,Ve=1<<z;for(pe=0,ye=1,ie=2;ye<=z;++ye,ie<<=1){if(We+=rt<<=1,0>(rt-=ae[ye]))return 0;for(;0<ae[ye];--ae[ye])($=new S).g=ye,$.value=be[pe++],H(F,Oe+Je,ie,Ve,$),Je=D(Je,ye)}for(ye=z+1,ie=2;15>=ye;++ye,ie<<=1){if(We+=rt<<=1,0>(rt-=ae[ye]))return 0;for(;0<ae[ye];--ae[ye]){if($=new S,(Je&Me)!=Ie){for(Oe+=Ve,De=1<<(Ie=ye)-z;15>Ie&&!(0>=(De-=ae[Ie]));)++Ie,De<<=1;je+=Ve=1<<(De=Ie-z),F[R+(Ie=Je&Me)].g=De+z,F[R+Ie].value=Oe-R-Ie}$.g=ye-z,$.value=be[pe++],H(F,Oe+(Je>>z),ie,Ve,$),Je=D(Je,ye)}}return We!=2*he[15]-1?0:je}(h,m,b,_,L,E)}function S(){this.value=this.g=0}function q(){this.value=this.g=0}function O(){this.G=a(5,S),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Sn,q)}function V(h,m,b,_){e(h!=null),e(m!=null),e(2147483648>_),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=b,h.Jd=m,h.Yc=b+_,h.Zc=4<=_?b+_-4+1:b,fe(h)}function ee(h,m){for(var b=0;0<m--;)b|=ue(h,128)<<m;return b}function B(h,m){var b=ee(h,m);return ce(h)?-b:b}function Z(h,m,b,_){var L,E=0;for(e(h!=null),e(m!=null),e(4294967288>_),h.Sb=_,h.Ra=0,h.u=0,h.h=0,4<_&&(_=4),L=0;L<_;++L)E+=m[b+L]<<8*L;h.Ra=E,h.bb=_,h.oa=m,h.pa=b}function ne(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ua-8>>>0,++h.bb,h.u-=8;I(h)&&(h.h=1,h.u=0)}function de(h,m){if(e(0<=m),!h.h&&m<=ca){var b=T(h)&la[m];return h.u+=m,ne(h),b}return h.h=1,h.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function T(h){return h.Ra>>>(h.u&ua-1)>>>0}function I(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ua}function Y(h,m){h.u=m,h.h=I(h)}function Q(h){h.u>=yo&&(e(h.u>=yo),ne(h))}function fe(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ce(h){return ee(h,1)}function ue(h,m){var b=h.Ca;0>h.b&&fe(h);var _=h.b,L=b*m>>>8,E=(h.I>>>_>L)+0;for(E?(b-=L,h.I-=L+1<<_>>>0):b=L+1,_=b,L=0;256<=_;)L+=8,_>>=8;return _=7^L+Wn[_],h.b-=_,h.Ca=(b<<_)-1,E}function ke(h,m,b){h[m+0]=b>>24&255,h[m+1]=b>>16&255,h[m+2]=b>>8&255,h[m+3]=b>>0&255}function we(h,m){return h[m+0]<<0|h[m+1]<<8}function Fe(h,m){return we(h,m)|h[m+2]<<16}function Le(h,m){return we(h,m)|we(h,m+2)<<16}function qe(h,m){var b=1<<m;return e(h!=null),e(0<m),h.X=i(b),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function me(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function U(){this.X=[],this.Xa=this.Mb=0}function $e(h,m,b,_){e(b!=null),e(_!=null);var L=b[0],E=_[0];return L==0&&(L=(h*E+m/2)/m),E==0&&(E=(m*L+h/2)/h),0>=L||0>=E?0:(b[0]=L,_[0]=E,1)}function Ee(h,m){return h+(1<<m)-1>>>m}function Ne(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function te(h,m){j[m]=function(b,_,L,E,F,R,z){var $;for($=0;$<F;++$){var ie=j[h](R[z+$-1],L,E+$);R[z+$]=Ne(b[_+$],ie)}}}function Ae(){this.ud=this.hd=this.jd=0}function G(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function ve(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Be(h,m){return ve(h+(h-m+.5>>1))}function oe(h,m,b){return Math.abs(m-b)-Math.abs(h-b)}function _e(h,m,b,_,L,E,F){for(_=E[F-1],b=0;b<L;++b)E[F+b]=_=Ne(h[m+b],_)}function ze(h,m,b,_,L){var E;for(E=0;E<b;++E){var F=h[m+E],R=F>>8&255,z=16711935&(z=(z=16711935&F)+((R<<16)+R));_[L+E]=(4278255360&F)+z>>>0}}function Ke(h,m){m.jd=h>>0&255,m.hd=h>>8&255,m.ud=h>>16&255}function He(h,m,b,_,L,E){var F;for(F=0;F<_;++F){var R=m[b+F],z=R>>>8,$=R,ie=255&(ie=(ie=R>>>16)+((h.jd<<24>>24)*(z<<24>>24)>>>5));$=255&($=($=$+((h.hd<<24>>24)*(z<<24>>24)>>>5))+((h.ud<<24>>24)*(ie<<24>>24)>>>5)),L[E+F]=(4278255360&R)+(ie<<16)+$}}function Ge(h,m,b,_,L){j[m]=function(E,F,R,z,$,ie,be,ye,pe){for(z=be;z<ye;++z)for(be=0;be<pe;++be)$[ie++]=L(R[_(E[F++])])},j[h]=function(E,F,R,z,$,ie,be){var ye=8>>E.b,pe=E.Ea,Oe=E.K[0],je=E.w;if(8>ye)for(E=(1<<E.b)-1,je=(1<<ye)-1;F<R;++F){var ae,he=0;for(ae=0;ae<pe;++ae)ae&E||(he=_(z[$++])),ie[be++]=L(Oe[he&je]),he>>=ye}else j["VP8LMapColor"+b](z,$,Oe,je,ie,be,F,R,pe)}}function Pe(h,m,b,_,L){for(b=m+b;m<b;){var E=h[m++];_[L++]=E>>16&255,_[L++]=E>>8&255,_[L++]=E>>0&255}}function ot(h,m,b,_,L){for(b=m+b;m<b;){var E=h[m++];_[L++]=E>>16&255,_[L++]=E>>8&255,_[L++]=E>>0&255,_[L++]=E>>24&255}}function tt(h,m,b,_,L){for(b=m+b;m<b;){var E=(F=h[m++])>>16&240|F>>12&15,F=F>>0&240|F>>28&15;_[L++]=E,_[L++]=F}}function Ft(h,m,b,_,L){for(b=m+b;m<b;){var E=(F=h[m++])>>16&248|F>>13&7,F=F>>5&224|F>>3&31;_[L++]=E,_[L++]=F}}function ut(h,m,b,_,L){for(b=m+b;m<b;){var E=h[m++];_[L++]=E>>0&255,_[L++]=E>>8&255,_[L++]=E>>16&255}}function wt(h,m,b,_,L,E){if(E==0)for(b=m+b;m<b;)ke(_,((E=h[m++])[0]>>24|E[1]>>8&65280|E[2]<<8&16711680|E[3]<<24)>>>0),L+=32;else r(_,L,h,m,b)}function ar(h,m){j[m][0]=j[h+"0"],j[m][1]=j[h+"1"],j[m][2]=j[h+"2"],j[m][3]=j[h+"3"],j[m][4]=j[h+"4"],j[m][5]=j[h+"5"],j[m][6]=j[h+"6"],j[m][7]=j[h+"7"],j[m][8]=j[h+"8"],j[m][9]=j[h+"9"],j[m][10]=j[h+"10"],j[m][11]=j[h+"11"],j[m][12]=j[h+"12"],j[m][13]=j[h+"13"],j[m][14]=j[h+"0"],j[m][15]=j[h+"0"]}function yt(h){return h==Wu||h==$u||h==Gl||h==Vu}function Rr(){this.eb=[],this.size=this.A=this.fb=0}function Ut(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ln(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rr,this.f.kb=new Ut,this.sd=null}function Qn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function it(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function _t(h,m){var b=h.T,_=m.ba.f.RGBA,L=_.eb,E=_.fb+h.ka*_.A,F=pr[m.ba.S],R=h.y,z=h.O,$=h.f,ie=h.N,be=h.ea,ye=h.W,pe=m.cc,Oe=m.dc,je=m.Mc,ae=m.Nc,he=h.ka,De=h.ka+h.T,Ie=h.U,Me=Ie+1>>1;for(he==0?F(R,z,null,null,$,ie,be,ye,$,ie,be,ye,L,E,null,null,Ie):(F(m.ec,m.fc,R,z,pe,Oe,je,ae,$,ie,be,ye,L,E-_.A,L,E,Ie),++b);he+2<De;he+=2)pe=$,Oe=ie,je=be,ae=ye,ie+=h.Rc,ye+=h.Rc,E+=2*_.A,F(R,(z+=2*h.fa)-h.fa,R,z,pe,Oe,je,ae,$,ie,be,ye,L,E-_.A,L,E,Ie);return z+=h.fa,h.j+De<h.o?(r(m.ec,m.fc,R,z,Ie),r(m.cc,m.dc,$,ie,Me),r(m.Mc,m.Nc,be,ye,Me),b--):1&De||F(R,z,null,null,$,ie,be,ye,$,ie,be,ye,L,E+_.A,null,null,Ie),b}function Ce(h,m,b){var _=h.F,L=[h.J];if(_!=null){var E=h.U,F=m.ba.S,R=F==Vl||F==Gl;m=m.ba.f.RGBA;var z=[0],$=h.ka;z[0]=h.T,h.Kb&&($==0?--z[0]:(--$,L[0]-=h.width),h.j+h.ka+h.T==h.o&&(z[0]=h.o-h.j-$));var ie=m.eb;$=m.fb+$*m.A,h=Rt(_,L[0],h.width,E,z,ie,$+(R?0:3),m.A),e(b==z),h&&yt(F)&&hr(ie,$,R,E,z,m.A)}return 0}function Ue(h){var m=h.ma,b=m.ba.S,_=11>b,L=b==Wl||b==$l||b==Vl||b==Uu||b==12||yt(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!xo(m.Oa,h,L?11:12))return 0;if(L&&yt(b)&&Re(),h.da)alert("todo:use_scaling");else{if(_){if(m.Ib=it,h.Kb){if(b=h.U+1>>1,m.memory=i(h.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=_t,Re()}}else alert("todo:EmitYUV");L&&(m.Jb=Ce,_&&ge())}if(_&&!gf){for(h=0;256>h;++h)sx[h]=89858*(h-128)+Kl>>Yl,ox[h]=-22014*(h-128)+Kl,ax[h]=-45773*(h-128),ix[h]=113618*(h-128)+Kl>>Yl;for(h=So;h<Ku;++h)m=76283*(h-16)+Kl>>Yl,lx[h-So]=er(m,255),cx[h-So]=er(m+8>>4,15);gf=1}return 1}function Ze(h){var m=h.ma,b=h.U,_=h.T;return e(!(1&h.ka)),0>=b||0>=_?0:(b=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,b),m.Dc+=b,1)}function Nt(h){h.ma.memory=null}function Xe(h,m,b,_){return de(h,8)!=47?0:(m[0]=de(h,14)+1,b[0]=de(h,14)+1,_[0]=de(h,1),de(h,3)!=0?0:!h.h)}function Yt(h,m){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+de(m,b)+1}function or(h,m){return 120<m?m-120:1<=(b=((b=W1[m-1])>>4)*h+(8-(15&b)))?b:1;var b}function Kt(h,m,b){var _=T(b),L=h[m+=255&_].g-8;return 0<L&&(Y(b,b.u+8),_=T(b),m+=h[m].value,m+=_&(1<<L)-1),Y(b,b.u+h[m].g),h[m].value}function en(h,m,b){return b.g+=h.g,b.value+=h.value<<m>>>0,e(8>=b.g),h.g}function dn(h,m,b){var _=h.xc;return e((m=_==0?0:h.vc[h.md*(b>>_)+(m>>_)])<h.Wb),h.Ya[m]}function Zn(h,m,b,_){var L=h.ab,E=h.c*m,F=h.C;m=F+m;var R=b,z=_;for(_=h.Ta,b=h.Ua;0<L--;){var $=h.gc[L],ie=F,be=m,ye=R,pe=z,Oe=(z=_,R=b,$.Ea);switch(e(ie<be),e(be<=$.nc),$.hc){case 2:Il(ye,pe,(be-ie)*Oe,z,R);break;case 0:var je=ie,ae=be,he=z,De=R,Ie=(Ve=$).Ea;je==0&&(qu(ye,pe,null,null,1,he,De),_e(ye,pe+1,0,0,Ie-1,he,De+1),pe+=Ie,De+=Ie,++je);for(var Me=1<<Ve.b,Je=Me-1,We=Ee(Ie,Ve.b),rt=Ve.K,Ve=Ve.w+(je>>Ve.b)*We;je<ae;){var jt=rt,At=Ve,vt=1;for(vo(ye,pe,he,De-Ie,1,he,De);vt<Ie;){var mt=(vt&~Je)+Me;mt>Ie&&(mt=Ie),(0,Ds[jt[At++]>>8&15])(ye,pe+ +vt,he,De+vt-Ie,mt-vt,he,De+vt),vt=mt}pe+=Ie,De+=Ie,++je&Je||(Ve+=We)}be!=$.nc&&r(z,R-Oe,z,R+(be-ie-1)*Oe,Oe);break;case 1:for(Oe=ye,ae=pe,Ie=(ye=$.Ea)-(De=ye&~(he=(pe=1<<$.b)-1)),je=Ee(ye,$.b),Me=$.K,$=$.w+(ie>>$.b)*je;ie<be;){for(Je=Me,We=$,rt=new Ae,Ve=ae+De,jt=ae+ye;ae<Ve;)Ke(Je[We++],rt),hi(rt,Oe,ae,pe,z,R),ae+=pe,R+=pe;ae<jt&&(Ke(Je[We++],rt),hi(rt,Oe,ae,Ie,z,R),ae+=Ie,R+=Ie),++ie&he||($+=je)}break;case 3:if(ye==z&&pe==R&&0<$.b){for(ae=z,ye=Oe=R+(be-ie)*Oe-(De=(be-ie)*Ee($.Ea,$.b)),pe=z,he=R,je=[],De=(Ie=De)-1;0<=De;--De)je[De]=pe[he+De];for(De=Ie-1;0<=De;--De)ae[ye+De]=je[De];cr($,ie,be,z,Oe,z,R)}else cr($,ie,be,ye,pe,z,R)}R=_,z=b}z!=b&&r(_,b,R,z,E)}function $i(h,m){var b=h.V,_=h.Ba+h.c*h.C,L=m-h.C;if(e(m<=h.l.o),e(16>=L),0<L){var E=h.l,F=h.Ta,R=h.Ua,z=E.width;if(Zn(h,L,b,_),L=R=[R],e((b=h.C)<(_=m)),e(E.v<E.va),_>E.o&&(_=E.o),b<E.j){var $=E.j-b;b=E.j,L[0]+=$*z}if(b>=_?b=0:(L[0]+=4*E.v,E.ka=b-E.j,E.U=E.va-E.v,E.T=_-b,b=1),b){if(R=R[0],11>(b=h.ca).S){var ie=b.f.RGBA,be=(_=b.S,L=E.U,E=E.T,$=ie.eb,ie.A),ye=E;for(ie=ie.fb+h.Ma*ie.A;0<ye--;){var pe=F,Oe=R,je=L,ae=$,he=ie;switch(_){case Ul:$n(pe,Oe,je,ae,he);break;case Wl:Bn(pe,Oe,je,ae,he);break;case Wu:Bn(pe,Oe,je,ae,he),hr(ae,he,0,je,1,0);break;case of:cs(pe,Oe,je,ae,he);break;case $l:wt(pe,Oe,je,ae,he,1);break;case $u:wt(pe,Oe,je,ae,he,1),hr(ae,he,0,je,1,0);break;case Vl:wt(pe,Oe,je,ae,he,0);break;case Gl:wt(pe,Oe,je,ae,he,0),hr(ae,he,1,je,1,0);break;case Uu:Ms(pe,Oe,je,ae,he);break;case Vu:Ms(pe,Oe,je,ae,he),It(ae,he,je,1,0);break;case lf:ls(pe,Oe,je,ae,he);break;default:e(0)}R+=z,ie+=be}h.Ma+=E}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=b.height)}}h.C=m,e(h.C<=h.i)}function is(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var b=h.Ya[m].G,_=h.Ya[m].H;if(0<b[1][_[1]+0].g||0<b[2][_[2]+0].g||0<b[3][_[3]+0].g)return 0}return 1}function _r(h,m,b,_,L,E){if(h.Z!=0){var F=h.qd,R=h.rd;for(e(Fs[h.Z]!=null);m<b;++m)Fs[h.Z](F,R,_,L,_,L,E),F=_,R=L,L+=E;h.qd=F,h.rd=R}}function Nr(h,m){var b=h.l.ma,_=b.Z==0||b.Z==1?h.l.j:h.C;if(_=h.C<_?_:h.C,e(m<=h.l.o),m>_){var L=h.l.width,E=b.ca,F=b.tb+L*_,R=h.V,z=h.Ba+h.c*_,$=h.gc;e(h.ab==1),e($[0].hc==3),Rl($[0],_,m,R,z,E,F),_r(b,_,m,E,F,L)}h.C=h.Ma=m}function jr(h,m,b,_,L,E,F){var R=h.$/_,z=h.$%_,$=h.m,ie=h.s,be=b+h.$,ye=be;L=b+_*L;var pe=b+_*E,Oe=280+ie.ua,je=h.Pb?R:16777216,ae=0<ie.ua?ie.Wa:null,he=ie.wc,De=be<pe?dn(ie,z,R):null;e(h.C<E),e(pe<=L);var Ie=!1;e:for(;;){for(;Ie||be<pe;){var Me=0;if(R>=je){var Je=be-b;e((je=h).Pb),je.wd=je.m,je.xd=Je,0<je.s.ua&&me(je.s.Wa,je.s.vb),je=R+V1}if(z&he||(De=dn(ie,z,R)),e(De!=null),De.Qb&&(m[be]=De.qb,Ie=!0),!Ie)if(Q($),De.jc){Me=$,Je=m;var We=be,rt=De.pd[T(Me)&Sn-1];e(De.jc),256>rt.g?(Y(Me,Me.u+rt.g),Je[We]=rt.value,Me=0):(Y(Me,Me.u+rt.g-256),e(256<=rt.value),Me=rt.value),Me==0&&(Ie=!0)}else Me=Kt(De.G[0],De.H[0],$);if($.h)break;if(Ie||256>Me){if(!Ie)if(De.nd)m[be]=(De.qb|Me<<8)>>>0;else{if(Q($),Ie=Kt(De.G[1],De.H[1],$),Q($),Je=Kt(De.G[2],De.H[2],$),We=Kt(De.G[3],De.H[3],$),$.h)break;m[be]=(We<<24|Ie<<16|Me<<8|Je)>>>0}if(Ie=!1,++be,++z>=_&&(z=0,++R,F!=null&&R<=E&&!(R%16)&&F(h,R),ae!=null))for(;ye<be;)Me=m[ye++],ae.X[(506832829*Me&4294967295)>>>ae.Mb]=Me}else if(280>Me){if(Me=Yt(Me-256,$),Je=Kt(De.G[4],De.H[4],$),Q($),Je=or(_,Je=Yt(Je,$)),$.h)break;if(be-b<Je||L-be<Me)break e;for(We=0;We<Me;++We)m[be+We]=m[be+We-Je];for(be+=Me,z+=Me;z>=_;)z-=_,++R,F!=null&&R<=E&&!(R%16)&&F(h,R);if(e(be<=L),z&he&&(De=dn(ie,z,R)),ae!=null)for(;ye<be;)Me=m[ye++],ae.X[(506832829*Me&4294967295)>>>ae.Mb]=Me}else{if(!(Me<Oe))break e;for(Ie=Me-280,e(ae!=null);ye<be;)Me=m[ye++],ae.X[(506832829*Me&4294967295)>>>ae.Mb]=Me;Me=be,e(!(Ie>>>(Je=ae).Xa)),m[Me]=Je.X[Ie],Ie=!0}Ie||e($.h==I($))}if(h.Pb&&$.h&&be<L)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&me(h.s.vb,h.s.Wa);else{if($.h)break e;F?.(h,R>E?E:R),h.a=0,h.$=be-b}return 1}return h.a=3,0}function Br(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function lr(){var h=new zu;return h==null?null:(h.a=0,h.xb=df,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Il=ze,hi=He,$n=Pe,Bn=ot,Ms=tt,ls=Ft,cs=ut,j.VP8LMapColor32b=da,j.VP8LMapColor8b=Bl,h)}function zr(h,m,b,_,L){var E=1,F=[h],R=[m],z=_.m,$=_.s,ie=null,be=0;e:for(;;){if(b)for(;E&&de(z,1);){var ye=F,pe=R,Oe=_,je=1,ae=Oe.m,he=Oe.gc[Oe.ab],De=de(ae,2);if(Oe.Oc&1<<De)E=0;else{switch(Oe.Oc|=1<<De,he.hc=De,he.Ea=ye[0],he.nc=pe[0],he.K=[null],++Oe.ab,e(4>=Oe.ab),De){case 0:case 1:he.b=de(ae,3)+2,je=zr(Ee(he.Ea,he.b),Ee(he.nc,he.b),0,Oe,he.K),he.K=he.K[0];break;case 3:var Ie,Me=de(ae,8)+1,Je=16<Me?0:4<Me?1:2<Me?2:3;if(ye[0]=Ee(he.Ea,Je),he.b=Je,Ie=je=zr(Me,1,0,Oe,he.K)){var We,rt=Me,Ve=he,jt=1<<(8>>Ve.b),At=i(jt);if(At==null)Ie=0;else{var vt=Ve.K[0],mt=Ve.w;for(At[0]=Ve.K[0][0],We=1;We<1*rt;++We)At[We]=Ne(vt[mt+We],At[We-1]);for(;We<4*jt;++We)At[We]=0;Ve.K[0]=null,Ve.K[0]=At,Ie=1}}je=Ie;break;case 2:break;default:e(0)}E=je}}if(F=F[0],R=R[0],E&&de(z,1)&&!(E=1<=(be=de(z,4))&&11>=be)){_.a=3;break e}var Et;if(Et=E)t:{var Mt,ht,fn,Vn=_,pn=F,Gn=R,Lt=be,nr=b,rr=Vn.m,bn=Vn.s,An=[null],qn=1,mr=0,Wr=$1[Lt];n:for(;;){if(nr&&de(rr,1)){var yn=de(rr,3)+2,fs=Ee(pn,yn),xi=Ee(Gn,yn),ga=fs*xi;if(!zr(fs,xi,0,Vn,An))break n;for(An=An[0],bn.xc=yn,Mt=0;Mt<ga;++Mt){var Is=An[Mt]>>8&65535;An[Mt]=Is,Is>=qn&&(qn=Is+1)}}if(rr.h)break n;for(ht=0;5>ht;++ht){var Xt=cf[ht];!ht&&0<Lt&&(Xt+=1<<Lt),mr<Xt&&(mr=Xt)}var Ju=a(qn*Wr,S),yf=qn,vf=a(yf,O);if(vf==null)var Xl=null;else e(65536>=yf),Xl=vf;var Ao=i(mr);if(Xl==null||Ao==null||Ju==null){Vn.a=1;break n}var Ql=Ju;for(Mt=fn=0;Mt<qn;++Mt){var Cr=Xl[Mt],xa=Cr.G,ba=Cr.H,wf=0,Zl=1,_f=0;for(ht=0;5>ht;++ht){Xt=cf[ht],xa[ht]=Ql,ba[ht]=fn,!ht&&0<Lt&&(Xt+=1<<Lt);s:{var ec,Xu=Xt,tc=Vn,Lo=Ao,hx=Ql,fx=fn,Qu=0,Rs=tc.m,px=de(Rs,1);if(s(Lo,0,0,Xu),px){var mx=de(Rs,1)+1,gx=de(Rs,1),Nf=de(Rs,gx==0?1:8);Lo[Nf]=1,mx==2&&(Lo[Nf=de(Rs,8)]=1);var nc=1}else{var jf=i(19),kf=de(Rs,4)+4;if(19<kf){tc.a=3;var rc=0;break s}for(ec=0;ec<kf;++ec)jf[U1[ec]]=de(Rs,3);var Zu=void 0,Co=void 0,Sf=tc,xx=jf,sc=Xu,Af=Lo,ed=0,Bs=Sf.m,Lf=8,Cf=a(128,S);r:for(;A(Cf,0,7,xx,19);){if(de(Bs,1)){var bx=2+2*de(Bs,3);if((Zu=2+de(Bs,bx))>sc)break r}else Zu=sc;for(Co=0;Co<sc&&Zu--;){Q(Bs);var Pf=Cf[0+(127&T(Bs))];Y(Bs,Bs.u+Pf.g);var ya=Pf.value;if(16>ya)Af[Co++]=ya,ya!=0&&(Lf=ya);else{var yx=ya==16,Df=ya-16,vx=q1[Df],Mf=de(Bs,z1[Df])+vx;if(Co+Mf>sc)break r;for(var wx=yx?Lf:0;0<Mf--;)Af[Co++]=wx}}ed=1;break r}ed||(Sf.a=3),nc=ed}(nc=nc&&!Rs.h)&&(Qu=A(hx,fx,8,Lo,Xu)),nc&&Qu!=0?rc=Qu:(tc.a=3,rc=0)}if(rc==0)break n;if(Zl&&H1[ht]==1&&(Zl=Ql[fn].g==0),wf+=Ql[fn].g,fn+=rc,3>=ht){var Po,td=Ao[0];for(Po=1;Po<Xt;++Po)Ao[Po]>td&&(td=Ao[Po]);_f+=td}}if(Cr.nd=Zl,Cr.Qb=0,Zl&&(Cr.qb=(xa[3][ba[3]+0].value<<24|xa[1][ba[1]+0].value<<16|xa[2][ba[2]+0].value)>>>0,wf==0&&256>xa[0][ba[0]+0].value&&(Cr.Qb=1,Cr.qb+=xa[0][ba[0]+0].value<<8)),Cr.jc=!Cr.Qb&&6>_f,Cr.jc){var ic,ps=Cr;for(ic=0;ic<Sn;++ic){var zs=ic,qs=ps.pd[zs],ac=ps.G[0][ps.H[0]+zs];256<=ac.value?(qs.g=ac.g+256,qs.value=ac.value):(qs.g=0,qs.value=0,zs>>=en(ac,8,qs),zs>>=en(ps.G[1][ps.H[1]+zs],16,qs),zs>>=en(ps.G[2][ps.H[2]+zs],0,qs),en(ps.G[3][ps.H[3]+zs],24,qs))}}}bn.vc=An,bn.Wb=qn,bn.Ya=Xl,bn.yc=Ju,Et=1;break t}Et=0}if(!(E=Et)){_.a=3;break e}if(0<be){if($.ua=1<<be,!qe($.Wa,be)){_.a=1,E=0;break e}}else $.ua=0;var nd=_,Of=F,_x=R,rd=nd.s,sd=rd.xc;if(nd.c=Of,nd.i=_x,rd.md=Ee(Of,sd),rd.wc=sd==0?-1:(1<<sd)-1,b){_.xb=Z1;break e}if((ie=i(F*R))==null){_.a=1,E=0;break e}E=(E=jr(_,ie,0,F,R,R,null))&&!z.h;break e}return E?(L!=null?L[0]=ie:(e(ie==null),e(b)),_.$=0,b||Br($)):Br($),E}function oi(h,m){var b=h.c*h.i,_=b+m+16*m;return e(h.c<=m),h.V=i(_),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+m,1)}function Vi(h,m){var b=h.C,_=m-b,L=h.V,E=h.Ba+h.c*b;for(e(m<=h.l.o);0<_;){var F=16<_?16:_,R=h.l.ma,z=h.l.width,$=z*F,ie=R.ca,be=R.tb+z*b,ye=h.Ta,pe=h.Ua;Zn(h,F,L,E),rn(ye,pe,ie,be,$),_r(R,b,b+F,ie,be,z),_-=F,L+=F*h.c,b+=F}e(b==m),h.C=h.Ma=m}function Gi(){this.ub=this.yd=this.td=this.Rb=0}function Yi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ki(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function xl(){this.Yb=function(){var h=[];return function m(b,_,L){for(var E=L[_],F=0;F<E&&(b.push(L.length>_+1?[]:0),!(L.length<_+1));F++)m(b[F],_+1,L)}(h,0,[3,11]),h}()}function xu(){this.jb=i(3),this.Wc=o([4,8],xl),this.Xc=o([4,17],xl)}function bu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ji(){this.ld=this.La=this.dd=this.tc=0}function bl(){this.Na=this.la=0}function yu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function eo(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ji),this.Y=0,this.ya=Array(new eo),this.aa=0,this.l=new Xi}function yl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function wu(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new Gi,this.Kc=new Yi,this.ed=new bu,this.Qa=new Ki,this.Ic=this.$c=this.Aa=0,this.D=new vu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,xe),this.ia=0,this.pb=a(4,yu),this.Pa=new xu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new yl),this.Hd=0,this.rb=Array(new bl),this.sb=0,this.wa=Array(new Ji),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new eo),this.L=this.aa=0,this.gd=o([4,2],Ji),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _u(){var h=new wu;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ko||(ko=_l)),h}function tn(h,m,b){return h.a==0&&(h.a=m,h.sc=b,h.cb=0),0}function vl(h,m,b){return 3<=b&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function wl(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return tn(h,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,_=m.w,L=m.ha;if(4>L)return tn(h,7,"Truncated header.");var E=b[_+0]|b[_+1]<<8|b[_+2]<<16,F=h.Od;if(F.Rb=!(1&E),F.td=E>>1&7,F.yd=E>>4&1,F.ub=E>>5,3<F.td)return tn(h,3,"Incorrect keyframe parameters.");if(!F.yd)return tn(h,4,"Frame not displayable.");_+=3,L-=3;var R=h.Kc;if(F.Rb){if(7>L)return tn(h,7,"cannot parse picture header");if(!vl(b,_,L))return tn(h,3,"Bad code word");R.c=16383&(b[_+4]<<8|b[_+3]),R.Td=b[_+4]>>6,R.i=16383&(b[_+6]<<8|b[_+5]),R.Ud=b[_+6]>>6,_+=7,L-=7,h.za=R.c+15>>4,h.Ub=R.i+15>>4,m.width=R.c,m.height=R.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,s((E=h.Pa).jb,0,255,E.jb.length),e((E=h.Qa)!=null),E.Cb=0,E.Bb=0,E.Fb=1,s(E.Zb,0,0,E.Zb.length),s(E.Lb,0,0,E.Lb)}if(F.ub>L)return tn(h,7,"bad partition length");V(E=h.m,b,_,F.ub),_+=F.ub,L-=F.ub,F.Rb&&(R.Ld=ce(E),R.Kd=ce(E)),R=h.Qa;var z,$=h.Pa;if(e(E!=null),e(R!=null),R.Cb=ce(E),R.Cb){if(R.Bb=ce(E),ce(E)){for(R.Fb=ce(E),z=0;4>z;++z)R.Zb[z]=ce(E)?B(E,7):0;for(z=0;4>z;++z)R.Lb[z]=ce(E)?B(E,6):0}if(R.Bb)for(z=0;3>z;++z)$.jb[z]=ce(E)?ee(E,8):255}else R.Bb=0;if(E.Ka)return tn(h,3,"cannot parse segment header");if((R=h.ed).zd=ce(E),R.Tb=ee(E,6),R.wb=ee(E,3),R.Pc=ce(E),R.Pc&&ce(E)){for($=0;4>$;++$)ce(E)&&(R.vd[$]=B(E,6));for($=0;4>$;++$)ce(E)&&(R.od[$]=B(E,6))}if(h.L=R.Tb==0?0:R.zd?1:2,E.Ka)return tn(h,3,"cannot parse filter header");var ie=L;if(L=z=_,_=z+ie,R=ie,h.Xb=(1<<ee(h.m,2))-1,ie<3*($=h.Xb))b=7;else{for(z+=3*$,R-=3*$,ie=0;ie<$;++ie){var be=b[L+0]|b[L+1]<<8|b[L+2]<<16;be>R&&(be=R),V(h.Jc[+ie],b,z,be),z+=be,R-=be,L+=3}V(h.Jc[+$],b,z,R),b=z<_?0:5}if(b!=0)return tn(h,b,"cannot parse partitions");for(b=ee(z=h.m,7),L=ce(z)?B(z,4):0,_=ce(z)?B(z,4):0,R=ce(z)?B(z,4):0,$=ce(z)?B(z,4):0,z=ce(z)?B(z,4):0,ie=h.Qa,be=0;4>be;++be){if(ie.Cb){var ye=ie.Zb[be];ie.Fb||(ye+=b)}else{if(0<be){h.pb[be]=h.pb[0];continue}ye=b}var pe=h.pb[be];pe.Sc[0]=Gu[er(ye+L,127)],pe.Sc[1]=Yu[er(ye+0,127)],pe.Eb[0]=2*Gu[er(ye+_,127)],pe.Eb[1]=101581*Yu[er(ye+R,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=Gu[er(ye+$,117)],pe.Qc[1]=Yu[er(ye+z,127)],pe.lc=ye+z}if(!F.Rb)return tn(h,4,"Not a key frame.");for(ce(E),F=h.Pa,b=0;4>b;++b){for(L=0;8>L;++L)for(_=0;3>_;++_)for(R=0;11>R;++R)$=ue(E,X1[b][L][_][R])?ee(E,8):K1[b][L][_][R],F.Wc[b][L].Yb[_][R]=$;for(L=0;17>L;++L)F.Xc[b][L]=F.Wc[b][Q1[L]]}return h.kc=ce(E),h.kc&&(h.Bd=ee(E,8)),h.cb=1}function _l(h,m,b,_,L,E,F){var R=m[L].Yb[b];for(b=0;16>L;++L){if(!ue(h,R[b+0]))return L;for(;!ue(h,R[b+1]);)if(R=m[++L].Yb[0],b=0,L==16)return 16;var z=m[L+1].Yb;if(ue(h,R[b+2])){var $=h,ie=0;if(ue($,(ye=R)[(be=b)+3]))if(ue($,ye[be+6])){for(R=0,be=2*(ie=ue($,ye[be+8]))+(ye=ue($,ye[be+9+ie])),ie=0,ye=G1[be];ye[R];++R)ie+=ie+ue($,ye[R]);ie+=3+(8<<be)}else ue($,ye[be+7])?(ie=7+2*ue($,165),ie+=ue($,145)):ie=5+ue($,159);else ie=ue($,ye[be+4])?3+ue($,ye[be+5]):2;R=z[2]}else ie=1,R=z[1];z=F+Y1[L],0>($=h).b&&fe($);var be,ye=$.b,pe=(be=$.Ca>>1)-($.I>>ye)>>31;--$.b,$.Ca+=pe,$.Ca|=1,$.I-=(be+1&pe)<<ye,E[z]=((ie^pe)-pe)*_[(0<L)+0]}return 16}function to(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function Nu(h,m){if(h==null)return 0;if(m==null)return tn(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!wl(h,m))return 0;if(e(h.cb),m.ac==null||m.ac(m)){m.ob&&(h.L=0);var b=Jl[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=m.v-b>>4,h.zb=m.j-b>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=m.o+15+b>>4,h.Hb=m.va+15+b>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var _=h.ed;for(b=0;4>b;++b){var L;if(h.Qa.Cb){var E=h.Qa.Lb[b];h.Qa.Fb||(E+=_.Tb)}else E=_.Tb;for(L=0;1>=L;++L){var F=h.gd[b][L],R=E;if(_.Pc&&(R+=_.vd[0],L&&(R+=_.od[0])),0<(R=0>R?0:63<R?63:R)){var z=R;0<_.wb&&(z=4<_.wb?z>>2:z>>1)>9-_.wb&&(z=9-_.wb),1>z&&(z=1),F.dd=z,F.tc=2*R+z,F.ld=40<=R?2:15<=R?1:0}else F.tc=0;F.La=L}}}b=0}else tn(h,6,"Frame setup failed"),b=h.a;if(b=b==0){if(b){h.$c=0,0<h.Aa||(h.Ic=dx);e:{b=h.Ic,_=4*(z=h.za);var $=32*z,ie=z+1,be=0<h.L?z*(0<h.Aa?2:1):0,ye=(h.Aa==2?2:1)*z;if((F=_+832+(L=3*(16*b+Jl[h.L])/2*$)+(E=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=F)b=0;else{if(F>h.Vb){if(h.Vb=0,h.Ec=i(F),h.Fc=0,h.Ec==null){b=tn(h,1,"no memory during frame initialization.");break e}h.Vb=F}F=h.Ec,R=h.Fc,h.Ac=F,h.Bc=R,R+=_,h.Gd=a($,yl),h.Hd=0,h.rb=a(ie+1,bl),h.sb=1,h.wa=be?a(be,Ji):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=z),e(!0),h.oc=F,h.pc=R,R+=832,h.ya=a(ye,eo),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=z),h.R=16*z,h.B=8*z,z=($=Jl[h.L])*h.R,$=$/2*h.B,h.sa=F,h.ta=R+z,h.qa=h.sa,h.ra=h.ta+16*b*h.R+$,h.Ha=h.qa,h.Ia=h.ra+8*b*h.B+$,h.$c=0,R+=L,h.mb=E?F:null,h.nb=E?R:null,e(R+E<=h.Fc+h.Vb),to(h),s(h.Ac,h.Bc,0,_),b=1}}if(b){if(m.ka=0,m.y=h.sa,m.O=h.ta,m.f=h.qa,m.N=h.ra,m.ea=h.Ha,m.Vd=h.Ia,m.fa=h.R,m.Rc=h.B,m.F=null,m.J=0,!ql){for(b=-255;255>=b;++b)mn[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)ds[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)jo[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)ma[255+b]=0>b?0:255<b?255:b;ql=1}ha=Su,us=ju,wo=jl,zn=ku,ur=kl,nn=Nl,fa=oo,zl=ui,_o=Bu,fi=lo,pi=Ru,Os=ra,mi=co,pa=El,gi=Ol,Es=Hr,No=os,dr=Iu,Lr[0]=qr,Lr[1]=Au,Lr[2]=Du,Lr[3]=Mu,Lr[4]=Ll,Lr[5]=ta,Lr[6]=Cl,Lr[7]=so,Lr[8]=Eu,Lr[9]=Ou,Ts[0]=Sl,Ts[1]=Cu,Ts[2]=as,Ts[3]=Zi,Ts[4]=Cn,Ts[5]=Pu,Ts[6]=Al,hs[0]=Ls,hs[1]=Lu,hs[2]=Tu,hs[3]=io,hs[4]=ci,hs[5]=Fu,hs[6]=ao,b=1}else b=0}b&&(b=function(pe,Oe){for(pe.M=0;pe.M<pe.Va;++pe.M){var je,ae=pe.Jc[pe.M&pe.Xb],he=pe.m,De=pe;for(je=0;je<De.za;++je){var Ie=he,Me=De,Je=Me.Ac,We=Me.Bc+4*je,rt=Me.zc,Ve=Me.ya[Me.aa+je];if(Me.Qa.Bb?Ve.$b=ue(Ie,Me.Pa.jb[0])?2+ue(Ie,Me.Pa.jb[2]):ue(Ie,Me.Pa.jb[1]):Ve.$b=0,Me.kc&&(Ve.Ad=ue(Ie,Me.Bd)),Ve.Za=!ue(Ie,145)+0,Ve.Za){var jt=Ve.Ob,At=0;for(Me=0;4>Me;++Me){var vt,mt=rt[0+Me];for(vt=0;4>vt;++vt){mt=J1[Je[We+vt]][mt];for(var Et=uf[ue(Ie,mt[0])];0<Et;)Et=uf[2*Et+ue(Ie,mt[Et])];mt=-Et,Je[We+vt]=mt}r(jt,At,Je,We,4),At+=4,rt[0+Me]=mt}}else mt=ue(Ie,156)?ue(Ie,128)?1:3:ue(Ie,163)?2:0,Ve.Ob[0]=mt,s(Je,We,mt,4),s(rt,0,mt,4);Ve.Dd=ue(Ie,142)?ue(Ie,114)?ue(Ie,183)?1:3:2:0}if(De.m.Ka)return tn(pe,7,"Premature end-of-partition0 encountered.");for(;pe.ja<pe.za;++pe.ja){if(De=ae,Ie=(he=pe).rb[he.sb-1],Je=he.rb[he.sb+he.ja],je=he.ya[he.aa+he.ja],We=he.kc?je.Ad:0)Ie.la=Je.la=0,je.Za||(Ie.Na=Je.Na=0),je.Hc=0,je.Gc=0,je.ia=0;else{var Mt,ht;if(Ie=Je,Je=De,We=he.Pa.Xc,rt=he.ya[he.aa+he.ja],Ve=he.pb[rt.$b],Me=rt.ad,jt=0,At=he.rb[he.sb-1],mt=vt=0,s(Me,jt,0,384),rt.Za)var fn=0,Vn=We[3];else{Et=i(16);var pn=Ie.Na+At.Na;if(pn=ko(Je,We[1],pn,Ve.Eb,0,Et,0),Ie.Na=At.Na=(0<pn)+0,1<pn)ha(Et,0,Me,jt);else{var Gn=Et[0]+3>>3;for(Et=0;256>Et;Et+=16)Me[jt+Et]=Gn}fn=1,Vn=We[0]}var Lt=15&Ie.la,nr=15&At.la;for(Et=0;4>Et;++Et){var rr=1&nr;for(Gn=ht=0;4>Gn;++Gn)Lt=Lt>>1|(rr=(pn=ko(Je,Vn,pn=rr+(1&Lt),Ve.Sc,fn,Me,jt))>fn)<<7,ht=ht<<2|(3<pn?3:1<pn?2:Me[jt+0]!=0),jt+=16;Lt>>=4,nr=nr>>1|rr<<7,vt=(vt<<8|ht)>>>0}for(Vn=Lt,fn=nr>>4,Mt=0;4>Mt;Mt+=2){for(ht=0,Lt=Ie.la>>4+Mt,nr=At.la>>4+Mt,Et=0;2>Et;++Et){for(rr=1&nr,Gn=0;2>Gn;++Gn)pn=rr+(1&Lt),Lt=Lt>>1|(rr=0<(pn=ko(Je,We[2],pn,Ve.Qc,0,Me,jt)))<<3,ht=ht<<2|(3<pn?3:1<pn?2:Me[jt+0]!=0),jt+=16;Lt>>=2,nr=nr>>1|rr<<5}mt|=ht<<4*Mt,Vn|=Lt<<4<<Mt,fn|=(240&nr)<<Mt}Ie.la=Vn,At.la=fn,rt.Hc=vt,rt.Gc=mt,rt.ia=43690&mt?0:Ve.ia,We=!(vt|mt)}if(0<he.L&&(he.wa[he.Y+he.ja]=he.gd[je.$b][je.Za],he.wa[he.Y+he.ja].La|=!We),De.Ka)return tn(pe,7,"Premature end-of-file encountered.")}if(to(pe),he=Oe,De=1,je=(ae=pe).D,Ie=0<ae.L&&ae.M>=ae.zb&&ae.M<=ae.Va,ae.Aa==0)e:{if(je.M=ae.M,je.uc=Ie,go(ae,je),De=1,je=(ht=ae.D).Nb,Ie=(mt=Jl[ae.L])*ae.R,Je=mt/2*ae.B,Et=16*je*ae.R,Gn=8*je*ae.B,We=ae.sa,rt=ae.ta-Ie+Et,Ve=ae.qa,Me=ae.ra-Je+Gn,jt=ae.Ha,At=ae.Ia-Je+Gn,nr=(Lt=ht.M)==0,vt=Lt>=ae.Va-1,ae.Aa==2&&go(ae,ht),ht.uc)for(rr=(pn=ae).D.M,e(pn.D.uc),ht=pn.yb;ht<pn.Hb;++ht){fn=ht,Vn=rr;var bn=(An=(Xt=pn).D).Nb;Mt=Xt.R;var An=An.wa[An.Y+fn],qn=Xt.sa,mr=Xt.ta+16*bn*Mt+16*fn,Wr=An.dd,yn=An.tc;if(yn!=0)if(e(3<=yn),Xt.L==1)0<fn&&Es(qn,mr,Mt,yn+4),An.La&&dr(qn,mr,Mt,yn),0<Vn&&gi(qn,mr,Mt,yn+4),An.La&&No(qn,mr,Mt,yn);else{var fs=Xt.B,xi=Xt.qa,ga=Xt.ra+8*bn*fs+8*fn,Is=Xt.Ha,Xt=Xt.Ia+8*bn*fs+8*fn;bn=An.ld,0<fn&&(zl(qn,mr,Mt,yn+4,Wr,bn),fi(xi,ga,Is,Xt,fs,yn+4,Wr,bn)),An.La&&(Os(qn,mr,Mt,yn,Wr,bn),pa(xi,ga,Is,Xt,fs,yn,Wr,bn)),0<Vn&&(fa(qn,mr,Mt,yn+4,Wr,bn),_o(xi,ga,Is,Xt,fs,yn+4,Wr,bn)),An.La&&(pi(qn,mr,Mt,yn,Wr,bn),mi(xi,ga,Is,Xt,fs,yn,Wr,bn))}}if(ae.ia&&alert("todo:DitherRow"),he.put!=null){if(ht=16*Lt,Lt=16*(Lt+1),nr?(he.y=ae.sa,he.O=ae.ta+Et,he.f=ae.qa,he.N=ae.ra+Gn,he.ea=ae.Ha,he.W=ae.Ia+Gn):(ht-=mt,he.y=We,he.O=rt,he.f=Ve,he.N=Me,he.ea=jt,he.W=At),vt||(Lt-=mt),Lt>he.o&&(Lt=he.o),he.F=null,he.J=null,ae.Fa!=null&&0<ae.Fa.length&&ht<Lt&&(he.J=po(ae,he,ht,Lt-ht),he.F=ae.mb,he.F==null&&he.F.length==0)){De=tn(ae,3,"Could not decode alpha data.");break e}ht<he.j&&(mt=he.j-ht,ht=he.j,e(!(1&mt)),he.O+=ae.R*mt,he.N+=ae.B*(mt>>1),he.W+=ae.B*(mt>>1),he.F!=null&&(he.J+=he.width*mt)),ht<Lt&&(he.O+=he.v,he.N+=he.v>>1,he.W+=he.v>>1,he.F!=null&&(he.J+=he.v),he.ka=ht-he.j,he.U=he.va-he.v,he.T=Lt-ht,De=he.put(he))}je+1!=ae.Ic||vt||(r(ae.sa,ae.ta-Ie,We,rt+16*ae.R,Ie),r(ae.qa,ae.ra-Je,Ve,Me+8*ae.B,Je),r(ae.Ha,ae.Ia-Je,jt,At+8*ae.B,Je))}if(!De)return tn(pe,6,"Output aborted.")}return 1}(h,m)),m.bc!=null&&m.bc(m),b&=1}return b?(h.cb=0,b):0}function kr(h,m,b,_,L){L=h[m+b+32*_]+(L>>3),h[m+b+32*_]=-256&L?0>L?0:255:L}function Qi(h,m,b,_,L,E){kr(h,m,0,b,_+L),kr(h,m,1,b,_+E),kr(h,m,2,b,_-E),kr(h,m,3,b,_-L)}function Un(h){return(20091*h>>16)+h}function no(h,m,b,_){var L,E=0,F=i(16);for(L=0;4>L;++L){var R=h[m+0]+h[m+8],z=h[m+0]-h[m+8],$=(35468*h[m+4]>>16)-Un(h[m+12]),ie=Un(h[m+4])+(35468*h[m+12]>>16);F[E+0]=R+ie,F[E+1]=z+$,F[E+2]=z-$,F[E+3]=R-ie,E+=4,m++}for(L=E=0;4>L;++L)R=(h=F[E+0]+4)+F[E+8],z=h-F[E+8],$=(35468*F[E+4]>>16)-Un(F[E+12]),kr(b,_,0,0,R+(ie=Un(F[E+4])+(35468*F[E+12]>>16))),kr(b,_,1,0,z+$),kr(b,_,2,0,z-$),kr(b,_,3,0,R-ie),E++,_+=32}function Nl(h,m,b,_){var L=h[m+0]+4,E=35468*h[m+4]>>16,F=Un(h[m+4]),R=35468*h[m+1]>>16;Qi(b,_,0,L+F,h=Un(h[m+1]),R),Qi(b,_,1,L+E,h,R),Qi(b,_,2,L-E,h,R),Qi(b,_,3,L-F,h,R)}function ju(h,m,b,_,L){no(h,m,b,_),L&&no(h,m+16,b,_+4)}function jl(h,m,b,_){us(h,m+0,b,_,1),us(h,m+32,b,_+128,1)}function ku(h,m,b,_){var L;for(h=h[m+0]+4,L=0;4>L;++L)for(m=0;4>m;++m)kr(b,_,m,L,h)}function kl(h,m,b,_){h[m+0]&&zn(h,m+0,b,_),h[m+16]&&zn(h,m+16,b,_+4),h[m+32]&&zn(h,m+32,b,_+128),h[m+48]&&zn(h,m+48,b,_+128+4)}function Su(h,m,b,_){var L,E=i(16);for(L=0;4>L;++L){var F=h[m+0+L]+h[m+12+L],R=h[m+4+L]+h[m+8+L],z=h[m+4+L]-h[m+8+L],$=h[m+0+L]-h[m+12+L];E[0+L]=F+R,E[8+L]=F-R,E[4+L]=$+z,E[12+L]=$-z}for(L=0;4>L;++L)F=(h=E[0+4*L]+3)+E[3+4*L],R=E[1+4*L]+E[2+4*L],z=E[1+4*L]-E[2+4*L],$=h-E[3+4*L],b[_+0]=F+R>>3,b[_+16]=$+z>>3,b[_+32]=F-R>>3,b[_+48]=$-z>>3,_+=64}function ro(h,m,b){var _,L=m-32,E=tr,F=255-h[L-1];for(_=0;_<b;++_){var R,z=E,$=F+h[m-1];for(R=0;R<b;++R)h[m+R]=z[$+h[L+R]];m+=32}}function Au(h,m){ro(h,m,4)}function Lu(h,m){ro(h,m,8)}function Cu(h,m){ro(h,m,16)}function as(h,m){var b;for(b=0;16>b;++b)r(h,m+32*b,h,m-32,16)}function Zi(h,m){var b;for(b=16;0<b;--b)s(h,m,h[m-1],16),m+=32}function ea(h,m,b){var _;for(_=0;16>_;++_)s(m,b+32*_,h,16)}function Sl(h,m){var b,_=16;for(b=0;16>b;++b)_+=h[m-1+32*b]+h[m+b-32];ea(_>>5,h,m)}function Cn(h,m){var b,_=8;for(b=0;16>b;++b)_+=h[m-1+32*b];ea(_>>4,h,m)}function Pu(h,m){var b,_=8;for(b=0;16>b;++b)_+=h[m+b-32];ea(_>>4,h,m)}function Al(h,m){ea(128,h,m)}function at(h,m,b){return h+2*m+b+2>>2}function Du(h,m){var b,_=m-32;for(_=new Uint8Array([at(h[_-1],h[_+0],h[_+1]),at(h[_+0],h[_+1],h[_+2]),at(h[_+1],h[_+2],h[_+3]),at(h[_+2],h[_+3],h[_+4])]),b=0;4>b;++b)r(h,m+32*b,_,0,_.length)}function Mu(h,m){var b=h[m-1],_=h[m-1+32],L=h[m-1+64],E=h[m-1+96];ke(h,m+0,16843009*at(h[m-1-32],b,_)),ke(h,m+32,16843009*at(b,_,L)),ke(h,m+64,16843009*at(_,L,E)),ke(h,m+96,16843009*at(L,E,E))}function qr(h,m){var b,_=4;for(b=0;4>b;++b)_+=h[m+b-32]+h[m-1+32*b];for(_>>=3,b=0;4>b;++b)s(h,m+32*b,_,4)}function Ll(h,m){var b=h[m-1+0],_=h[m-1+32],L=h[m-1+64],E=h[m-1-32],F=h[m+0-32],R=h[m+1-32],z=h[m+2-32],$=h[m+3-32];h[m+0+96]=at(_,L,h[m-1+96]),h[m+1+96]=h[m+0+64]=at(b,_,L),h[m+2+96]=h[m+1+64]=h[m+0+32]=at(E,b,_),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=at(F,E,b),h[m+3+64]=h[m+2+32]=h[m+1+0]=at(R,F,E),h[m+3+32]=h[m+2+0]=at(z,R,F),h[m+3+0]=at($,z,R)}function Cl(h,m){var b=h[m+1-32],_=h[m+2-32],L=h[m+3-32],E=h[m+4-32],F=h[m+5-32],R=h[m+6-32],z=h[m+7-32];h[m+0+0]=at(h[m+0-32],b,_),h[m+1+0]=h[m+0+32]=at(b,_,L),h[m+2+0]=h[m+1+32]=h[m+0+64]=at(_,L,E),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=at(L,E,F),h[m+3+32]=h[m+2+64]=h[m+1+96]=at(E,F,R),h[m+3+64]=h[m+2+96]=at(F,R,z),h[m+3+96]=at(R,z,z)}function ta(h,m){var b=h[m-1+0],_=h[m-1+32],L=h[m-1+64],E=h[m-1-32],F=h[m+0-32],R=h[m+1-32],z=h[m+2-32],$=h[m+3-32];h[m+0+0]=h[m+1+64]=E+F+1>>1,h[m+1+0]=h[m+2+64]=F+R+1>>1,h[m+2+0]=h[m+3+64]=R+z+1>>1,h[m+3+0]=z+$+1>>1,h[m+0+96]=at(L,_,b),h[m+0+64]=at(_,b,E),h[m+0+32]=h[m+1+96]=at(b,E,F),h[m+1+32]=h[m+2+96]=at(E,F,R),h[m+2+32]=h[m+3+96]=at(F,R,z),h[m+3+32]=at(R,z,$)}function so(h,m){var b=h[m+0-32],_=h[m+1-32],L=h[m+2-32],E=h[m+3-32],F=h[m+4-32],R=h[m+5-32],z=h[m+6-32],$=h[m+7-32];h[m+0+0]=b+_+1>>1,h[m+1+0]=h[m+0+64]=_+L+1>>1,h[m+2+0]=h[m+1+64]=L+E+1>>1,h[m+3+0]=h[m+2+64]=E+F+1>>1,h[m+0+32]=at(b,_,L),h[m+1+32]=h[m+0+96]=at(_,L,E),h[m+2+32]=h[m+1+96]=at(L,E,F),h[m+3+32]=h[m+2+96]=at(E,F,R),h[m+3+64]=at(F,R,z),h[m+3+96]=at(R,z,$)}function Ou(h,m){var b=h[m-1+0],_=h[m-1+32],L=h[m-1+64],E=h[m-1+96];h[m+0+0]=b+_+1>>1,h[m+2+0]=h[m+0+32]=_+L+1>>1,h[m+2+32]=h[m+0+64]=L+E+1>>1,h[m+1+0]=at(b,_,L),h[m+3+0]=h[m+1+32]=at(_,L,E),h[m+3+32]=h[m+1+64]=at(L,E,E),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=E}function Eu(h,m){var b=h[m-1+0],_=h[m-1+32],L=h[m-1+64],E=h[m-1+96],F=h[m-1-32],R=h[m+0-32],z=h[m+1-32],$=h[m+2-32];h[m+0+0]=h[m+2+32]=b+F+1>>1,h[m+0+32]=h[m+2+64]=_+b+1>>1,h[m+0+64]=h[m+2+96]=L+_+1>>1,h[m+0+96]=E+L+1>>1,h[m+3+0]=at(R,z,$),h[m+2+0]=at(F,R,z),h[m+1+0]=h[m+3+32]=at(b,F,R),h[m+1+32]=h[m+3+64]=at(_,b,F),h[m+1+64]=h[m+3+96]=at(L,_,b),h[m+1+96]=at(E,L,_)}function Tu(h,m){var b;for(b=0;8>b;++b)r(h,m+32*b,h,m-32,8)}function io(h,m){var b;for(b=0;8>b;++b)s(h,m,h[m-1],8),m+=32}function li(h,m,b){var _;for(_=0;8>_;++_)s(m,b+32*_,h,8)}function Ls(h,m){var b,_=8;for(b=0;8>b;++b)_+=h[m+b-32]+h[m-1+32*b];li(_>>4,h,m)}function Fu(h,m){var b,_=4;for(b=0;8>b;++b)_+=h[m+b-32];li(_>>3,h,m)}function ci(h,m){var b,_=4;for(b=0;8>b;++b)_+=h[m-1+32*b];li(_>>3,h,m)}function ao(h,m){li(128,h,m)}function na(h,m,b){var _=h[m-b],L=h[m+0],E=3*(L-_)+Hu[1020+h[m-2*b]-h[m+b]],F=Hl[112+(E+4>>3)];h[m-b]=tr[255+_+Hl[112+(E+3>>3)]],h[m+0]=tr[255+L-F]}function Pl(h,m,b,_){var L=h[m+0],E=h[m+b];return fr[255+h[m-2*b]-h[m-b]]>_||fr[255+E-L]>_}function Dl(h,m,b,_){return 4*fr[255+h[m-b]-h[m+0]]+fr[255+h[m-2*b]-h[m+b]]<=_}function Ml(h,m,b,_,L){var E=h[m-3*b],F=h[m-2*b],R=h[m-b],z=h[m+0],$=h[m+b],ie=h[m+2*b],be=h[m+3*b];return 4*fr[255+R-z]+fr[255+F-$]>_?0:fr[255+h[m-4*b]-E]<=L&&fr[255+E-F]<=L&&fr[255+F-R]<=L&&fr[255+be-ie]<=L&&fr[255+ie-$]<=L&&fr[255+$-z]<=L}function Ol(h,m,b,_){var L=2*_+1;for(_=0;16>_;++_)Dl(h,m+_,b,L)&&na(h,m+_,b)}function Hr(h,m,b,_){var L=2*_+1;for(_=0;16>_;++_)Dl(h,m+_*b,1,L)&&na(h,m+_*b,1)}function os(h,m,b,_){var L;for(L=3;0<L;--L)Ol(h,m+=4*b,b,_)}function Iu(h,m,b,_){var L;for(L=3;0<L;--L)Hr(h,m+=4,b,_)}function Cs(h,m,b,_,L,E,F,R){for(E=2*E+1;0<L--;){if(Ml(h,m,b,E,F))if(Pl(h,m,b,R))na(h,m,b);else{var z=h,$=m,ie=b,be=z[$-2*ie],ye=z[$-ie],pe=z[$+0],Oe=z[$+ie],je=z[$+2*ie],ae=27*(De=Hu[1020+3*(pe-ye)+Hu[1020+be-Oe]])+63>>7,he=18*De+63>>7,De=9*De+63>>7;z[$-3*ie]=tr[255+z[$-3*ie]+De],z[$-2*ie]=tr[255+be+he],z[$-ie]=tr[255+ye+ae],z[$+0]=tr[255+pe-ae],z[$+ie]=tr[255+Oe-he],z[$+2*ie]=tr[255+je-De]}m+=_}}function Sr(h,m,b,_,L,E,F,R){for(E=2*E+1;0<L--;){if(Ml(h,m,b,E,F))if(Pl(h,m,b,R))na(h,m,b);else{var z=h,$=m,ie=b,be=z[$-ie],ye=z[$+0],pe=z[$+ie],Oe=Hl[112+((je=3*(ye-be))+4>>3)],je=Hl[112+(je+3>>3)],ae=Oe+1>>1;z[$-2*ie]=tr[255+z[$-2*ie]+ae],z[$-ie]=tr[255+be+je],z[$+0]=tr[255+ye-Oe],z[$+ie]=tr[255+pe-ae]}m+=_}}function oo(h,m,b,_,L,E){Cs(h,m,b,1,16,_,L,E)}function ui(h,m,b,_,L,E){Cs(h,m,1,b,16,_,L,E)}function Ru(h,m,b,_,L,E){var F;for(F=3;0<F;--F)Sr(h,m+=4*b,b,1,16,_,L,E)}function ra(h,m,b,_,L,E){var F;for(F=3;0<F;--F)Sr(h,m+=4,1,b,16,_,L,E)}function Bu(h,m,b,_,L,E,F,R){Cs(h,m,L,1,8,E,F,R),Cs(b,_,L,1,8,E,F,R)}function lo(h,m,b,_,L,E,F,R){Cs(h,m,1,L,8,E,F,R),Cs(b,_,1,L,8,E,F,R)}function co(h,m,b,_,L,E,F,R){Sr(h,m+4*L,L,1,8,E,F,R),Sr(b,_+4*L,L,1,8,E,F,R)}function El(h,m,b,_,L,E,F,R){Sr(h,m+4,1,L,8,E,F,R),Sr(b,_+4,1,L,8,E,F,R)}function sa(){this.ba=new Ln,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function uo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ho(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Tl(){this.ua=0,this.Wa=new U,this.vb=new U,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new O,this.yc=new S}function zu(){this.xb=this.a=0,this.l=new Xi,this.ca=new Ln,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Tl,this.ab=0,this.gc=a(4,ho),this.Oc=0}function ia(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function di(h,m,b,_,L,E,F){for(h=h==null?0:h[m+0],m=0;m<F;++m)L[E+m]=h+b[_+m]&255,h=L[E+m]}function fo(h,m,b,_,L,E,F){var R;if(h==null)di(null,null,b,_,L,E,F);else for(R=0;R<F;++R)L[E+R]=h[m+R]+b[_+R]&255}function Ps(h,m,b,_,L,E,F){if(h==null)di(null,null,b,_,L,E,F);else{var R,z=h[m+0],$=z,ie=z;for(R=0;R<F;++R)$=ie+(z=h[m+R])-$,ie=b[_+R]+(-256&$?0>$?0:255:$)&255,$=z,L[E+R]=ie}}function po(h,m,b,_){var L=m.width,E=m.o;if(e(h!=null&&m!=null),0>b||0>=_||b+_>E)return null;if(!h.Cc){if(h.ga==null){var F;if(h.ga=new ia,(F=h.ga==null)||(F=m.width*m.o,e(h.Gb.length==0),h.Gb=i(F),h.Uc=0,h.Gb==null?F=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,F=1),F=!F),!F){F=h.ga;var R=h.Fa,z=h.P,$=h.qc,ie=h.mb,be=h.nb,ye=z+1,pe=$-1,Oe=F.l;if(e(R!=null&&ie!=null&&m!=null),Fs[0]=null,Fs[1]=di,Fs[2]=fo,Fs[3]=Ps,F.ca=ie,F.tb=be,F.c=m.width,F.i=m.height,e(0<F.c&&0<F.i),1>=$)m=0;else if(F.$a=R[z+0]>>0&3,F.Z=R[z+0]>>2&3,F.Lc=R[z+0]>>4&3,z=R[z+0]>>6&3,0>F.$a||1<F.$a||4<=F.Z||1<F.Lc||z)m=0;else if(Oe.put=Ze,Oe.ac=Ue,Oe.bc=Nt,Oe.ma=F,Oe.width=m.width,Oe.height=m.height,Oe.Da=m.Da,Oe.v=m.v,Oe.va=m.va,Oe.j=m.j,Oe.o=m.o,F.$a)e:{e(F.$a==1),m=lr();t:for(;;){if(m==null){m=0;break e}if(e(F!=null),F.mc=m,m.c=F.c,m.i=F.i,m.l=F.l,m.l.ma=F,m.l.width=F.c,m.l.height=F.i,m.a=0,Z(m.m,R,ye,pe),!zr(F.c,F.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&is(m.s)?(F.ic=1,R=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(R),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(F.ic=0,m=oi(m,F.c)),!m))break t;m=1;break e}F.mc=null,m=0}else m=pe>=F.c*F.i;F=!m}if(F)return null;h.ga.Lc!=1?h.Ga=0:_=E-b}e(h.ga!=null),e(b+_<=E);e:{if(m=(R=h.ga).c,E=R.l.o,R.$a==0){if(ye=h.rc,pe=h.Vc,Oe=h.Fa,z=h.P+1+b*m,$=h.mb,ie=h.nb+b*m,e(z<=h.P+h.qc),R.Z!=0)for(e(Fs[R.Z]!=null),F=0;F<_;++F)Fs[R.Z](ye,pe,Oe,z,$,ie,m),ye=$,pe=ie,ie+=m,z+=m;else for(F=0;F<_;++F)r($,ie,Oe,z,m),ye=$,pe=ie,ie+=m,z+=m;h.rc=ye,h.Vc=pe}else{if(e(R.mc!=null),m=b+_,e((F=R.mc)!=null),e(m<=F.i),F.C>=m)m=1;else if(R.ic||ge(),R.ic){R=F.V,ye=F.Ba,pe=F.c;var je=F.i,ae=(Oe=1,z=F.$/pe,$=F.$%pe,ie=F.m,be=F.s,F.$),he=pe*je,De=pe*m,Ie=be.wc,Me=ae<De?dn(be,$,z):null;e(ae<=he),e(m<=je),e(is(be));t:for(;;){for(;!ie.h&&ae<De;){if($&Ie||(Me=dn(be,$,z)),e(Me!=null),Q(ie),256>(je=Kt(Me.G[0],Me.H[0],ie)))R[ye+ae]=je,++ae,++$>=pe&&($=0,++z<=m&&!(z%16)&&Nr(F,z));else{if(!(280>je)){Oe=0;break t}je=Yt(je-256,ie);var Je,We=Kt(Me.G[4],Me.H[4],ie);if(Q(ie),!(ae>=(We=or(pe,We=Yt(We,ie)))&&he-ae>=je)){Oe=0;break t}for(Je=0;Je<je;++Je)R[ye+ae+Je]=R[ye+ae+Je-We];for(ae+=je,$+=je;$>=pe;)$-=pe,++z<=m&&!(z%16)&&Nr(F,z);ae<De&&$&Ie&&(Me=dn(be,$,z))}e(ie.h==I(ie))}Nr(F,z>m?m:z);break t}!Oe||ie.h&&ae<he?(Oe=0,F.a=ie.h?5:3):F.$=ae,m=Oe}else m=jr(F,F.V,F.Ba,F.c,F.i,m,Vi);if(!m){_=0;break e}}b+_>=E&&(h.Cc=1),_=1}if(!_)return null;if(h.Cc&&((_=h.ga)!=null&&(_.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*L}function x(h,m,b,_,L,E){for(;0<L--;){var F,R=h,z=m+(b?1:0),$=h,ie=m+(b?0:3);for(F=0;F<_;++F){var be=$[ie+4*F];be!=255&&(be*=32897,R[z+4*F+0]=R[z+4*F+0]*be>>23,R[z+4*F+1]=R[z+4*F+1]*be>>23,R[z+4*F+2]=R[z+4*F+2]*be>>23)}m+=E}}function C(h,m,b,_,L){for(;0<_--;){var E;for(E=0;E<b;++E){var F=h[m+2*E+0],R=15&($=h[m+2*E+1]),z=4369*R,$=(240&$|$>>4)*z>>16;h[m+2*E+0]=(240&F|F>>4)*z>>16&240|(15&F|F<<4)*z>>16>>4&15,h[m+2*E+1]=240&$|R}m+=L}}function J(h,m,b,_,L,E,F,R){var z,$,ie=255;for($=0;$<L;++$){for(z=0;z<_;++z){var be=h[m+z];E[F+4*z]=be,ie&=be}m+=b,F+=R}return ie!=255}function se(h,m,b,_,L){var E;for(E=0;E<L;++E)b[_+E]=h[m+E]>>8}function ge(){hr=x,It=C,Rt=J,rn=se}function Se(h,m,b){j[h]=function(_,L,E,F,R,z,$,ie,be,ye,pe,Oe,je,ae,he,De,Ie){var Me,Je=Ie-1>>1,We=R[z+0]|$[ie+0]<<16,rt=be[ye+0]|pe[Oe+0]<<16;e(_!=null);var Ve=3*We+rt+131074>>2;for(m(_[L+0],255&Ve,Ve>>16,je,ae),E!=null&&(Ve=3*rt+We+131074>>2,m(E[F+0],255&Ve,Ve>>16,he,De)),Me=1;Me<=Je;++Me){var jt=R[z+Me]|$[ie+Me]<<16,At=be[ye+Me]|pe[Oe+Me]<<16,vt=We+jt+rt+At+524296,mt=vt+2*(jt+rt)>>3;Ve=mt+We>>1,We=(vt=vt+2*(We+At)>>3)+jt>>1,m(_[L+2*Me-1],255&Ve,Ve>>16,je,ae+(2*Me-1)*b),m(_[L+2*Me-0],255&We,We>>16,je,ae+(2*Me-0)*b),E!=null&&(Ve=vt+rt>>1,We=mt+At>>1,m(E[F+2*Me-1],255&Ve,Ve>>16,he,De+(2*Me-1)*b),m(E[F+2*Me+0],255&We,We>>16,he,De+(2*Me+0)*b)),We=jt,rt=At}1&Ie||(Ve=3*We+rt+131074>>2,m(_[L+Ie-1],255&Ve,Ve>>16,je,ae+(Ie-1)*b),E!=null&&(Ve=3*rt+We+131074>>2,m(E[F+Ie-1],255&Ve,Ve>>16,he,De+(Ie-1)*b)))}}function Re(){pr[Ul]=ex,pr[Wl]=hf,pr[of]=tx,pr[$l]=ff,pr[Vl]=pf,pr[Uu]=mf,pr[lf]=nx,pr[Wu]=hf,pr[$u]=ff,pr[Gl]=pf,pr[Vu]=mf}function Ye(h){return h&-16384?0>h?0:255:h>>rx}function et(h,m){return Ye((19077*h>>8)+(26149*m>>8)-14234)}function dt(h,m,b){return Ye((19077*h>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function lt(h,m){return Ye((19077*h>>8)+(33050*m>>8)-17685)}function xt(h,m,b,_,L){_[L+0]=et(h,b),_[L+1]=dt(h,m,b),_[L+2]=lt(h,m)}function $t(h,m,b,_,L){_[L+0]=lt(h,m),_[L+1]=dt(h,m,b),_[L+2]=et(h,b)}function Jt(h,m,b,_,L){var E=dt(h,m,b);m=E<<3&224|lt(h,m)>>3,_[L+0]=248&et(h,b)|E>>5,_[L+1]=m}function hn(h,m,b,_,L){var E=240&lt(h,m)|15;_[L+0]=240&et(h,b)|dt(h,m,b)>>4,_[L+1]=E}function Pn(h,m,b,_,L){_[L+0]=255,xt(h,m,b,_,L+1)}function xn(h,m,b,_,L){$t(h,m,b,_,L),_[L+3]=255}function Ar(h,m,b,_,L){xt(h,m,b,_,L),_[L+3]=255}function er(h,m){return 0>h?0:h>m?m:h}function Ur(h,m,b){j[h]=function(_,L,E,F,R,z,$,ie,be){for(var ye=ie+(-2&be)*b;ie!=ye;)m(_[L+0],E[F+0],R[z+0],$,ie),m(_[L+1],E[F+0],R[z+0],$,ie+b),L+=2,++F,++z,ie+=2*b;1&be&&m(_[L+0],E[F+0],R[z+0],$,ie)}}function Fl(h,m,b){return b==0?h==0?m==0?6:5:m==0?4:0:b}function mo(h,m,b,_,L){switch(h>>>30){case 3:us(m,b,_,L,0);break;case 2:nn(m,b,_,L);break;case 1:zn(m,b,_,L)}}function go(h,m){var b,_,L=m.M,E=m.Nb,F=h.oc,R=h.pc+40,z=h.oc,$=h.pc+584,ie=h.oc,be=h.pc+600;for(b=0;16>b;++b)F[R+32*b-1]=129;for(b=0;8>b;++b)z[$+32*b-1]=129,ie[be+32*b-1]=129;for(0<L?F[R-1-32]=z[$-1-32]=ie[be-1-32]=129:(s(F,R-32-1,127,21),s(z,$-32-1,127,9),s(ie,be-32-1,127,9)),_=0;_<h.za;++_){var ye=m.ya[m.aa+_];if(0<_){for(b=-1;16>b;++b)r(F,R+32*b-4,F,R+32*b+12,4);for(b=-1;8>b;++b)r(z,$+32*b-4,z,$+32*b+4,4),r(ie,be+32*b-4,ie,be+32*b+4,4)}var pe=h.Gd,Oe=h.Hd+_,je=ye.ad,ae=ye.Hc;if(0<L&&(r(F,R-32,pe[Oe].y,0,16),r(z,$-32,pe[Oe].f,0,8),r(ie,be-32,pe[Oe].ea,0,8)),ye.Za){var he=F,De=R-32+16;for(0<L&&(_>=h.za-1?s(he,De,pe[Oe].y[15],4):r(he,De,pe[Oe+1].y,0,4)),b=0;4>b;b++)he[De+128+b]=he[De+256+b]=he[De+384+b]=he[De+0+b];for(b=0;16>b;++b,ae<<=2)he=F,De=R+xf[b],Lr[ye.Ob[b]](he,De),mo(ae,je,16*+b,he,De)}else if(he=Fl(_,L,ye.Ob[0]),Ts[he](F,R),ae!=0)for(b=0;16>b;++b,ae<<=2)mo(ae,je,16*+b,F,R+xf[b]);for(b=ye.Gc,he=Fl(_,L,ye.Dd),hs[he](z,$),hs[he](ie,be),ae=je,he=z,De=$,255&(ye=b>>0)&&(170&ye?wo(ae,256,he,De):ur(ae,256,he,De)),ye=ie,ae=be,255&(b>>=8)&&(170&b?wo(je,320,ye,ae):ur(je,320,ye,ae)),L<h.Ub-1&&(r(pe[Oe].y,0,F,R+480,16),r(pe[Oe].f,0,z,$+224,8),r(pe[Oe].ea,0,ie,be+224,8)),b=8*E*h.B,pe=h.sa,Oe=h.ta+16*_+16*E*h.R,je=h.qa,ye=h.ra+8*_+b,ae=h.Ha,he=h.Ia+8*_+b,b=0;16>b;++b)r(pe,Oe+b*h.R,F,R+32*b,16);for(b=0;8>b;++b)r(je,ye+b*h.B,z,$+32*b,8),r(ae,he+b*h.B,ie,be+32*b,8)}}function aa(h,m,b,_,L,E,F,R,z){var $=[0],ie=[0],be=0,ye=z!=null?z.kd:0,pe=z??new uo;if(h==null||12>b)return 7;pe.data=h,pe.w=m,pe.ha=b,m=[m],b=[b],pe.gb=[pe.gb];e:{var Oe=m,je=b,ae=pe.gb;if(e(h!=null),e(je!=null),e(ae!=null),ae[0]=0,12<=je[0]&&!t(h,Oe[0],"RIFF")){if(t(h,Oe[0]+8,"WEBP")){ae=3;break e}var he=Le(h,Oe[0]+4);if(12>he||4294967286<he){ae=3;break e}if(ye&&he>je[0]-8){ae=7;break e}ae[0]=he,Oe[0]+=12,je[0]-=12}ae=0}if(ae!=0)return ae;for(he=0<pe.gb[0],b=b[0];;){e:{var De=h;je=m,ae=b;var Ie=$,Me=ie,Je=Oe=[0];if((Ve=be=[be])[0]=0,8>ae[0])ae=7;else{if(!t(De,je[0],"VP8X")){if(Le(De,je[0]+4)!=10){ae=3;break e}if(18>ae[0]){ae=7;break e}var We=Le(De,je[0]+8),rt=1+Fe(De,je[0]+12);if(2147483648<=rt*(De=1+Fe(De,je[0]+15))){ae=3;break e}Je!=null&&(Je[0]=We),Ie!=null&&(Ie[0]=rt),Me!=null&&(Me[0]=De),je[0]+=18,ae[0]-=18,Ve[0]=1}ae=0}}if(be=be[0],Oe=Oe[0],ae!=0)return ae;if(je=!!(2&Oe),!he&&be)return 3;if(E!=null&&(E[0]=!!(16&Oe)),F!=null&&(F[0]=je),R!=null&&(R[0]=0),F=$[0],Oe=ie[0],be&&je&&z==null){ae=0;break}if(4>b){ae=7;break}if(he&&be||!he&&!be&&!t(h,m[0],"ALPH")){b=[b],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{We=h,ae=m,he=b;var Ve=pe.gb;Ie=pe.na,Me=pe.P,Je=pe.Sa,rt=22,e(We!=null),e(he!=null),De=ae[0];var jt=he[0];for(e(Ie!=null),e(Je!=null),Ie[0]=null,Me[0]=null,Je[0]=0;;){if(ae[0]=De,he[0]=jt,8>jt){ae=7;break e}var At=Le(We,De+4);if(4294967286<At){ae=3;break e}var vt=8+At+1&-2;if(rt+=vt,0<Ve&&rt>Ve){ae=3;break e}if(!t(We,De,"VP8 ")||!t(We,De,"VP8L")){ae=0;break e}if(jt[0]<vt){ae=7;break e}t(We,De,"ALPH")||(Ie[0]=We,Me[0]=De+8,Je[0]=At),De+=vt,jt-=vt}}if(b=b[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],ae!=0)break}b=[b],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(Ve=h,ae=m,he=b,Ie=pe.gb[0],Me=pe.Ja,Je=pe.xa,We=ae[0],De=!t(Ve,We,"VP8 "),rt=!t(Ve,We,"VP8L"),e(Ve!=null),e(he!=null),e(Me!=null),e(Je!=null),8>he[0])ae=7;else{if(De||rt){if(Ve=Le(Ve,We+4),12<=Ie&&Ve>Ie-12){ae=3;break e}if(ye&&Ve>he[0]-8){ae=7;break e}Me[0]=Ve,ae[0]+=8,he[0]-=8,Je[0]=rt}else Je[0]=5<=he[0]&&Ve[We+0]==47&&!(Ve[We+4]>>5),Me[0]=he[0];ae=0}if(b=b[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],m=m[0],ae!=0)break;if(4294967286<pe.Ja)return 3;if(R==null||je||(R[0]=pe.xa?2:1),F=[F],Oe=[Oe],pe.xa){if(5>b){ae=7;break}R=F,ye=Oe,je=E,h==null||5>b?h=0:5<=b&&h[m+0]==47&&!(h[m+4]>>5)?(he=[0],Ve=[0],Ie=[0],Z(Me=new k,h,m,b),Xe(Me,he,Ve,Ie)?(R!=null&&(R[0]=he[0]),ye!=null&&(ye[0]=Ve[0]),je!=null&&(je[0]=Ie[0]),h=1):h=0):h=0}else{if(10>b){ae=7;break}R=Oe,h==null||10>b||!vl(h,m+3,b-3)?h=0:(ye=h[m+0]|h[m+1]<<8|h[m+2]<<16,je=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=pe.Ja||!je||!h?h=0:(F&&(F[0]=je),R&&(R[0]=h),h=1))}if(!h||(F=F[0],Oe=Oe[0],be&&($[0]!=F||ie[0]!=Oe)))return 3;z!=null&&(z[0]=pe,z.offset=m-z.w,e(4294967286>m-z.w),e(z.offset==z.ha-b));break}return ae==0||ae==7&&be&&z==null?(E!=null&&(E[0]|=pe.na!=null&&0<pe.na.length),_!=null&&(_[0]=F),L!=null&&(L[0]=Oe),0):ae}function xo(h,m,b){var _=m.width,L=m.height,E=0,F=0,R=_,z=L;if(m.Da=h!=null&&0<h.Da,m.Da&&(R=h.cd,z=h.bd,E=h.v,F=h.j,11>b||(E&=-2,F&=-2),0>E||0>F||0>=R||0>=z||E+R>_||F+z>L))return 0;if(m.v=E,m.j=F,m.va=E+R,m.o=F+z,m.U=R,m.T=z,m.da=h!=null&&0<h.da,m.da){if(!$e(R,z,b=[h.ib],E=[h.hb]))return 0;m.ib=b[0],m.hb=E[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*_/4&&m.hb<3*L/4,m.Kb=0),1}function bo(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function oa(h,m,b,_){if(_==null||0>=h||0>=m)return 2;if(b!=null){if(b.Da){var L=b.cd,E=b.bd,F=-2&b.v,R=-2&b.j;if(0>F||0>R||0>=L||0>=E||F+L>h||R+E>m)return 2;h=L,m=E}if(b.da){if(!$e(h,m,L=[b.ib],E=[b.hb]))return 2;h=L[0],m=E[0]}}_.width=h,_.height=m;e:{var z=_.width,$=_.height;if(h=_.S,0>=z||0>=$||!(h>=Ul&&13>h))h=2;else{if(0>=_.Rd&&_.sd==null){F=E=L=m=0;var ie=(R=z*bf[h])*$;if(11>h||(E=($+1)/2*(m=(z+1)/2),h==12&&(F=(L=z)*$)),($=i(ie+2*E+F))==null){h=1;break e}_.sd=$,11>h?((z=_.f.RGBA).eb=$,z.fb=0,z.A=R,z.size=ie):((z=_.f.kb).y=$,z.O=0,z.fa=R,z.Fd=ie,z.f=$,z.N=0+ie,z.Ab=m,z.Cd=E,z.ea=$,z.W=0+ie+E,z.Db=m,z.Ed=E,h==12&&(z.F=$,z.J=0+ie+2*E),z.Tc=F,z.lb=L)}if(m=1,L=_.S,E=_.width,F=_.height,L>=Ul&&13>L)if(11>L)h=_.f.RGBA,m&=(R=Math.abs(h.A))*(F-1)+E<=h.size,m&=R>=E*bf[L],m&=h.eb!=null;else{h=_.f.kb,R=(E+1)/2,ie=(F+1)/2,z=Math.abs(h.fa),$=Math.abs(h.Ab);var be=Math.abs(h.Db),ye=Math.abs(h.lb),pe=ye*(F-1)+E;m&=z*(F-1)+E<=h.Fd,m&=$*(ie-1)+R<=h.Cd,m=(m&=be*(ie-1)+R<=h.Ed)&z>=E&$>=R&be>=R,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,L==12&&(m&=ye>=E,m&=pe<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||b!=null&&b.fd&&(h=bo(_)),h}var Sn=64,la=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ca=24,ua=32,yo=8,Wn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];te("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(h){return h},j.Predictor2=function(h,m,b){return m[b+0]},j.Predictor3=function(h,m,b){return m[b+1]},j.Predictor4=function(h,m,b){return m[b-1]},j.Predictor5=function(h,m,b){return G(G(h,m[b+1]),m[b+0])},j.Predictor6=function(h,m,b){return G(h,m[b-1])},j.Predictor7=function(h,m,b){return G(h,m[b+0])},j.Predictor8=function(h,m,b){return G(m[b-1],m[b+0])},j.Predictor9=function(h,m,b){return G(m[b+0],m[b+1])},j.Predictor10=function(h,m,b){return G(G(h,m[b-1]),G(m[b+0],m[b+1]))},j.Predictor11=function(h,m,b){var _=m[b+0];return 0>=oe(_>>24&255,h>>24&255,(m=m[b-1])>>24&255)+oe(_>>16&255,h>>16&255,m>>16&255)+oe(_>>8&255,h>>8&255,m>>8&255)+oe(255&_,255&h,255&m)?_:h},j.Predictor12=function(h,m,b){var _=m[b+0];return(ve((h>>24&255)+(_>>24&255)-((m=m[b-1])>>24&255))<<24|ve((h>>16&255)+(_>>16&255)-(m>>16&255))<<16|ve((h>>8&255)+(_>>8&255)-(m>>8&255))<<8|ve((255&h)+(255&_)-(255&m)))>>>0},j.Predictor13=function(h,m,b){var _=m[b-1];return(Be((h=G(h,m[b+0]))>>24&255,_>>24&255)<<24|Be(h>>16&255,_>>16&255)<<16|Be(h>>8&255,_>>8&255)<<8|Be(h>>0&255,_>>0&255))>>>0};var qu=j.PredictorAdd0;j.PredictorAdd1=_e,te("Predictor2","PredictorAdd2"),te("Predictor3","PredictorAdd3"),te("Predictor4","PredictorAdd4"),te("Predictor5","PredictorAdd5"),te("Predictor6","PredictorAdd6"),te("Predictor7","PredictorAdd7"),te("Predictor8","PredictorAdd8"),te("Predictor9","PredictorAdd9"),te("Predictor10","PredictorAdd10"),te("Predictor11","PredictorAdd11"),te("Predictor12","PredictorAdd12"),te("Predictor13","PredictorAdd13");var vo=j.PredictorAdd2;Ge("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Il,cr=j.ColorIndexInverseTransform,da=j.MapARGB,Rl=j.VP8LColorIndexInverseTransformAlpha,Bl=j.MapAlpha,Ds=j.VP8LPredictorsAdd=[];Ds.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var hi,$n,Bn,Ms,ls,cs,ha,us,nn,wo,zn,ur,fa,zl,_o,fi,pi,Os,mi,pa,gi,Es,No,dr,hr,It,Rt,rn,mn=i(511),ds=i(2041),jo=i(225),ma=i(767),ql=0,Hu=ds,Hl=jo,tr=ma,fr=mn,Ul=0,Wl=1,of=2,$l=3,Vl=4,Uu=5,lf=6,Wu=7,$u=8,Gl=9,Vu=10,z1=[2,3,7],q1=[3,3,11],cf=[280,256,256,256,40],H1=[0,1,1,1,0],U1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],W1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],V1=8,Gu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ko=null,G1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Y1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],K1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],J1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],X1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Q1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ts=[],Lr=[],hs=[],Z1=1,df=2,Fs=[],pr=[];Se("UpsampleRgbLinePair",xt,3),Se("UpsampleBgrLinePair",$t,3),Se("UpsampleRgbaLinePair",Ar,4),Se("UpsampleBgraLinePair",xn,4),Se("UpsampleArgbLinePair",Pn,4),Se("UpsampleRgba4444LinePair",hn,2),Se("UpsampleRgb565LinePair",Jt,2);var ex=j.UpsampleRgbLinePair,tx=j.UpsampleBgrLinePair,hf=j.UpsampleRgbaLinePair,ff=j.UpsampleBgraLinePair,pf=j.UpsampleArgbLinePair,mf=j.UpsampleRgba4444LinePair,nx=j.UpsampleRgb565LinePair,Yl=16,Kl=1<<Yl-1,So=-227,Ku=482,rx=6,gf=0,sx=i(256),ix=i(256),ax=i(256),ox=i(256),lx=i(Ku-So),cx=i(Ku-So);Ur("YuvToRgbRow",xt,3),Ur("YuvToBgrRow",$t,3),Ur("YuvToRgbaRow",Ar,4),Ur("YuvToBgraRow",xn,4),Ur("YuvToArgbRow",Pn,4),Ur("YuvToRgba4444Row",hn,2),Ur("YuvToRgb565Row",Jt,2);var xf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jl=[0,2,8],ux=[8,7,6,4,4,2,2,2,1,1,1,1],dx=1;this.WebPDecodeRGBA=function(h,m,b,_,L){var E=Wl,F=new sa,R=new Ln;F.ba=R,R.S=E,R.width=[R.width],R.height=[R.height];var z=R.width,$=R.height,ie=new Qn;if(ie==null||h==null)var be=2;else e(ie!=null),be=aa(h,m,b,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(be!=0?z=0:(z!=null&&(z[0]=ie.width[0]),$!=null&&($[0]=ie.height[0]),z=1),z){R.width=R.width[0],R.height=R.height[0],_!=null&&(_[0]=R.width),L!=null&&(L[0]=R.height);e:{if(_=new Xi,(L=new uo).data=h,L.w=m,L.ha=b,L.kd=1,m=[0],e(L!=null),((h=aa(L.data,L.w,L.ha,null,null,null,m,null,L))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(F!=null),_.data=L.data,_.w=L.w+L.offset,_.ha=L.ha-L.offset,_.put=Ze,_.ac=Ue,_.bc=Nt,_.ma=F,L.xa){if((h=lr())==null){F=1;break e}if(function(ye,pe){var Oe=[0],je=[0],ae=[0];t:for(;;){if(ye==null)return 0;if(pe==null)return ye.a=2,0;if(ye.l=pe,ye.a=0,Z(ye.m,pe.data,pe.w,pe.ha),!Xe(ye.m,Oe,je,ae)){ye.a=3;break t}if(ye.xb=df,pe.width=Oe[0],pe.height=je[0],!zr(Oe[0],je[0],1,ye,null))break t;return 1}return e(ye.a!=0),0}(h,_)){if(_=(m=oa(_.width,_.height,F.Oa,F.ba))==0){t:{_=h;n:for(;;){if(_==null){_=0;break t}if(e(_.s.yc!=null),e(_.s.Ya!=null),e(0<_.s.Wb),e((b=_.l)!=null),e((L=b.ma)!=null),_.xb!=0){if(_.ca=L.ba,_.tb=L.tb,e(_.ca!=null),!xo(L.Oa,b,$l)){_.a=2;break n}if(!oi(_,b.width)||b.da)break n;if((b.da||yt(_.ca.S))&&ge(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ge()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!qe(_.s.vb,_.s.Wa.Xa)){_.a=1;break n}_.xb=0}if(!jr(_,_.V,_.Ba,_.c,_.i,b.o,$i))break n;L.Dc=_.Ma,_=1;break t}e(_.a!=0),_=0}_=!_}_&&(m=h.a)}else m=h.a}else{if((h=new _u)==null){F=1;break e}if(h.Fa=L.na,h.P=L.P,h.qc=L.Sa,wl(h,_)){if((m=oa(_.width,_.height,F.Oa,F.ba))==0){if(h.Aa=0,b=F.Oa,e((L=h)!=null),b!=null){if(0<(z=0>(z=b.Md)?0:100<z?255:255*z/100)){for($=ie=0;4>$;++$)12>(be=L.pb[$]).lc&&(be.ia=z*ux[0>be.lc?0:be.lc]>>3),ie|=be.ia;ie&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=b.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}Nu(h,_)||(m=h.a)}}else m=h.a}m==0&&F.Oa!=null&&F.Oa.fd&&(m=bo(F.ba))}F=m}E=F!=0?null:11>E?R.f.RGBA.eb:R.f.kb.y}else E=null;return E};var bf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(j,D){for(var H="",A=0;A<4;A++)H+=String.fromCharCode(j[D++]);return H}function d(j,D){return(j[D+0]<<0|j[D+1]<<8|j[D+2]<<16)>>>0}function f(j,D){return(j[D+0]<<0|j[D+1]<<8|j[D+2]<<16|j[D+3]<<24)>>>0}new c;var g=[0],p=[0],y=[],v=new c,w=n,N=function(j,D){var H={},A=0,S=!1,q=0,O=0;if(H.frames=[],!function(T,I,Y,Q){for(var fe=0;fe<Q;fe++)if(T[I+fe]!=Y.charCodeAt(fe))return!0;return!1}(j,D,"RIFF",4)){for(f(j,D+=4),D+=8;D<j.length;){var V=u(j,D),ee=f(j,D+=4);D+=4;var B=ee+(1&ee);switch(V){case"VP8 ":case"VP8L":H.frames[A]===void 0&&(H.frames[A]={}),(de=H.frames[A]).src_off=S?O:D-8,de.src_size=q+ee+8,A++,S&&(S=!1,q=0,O=0);break;case"VP8X":(de=H.header={}).feature_flags=j[D];var Z=D+4;de.canvas_width=1+d(j,Z),Z+=3,de.canvas_height=1+d(j,Z),Z+=3;break;case"ALPH":S=!0,q=B+8,O=D-8;break;case"ANIM":(de=H.header).bgcolor=f(j,D),Z=D+4,de.loop_count=(xe=j)[(k=Z)+0]<<0|xe[k+1]<<8,Z+=2;break;case"ANMF":var ne,de;(de=H.frames[A]={}).offset_x=2*d(j,D),D+=3,de.offset_y=2*d(j,D),D+=3,de.width=1+d(j,D),D+=3,de.height=1+d(j,D),D+=3,de.duration=d(j,D),D+=3,ne=j[D++],de.dispose=1&ne,de.blend=ne>>1&1}V!="ANMF"&&(D+=B)}var xe,k;return H}}(w,0);N.response=w,N.rgbaoutput=!0,N.dataurl=!1;var P=N.header?N.header:null,M=N.frames?N.frames:null;if(P){P.loop_counter=P.loop_count,g=[P.canvas_height],p=[P.canvas_width];for(var W=0;W<M.length&&M[W].blend!=0;W++);}var K=M[0],le=v.WebPDecodeRGBA(w,K.src_off,K.src_size,p,g);K.rgba=le,K.imgwidth=p[0],K.imgheight=g[0];for(var X=0;X<p[0]*g[0]*4;X++)y[X]=le[X];return this.width=p,this.height=g,this.data=y,this}(function(n){var e=function(){return typeof ih=="function"},t=function(g,p,y,v){var w=4,N=a;switch(v){case n.image_compression.FAST:w=1,N=i;break;case n.image_compression.MEDIUM:w=6,N=o;break;case n.image_compression.SLOW:w=9,N=c}g=r(g,p,y,N);var P=ih(g,{level:w});return n.__addimage__.arrayBufferToBinaryString(P)},r=function(g,p,y,v){for(var w,N,P,M=g.length/p,W=new Uint8Array(g.length+M),K=d(),le=0;le<M;le+=1){if(P=le*p,w=g.subarray(P,P+p),v)W.set(v(w,y,N),P+le);else{for(var X,j=K.length,D=[];X<j;X+=1)D[X]=K[X](w,y,N);var H=f(D.concat());W.set(D[H],P+le)}N=w}return W},s=function(g){var p=Array.apply([],g);return p.unshift(0),p},i=function(g,p){var y,v=[],w=g.length;v[0]=1;for(var N=0;N<w;N+=1)y=g[N-p]||0,v[N+1]=g[N]-y+256&255;return v},a=function(g,p,y){var v,w=[],N=g.length;w[0]=2;for(var P=0;P<N;P+=1)v=y&&y[P]||0,w[P+1]=g[P]-v+256&255;return w},o=function(g,p,y){var v,w,N=[],P=g.length;N[0]=3;for(var M=0;M<P;M+=1)v=g[M-p]||0,w=y&&y[M]||0,N[M+1]=g[M]+256-(v+w>>>1)&255;return N},c=function(g,p,y){var v,w,N,P,M=[],W=g.length;M[0]=4;for(var K=0;K<W;K+=1)v=g[K-p]||0,w=y&&y[K]||0,N=y&&y[K-p]||0,P=u(v,w,N),M[K+1]=g[K]-P+256&255;return M},u=function(g,p,y){if(g===p&&p===y)return g;var v=Math.abs(p-y),w=Math.abs(g-y),N=Math.abs(g+p-y-y);return v<=w&&v<=N?g:w<=N?p:y},d=function(){return[s,i,a,o,c]},f=function(g){var p=g.map(function(y){return y.reduce(function(v,w){return v+Math.abs(w)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(g,p,y,v){var w,N,P,M,W,K,le,X,j,D,H,A,S,q,O,V=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(P=new q5(g)).imgData,N=P.bits,w=P.colorSpace,W=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){j=(X=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,H=new Uint8Array(j*P.colors),D=new Uint8Array(j);var B,Z=P.pixelBitlength-P.bits;for(q=0,O=0;q<j;q++){for(S=X[q],B=0;B<Z;)H[O++]=S>>>B&255,B+=P.bits;D[q]=S>>>B&255}}if(P.bits===16){j=(X=new Uint32Array(P.decodePixels().buffer)).length,H=new Uint8Array(j*(32/P.pixelBitlength)*P.colors),D=new Uint8Array(j*(32/P.pixelBitlength)),A=P.colors>1,q=0,O=0;for(var ne=0;q<j;)S=X[q++],H[O++]=S>>>0&255,A&&(H[O++]=S>>>16&255,S=X[q++],H[O++]=S>>>0&255),D[ne++]=S>>>16&255;N=8}v!==n.image_compression.NONE&&e()?(g=t(H,P.width*P.colors,P.colors,v),le=t(D,P.width,1,v)):(g=H,le=D,V=void 0)}if(P.colorType===3&&(w=this.color_spaces.INDEXED,K=P.palette,P.transparency.indexed)){var de=P.transparency.indexed,xe=0;for(q=0,j=de.length;q<j;++q)xe+=de[q];if((xe/=255)===j-1&&de.indexOf(0)!==-1)M=[de.indexOf(0)];else if(xe!==j){for(X=P.decodePixels(),D=new Uint8Array(X.length),q=0,j=X.length;q<j;q++)D[q]=de[X[q]];le=t(D,P.width,1)}}var k=function(T){var I;switch(T){case n.image_compression.FAST:I=11;break;case n.image_compression.MEDIUM:I=13;break;case n.image_compression.SLOW:I=14;break;default:I=12}return I}(v);return V===this.decode.FLATE_DECODE&&(ee="/Predictor "+k+" "),ee+="/Colors "+W+" /BitsPerComponent "+N+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(le&&this.__addimage__.isArrayBuffer(le)||this.__addimage__.isArrayBufferView(le))&&(le=this.__addimage__.arrayBufferToBinaryString(le)),{alias:y,data:g,index:p,filter:V,decodeParameters:ee,transparency:M,palette:K,sMask:le,predictor:k,width:P.width,height:P.height,bitsPerComponent:N,colorSpace:w}}}})(nt.API),function(n){n.processGIF89A=function(e,t,r,s){var i=new H5(e),a=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},d=new Dd(100).encode(u,100);return n.processJPEG.call(this,d,t,r,s)},n.processGIF87A=n.processGIF89A}(nt.API),Mr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Mr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Tt.log("bit decode error:"+t)}},Mr.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Mr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,o=i>>4,c=15&i,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*s+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Mr.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},Mr.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,u=i>>15?255:0,d=r*this.width*4+4*s;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=u}this.pos+=n}},Mr.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=n}},Mr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Mr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=a}},Mr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,s){var i=new Mr(e,!1),a=i.width,o=i.height,c={data:i.getData(),width:a,height:o},u=new Dd(100).encode(c,100);return n.processJPEG.call(this,u,t,r,s)}}(nt.API),Gp.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,s){var i=new Gp(e),a=i.width,o=i.height,c={data:i.getData(),width:a,height:o},u=new Dd(100).encode(c,100);return n.processJPEG.call(this,u,t,r,s)}}(nt.API),nt.API.processRGBA=function(n,e,t){for(var r=n.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,c=0,u=0;u<s;u+=4){var d=r[u],f=r[u+1],g=r[u+2],p=r[u+3];i[o++]=d,i[o++]=f,i[o++]=g,a[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},nt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Da=nt.API,wc=Da.getCharWidthsArray=function(n,e){var t,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,g=0,p=n.length,y=0,v=o[0]||c,w=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?w.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(g=f&&Dt(u[r])==="object"&&!isNaN(parseInt(u[r][y],10))?u[r][y]/d:0,w.push((o[r]||v)/c+g)),y=r;return w},Up=Da.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Da.processArabic&&(n=Da.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,s)/t:wc.apply(this,arguments).reduce(function(i,a){return i+a},0)},Wp=function(n,e,t,r){for(var s=[],i=0,a=n.length,o=0;i!==a&&o+e[i]<t;)o+=e[i],i++;s.push(n.slice(0,i));var c=i;for(o=0;i!==a;)o+e[i]>r&&(s.push(n.slice(c,i)),o=0,c=i),o+=e[i],i++;return c!==i&&s.push(n.slice(c,i)),s},$p=function(n,e,t){t||(t={});var r,s,i,a,o,c,u,d=[],f=[d],g=t.textIndent||0,p=0,y=0,v=n.split(" "),w=wc.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?v[0].length+2:t.lineIndent||0){var N=Array(c).join(" "),P=[];v.map(function(W){(W=W.split(/\s*\n/)).length>1?P=P.concat(W.map(function(K,le){return(le&&K.length?`
`:"")+K})):P.push(W[0])}),v=P,c=Up.apply(this,[N,t])}for(i=0,a=v.length;i<a;i++){var M=0;if(r=v[i],c&&r[0]==`
`&&(r=r.substr(1),M=1),g+p+(y=(s=wc.apply(this,[r,t])).reduce(function(W,K){return W+K},0))>e||M){if(y>e){for(o=Wp.apply(this,[r,s,e-(g+p),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);y=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(W,K){return W+K},0)}else d=[r];f.push(d),g=y+c,p=w}else d.push(r),g+=p+y,p=w}return u=c?function(W,K){return(K?N:"")+W.join(" ")}:function(W){return W.join(" ")},f.map(u)},Da.splitTextToSize=function(n,e,t){var r,s=(t=t||{}).fontSize||this.internal.getFontSize(),i=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=r.length;o<c;o++)u=u.concat($p.apply(this,[r[o],a,i]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},s=0;s<e.length;s++)t[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},a=n.__fontmetrics__.compress=function(f){var g,p,y,v,w=["{"];for(var N in f){if(g=f[N],isNaN(parseInt(N,10))?p="'"+N+"'":(N=parseInt(N,10),p=(p=i(N).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof g=="number")g<0?(y=i(g).slice(3),v="-"):(y=i(g).slice(2),v=""),y=v+y.slice(0,-1)+r[y.slice(-1)];else{if(Dt(g)!=="object")throw new Error("Don't know what to do with value type "+Dt(g)+".");y=a(g)}w.push(p+y)}return w.push("}"),w.join("")},o=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,y,v,w={},N=1,P=w,M=[],W="",K="",le=f.length-1,X=1;X<le;X+=1)(v=f[X])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(v):v=="{"?(M.push([P,y]),P={},y=void 0):v=="}"?((p=M.pop())[0][p[1]]=P,y=void 0,P=p[0]):v=="-"?N=-1:y===void 0?t.hasOwnProperty(v)?(W+=t[v],y=parseInt(W,16)*N,N=1,W=""):W+=v:t.hasOwnProperty(v)?(K+=t[v],P[y]=parseInt(K,16)*N,N=1,y=void 0,K=""):K+=v;return w},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var g=f.font,p=d.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var y=u.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])}(nt.API),function(n){var e=function(t){for(var r=t.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=t.charCodeAt(i);return s};n.API.events.push(["addFont",function(t){var r=void 0,s=t.font,i=t.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Xo(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])}(nt),function(n){function e(){return(st.canvg?Promise.resolve(st.canvg):ks(()=>import("./index.es-B76waWaV.js"),__vite__mapDeps([2,1,3]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}nt.API.addSvgAsImage=function(t,r,s,i,a,o,c,u){if(isNaN(r)||isNaN(s))throw Tt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Tt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=a;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(y){return y.fromString(f,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(g)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),r,s,i,a,c,u)})}}(),nt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,t);return this},nt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,d=0,f=0;function g(y,v){var w,N=!1;for(w=0;w<y.length;w+=1)y[w]===v&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=o.length;for(f=0;f<p;f+=1)t[o[f]].value=t[o[f]].defaultValue,t[o[f]].explicitSet=!1}if(Dt(n)==="object"){for(s in n)if(i=n[s],g(o,s)&&i!==void 0){if(t[s].type==="boolean"&&typeof i=="boolean")t[s].value=i;else if(t[s].type==="name"&&g(t[s].valueSet,i))t[s].value=i;else if(t[s].type==="integer"&&Number.isInteger(i))t[s].value=i;else if(t[s].type==="array"){for(u=0;u<i.length;u+=1)if(r=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(r=!1);r===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}t[s].value="["+c.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in t)t[y].explicitSet===!0&&(t[y].type==="name"?v.push("/"+y+" /"+t[y].value):v.push("/"+y+" "+t[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+a.length+o.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(nt.API),function(n){var e=n.API,t=e.pdfEscape16=function(i,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,g=i.length;f<g;++f){if(o=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(i){var a,o,c,u,d,f,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,g=(o=Object.keys(i).sort(function(p,y){return p-y})).length;f<g;f++)a=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(u=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,c=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",y=0;y<g.length;y++)p+=String.fromCharCode(g[y]);var v=u();d({data:p,addLength1:!0,objectId:v}),c("endobj");var w=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var N=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Fa(o.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var P=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Fa(o.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+n.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+w+" 0 R"),c("/BaseFont /"+Fa(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+P+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,c=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,g="",p=0;p<f.length;p++)g+=String.fromCharCode(f[p]);var y=u();d({data:g,addLength1:!0,objectId:y}),c("endobj");var v=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var w=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Fa(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var N=0;N<o.metadata.hmtx.widths.length;N++)o.metadata.hmtx.widths[N]=parseInt(o.metadata.hmtx.widths[N]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Fa(o.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},g=f.pdfEscape,p=f.activeFontKey,y=f.fonts,v=p,w="",N=0,P="",M=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(P=o,v=p,Array.isArray(o)&&(P=o[0]),N=0;N<P.length;N+=1)y[v].metadata.hasOwnProperty("cmap")&&(a=y[v].metadata.cmap.unicode.codeMap[P[N].charCodeAt(0)]),a||P[N].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?w+=P[N]:w+="";var W="";return parseInt(v.slice(1))<14||M==="WinAnsiEncoding"?W=g(w,v).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(W=t(w,y[v])),f.isHex=!0,{text:W,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],c={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([s(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(s(Object.assign({},c,{text:a[u]})).text);i.text=o}else i.text=s(Object.assign({},c,{text:a})).text}])}(nt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(nt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var s,i,a,o,c,u,d,f=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,M=0;this.__bidiEngine__={};var W=function(A){var S=A.charCodeAt(),q=S>>8,O=v[q];return O!==void 0?f[256*O+(255&S)]:q===252||q===253?"AL":N.test(q)?"L":q===8?"R":"N"},K=function(A){for(var S,q=0;q<A.length;q++){if((S=W(A.charAt(q)))==="L")return!1;if(S==="R")return!0}return!1},le=function(A,S,q,O){var V,ee,B,Z,ne=S[O];switch(ne){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(ne="AN");break;case"AL":P=!0,ne="R";break;case"WS":ne="N";break;case"CS":O<1||O+1>=S.length||(V=q[O-1])!=="EN"&&V!=="AN"||(ee=S[O+1])!=="EN"&&ee!=="AN"?ne="N":P&&(ee="AN"),ne=ee===V?ee:"N";break;case"ES":ne=(V=O>0?q[O-1]:"B")==="EN"&&O+1<S.length&&S[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&q[O-1]==="EN"){ne="EN";break}if(P){ne="N";break}for(B=O+1,Z=S.length;B<Z&&S[B]==="ET";)B++;ne=B<Z&&S[B]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(Z=S.length,B=O+1;B<Z&&S[B]==="NSM";)B++;if(B<Z){var de=A[O],xe=de>=1425&&de<=2303||de===64286;if(V=S[B],xe&&(V==="R"||V==="AL")){ne="R";break}}}ne=O<1||(V=S[O-1])==="B"?"N":q[O-1];break;case"B":P=!1,s=!0,ne=M;break;case"S":i=!0,ne="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":ne="N"}return ne},X=function(A,S,q){var O=A.split("");return q&&j(O,q,{hiLevel:M}),O.reverse(),S&&S.reverse(),O.join("")},j=function(A,S,q){var O,V,ee,B,Z,ne=-1,de=A.length,xe=0,k=[],T=M?p:g,I=[];for(P=!1,s=!1,i=!1,V=0;V<de;V++)I[V]=W(A[V]);for(ee=0;ee<de;ee++){if(Z=xe,k[ee]=le(A,I,k,ee),O=240&(xe=T[Z][y[k[ee]]]),xe&=15,S[ee]=B=T[xe][5],O>0)if(O===16){for(V=ne;V<ee;V++)S[V]=1;ne=-1}else ne=-1;if(T[xe][6])ne===-1&&(ne=ee);else if(ne>-1){for(V=ne;V<ee;V++)S[V]=B;ne=-1}I[ee]==="B"&&(S[ee]=0),q.hiLevel|=B}i&&function(Y,Q,fe){for(var ce=0;ce<fe;ce++)if(Y[ce]==="S"){Q[ce]=M;for(var ue=ce-1;ue>=0&&Y[ue]==="WS";ue--)Q[ue]=M}}(I,S,de)},D=function(A,S,q,O,V){if(!(V.hiLevel<A)){if(A===1&&M===1&&!s)return S.reverse(),void(q&&q.reverse());for(var ee,B,Z,ne,de=S.length,xe=0;xe<de;){if(O[xe]>=A){for(Z=xe+1;Z<de&&O[Z]>=A;)Z++;for(ne=xe,B=Z-1;ne<B;ne++,B--)ee=S[ne],S[ne]=S[B],S[B]=ee,q&&(ee=q[ne],q[ne]=q[B],q[B]=ee);xe=Z}xe++}}},H=function(A,S,q){var O=A.split(""),V={hiLevel:M};return q||(q=[]),j(O,q,V),function(ee,B,Z){if(Z.hiLevel!==0&&d)for(var ne,de=0;de<ee.length;de++)B[de]===1&&(ne=w.indexOf(ee[de]))>=0&&(ee[de]=w[ne+1])}(O,q,V),D(2,O,S,q,V),D(1,O,S,q,V),O.join("")};return this.__bidiEngine__.doBidiReorder=function(A,S,q){if(function(V,ee){if(ee)for(var B=0;B<V.length;B++)ee[B]=B;o===void 0&&(o=K(V)),u===void 0&&(u=K(V))}(A,S),a||!c||u)if(a&&c&&o^u)M=o?1:0,A=X(A,S,q);else if(!a&&c&&u)M=o?1:0,A=H(A,S,q),A=X(A,S);else if(!a||o||c||u){if(a&&!c&&o^u)A=X(A,S),o?(M=0,A=H(A,S,q)):(M=1,A=H(A,S,q),A=X(A,S));else if(a&&o&&!c&&u)M=1,A=H(A,S,q),A=X(A,S);else if(!a&&!c&&o^u){var O=d;o?(M=1,A=H(A,S,q),M=0,d=!1,A=H(A,S,q),d=O):(M=0,A=H(A,S,q),A=X(A,S),M=1,d=!1,A=H(A,S,q),d=O,A=X(A,S))}}else M=0,A=H(A,S,q);else M=o?1:0,A=H(A,S,q);return A},this.__bidiEngine__.setOptions=function(A){A&&(a=A.isInputVisual,c=A.isOutputVisual,o=A.isInputRtl,u=A.isOutputRtl,d=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([t.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([t.doBidiReorder(s[o])]);r.text=a}else r.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])}(nt),nt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ri(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new rw(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new U5(this.contents),this.head=new $5(this),this.name=new J5(this),this.cmap=new Mg(this),this.toUnicode={},this.hhea=new V5(this),this.maxp=new X5(this),this.hmtx=new Q5(this),this.post=new Y5(this),this.os2=new G5(this),this.loca=new nw(this),this.glyf=new Z5(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(t=s>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Ir,ri=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,s;for(s=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,s,i,a,o,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*s+16777216*i+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)t=e[r],i.push(this.writeByte(t));return i},n}(),U5=function(){var n;function e(t){var r,s,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,s,i,a,o,c,u,d,f,g,p,y,v;for(v in p=Object.keys(t).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),a=Math.floor(f/c),d=16*p-f,(s=new ri).writeInt(this.scalarType),s.writeShort(p),s.writeShort(f),s.writeShort(a),s.writeShort(d),i=16*p,u=s.pos+i,o=null,y=[],t)for(g=t[v],s.writeString(v),s.writeInt(n(g)),s.writeInt(u),s.writeInt(g.length),y=y.concat(g),v==="head"&&(o=u),u+=g.length;u%4;)y.push(0),u++;return s.write(y),r=2981146554-n(s.data),s.pos=o+8,s.writeUInt32(r),s.data},n=function(t){var r,s,i,a;for(t=Og.call(t);t.length%4;)t.push(0);for(i=new ri(t),s=0,r=0,a=t.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),W5={}.hasOwnProperty,ss=function(n,e){for(var t in e)W5.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Ir=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var $5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ri).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Yp=function(){function n(e,t){var r,s,i,a,o,c,u,d,f,g,p,y,v,w,N,P,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,i=function(){var W,K;for(K=[],c=W=0;0<=g?W<g:W>g;c=0<=g?++W:--W)K.push(e.readUInt16());return K}(),e.pos+=2,v=function(){var W,K;for(K=[],c=W=0;0<=g?W<g:W>g;c=0<=g?++W:--W)K.push(e.readUInt16());return K}(),u=function(){var W,K;for(K=[],c=W=0;0<=g?W<g:W>g;c=0<=g?++W:--W)K.push(e.readUInt16());return K}(),d=function(){var W,K;for(K=[],c=W=0;0<=g?W<g:W>g;c=0<=g?++W:--W)K.push(e.readUInt16());return K}(),s=(this.length-e.pos+this.offset)/2,o=function(){var W,K;for(K=[],c=W=0;0<=s?W<s:W>s;c=0<=s?++W:--W)K.push(e.readUInt16());return K}(),c=N=0,M=i.length;N<M;c=++N)for(w=i[c],r=P=y=v[c];y<=w?P<=w:P>=w;r=y<=w?++P:--P)d[c]===0?a=r+u[c]:(a=o[d[c]/2+(r-y)-(g-c)]||0)!==0&&(a+=u[c]),this.codeMap[r]=65535&a}e.pos=f}return n.encode=function(e,t){var r,s,i,a,o,c,u,d,f,g,p,y,v,w,N,P,M,W,K,le,X,j,D,H,A,S,q,O,V,ee,B,Z,ne,de,xe,k,T,I,Y,Q,fe,ce,ue,ke,we,Fe;switch(O=new ri,a=Object.keys(e).sort(function(Le,qe){return Le-qe}),t){case"macroman":for(v=0,w=function(){var Le=[];for(y=0;y<256;++y)Le.push(0);return Le}(),P={0:0},i={},V=0,ne=a.length;V<ne;V++)P[ue=e[s=a[V]]]==null&&(P[ue]=++v),i[s]={old:e[s],new:P[e[s]]},w[s]=P[e[s]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(w),{charMap:i,subtable:O.data,maxGlyphID:v+1};case"unicode":for(S=[],f=[],M=0,P={},r={},N=u=null,ee=0,de=a.length;ee<de;ee++)P[K=e[s=a[ee]]]==null&&(P[K]=++M),r[s]={old:K,new:P[K]},o=P[K]-s,N!=null&&o===u||(N&&f.push(N),S.push(s),u=o),N=s;for(N&&f.push(N),f.push(65535),S.push(65535),H=2*(D=S.length),j=2*Math.pow(Math.log(D)/Math.LN2,2),g=Math.log(j/2)/Math.LN2,X=2*D-j,c=[],le=[],p=[],y=B=0,xe=S.length;B<xe;y=++B){if(A=S[y],d=f[y],A===65535){c.push(0),le.push(0);break}if(A-(q=r[A].new)>=32768)for(c.push(0),le.push(2*(p.length+D-y)),s=Z=A;A<=d?Z<=d:Z>=d;s=A<=d?++Z:--Z)p.push(r[s].new);else c.push(q-A),le.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*D+2*p.length),O.writeUInt16(0),O.writeUInt16(H),O.writeUInt16(j),O.writeUInt16(g),O.writeUInt16(X),fe=0,k=f.length;fe<k;fe++)s=f[fe],O.writeUInt16(s);for(O.writeUInt16(0),ce=0,T=S.length;ce<T;ce++)s=S[ce],O.writeUInt16(s);for(ke=0,I=c.length;ke<I;ke++)o=c[ke],O.writeUInt16(o);for(we=0,Y=le.length;we<Y;we++)W=le[we],O.writeUInt16(W);for(Fe=0,Q=p.length;Fe<Q;Fe++)v=p[Fe],O.writeUInt16(v);return{charMap:r,subtable:O.data,maxGlyphID:M+1}}},n}(),Mg=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,s,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new Yp(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var s,i;return r==null&&(r="macroman"),s=Yp.encode(t,r),(i=new ri).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),V5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),G5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(t.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Y5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="post",e.prototype.parse=function(t){var r,s,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(s=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 196608:break;case 262144:return this.map=function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}.call(this)}},e}(),K5=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},J5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="name",e.prototype.parse=function(t){var r,s,i,a,o,c,u,d,f,g,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=f=0,g=s.length;f<g;a=++f)i=s[a],t.pos=i.offset,d=t.readString(i.length),o=new K5(d,i),u[p=i.nameID]==null&&(u[p]=[]),u[i.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),X5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Q5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,s,i,a,o,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],r=d=0;0<=i?d<i:d>i;r=0<=i?++d:--d)f.push(t.readInt16());return f}(),this.widths=function(){var d,f,g,p;for(p=[],d=0,f=(g=this.metrics).length;d<f;d++)a=g[d],p.push(a.advance);return p}.call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Og=[].slice,Z5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,s,i,a,o,c,u,d,f,g;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,s=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+s,o=(c=new ri(r.read(i))).readShort(),d=c.readShort(),g=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[t]=o===-1?new tw(c,d,g,u,f):new ew(c,o,d,g,u,f),this.cache[t]))},e.prototype.encode=function(t,r,s){var i,a,o,c,u;for(o=[],a=[],c=0,u=r.length;c<u;c++)i=t[r[c]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),ew=function(){function n(e,t,r,s,i,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),tw=function(){function n(e,t,r,s,i){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ri(Og.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),nw=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ss(e,Ir),e.prototype.tag="loca",e.prototype.parse=function(t){var r,s;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*t.readUInt16());return a}.call(this):function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(t.readUInt32());return a}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<r.length&&r[a]==o){++a,s[o]=i;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(i+=u)}for(var d=new Array(4*s.length),f=0;f<s.length;++f)d[4*f+3]=255&s[f],d[4*f+2]=(65280&s[f])>>8,d[4*f+1]=(16711680&s[f])>>16,d[4*f]=(4278190080&s[f])>>24;return d},e}(),rw=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,s,i;for(t in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[t],e[t]=s[r];return e},n.prototype.glyphsFor=function(e){var t,r,s,i,a,o,c;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in t=[],s)(r=s[i])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(i in c=this.glyphsFor(t))r=c[i],s[i]=r;return s},n.prototype.encode=function(e,t){var r,s,i,a,o,c,u,d,f,g,p,y,v,w,N;for(s in r=Mg.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},N=r.charMap)p[(c=N[s]).old]=c.new;for(y in g=r.maxGlyphID,a)y in p||(p[y]=g++);return d=function(P){var M,W;for(M in W={},P)W[P[M]]=M;return W}(p),f=Object.keys(d).sort(function(P,M){return P-M}),v=function(){var P,M,W;for(W=[],P=0,M=f.length;P<M;P++)o=f[P],W.push(d[o]);return W}(),i=this.font.glyf.encode(a,v,p),u=this.font.loca.encode(i.offsets,v),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},n}();nt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,s,i,a;if(Array.isArray(t))return"["+function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)r=t[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in i=["<<"],t)a=t[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+t},e}();function Eg(n,e,t,r,s){r=r||{};var i=1.15,a=s.internal.scaleFactor,o=s.internal.getFontSize()/a,c=s.getLineHeightFactor?s.getLineHeightFactor():i,u=o*c,d=/\r\n|\r|\n/g,f="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(f=typeof n=="string"?n.split(d):n,g=f.length||1),t+=o*(2-i),r.valign==="middle"?t-=g/2*u:r.valign==="bottom"&&(t-=g*u),r.halign==="center"||r.halign==="right"){var p=o;if(r.halign==="center"&&(p*=.5),f&&g>=1){for(var y=0;y<f.length;y++)s.text(f[y],e-s.getStringUnitWidth(f[y])*p,t),t+=u;return s}e-=s.getStringUnitWidth(n)*p}return r.halign==="justify"?s.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(n,e,t),s}var Kp={},Wa=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:Kp=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,s,i;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,c=a.fontName;if(e.font&&(c=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var d=n.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=n.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=n.unifyColor(e.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,s,i){return this.jsPDFDocument.rect(e,t,r,s,i)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return Kp||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),hh=function(n,e){return hh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},hh(n,e)};function Tg(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hh(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Fg=function(n){Tg(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function sw(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function iw(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Xc(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],s=r.map(function(i){return t.getTextWidth(i)}).reduce(function(i,a){return Math.max(i,a)},0);return s}function Ig(n,e,t,r){var s=e.settings.tableLineWidth,i=e.settings.tableLineColor;n.applyStyles({lineWidth:s,lineColor:i});var a=Rg(s,!1);a&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,a)}function Rg(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function du(n,e){var t,r,s,i;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(s=n.right)!==null&&s!==void 0?s:e,bottom:(i=n.bottom)!==null&&i!==void 0?i:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function Bg(n,e){var t=du(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function aw(n,e,t,r,s){var i={},a=1.3333333333333333,o=Md(e,function(M){return s.getComputedStyle(M).backgroundColor});o!=null&&(i.fillColor=o);var c=Md(e,function(M){return s.getComputedStyle(M).color});c!=null&&(i.textColor=c);var u=lw(r,t);u&&(i.cellPadding=u);var d="borderTopColor",f=a*t,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var p=(parseFloat(g)||0)/f;p&&(i.lineWidth=p)}else i.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/f,right:(parseFloat(r.borderRightWidth)||0)/f,bottom:(parseFloat(r.borderBottomWidth)||0)/f,left:(parseFloat(r.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var y=Md(e,function(M){return s.getComputedStyle(M)[d]});y!=null&&(i.lineColor=y);var v=["left","right","center","justify"];v.indexOf(r.textAlign)!==-1&&(i.halign=r.textAlign),v=["middle","bottom","top"],v.indexOf(r.verticalAlign)!==-1&&(i.valign=r.verticalAlign);var w=parseInt(r.fontSize||"");isNaN(w)||(i.fontSize=w/a);var N=ow(r);N&&(i.fontStyle=N);var P=(r.fontFamily||"").toLowerCase();return n.indexOf(P)!==-1&&(i.font=P),i}function ow(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Md(n,e){var t=zg(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],i=parseInt(r[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function zg(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:zg(n.parentElement,e):t}function lw(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),s=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,i=t.map(function(o){return parseInt(o||"0")/r}),a=du(i,0);return s>a.top&&(a.top=s),s>a.bottom&&(a.bottom=s),a}function qg(n,e,t,r,s){var i,a;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var c=Object.keys(n.getFontList()),u=n.scaleFactor(),d=[],f=[],g=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:g};for(var p=0;p<o.rows.length;p++){var y=o.rows[p],v=(a=(i=y?.parentElement)===null||i===void 0?void 0:i.tagName)===null||a===void 0?void 0:a.toLowerCase(),w=cw(c,u,t,y,r,s);w&&(v==="thead"?d.push(w):v==="tfoot"?g.push(w):f.push(w))}return{head:d,body:f,foot:g}}function cw(n,e,t,r,s,i){for(var a=new Fg(r),o=0;o<r.cells.length;o++){var c=r.cells[o],u=t.getComputedStyle(c);if(s||u.display!=="none"){var d=void 0;i&&(d=aw(n,c,e,u,t)),a.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:uw(c)})}}var f=t.getComputedStyle(r);if(a.length>0&&(s||f.display!=="none"))return a}function uw(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function dw(n,e,t){for(var r=0,s=[n,e,t];r<s.length;r++){var i=s[r];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Ns(n,e,t,r,s){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])}return i}function Hg(n,e){var t=new Wa(n),r=t.getDocumentOptions(),s=t.getGlobalOptions();dw(s,r,e);var i=Ns({},s,r,e),a;typeof window<"u"&&(a=window);var o=hw(s,r,e),c=fw(s,r,e),u=pw(t,i),d=gw(t,i,a);return{id:e.tableId,content:d,hooks:c,styles:o,settings:u}}function hw(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(c){if(c==="columnStyles"){var u=n[c],d=e[c],f=t[c];r.columnStyles=Ns({},u,d,f)}else{var g=[n,e,t],p=g.map(function(y){return y[c]||{}});r[c]=Ns({},p[0],p[1],p[2])}},i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];s(o)}return r}function fw(n,e,t){for(var r=[n,e,t],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,a=r;i<a.length;i++){var o=a[i];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function pw(n,e){var t,r,s,i,a,o,c,u,d,f,g,p,y=du(e.margin,40/n.scaleFactor()),v=(t=mw(n,e.startY))!==null&&t!==void 0?t:y.top,w;e.showFoot===!0?w="everyPage":e.showFoot===!1?w="never":w=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var P=(i=e.useCss)!==null&&i!==void 0?i:!1,M=e.theme||(P?"plain":"striped"),W=!!e.horizontalPageBreak,K=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:P,theme:M,startY:v,margin:y,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:N,showFoot:w,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:W,horizontalPageBreakRepeat:K,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function mw(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),s=n.pageNumber(),i=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;i=a===s}return typeof e=="number"?e:(e==null||e===!1)&&i&&t?.finalY!=null?t.finalY+20/r:null}function gw(n,e,t){var r=e.head||[],s=e.body||[],i=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var o=qg(n,e.html,t,a,e.useCss)||{};r=o.head||r,s=o.body||r,i=o.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||xw(r,s,i);return{columns:c,head:r,body:s,foot:i}}function xw(n,e,t){var r=n[0]||e[0]||t[0]||[],s=[];return Object.keys(r).filter(function(i){return i!=="_element"}).forEach(function(i){var a=1,o;Array.isArray(r)?o=r[parseInt(i)]:o=r[i],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var c=0;c<a;c++){var u=void 0;Array.isArray(r)?u=s.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};s.push(d)}}),s}var fh=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),bw=function(n){Tg(e,n);function e(t,r,s,i,a,o){var c=n.call(this,t,r,o)||this;return c.cell=s,c.row=i,c.column=a,c.section=i.section,c}return e}(fh),yw=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,s,i,a){for(var o=0,c=t;o<c.length;o++){var u=c[o],d=new bw(e,this,r,s,i,a),f=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],f)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var i=s[r];i(new fh(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var i=s[r];i(new fh(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),Ug=function(){function n(e,t,r,s,i){i===void 0&&(i=!1),this.height=0,this.raw=e,e instanceof Fg&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=s,this.spansMultiplePages=i}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,s){var i;return Math.max(r,((i=t.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var s=t.cells[r.index];return s?s.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(s,i){var a=r.cells[i.index];if(!a)return 0;var o=t.getLineHeight(a.styles.fontSize),c=a.padding("vertical"),u=c+o;return u>s?u:s},0)},n}(),Wg=function(){function n(e,t,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var i=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*t,i=r*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=du(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),vw=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,s=e.allRows();r<s.length;r++){var i=s[r],a=i.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},n}();function ww(n,e){_w(n,e);var t=[],r=0;e.columns.forEach(function(i){var a=i.getMaxCustomCellWidth(e);a?i.width=a:(i.width=i.wrappedWidth,t.push(i)),r+=i.width});var s=e.getWidth(n.pageSize().width)-r;s&&(s=ph(t,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=ph(t,s,function(i){return i.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/n.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),jw(e),kw(e,n),Nw(e)}function _w(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,s=Bg(n,e);e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],u=i.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(n,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=Xc(u.text,u.styles,n)+f;var g=Xc(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,n);if(u.minReadableWidth=g+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/t;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function ph(n,e,t){for(var r=e,s=n.reduce(function(p,y){return p+y.wrappedWidth},0),i=0;i<n.length;i++){var a=n[i],o=a.wrappedWidth/s,c=r*o,u=a.width+c,d=t(a),f=u<d?d:u;e-=f-a.width,a.width=f}if(e=Math.round(e*1e10)/1e10,e){var g=n.filter(function(p){return e<0?p.width>t(p):!0});g.length&&(e=ph(g,e,t))}return e}function Nw(n){for(var e={},t=1,r=n.allRows(),s=0;s<r.length;s++)for(var i=r[s],a=0,o=n.columns;a<o.length;a++){var c=o[a],u=e[c.index];if(t>1)t--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,t=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=r.length-s,g=d.rowSpan>f?f:d.rowSpan;e[c.index]={cell:d,left:g,row:i}}}}}function jw(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],s=null,i=0,a=0,o=0;o<n.columns.length;o++){var c=n.columns[o];if(a-=1,a>1&&n.columns[o+1])i+=c.width,delete r.cells[c.index];else if(s){var u=s;delete r.cells[c.index],s=null,u.width=c.width+i}else{var u=r.cells[c.index];if(!u)continue;if(a=u.colSpan,i=0,u.colSpan>1){s=u,i+=c.width;continue}u.width=c.width+i}}}function kw(n,e){for(var t={count:0,height:0},r=0,s=n.allRows();r<s.length;r++){for(var i=s[r],a=0,o=n.columns;a<o.length;a++){var c=o[a],u=i.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Jp(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Jp(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<g*u.rowSpan?t={height:g,count:u.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>i.height&&(i.height=g)}}t.count--}}function Jp(n,e,t,r,s){return n.map(function(i){return Sw(i,e,t,r,s)})}function Sw(n,e,t,r,s){var i=1e4*r.scaleFactor();if(e=Math.ceil(e*i)/i,e>=Xc(n,t,r))return n;for(;e<Xc(n+s,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+s}function $g(n,e){var t=new Wa(n),r=Aw(e,t.scaleFactor()),s=new yw(e,r);return ww(t,s),t.applyStyles(t.userStyles),s}function Aw(n,e){var t=n.content,r=Cw(t.columns);if(t.head.length===0){var s=Xp(r,"head");s&&t.head.push(s)}if(t.foot.length===0){var s=Xp(r,"foot");s&&t.foot.push(s)}var i=n.settings.theme,a=n.styles;return{columns:r,head:Od("head",t.head,r,a,i,e),body:Od("body",t.body,r,a,i,e),foot:Od("foot",t.foot,r,a,i,e)}}function Od(n,e,t,r,s,i){var a={},o=e.map(function(c,u){for(var d=0,f={},g=0,p=0,y=0,v=t;y<v.length;y++){var w=v[y];if(a[w.index]==null||a[w.index].left===0)if(p===0){var N=void 0;Array.isArray(c)?N=c[w.index-g-d]:N=c[w.dataKey];var P={};typeof N=="object"&&!Array.isArray(N)&&(P=N?.styles||{});var M=Pw(n,w,u,s,r,i,P),W=new Wg(N,M,n);f[w.dataKey]=W,f[w.index]=W,p=W.colSpan-1,a[w.index]={left:W.rowSpan-1,times:p}}else p--,g++;else a[w.index].left--,p=a[w.index].times,d++}return new Ug(c,u,n,f)});return o}function Xp(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var s=Lw(e,r.raw);s!=null&&(t[r.dataKey]=s)}}),Object.keys(t).length>0?t:null}function Lw(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function Cw(n){return n.map(function(e,t){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:t:s=t,new vw(s,e,t)})}function Pw(n,e,t,r,s,i,a){var o=iw(r),c;n==="head"?c=s.headStyles:n==="body"?c=s.bodyStyles:n==="foot"&&(c=s.footStyles);var u=Ns({},o.table,o[n],s.styles,c),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},f=n==="body"?d:{},g=n==="body"&&t%2===0?Ns({},o.alternateRow,s.alternateRowStyles):{},p=sw(i),y=Ns({},p,u,g,f);return Ns(y,a)}function Dw(n,e,t){var r;t===void 0&&(t={});var s=Bg(n,e),i=new Map,a=[],o=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var p=e.columns.find(function(y){return y.dataKey===g||y.index===g});p&&!i.has(p.index)&&(i.set(p.index,!0),a.push(p.index),o.push(e.columns[p.index]),s-=p.wrappedWidth)});for(var u=!0,d=(r=t?.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(i.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||s>=f)u=!1,a.push(d),o.push(e.columns[d]),s-=f;else break;d++}return{colIndexes:a,columns:o,lastIndex:d-1}}function Mw(n,e){for(var t=[],r=0;r<e.columns.length;r++){var s=Dw(n,e,{start:r});s.columns.length&&(t.push(s),r=s.lastIndex)}return t}function Vg(n,e){var t=e.settings,r=t.startY,s=t.margin,i={x:s.left,y:r},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+a;if(t.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(g,p){return g+p.height},0);o+=u}var d=new Wa(n);(t.pageBreak==="always"||t.startY!=null&&o>d.pageSize().height)&&(Yg(d),i.y=s.top),e.callWillDrawPageHooks(d,i);var f=Ns({},i);e.startPageNumber=d.pageNumber(),t.horizontalPageBreak?Ow(d,e,f,i):(d.applyStyles(d.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return Ss(d,e,g,i,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(g,p){var y=p===e.body.length-1;Qc(d,e,g,y,f,i,e.columns)}),d.applyStyles(d.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return Ss(d,e,g,i,e.columns)})),Ig(d,e,f,i),e.callEndPageHooks(d,i),e.finalY=i.y,n.lastAutoTable=e,d.applyStyles(d.userStyles)}function Ow(n,e,t,r){var s=Mw(n,e),i=e.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){n.applyStyles(n.userStyles),d>0?Qo(n,e,t,r,u.columns,!0):Qp(n,e,r,u.columns),Ew(n,e,t,r,u.columns),Ed(n,e,r,u.columns)});else for(var a=-1,o=s[0],c=function(){var u=a;if(o){n.applyStyles(n.userStyles);var d=o.columns;a>=0?Qo(n,e,t,r,d,!0):Qp(n,e,r,d),u=Zp(n,e,a+1,r,d),Ed(n,e,r,d)}var f=u-a;s.slice(1).forEach(function(g){n.applyStyles(n.userStyles),Qo(n,e,t,r,g.columns,!0),Zp(n,e,a+1,r,g.columns,f),Ed(n,e,r,g.columns)}),a=u};a<e.body.length-1;)c()}function Qp(n,e,t,r){var s=e.settings;n.applyStyles(n.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(i){return Ss(n,e,i,t,r)})}function Ew(n,e,t,r,s){n.applyStyles(n.userStyles),e.body.forEach(function(i,a){var o=a===e.body.length-1;Qc(n,e,i,o,t,r,s)})}function Zp(n,e,t,r,s,i){n.applyStyles(n.userStyles),i=i??e.body.length;var a=Math.min(t+i,e.body.length),o=-1;return e.body.slice(t,a).forEach(function(c,u){var d=t+u===e.body.length-1,f=Gg(n,e,d,r);c.canEntireRowFit(f,s)&&(Ss(n,e,c,r,s),o=t+u)}),o}function Ed(n,e,t,r){var s=e.settings;n.applyStyles(n.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(i){return Ss(n,e,i,t,r)})}function Tw(n,e,t){var r=t.getLineHeight(n.styles.fontSize),s=n.padding("vertical"),i=Math.floor((e-s)/r);return Math.max(0,i)}function Fw(n,e,t,r){var s={};n.spansMultiplePages=!0,n.height=0;for(var i=0,a=0,o=t.columns;a<o.length;a++){var c=o[a],u=n.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Wg(u.raw,u.styles,u.section);d=Ns(d,u),d.text=[];var f=Tw(u,e,r);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var g=r.scaleFactor(),p=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(g,p),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>n.height&&(n.height=u.contentHeight),d.contentHeight=d.getContentHeight(g,p),d.contentHeight>i&&(i=d.contentHeight),s[c.index]=d}}var y=new Ug(n.raw,-1,n.section,s,!0);y.height=i;for(var v=0,w=t.columns;v<w.length;v++){var c=w[v],d=y.cells[c.index];d&&(d.height=y.height);var u=n.cells[c.index];u&&(u.height=n.height)}return y}function Iw(n,e,t,r){var s=n.pageSize().height,i=r.settings.margin,a=i.top+i.bottom,o=s-a;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),u=c<t;if(c>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),f=e.getMaxCellHeight(r.columns)>o;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Qc(n,e,t,r,s,i,a){var o=Gg(n,e,r,i);if(t.canEntireRowFit(o,a))Ss(n,e,t,i,a);else if(Iw(n,t,o,e)){var c=Fw(t,o,e,n);Ss(n,e,t,i,a),Qo(n,e,s,i,a),Qc(n,e,c,r,s,i,a)}else Qo(n,e,s,i,a),Qc(n,e,t,r,s,i,a)}function Ss(n,e,t,r,s){r.x=e.settings.margin.left;for(var i=0,a=s;i<a.length;i++){var o=a[i],c=t.cells[o.index];if(!c){r.x+=o.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var u=e.callCellHooks(n,e.hooks.willDrawCell,c,t,o,r);if(u===!1){r.x+=o.width;continue}Rw(n,c,r);var d=c.getTextPos();Eg(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,o,r),r.x+=o.width}r.y+=t.height}function Rw(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=Rg(r.lineWidth,r.fillColor);s&&n.rect(e.x,t.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),Bw(n,e,t,r.lineWidth))}function Bw(n,e,t,r){var s,i,a,o;r.top&&(s=t.x,i=t.y,a=t.x+e.width,o=t.y,r.right&&(a+=.5*r.right),r.left&&(s-=.5*r.left),c(r.top,s,i,a,o)),r.bottom&&(s=t.x,i=t.y+e.height,a=t.x+e.width,o=t.y+e.height,r.right&&(a+=.5*r.right),r.left&&(s-=.5*r.left),c(r.bottom,s,i,a,o)),r.left&&(s=t.x,i=t.y,a=t.x,o=t.y+e.height,r.top&&(i-=.5*r.top),r.bottom&&(o+=.5*r.bottom),c(r.left,s,i,a,o)),r.right&&(s=t.x+e.width,i=t.y,a=t.x+e.width,o=t.y+e.height,r.top&&(i-=.5*r.top),r.bottom&&(o+=.5*r.bottom),c(r.right,s,i,a,o));function c(u,d,f,g,p){n.getDocument().setLineWidth(u),n.getDocument().line(d,f,g,p,"S")}}function Gg(n,e,t,r){var s=e.settings.margin.bottom,i=e.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&t)&&(s+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-s}function Qo(n,e,t,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!i&&e.foot.forEach(function(o){return Ss(n,e,o,r,s)}),e.callEndPageHooks(n,r);var a=e.settings.margin;Ig(n,e,t,r),Yg(n),e.pageNumber++,r.x=a.left,r.y=a.top,t.y=a.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Ss(n,e,o,r,s)}),n.applyStyles(n.userStyles))}function Yg(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function zw(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],s=Hg(this,r),i=$g(this,s);return Vg(this,i),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,s){Eg(e,t,r,s,this)},n.API.autoTableSetDefaults=function(e){return Wa.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Wa.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Wa(this),i=qg(s,e,window,t,!1),a=i.head,o=i.body,c=((r=a[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var Td;function qw(n,e){var t=Hg(n,e),r=$g(n,t);Vg(n,r)}try{if(typeof window<"u"&&window){var em=window,tm=em.jsPDF||((Td=em.jspdf)===null||Td===void 0?void 0:Td.jsPDF);tm&&zw(tm)}}catch(n){console.error("Could not apply autoTable plugin",n)}function Hw(){const[n,e]=re.useState([]),[t,r]=re.useState({description:"",supplier_id:"",due_date:""}),[s,i]=re.useState("alle"),[a,o]=re.useState(!0),[c,u]=re.useState(!1),[d,f]=re.useState({umwelt:!1,kinderarbeit:!1,arbeitsschutz:!1,audit:!1}),[g,p]=re.useState(null),y=n.filter(M=>M.due_date&&vd(vs(M.due_date),new Date)&&M.status!=="erledigt").length,v=async()=>{const{data:M,error:W}=await Te.from("measures").select("*, suppliers(name)").order("due_date",{ascending:!0});W||e(M)};re.useEffect(()=>{v()},[]);const w=async()=>{if(!t.description||!t.supplier_id||!t.due_date)return;const{error:M}=await Te.from("measures").insert([t]);M||(r({description:"",supplier_id:"",due_date:""}),v())},N=async(M,W)=>{const K=W==="offen"?"erledigt":"offen",{error:le}=await Te.from("measures").update({status:K}).eq("id",M);le||v()},P=()=>{const M=new nt;M.setFontSize(16),M.text("ChainGuard – Maßnahmenbericht",14,20),M.setFontSize(10),M.text(`Erstellt am: ${new Date().toLocaleDateString()}`,14,28),M.text("Die folgenden Maßnahmen wurden im Rahmen der Sorgfaltspflichten gemäß Lieferkettengesetz erfasst.",14,36),qw(M,{startY:44,head:[["Beschreibung","Lieferant","Fällig bis","Status"]],body:n.map(W=>[W.description,W.suppliers?.name||W.supplier_id,W.due_date||"",W.status])}),M.save("massnahmenbericht.pdf")};return l.jsxs("div",{className:"p-6 text-gray-800",children:[l.jsx("div",{className:"mb-4",children:l.jsx("button",{onClick:()=>u(!0),className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"Lieferanten-Risikoanalyse"})}),l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Maßnahmen"}),y>0&&l.jsxs("div",{className:"mb-4 p-4 bg-red-100 border border-red-300 text-red-800 rounded",children:["⚠️ ",y," Maßnahme(n) überfällig – bitte prüfen!"]}),l.jsxs("div",{className:"mb-6 bg-white p-4 rounded shadow",children:[l.jsx("h2",{className:"text-lg font-medium mb-2",children:"Neue Maßnahme"}),l.jsx("input",{type:"text",placeholder:"Beschreibung",value:t.description,onChange:M=>r({...t,description:M.target.value}),className:"border px-3 py-2 mr-2 rounded w-full mb-2"}),l.jsx("input",{type:"text",placeholder:"Lieferanten-ID",value:t.supplier_id,onChange:M=>r({...t,supplier_id:M.target.value}),className:"border px-3 py-2 mr-2 rounded w-full mb-2"}),l.jsx("input",{type:"date",value:t.due_date,onChange:M=>r({...t,due_date:M.target.value}),className:"border px-3 py-2 mr-2 rounded w-full mb-2"}),l.jsx("button",{onClick:w,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Hinzufügen"})]}),l.jsx("div",{className:"mb-4 flex gap-4",children:["alle","offen","erledigt"].map(M=>l.jsx("button",{onClick:()=>i(M),className:`px-4 py-2 rounded ${s===M?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"} hover:bg-blue-500 hover:text-white transition`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))}),l.jsx("div",{className:"mb-4",children:l.jsx("button",{onClick:P,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"PDF-Bericht exportieren"})}),l.jsx("div",{className:"mb-4",children:l.jsxs("button",{onClick:()=>o(!a),className:"text-sm text-blue-600 hover:underline",children:["Nach Fälligkeit ",a?"↓":"↑"]})}),l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left bg-gray-100",children:[l.jsx("th",{className:"p-2",children:"Beschreibung"}),l.jsx("th",{className:"p-2",children:"Lieferant"}),l.jsx("th",{className:"p-2",children:"Fällig bis"}),l.jsx("th",{className:"p-2",children:"Status"}),l.jsx("th",{className:"p-2",children:"Aktion"})]})}),l.jsx("tbody",{children:n.filter(M=>s==="alle"?!0:M.status===s).sort((M,W)=>!M.due_date||!W.due_date?0:a?new Date(M.due_date)-new Date(W.due_date):new Date(W.due_date)-new Date(M.due_date)).map(M=>l.jsxs("tr",{className:`border-b ${M.due_date&&vd(vs(M.due_date),new Date)&&M.status!=="erledigt"?"bg-red-100":""}`,children:[l.jsx("td",{className:"p-2",children:M.description}),l.jsx("td",{className:"p-2",children:M.suppliers?.name||M.supplier_id}),l.jsxs("td",{className:"p-2",children:[M.due_date,M.due_date&&vd(vs(M.due_date),new Date)&&M.status!=="erledigt"&&l.jsx("span",{className:"ml-2 text-xs text-red-600 font-semibold",children:"Überfällig"})]}),l.jsx("td",{className:"p-2",children:M.status}),l.jsx("td",{className:"p-2",children:l.jsx("button",{onClick:()=>N(M.id,M.status),className:"text-blue-600 hover:underline",children:M.status==="offen"?"Erledigt":"Rückgängig"})})]},M.id))})]}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-xl",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Lieferanten-Risikoanalyse"}),[{key:"umwelt",label:"Hat der Lieferant ein Umweltzertifikat?"},{key:"kinderarbeit",label:"Gibt es eine Kinderarbeitsrichtlinie?"},{key:"arbeitsschutz",label:"Wird Arbeitsschutz regelmäßig geprüft?"},{key:"audit",label:"Wurde der Lieferant intern auditiert?"}].map(M=>l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"block mb-1 text-sm font-medium",children:M.label}),l.jsxs("select",{value:d[M.key]?"ja":"nein",onChange:W=>f(K=>({...K,[M.key]:W.target.value==="ja"})),className:"w-full border px-3 py-2 rounded",children:[l.jsx("option",{value:"nein",children:"Nein"}),l.jsx("option",{value:"ja",children:"Ja"})]})]},M.key)),l.jsxs("div",{className:"mt-4 flex justify-between",children:[l.jsx("button",{onClick:()=>{let M=0;Object.values(d).forEach(W=>{W||(M+=20)}),p(M)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Analyse durchführen"}),l.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-600 px-4 py-2",children:"Schließen"})]}),g!==null&&l.jsxs("div",{className:"mt-4 p-4 rounded bg-gray-100",children:[l.jsxs("p",{className:"text-sm font-medium",children:["Risikowert: ",l.jsxs("strong",{children:[g," / 100"]})]}),l.jsxs("p",{className:`text-sm mt-1 ${g>60?"text-red-600":g>40?"text-yellow-600":"text-green-600"}`,children:["Risikostufe: ",g>60?"Hoch":g>40?"Mittel":"Niedrig"]})]})]})})]})}/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ww=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),nm=n=>{const e=Ww(n);return e.charAt(0).toUpperCase()+e.slice(1)},Kg=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),$w=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=re.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},c)=>re.createElement("svg",{ref:c,...Vw,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Kg("lucide",s),...!i&&!$w(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,d])=>re.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(n,e)=>{const t=re.forwardRef(({className:r,...s},i)=>re.createElement(Gw,{ref:i,iconNode:e,className:Kg(`lucide-${Uw(nm(n))}`,`lucide-${n}`,r),...s}));return t.displayName=nm(n),t};/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Oi=pt("arrow-right",Yw);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],si=pt("bell",Kw);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jg=pt("calendar",Jw);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Qw=pt("chart-no-axes-column",Xw);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],e_=pt("chart-pie",Zw);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vi=pt("check",t_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_s=pt("chevron-down",n_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ri=pt("circle-alert",r_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fn=pt("circle-check-big",s_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Di=pt("circle-help",i_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],o_=pt("circle-minus",a_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ol=pt("circle-plus",l_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Zo=pt("clock",c_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],d_=pt("database",u_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ll=pt("download",h_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],p_=pt("eye",f_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],rm=pt("file-check",m_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],js=pt("file-text",g_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],b_=pt("file",x_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sm=pt("funnel",y_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],w_=pt("house",v_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mi=pt("info",__);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],mh=pt("loader",N_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],hu=pt("message-square",j_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xg=pt("refresh-cw",k_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],A_=pt("rocket",S_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Wh=pt("search",L_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],P_=pt("send",C_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],M_=pt("settings",D_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],E_=pt("shield",O_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],F_=pt("skip-forward",T_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],R_=pt("square-check-big",I_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],im=pt("square-pen",B_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],q_=pt("tag",z_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],gh=pt("trash-2",H_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bi=pt("triangle-alert",U_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],xh=pt("upload",W_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nn=pt("x",$_);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],G_=pt("zap",V_);function Xs(){const[n,e]=re.useState(!1),[t,r]=re.useState(!1),s=j0(),[i,a]=re.useState(new Date),[o,c]=re.useState(0),u=5,d=As();re.useEffect(()=>{const w=setInterval(()=>{a(new Date)},6e4);return()=>clearInterval(w)},[]),re.useEffect(()=>{const w=()=>{window.innerWidth<1024?e(!0):e(!1)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),re.useEffect(()=>{const w=localStorage.getItem("onboardingComplete"),N=JSON.parse(localStorage.getItem("onboardingData"))||{};if(!w){let P=0;N.companyName&&(P+=1),N.complianceAnswers?.length>0&&(P+=1),N.suppliers?.length>0&&(P+=1),N.documents?.length>0&&(P+=1),N.actionPlan&&(P+=1),c(P/u*100)}},[]);const f=i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),g=i.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),p=[{path:"/dashboard",label:"Dashboard",icon:l.jsx(w_,{className:"h-5 w-5"})},{path:"/analyse",label:"Analyse",icon:l.jsx(Qw,{className:"h-5 w-5"})},{path:"/lkg-compliance",label:"Compliance-Übersicht",icon:l.jsx(R_,{className:"h-5 w-5"})},{path:"/kommunikation",label:"Kommunikation",icon:l.jsx(hu,{className:"h-5 w-5"})}],y=()=>{e(!n)},v=()=>{r(!t)};return l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"fixed top-4 left-4 z-30 bg-white/90 backdrop-blur-md text-blue-700 p-2 rounded-full shadow-lg lg:hidden hover:bg-blue-50 transition-all duration-300",onClick:v,"aria-label":"Toggle mobile menu",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:t?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-20 lg:hidden",onClick:v}),l.jsxs("div",{className:`fixed z-20 inset-y-0 left-0 transform transition-all duration-300 ease-in-out 
                    ${t?"translate-x-0":"-translate-x-full"} 
                    lg:translate-x-0 
                    ${n?"w-16":"w-60"} 
                    bg-[#1a2542] text-white flex flex-col shadow-xl overflow-hidden`,children:[l.jsx("div",{className:"relative overflow-hidden bg-[#1a2542] py-4 px-3 border-b border-white/10",children:l.jsx("div",{className:`transition-all duration-300 ${n?"scale-75 mx-auto":""}`,children:n?l.jsx("div",{className:"w-8 h-8 bg-blue-700/30 rounded-md flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-sm",children:"CG"})}):l.jsxs("div",{className:"font-bold text-xl tracking-tight text-white",children:["Chain",l.jsx("span",{className:"text-blue-300",children:"Guard"})]})})}),l.jsx("button",{className:"hidden lg:block absolute right-1 top-6 text-white/50 hover:text-white/80 transition-colors",onClick:y,"aria-label":"Toggle sidebar width",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M13 5l7 7-7 7":"M11 19l-7-7 7-7"})})}),l.jsxs("nav",{className:"flex flex-col gap-1 px-2 py-5 flex-grow",children:[!localStorage.getItem("onboardingComplete")&&l.jsxs("button",{className:`flex items-center ${n?"justify-center":"justify-start"} 
                                bg-blue-600 text-white rounded-md transition-all duration-200 group
                                ${n?"p-3":"px-3 py-2.5"}`,onClick:()=>d("/dashboard"),children:[l.jsx(A_,{className:"h-5 w-5 text-white"}),!n&&l.jsxs("div",{className:"flex justify-between items-center w-full",children:[l.jsx("span",{className:"ml-3 text-sm",children:"Schnellstart"}),l.jsxs("span",{className:"text-xs py-0.5 px-2 rounded-md bg-blue-500/30 text-blue-200",children:[Math.round(o),"%"]})]}),n&&l.jsxs("div",{className:"absolute left-full ml-2 rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:["Schnellstart (",Math.round(o),"%)"]})]}),p.map(w=>{const N=s.pathname===w.path;return l.jsxs("a",{href:w.path,className:`flex items-center ${n?"justify-center":"justify-start"} 
                                    ${N?"bg-blue-600/20 text-white":"text-blue-100/70 hover:bg-white/5"} 
                                    rounded-md transition-all duration-200 group
                                    ${n?"p-3":"px-3 py-2.5"}`,onClick:P=>{P.preventDefault(),d(w.path),r(!1)},children:[l.jsx("div",{className:`transition-colors duration-200 ${N?"text-blue-300":"text-blue-100/70 group-hover:text-blue-200"}`,children:w.icon}),!n&&l.jsxs("div",{className:"flex justify-between items-center w-full",children:[l.jsx("span",{className:"ml-3 text-sm",children:w.label}),N&&l.jsx("span",{className:"text-xs py-0.5 px-2 rounded-md bg-blue-500/30 text-blue-200",children:"Aktiv"})]}),n&&l.jsx("div",{className:"absolute left-full ml-2 rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:w.label})]},w.path)})]}),!n&&l.jsxs("div",{className:"px-3 py-2 text-xs text-blue-200/70",children:[l.jsx("div",{children:g}),l.jsx("div",{children:f})]}),l.jsxs("div",{className:"mt-auto border-t border-white/10",children:[l.jsxs("div",{className:`px-3 py-3 flex items-center ${n?"justify-center":"gap-3"}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700/30 flex items-center justify-center text-blue-100 font-medium shadow-sm",children:"U"}),!n&&l.jsxs("div",{className:"flex-grow",children:[l.jsx("div",{className:"text-sm font-medium text-white",children:"User"}),l.jsx("div",{className:"text-xs text-blue-200/70",children:"ChainGuard Pro"})]})]}),l.jsxs("button",{className:`w-full flex items-center ${n?"justify-center":"justify-start gap-3"} 
                            px-3 py-3 text-blue-100 hover:bg-blue-700/20 transition-colors duration-200 text-sm`,onClick:async()=>{await Te.auth.signOut(),d("/")},children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),!n&&l.jsx("span",{children:"Logout"})]})]})]})]})}const am={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},Y_=(n,e,t)=>{let r;const s=t?.addSuffix?am[n].withPreposition:am[n].standalone;return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:"vor "+r:r},K_={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},J_={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},X_={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Q_={date:Ba({formats:K_,defaultWidth:"full"}),time:Ba({formats:J_,defaultWidth:"full"}),dateTime:Ba({formats:X_,defaultWidth:"full"})},Z_={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},e3=(n,e,t,r)=>Z_[n],t3={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},n3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},bh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},r3={narrow:bh.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:bh.wide},s3={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},i3={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},a3={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},o3=n=>Number(n)+".",l3={ordinalNumber:o3,era:Xr({values:t3,defaultWidth:"wide"}),quarter:Xr({values:n3,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Xr({values:bh,formattingValues:r3,defaultWidth:"wide"}),day:Xr({values:s3,defaultWidth:"wide"}),dayPeriod:Xr({values:i3,defaultWidth:"wide",formattingValues:a3,defaultFormattingWidth:"wide"})},c3=/^(\d+)(\.)?/i,u3=/\d+/i,d3={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},h3={any:[/^v/i,/^n/i]},f3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},p3={any:[/1/i,/2/i,/3/i,/4/i]},m3={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},g3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x3={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},b3={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},y3={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},v3={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},w3={ordinalNumber:tg({matchPattern:c3,parsePattern:u3,valueCallback:n=>parseInt(n)}),era:Qr({matchPatterns:d3,defaultMatchWidth:"wide",parsePatterns:h3,defaultParseWidth:"any"}),quarter:Qr({matchPatterns:f3,defaultMatchWidth:"wide",parsePatterns:p3,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Qr({matchPatterns:m3,defaultMatchWidth:"wide",parsePatterns:g3,defaultParseWidth:"any"}),day:Qr({matchPatterns:x3,defaultMatchWidth:"wide",parsePatterns:b3,defaultParseWidth:"any"}),dayPeriod:Qr({matchPatterns:y3,defaultMatchWidth:"wide",parsePatterns:v3,defaultParseWidth:"any"})},_3={code:"de",formatDistance:Y_,formatLong:Q_,formatRelative:e3,localize:l3,match:w3,options:{weekStartsOn:1,firstWeekContainsDate:4}};function N3(){const[n,e]=re.useState(null),[t,r]=re.useState(!1),[s,i]=re.useState([]),[a,o]=re.useState([]),[c,u]=re.useState([]),[d,f]=re.useState([]),[g,p]=re.useState([]),[y,v]=re.useState([]),[w,N]=re.useState(""),[P,M]=re.useState("Alle"),[W,K]=re.useState("Alle"),[le,X]=re.useState("Alle"),[j,D]=re.useState("date_desc"),[H,A]=re.useState(!1),[S,q]=re.useState(!1),[O,V]=re.useState(null),[ee,B]=re.useState(null),[Z,ne]=re.useState(!1),[de,xe]=re.useState(""),[k,T]=re.useState(()=>localStorage.getItem("compliance_docs_onboarding")!=="dismissed"),I=re.useRef(null);re.useEffect(()=>{(async()=>{const{data:ve,error:Be}=await Te.auth.getUser();if(ve?.user){e(ve.user);const{data:oe}=await Te.from("profiles").select("role").eq("id",ve.user.id).single();r(oe?.role==="admin"),Y()}})()},[]),re.useEffect(()=>{k||localStorage.setItem("compliance_docs_onboarding","dismissed")},[k]),re.useEffect(()=>{if(de){const G=setTimeout(()=>xe(""),3e3);return()=>clearTimeout(G)}},[de]);const Y=async()=>{const{data:G}=await Te.from("categories").select("name");o(G||["Zertifikate","Selbstauskünfte","Auditergebnisse","Risikoanalysen","Verträge","Compliance-Erklärungen"]);const{data:ve}=await Te.from("suppliers").select("id, name");u(ve||[{id:1,name:"TechComp AG"},{id:2,name:"Textile Solutions GmbH"},{id:3,name:"FoodSupply Ltd."},{id:4,name:"AutoParts Corp."}]);const{data:Be}=await Te.from("templates").select("*");v(Be||[{id:1,name:"Datenschutzerklärung",category:"Compliance-Erklärungen",description:"Vorlage für DSGVO-konforme Datenschutzerklärung",content:"Hier steht der Inhalt der Datenschutzerklärung..."},{id:2,name:"AGB",category:"Verträge",description:"Allgemeine Geschäftsbedingungen für KMUs",content:"Hier stehen die AGB..."}]);const{data:oe}=await Te.from("documents").select("*").eq("user_id",n.id);if(oe){const Ke=oe.map(Ge=>{const Pe=Ge.expiry_date?wd(Ge.expiry_date,"yyyy-MM-dd",new Date):null,ot=Pe?yd(Pe,new Date):null;let tt="Aktiv";return Ge.file_url?ot<=0?tt="Abgelaufen":ot<=30&&(tt="Läuft bald ab"):tt="Ausstehend",{...Ge,days_left:ot,status:tt,compliance_status:tt==="Abgelaufen"?"Nicht konform":tt==="Läuft bald ab"?"Teilkonform":"Konform"}});i(Ke);const He=Ke.filter(Ge=>Ge.status==="Läuft bald ab"||Ge.status==="Abgelaufen").map(Ge=>({id:`doc-${Ge.id}`,title:Ge.status==="Abgelaufen"?"Dokument abgelaufen":"Dokument läuft bald ab",description:`${Ge.name} (${Ge.compliance_status.toLowerCase().replace("_"," ")}).`,date:Ge.expiry_date||Vt(new Date,"yyyy-MM-dd"),days_left:Ge.days_left,is_read:!1,priority:Ge.status==="Abgelaufen"?"high":"medium"}));p(He)}const{data:_e}=await Te.from("document_requests").select("*").eq("user_id",n.id);f(_e||[]);const ze=_e?.filter(Ke=>Ke.status==="pending").map(Ke=>({id:`req-${Ke.id}`,title:"Ausstehende Dokumentenanfrage",description:`${Ke.document_name} von ${Ke.supplier_name} noch nicht eingereicht.`,date:Ke.requested_at,days_left:0,is_read:!1,priority:"medium"}));p(Ke=>[...Ke,...ze||[]])},Q=async(G,ve)=>{const Be=G.target.files[0];if(!Be||!n)return;const oe=Be.name.split(".").pop(),_e=`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${oe}`,ze=`documents/${n.id}/${_e}`,{error:Ke}=await Te.storage.from("documents").upload(ze,Be);if(Ke){xe("Upload fehlgeschlagen");return}const{data:He}=Te.storage.from("documents").getPublicUrl(ze),Ge=ve.expiryDate?wd(ve.expiryDate,"yyyy-MM-dd",new Date):null,Pe=Ge?yd(Ge,new Date):null,ot=He.publicUrl?Pe<=30&&Pe>0?"Läuft bald ab":Pe<=0?"Abgelaufen":"Aktiv":"Ausstehend",tt=ot==="Abgelaufen"?"Nicht konform":ot==="Läuft bald ab"?"Teilkonform":"Konform",Ft={user_id:n.id,name:ve.docName,category:ve.category,supplier_id:ve.supplier,supplier_name:c.find(wt=>wt.id===parseInt(ve.supplier))?.name,upload_date:Vt(new Date,"yyyy-MM-dd"),expiry_date:ve.expiryDate||null,days_left:Pe,status:ot,compliance_status:tt,version:"1.0",file_type:oe,file_size:`${(Be.size/1024/1024).toFixed(1)} MB`,uploader:n.email,description:ve.description,tags:ve.tags.split(",").map(wt=>wt.trim()).filter(wt=>wt),history:[{date:Vt(new Date,"yyyy-MM-dd"),action:"Hochgeladen",user:n.email}],file_url:He.publicUrl},{error:ut}=await Te.from("documents").insert([Ft]);ut||(i([...s,Ft]),xe("Dokument hochgeladen"),await Te.from("audit_logs").insert([{user_id:n.id,action:"document_uploaded",details:`Uploaded document "${Ft.name}" to category "${Ft.category}"`,created_at:new Date}]))},fe=async G=>{G.preventDefault();const ve={docName:G.target.docName.value,category:G.target.category.value,supplier:G.target.supplier.value,expiryDate:G.target.expiryDate.value,description:G.target.description.value,tags:G.target.tags.value};await Q({target:{files:[G.target.file.files[0]]}},ve),A(!1)},ce=async()=>{const G=prompt("Name des angeforderten Dokuments:"),ve=prompt("Lieferanten-ID:");if(G&&ve&&c.find(Be=>Be.id===parseInt(ve))){const Be={user_id:n.id,document_name:G,supplier_id:parseInt(ve),supplier_name:c.find(_e=>_e.id===parseInt(ve)).name,requested_at:Vt(new Date,"yyyy-MM-dd"),status:"pending"},{error:oe}=await Te.from("document_requests").insert([Be]);if(!oe){f([...d,Be]),p([...g,{id:`req-${Be.id}`,title:"Neue Dokumentenanfrage",description:`${G} von ${Be.supplier_name} angefordert.`,date:Be.requested_at,days_left:0,is_read:!1,priority:"medium"}]),xe("Dokumentenanfrage gesendet");const _e={user_id:n.id,name:G,category:"Zertifikate",supplier_id:parseInt(ve),supplier_name:Be.supplier_name,upload_date:Be.requested_at,expiry_date:null,days_left:null,status:"Ausstehend",compliance_status:"Nicht konform",version:"0",file_type:null,file_size:null,uploader:"System",description:`Angeforderte Dokumentation: ${G}`,tags:["Anfrage"],history:[{date:Be.requested_at,action:"Angefordert",user:n.email}],file_url:null};await Te.from("documents").insert([_e]),i([...s,_e])}}},ue=async G=>{const ve=s.find(oe=>oe.id===G);if(!ve)return;if(prompt("Bitte laden Sie die neue Version hoch (Simulation):")){const oe={...ve,version:(parseFloat(ve.version)+.1).toFixed(1),upload_date:Vt(new Date,"yyyy-MM-dd"),history:[...ve.history,{date:Vt(new Date,"yyyy-MM-dd"),action:"Aktualisiert",user:n.email}],file_url:ve.file_url},{error:_e}=await Te.from("documents").update(oe).eq("id",G);_e||(i(s.map(ze=>ze.id===G?oe:ze)),xe("Dokument aktualisiert"),await Te.from("audit_logs").insert([{user_id:n.id,action:"document_updated",details:`Updated document "${ve.name}" to version ${oe.version}`,created_at:new Date}]))}},ke=async G=>{if(window.confirm("Sind Sie sicher, dass Sie dieses Dokument löschen möchten?")){const{error:ve}=await Te.from("documents").delete().eq("id",G);ve||(i(s.filter(Be=>Be.id!==G)),xe("Dokument gelöscht"),await Te.from("audit_logs").insert([{user_id:n.id,action:"document_deleted",details:`Deleted document ID ${G}`,created_at:new Date}]))}},we=async G=>{G.preventDefault();const ve={docName:G.target.docName.value,category:O.category,supplier:G.target.supplier.value,expiryDate:G.target.expiryDate.value,description:G.target.description.value,tags:G.target.tags.value,content:G.target.content.value},Be={user_id:n.id,name:ve.docName,category:ve.category,supplier_id:parseInt(ve.supplier),supplier_name:c.find(_e=>_e.id===parseInt(ve.supplier))?.name,upload_date:Vt(new Date,"yyyy-MM-dd"),expiry_date:ve.expiryDate||null,days_left:ve.expiryDate?yd(wd(ve.expiryDate,"yyyy-MM-dd",new Date),new Date):null,status:"Aktiv",compliance_status:"Konform",version:"1.0",file_type:"txt",file_size:"0.1 MB",uploader:n.email,description:ve.description,tags:ve.tags.split(",").map(_e=>_e.trim()).filter(_e=>_e),history:[{date:Vt(new Date,"yyyy-MM-dd"),action:"Erstellt aus Vorlage",user:n.email}],file_url:null},{error:oe}=await Te.from("documents").insert([new AMLDocument]);oe||(i([...s,Be]),xe("Dokument aus Vorlage erstellt"),await Te.from("audit_logs").insert([{user_id:n.id,action:"document_created_from_template",details:`Created document "${Be.name}" from template "${O.name}"`,created_at:new Date}])),q(!1),V(null)},Fe=async G=>{const ve=d.find(oe=>oe.id===G);if(!ve)return;const{error:Be}=await Te.from("document_requests").update({status:"completed"}).eq("id",G);Be||(f(d.map(oe=>oe.id===G?{...oe,status:"completed"}:oe)),xe("Anfrage als erledigt markiert"),await Te.from("audit_logs").insert([{user_id:n.id,action:"document_request_completed",details:`Marked document request "${ve.document_name}" as completed`,created_at:new Date}]))},Le=G=>{p(g.map(ve=>ve.id===G?{...ve,is_read:!0}:ve))},qe=G=>{p(g.filter(ve=>ve.id!==G))},me=G=>{switch(G){case"Aktiv":return"bg-green-100 text-green-800";case"Läuft bald ab":return"bg-yellow-100 text-yellow-800";case"Abgelaufen":return"bg-red-100 text-red-800";case"Ausstehend":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},U=G=>{switch(G){case"Konform":return"bg-green-100 text-green-800";case"Teilkonform":return"bg-yellow-100 text-yellow-800";case"Nicht konform":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$e=G=>{switch(G){case"high":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"});case"medium":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-yellow-500"});case"low":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-blue-500"});default:return null}},Ne=[...s.filter(G=>{const ve=G.name.toLowerCase().includes(w.toLowerCase())||G.supplier_name.toLowerCase().includes(w.toLowerCase())||G.description&&G.description.toLowerCase().includes(w.toLowerCase())||G.tags&&G.tags.some(ze=>ze.toLowerCase().includes(w.toLowerCase())),Be=P==="Alle"||G.category===P,oe=W==="Alle"||G.status===W,_e=le==="Alle"||G.supplier_name===le;return ve&&Be&&oe&&_e})].sort((G,ve)=>{switch(j){case"date_desc":return new Date(ve.upload_date)-new Date(G.upload_date);case"date_asc":return new Date(G.upload_date)-new Date(ve.upload_date);case"name_asc":return G.name.localeCompare(ve.name);case"name_desc":return ve.name.localeCompare(G.name);default:return 0}}),te=s.reduce((G,ve)=>(G[ve.status]=(G[ve.status]||0)+1,G),{}),Ae=g.filter(G=>!G.is_read).length;return l.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[l.jsx(Xs,{}),l.jsx("div",{className:"flex-1 ml-72",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[l.jsxs("header",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Compliance & Dokumente"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Verwaltung von Nachweisdokumenten und Compliance-Status"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[t&&l.jsx("span",{className:"text-xs px-3 py-1 bg-blue-100 text-blue-700 font-medium rounded-full",children:"Admin-Modus"}),l.jsxs("div",{className:"relative",children:[l.jsx(si,{size:20,className:"text-gray-600 hover:text-blue-600 cursor-pointer"}),Ae>0&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:Ae})]})]})]}),k&&l.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-lg shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Ri,{className:"h-5 w-5 text-blue-500 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:"Willkommen zu Compliance & Dokumente"}),l.jsx("p",{className:"text-sm mt-1",children:"Verwalten Sie Dokumente, nutzen Sie Vorlagen für LKG-Anforderungen und überwachen Sie den Compliance-Status."})]})]}),l.jsx("button",{onClick:()=>T(!1),className:"p-1 hover:bg-blue-100 rounded-full transition-colors",children:l.jsx(Nn,{size:16,className:"text-blue-500"})})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-8",children:[l.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-br from-green-50 to-green-100 border border-green-200",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-green-700 uppercase",children:"Aktive Dokumente"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:te.Aktiv||0})]}),l.jsx(Fn,{size:24,className:"text-green-500"})]})}),l.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-br from-yellow-50 to-yellow-100 border border-yellow-200",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-yellow-700 uppercase",children:"Bald ablaufend"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:te["Läuft bald ab"]||0})]}),l.jsx(Zo,{size:24,className:"text-yellow-500"})]})}),l.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-br from-red-50 to-red-100 border border-red-200",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-red-700 uppercase",children:"Abgelaufen"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:te.Abgelaufen||0})]}),l.jsx(Ri,{size:24,className:"text-red-500"})]})}),l.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-medium text-blue-700 uppercase",children:"Ausstehend"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:te.Ausstehend||0})]}),l.jsx(Bi,{size:24,className:"text-blue-500"})]})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(js,{className:"h-5 w-5 text-blue-600"}),"Vorlagenbibliothek"]}),l.jsxs("button",{className:"text-sm px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1",onClick:()=>q(!0),children:[l.jsx(ol,{size:14}),"Vorlage auswählen"]})]}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(G=>l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[l.jsx("h3",{className:"font-medium text-gray-900",children:G.name}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:G.description}),l.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Kategorie: ",G.category]}),l.jsx("button",{className:"mt-3 text-sm text-blue-600 hover:underline",onClick:()=>{V(G),q(!0)},children:"Vorlage verwenden"})]},G.id))})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(js,{className:"h-5 w-5 text-blue-600"}),"Dokumentenübersicht"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ce,className:"text-sm px-3 py-1.5 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-1",children:[l.jsx(Zo,{size:14}),"Dokument anfordern"]}),l.jsxs("button",{onClick:()=>A(!0),className:"text-sm px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[l.jsx(ol,{size:14}),"Dokument hinzufügen"]})]})]}),l.jsx("div",{className:"p-6 border-b border-gray-100 bg-gray-50",children:l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(Wh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),l.jsx("input",{type:"text",placeholder:"Dokumente durchsuchen...",value:w,onChange:G=>N(G.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:P,onChange:G=>M(G.target.value),className:"appearance-none pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"Alle",children:"Alle Kategorien"}),a.map((G,ve)=>l.jsx("option",{value:G,children:G},ve))]}),l.jsx(_s,{size:14,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:W,onChange:G=>K(G.target.value),className:"appearance-none pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"Alle",children:"Alle Status"}),l.jsx("option",{value:"Aktiv",children:"Aktiv"}),l.jsx("option",{value:"Läuft bald ab",children:"Läuft bald ab"}),l.jsx("option",{value:"Abgelaufen",children:"Abgelaufen"}),l.jsx("option",{value:"Ausstehend",children:"Ausstehend"})]}),l.jsx(_s,{size:14,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:le,onChange:G=>X(G.target.value),className:"appearance-none pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"Alle",children:"Alle Lieferanten"}),c.map(G=>l.jsx("option",{value:G.name,children:G.name},G.id))]}),l.jsx(_s,{size:14,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:j,onChange:G=>D(G.target.value),className:"appearance-none pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"date_desc",children:"Neueste zuerst"}),l.jsx("option",{value:"date_asc",children:"Älteste zuerst"}),l.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),l.jsx("option",{value:"name_desc",children:"Name (Z-A)"})]}),l.jsx(_s,{size:14,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-xs font-medium text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-6 py-3 text-left",children:"Dokument"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Kategorie"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Lieferant"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Hochgeladen"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Gültig bis"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Compliance-Status"}),l.jsx("th",{className:"px-6 py-3 text-left",children:"Version"}),l.jsx("th",{className:"px-6 py-3 text-center",children:"Aktionen"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:Ne.length>0?Ne.map(G=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-10 w-10 flex-shrink-0 mr-3 bg-gray-100 rounded-lg flex items-center justify-center",children:G.file_type?l.jsx(js,{size:20,className:"text-gray-500"}):l.jsx(Zo,{size:20,className:"text-blue-500"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:G.name}),l.jsx("div",{className:"text-xs text-gray-500",children:G.file_type&&`${G.file_type.toUpperCase()} • ${G.file_size}`})]})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:G.category})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:G.supplier_name}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:G.upload_date}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:G.expiry_date||l.jsx("span",{className:"text-gray-400",children:"-"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${me(G.status)}`,children:G.status})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U(G.compliance_status)}`,children:G.compliance_status})}),l.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:["v",G.version]}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsxs("div",{className:"flex justify-center space-x-2",children:[G.file_type&&l.jsx("a",{href:G.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600",title:"Dokument ansehen",onClick:()=>{B(G),ne(!0)},children:l.jsx(p_,{size:18})}),G.status!=="Ausstehend"&&l.jsx("button",{className:"text-gray-500 hover:text-green-600",title:"Neue Version hochladen",onClick:()=>ue(G.id),children:l.jsx(Xg,{size:18})}),l.jsx("button",{className:"text-gray-500 hover:text-red-600",title:"Dokument löschen",onClick:()=>ke(G.id),children:l.jsx(gh,{size:18})})]})})]},G.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500",children:"Keine Dokumente gefunden"})})})]})})})]})]}),l.jsx("div",{className:"col-span-1",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden sticky top-8",children:[l.jsx("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(si,{size:18,className:"text-blue-600"}),"Benachrichtigungen",Ae>0&&l.jsxs("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 font-medium rounded-full",children:[Ae," neu"]})]})})}),l.jsx("div",{className:"p-4 max-h-[300px] overflow-y-auto",children:g.length>0?l.jsx("div",{className:"space-y-3",children:g.map(G=>l.jsxs("div",{className:`p-3 border rounded-lg ${G.is_read?"border-gray-200":me(G.priority)} relative transition-all hover:shadow-sm ${G.is_read?"opacity-75":"opacity-100"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[!G.is_read&&$e(G.priority),l.jsx("h3",{className:`font-medium ${G.is_read?"text-gray-700":"text-gray-900"}`,children:G.title})]}),l.jsx("button",{onClick:()=>qe(G.id),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:14})})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:G.description}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500",children:[l.jsx("span",{children:G.date}),!G.is_read&&l.jsx("button",{onClick:()=>Le(G.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Als gelesen markieren"})]})]},G.id))}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"Keine Benachrichtigungen vorhanden"})})}),l.jsxs("div",{className:"px-6 py-4 border-t border-gray-100",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2 mb-4",children:[l.jsx(Bi,{size:18,className:"text-yellow-600"}),"Ausstehende Anfragen"]}),l.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:d.length>0?d.map(G=>l.jsx("div",{className:`p-3 border rounded-lg ${G.status==="pending"?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50 opacity-75"}`,children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:G.document_name}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:G.supplier_name}),l.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Angefordert am: ",G.requested_at]})]}),G.status==="pending"&&l.jsx("button",{onClick:()=>Fe(G.id),className:"text-xs px-3 py-1 bg-green-50 text-green-700 hover:bg-green-100 rounded border border-green-200",children:"Erledigt"})]})},G.id)):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"Keine ausstehenden Anfragen"})})})]})]})})]}),H&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Neues Dokument hinzufügen"}),l.jsx("button",{onClick:()=>A(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Nn,{size:20,className:"text-gray-500"})})]}),l.jsxs("form",{onSubmit:fe,className:"p-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dokumentname"}),l.jsx("input",{type:"text",name:"docName",required:!0,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"z.B. ISO 9001 Zertifikat"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kategorie"}),l.jsx("select",{name:"category",required:!0,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:a.map((G,ve)=>l.jsx("option",{value:G,children:G},ve))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lieferant"}),l.jsx("select",{name:"supplier",required:!0,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:c.map(G=>l.jsx("option",{value:G.id,children:G.name},G.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ablaufdatum (optional)"}),l.jsx("input",{type:"date",name:"expiryDate",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Beschreibung"}),l.jsx("textarea",{name:"description",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",placeholder:"Beschreiben Sie den Inhalt des Dokuments"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags (kommagetrennt)"}),l.jsx("input",{type:"text",name:"tags",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"z.B. Qualität, ISO, Compliance"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Datei"}),l.jsx("input",{type:"file",name:"file",required:!0,accept:".pdf,.docx,.xlsx",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Abbrechen"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Hinzufügen"})]})]})]})}),S&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:O?`Vorlage anpassen: ${O.name}`:"Vorlage auswählen"}),l.jsx("button",{onClick:()=>{q(!1),V(null)},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Nn,{size:20,className:"text-gray-500"})})]}),O?l.jsxs("form",{onSubmit:we,className:"p-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dokumentname"}),l.jsx("input",{type:"text",name:"docName",defaultValue:O.name,required:!0,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lieferant"}),l.jsx("select",{name:"supplier",required:!0,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:c.map(G=>l.jsx("option",{value:G.id,children:G.name},G.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ablaufdatum (optional)"}),l.jsx("input",{type:"date",name:"expiryDate",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Beschreibung"}),l.jsx("textarea",{name:"description",defaultValue:O.description,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inhalt"}),l.jsx("textarea",{name:"content",defaultValue:O.content,className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"6"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags (kommagetrennt)"}),l.jsx("input",{type:"text",name:"tags",defaultValue:"Vorlage, Compliance",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{q(!1),V(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Abbrechen"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Dokument erstellen"})]})]}):l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"grid grid-cols-1 gap-4",children:y.map(G=>l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[l.jsx("h3",{className:"font-medium text-gray-900",children:G.name}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:G.description}),l.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Kategorie: ",G.category]}),l.jsx("button",{className:"mt-3 text-sm text-blue-600 hover:underline",onClick:()=>V(G),children:"Vorlage verwenden"})]},G.id))})})]})}),Z&&ee&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl mx-4 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:ee.name}),l.jsx("button",{onClick:()=>ne(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Nn,{size:20,className:"text-gray-500"})})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Kategorie"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.category})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Lieferant"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.supplier_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Hochgeladen am"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.upload_date})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Gültig bis"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.expiry_date||"-"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Status"}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${me(ee.status)}`,children:ee.status})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Compliance-Status"}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U(ee.compliance_status)}`,children:ee.compliance_status})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Dateityp"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.file_type||"-"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Dateigröße"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.file_size||"-"})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Beschreibung"}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.description||"Keine Beschreibung"})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Tags"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:ee.tags&&入选Doc.tags.map((G,ve)=>l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:G},ve))})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Versionsverlauf"}),l.jsx("div",{className:"mt-2 space-y-2",children:ee.history.map((G,ve)=>l.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[l.jsxs("span",{children:[G.action," von ",G.user]}),l.jsx("span",{children:G.date})]},ve))})]})]}),ee.file_url&&l.jsx("div",{className:"mt-6",children:l.jsxs("a",{href:ee.file_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[l.jsx(ll,{size:16,className:"mr-2"}),"Dokument herunterladen"]})})]})]})}),de&&l.jsxs("div",{ref:I,className:"fixed bottom-4 right-4 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 transform animate-slideInRight flex items-center",children:[l.jsx(Fn,{size:16,className:"mr-2"}),de]})]})})]})}function Qg({onComplete:n,onSkip:e}){const[t,r]=re.useState(1),[s,i]=re.useState(!1),[a,o]=re.useState({companyName:"",industry:"",size:"",directSuppliers:"",hasNonEUSuppliers:!1,hasOver50Employees:!1,isPartOfLargerCompany:!1,complianceAnswers:[],suppliers:[],documents:[],actionPlan:null,setupReminders:!1,reminderEmail:"",setupCalendar:!1}),[c,u]=re.useState(null),d=5;re.useEffect(()=>{if(localStorage.getItem("onboardingComplete")==="true"){const D=JSON.parse(localStorage.getItem("onboardingData")||"{}");o(H=>({...H,...D})),i(!0)}},[]);const f=()=>{t<d?r(t+1):(i(!0),localStorage.setItem("onboardingComplete","true"),localStorage.setItem("onboardingData",JSON.stringify(a)))},g=()=>{t>1&&r(t-1)},p=()=>{e(),localStorage.setItem("onboardingSkipped","true")},y=j=>{const{name:D,value:H}=j.target;o({...a,[D]:H})},v=j=>{alert(`Hilfe zu Schritt ${j}: ${["Füllen Sie bitte Ihre grundlegenden Firmendaten aus. Diese Informationen helfen uns, den Onboarding-Prozess für Sie anzupassen.","Beantworten Sie diese kurzen Fragen, um Ihren aktuellen Compliance-Status zu ermitteln. Je ehrlicher, desto besser können wir Ihnen helfen.","Tragen Sie Ihre wichtigsten Lieferanten ein und bewerten Sie schnell deren Risikopotential.","Hier können Sie die grundlegenden Dokumente für Ihre LKG-Compliance hochladen oder unsere Vorlagen verwenden.","Basierend auf Ihren Angaben erstellen wir einen realistischen Zeitplan für Ihre Compliance-Maßnahmen."][j-1]}`)},w=()=>{const j=a.complianceAnswers.filter(Boolean).length;return j===0?{status:"kritisch",color:"bg-red-500"}:j<=2?{status:"gefährdet",color:"bg-orange-500"}:j<=4?{status:"in Bearbeitung",color:"bg-yellow-500"}:{status:"gut",color:"bg-green-500"}},N=()=>{const j=a.complianceAnswers,D=[];return j[0]||D.push("Compliance-Richtlinie erstellen"),j[1]||D.push("Lieferantenaudits planen"),j[2]||D.push("Risikoanalyse durchführen"),j[3]||D.push("Mitarbeiterschulungen organisieren"),j[4]||D.push("LKG-Verantwortlichen benennen"),j[5]||D.push("Notwendige Dokumente sammeln"),D.slice(0,3)},P=j=>{if(!j.trim())return;const D={name:j.trim(),risk:{riskCountry:!1,knownIssues:!1}};o({...a,suppliers:[...a.suppliers,D]})},M=(j,D,H)=>{const A=[...a.suppliers];A[j].risk[D]=H,o({...a,suppliers:A})},W=j=>{const{riskCountry:D,knownIssues:H}=j.risk||{};return D&&H?{level:"Hoch",color:"bg-red-500"}:D||H?{level:"Mittel",color:"bg-yellow-500"}:{level:"Niedrig",color:"bg-green-500"}},K=(j,D)=>{const H=[...a.documents],A=H.findIndex(S=>S&&S.type===j);A>=0?H[A]={type:j,file:D.name}:H.push({type:j,file:D.name}),o({...a,documents:H})},le=j=>{if(!j.target.files[0])return;const H=[{name:"Import-Lieferant 1",risk:{riskCountry:!1,knownIssues:!1}},{name:"Import-Lieferant 2",risk:{riskCountry:!0,knownIssues:!1}},{name:"Import-Lieferant 3",risk:{riskCountry:!1,knownIssues:!1}}];o({...a,suppliers:[...a.suppliers,...H]}),alert(`${H.length} Lieferanten erfolgreich importiert!`)},X=()=>{switch(t){case 1:return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Willkommen & Firmeneinrichtung"}),l.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"ca. 3-5 Min."})]}),l.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Mi,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-700",children:"Willkommen bei ChainGuard - wir führen Sie sicher zur LKG-Compliance."}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Diese Ersteinrichtung dauert ca. 15-20 Minuten insgesamt und kann jederzeit pausiert werden."})]})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Firmenname"}),l.jsx("input",{type:"text",name:"companyName",value:a.companyName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"z.B. Meier GmbH"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branche"}),l.jsxs("select",{name:"industry",value:a.industry,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Bitte auswählen"}),l.jsx("option",{value:"automotive",children:"Automobilindustrie"}),l.jsx("option",{value:"manufacturing",children:"Fertigungsindustrie"}),l.jsx("option",{value:"retail",children:"Einzelhandel"}),l.jsx("option",{value:"food",children:"Lebensmittel"}),l.jsx("option",{value:"textiles",children:"Textilien"}),l.jsx("option",{value:"tech",children:"IT/Technologie"}),l.jsx("option",{value:"other",children:"Sonstige"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unternehmensgröße"}),l.jsxs("select",{name:"size",value:a.size,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Bitte auswählen"}),l.jsx("option",{value:"1-50",children:"1-50 Mitarbeiter"}),l.jsx("option",{value:"51-250",children:"51-250 Mitarbeiter"}),l.jsx("option",{value:"251-1000",children:"251-1000 Mitarbeiter"}),l.jsx("option",{value:"1000+",children:"Über 1000 Mitarbeiter"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anzahl direkter Lieferanten"}),l.jsx("input",{type:"number",name:"directSuppliers",value:a.directSuppliers,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"z.B. 10",min:"0"})]})]}),l.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(Bi,{className:"h-5 w-5 text-yellow-600"}),"LKG-Relevanz-Check"]}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Bitte bestätigen Sie:"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:"lkg1",className:"mt-1",checked:a.hasNonEUSuppliers,onChange:O=>o({...a,hasNonEUSuppliers:O.target.checked})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lkg1",className:"text-sm font-medium text-gray-700",children:"Haben Sie Lieferanten außerhalb der EU?"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Dazu zählen direkte und indirekte Lieferanten"})]})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:"lkg2",className:"mt-1",checked:a.hasOver50Employees,onChange:O=>o({...a,hasOver50Employees:O.target.checked})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lkg2",className:"text-sm font-medium text-gray-700",children:"Beschäftigen Sie mehr als 50 Mitarbeiter?"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Gesamtanzahl der Beschäftigten im Unternehmen"})]})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:"lkg3",className:"mt-1",checked:a.isPartOfLargerCompany,onChange:O=>o({...a,isPartOfLargerCompany:O.target.checked})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lkg3",className:"text-sm font-medium text-gray-700",children:"Sind Sie Teil eines größeren Unternehmens (mehr als 1000 MA)?"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Konzernzugehörigkeit oder Muttergesellschaft"})]})]})]}),a.hasNonEUSuppliers&&(a.hasOver50Employees||a.isPartOfLargerCompany)&&l.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-200",children:l.jsx("p",{className:"text-sm font-medium text-red-700",children:"Basierend auf Ihren Angaben ist das LKG für Ihr Unternehmen relevant!"})})]})]});case 2:const j=[{q:"Haben Sie eine dokumentierte Compliance-Richtlinie?",help:"Eine schriftliche Richtlinie, die Ihre Anforderungen an Umwelt-, Sozial- und Governance-Standards festlegt."},{q:"Führen Sie regelmäßige Lieferantenaudits durch?",help:"Überprüfungen Ihrer Lieferanten durch Fragebögen, Besuche oder externe Auditoren."},{q:"Haben Sie eine Risikoanalyse für Ihre Lieferkette?",help:"Systematische Bewertung von Risiken wie Menschenrechtsverletzungen oder Umweltverstößen in Ihrer Lieferkette."},{q:"Schulen Sie Ihre Mitarbeiter in Compliance-Themen?",help:"Regelmäßige Schulungen zu relevanten Compliance-Themen für Mitarbeiter im Einkauf oder anderen relevanten Abteilungen."},{q:"Gibt es einen Ansprechpartner für LKG-Themen?",help:"Eine verantwortliche Person oder Stelle für Fragen und Maßnahmen zum Lieferkettensorgfaltspflichtengesetz."},{q:"Haben Sie bereits LKG-relevante Dokumente gesammelt?",help:"Dokumente wie Lieferantenselbstauskünfte, Zertifikate, Nachhaltigkeitsberichte etc."}],D=w(),H=N();return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Compliance-Schnellstart"}),l.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"ca. 3-5 Min."})]}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(rm,{className:"h-5 w-5 text-blue-600"}),"Quick-Assessment"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Beantworten Sie die folgenden Fragen für eine erste Standortbestimmung:"})]}),l.jsxs("div",{className:"space-y-5",children:[l.jsx("div",{className:"space-y-3",children:j.map((O,V)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",id:`q${V}`,className:"mt-1",checked:a.complianceAnswers[V]||!1,onChange:ee=>{const B=[...a.complianceAnswers||[]];B[V]=ee.target.checked,o({...a,complianceAnswers:B})}}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("label",{htmlFor:`q${V}`,className:"text-sm font-medium text-gray-700",children:O.q}),l.jsx("button",{className:"text-gray-400 hover:text-blue-600",onMouseEnter:()=>u(V),onMouseLeave:()=>u(null),children:l.jsx(Di,{size:16})})]}),c===V&&l.jsx("div",{className:"absolute left-0 mt-1 p-2 bg-white rounded shadow-lg border border-gray-200 text-xs text-gray-600 w-64 z-10",children:O.help})]})]},V))}),a.complianceAnswers&&a.complianceAnswers.length>0&&l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Ihr Compliance-Status"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`${D.color} h-2 rounded-full`,style:{width:`${a.complianceAnswers.filter(Boolean).length/j.length*100}%`}})}),l.jsxs("span",{className:"text-sm font-medium",children:[a.complianceAnswers.filter(Boolean).length,"/",j.length]})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${D.color}`}),l.jsxs("p",{className:"text-sm font-medium",children:["Status: ",D.status]})]}),l.jsx("h4",{className:"text-sm font-semibold text-gray-700 mt-3 mb-2",children:"Wichtigste Handlungsfelder:"}),l.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600 space-y-1",children:H.map((O,V)=>l.jsx("li",{children:O},V))})]})]})]});case 3:return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Lieferantenerfassung"}),l.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"ca. 3-5 Min."})]}),l.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Mi,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),l.jsx("p",{className:"text-sm text-gray-700",children:"Tragen Sie Ihre wichtigsten Lieferanten ein. Für eine umfassende LKG-Compliance sollten Sie mit den risikoreichsten Lieferanten beginnen."})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Kernlieferanten eingeben"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",id:"supplierInput",placeholder:"Lieferantenname eingeben",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onKeyDown:O=>{O.key==="Enter"&&(P(O.target.value),O.target.value="")}}),l.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:()=>{const O=document.getElementById("supplierInput");P(O.value),O.value=""},children:"Hinzufügen"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Drücken Sie Enter oder klicken Sie auf "Hinzufügen", um einen Lieferanten hinzuzufügen'})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(d_,{size:20,className:"text-gray-600"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Massenimport via CSV"})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Wenn Sie bereits eine Liste Ihrer Lieferanten haben, können Sie diese hier hochladen."}),l.jsx("input",{type:"file",accept:".csv",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onChange:le}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV-Format: Name, Land, Kategorie (eine Zeile pro Lieferant)"})]}),a.suppliers.length>0&&l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Ihre Lieferanten (",a.suppliers.length,")"]}),l.jsx("div",{className:"space-y-3",children:a.suppliers.map((O,V)=>{const ee=W(O);return l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800",children:O.name}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${ee.color}`}),l.jsxs("span",{className:"text-xs font-medium",children:["Risiko: ",ee.level]})]})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Risiko-Schnellcheck:"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:`risk${V}1`,className:"mt-1",checked:O.risk?.riskCountry||!1,onChange:B=>M(V,"riskCountry",B.target.checked)}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`risk${V}1`,className:"text-sm text-gray-700",children:"Lieferant aus Risikoland"}),l.jsx("p",{className:"text-xs text-gray-500",children:"z.B. Länder mit bekannten Menschenrechtsproblemen"})]})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:`risk${V}2`,className:"mt-1",checked:O.risk?.knownIssues||!1,onChange:B=>M(V,"knownIssues",B.target.checked)}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`risk${V}2`,className:"text-sm text-gray-700",children:"Bekannte Compliance-Probleme"}),l.jsx("p",{className:"text-xs text-gray-500",children:"z.B. frühere Verstöße oder negative Berichterstattung"})]})]})]})]},V)})})]})]})]});case 4:const A=[{type:"selbstauskunft",name:"Lieferantenselbstauskunft",description:"Fragebogen für Ihre Lieferanten zu Umwelt-, Sozial- und Governance-Standards"},{type:"risikoanalyse",name:"Risikoanalyse",description:"Systematische Bewertung der Risiken in Ihrer Lieferkette"},{type:"nachhaltigkeitsbericht",name:"Nachhaltigkeitsbericht",description:"Dokumentation Ihrer Nachhaltigkeitsmaßnahmen und -ziele"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Dokumenten-Basisset"}),l.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"ca. 3-5 Min."})]}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(rm,{className:"h-5 w-5 text-blue-600"}),"Mindestanforderungen"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Für die LKG-Compliance benötigen Sie grundlegende Dokumente. Diese bilden das Fundament Ihrer Nachweispflichten."})]}),l.jsxs("div",{className:"space-y-5",children:[A.map((O,V)=>{const ee=a.documents.some(B=>B&&B.type===O.type);return l.jsxs("div",{className:`border ${ee?"border-green-200 bg-green-50":"border-gray-200"} rounded-lg p-4`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-md font-semibold text-gray-800 flex items-center gap-1",children:[ee&&l.jsx(Fn,{size:16,className:"text-green-600"}),O.name]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.description})]}),l.jsxs("a",{href:"#",className:"text-sm text-blue-600 hover:underline flex items-center gap-1",onClick:B=>{B.preventDefault(),alert(`Vorlage für ${O.name} wird heruntergeladen...`)},children:[l.jsx(Oi,{size:14}),"Vorlage"]})]}),l.jsx("div",{className:"mt-3",children:l.jsxs("label",{className:`
                                                flex justify-center items-center px-4 py-2 border-2 
                                                ${ee?"border-green-300 bg-green-50":"border-dashed border-gray-300 hover:border-blue-500"} 
                                                rounded-lg cursor-pointer transition-colors
                                            `,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xh,{size:18,className:ee?"text-green-600":"text-gray-500"}),l.jsx("span",{className:`text-sm ${ee?"text-green-700":"text-gray-700"}`,children:ee?`Hochgeladen: ${a.documents.find(B=>B&&B.type===O.type).file}`:"Dokument hochladen (.pdf, .docx)"})]}),l.jsx("input",{type:"file",accept:".pdf,.docx",className:"hidden",onChange:B=>{B.target.files[0]&&K(O.type,B.target.files[0])}})]})})]},V)}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Weitere relevante Dokumente"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1 mb-3",children:"Je nach Branche und Unternehmensgröße können weitere Dokumente erforderlich sein."}),l.jsx("button",{className:"w-full px-4 py-2 text-sm text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50",onClick:()=>alert("Im Dashboard können Sie weitere Dokumente hochladen."),children:"+ Zusätzliche Dokumente im Dashboard verwalten"})]})]})]});case 5:const S=[];a.suppliers.length>0&&S.push(`Selbstauskunft von Top-${Math.min(3,a.suppliers.length)}-Lieferanten einholen`);const q=w();return q.status==="kritisch"||q.status==="gefährdet"?(S.push("Compliance-Schulung für Einkaufsteam durchführen"),S.push("Risikoanalyse für Hauptlieferanten erstellen")):(S.push("Regelmäßige Lieferantenaudits einplanen"),S.push("Compliance-Richtlinien aktualisieren")),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Ihr Compliance-Fahrplan"}),l.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"ca. 2-3 Min."})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Personalisierter Aktionsplan"}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Zeitplan:"}),l.jsx("span",{className:"text-sm text-gray-600",children:"3 Monate"})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"0%"}})})]}),l.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Nächste Schritte (Priorität):"}),l.jsx("div",{className:"space-y-2",children:S.slice(0,3).map((O,V)=>l.jsxs("div",{className:"flex items-start gap-2 bg-white p-2 rounded border border-green-100",children:[l.jsx("div",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-green-100 text-green-700 text-xs font-bold flex-shrink-0 mt-0.5",children:V+1}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-700",children:O}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Innerhalb der nächsten ",(V+1)*2," Wochen"]})]})]},V))})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Erinnerungen einrichten"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:"reminder_email",className:"mt-1",checked:a.setupReminders,onChange:O=>o({...a,setupReminders:O.target.checked})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reminder_email",className:"text-sm font-medium text-gray-700",children:"Automatische E-Mail-Benachrichtigungen aktivieren"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Wir erinnern Sie an Fristen und nächste Schritte"})]})]}),a.setupReminders&&l.jsx("div",{className:"ml-7",children:l.jsx("input",{type:"email",name:"reminderEmail",value:a.reminderEmail,onChange:y,placeholder:"Ihre E-Mail-Adresse",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("input",{type:"checkbox",id:"reminder_calendar",className:"mt-1",checked:a.setupCalendar,onChange:O=>o({...a,setupCalendar:O.target.checked})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reminder_calendar",className:"text-sm font-medium text-gray-700",children:"Termine in meinen Kalender eintragen"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Wir erstellen Kalenderereignisse für wichtige Fristen"})]})]})]})]}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Compliance-Fortschritt"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Nach diesem Onboarding sind Sie auf dem richtigen Weg zur LKG-Compliance. Im Dashboard können Sie Ihren Fortschritt verfolgen."}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-1",children:l.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"15%"}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[l.jsx("span",{children:"Start"}),l.jsx("span",{children:"15% abgeschlossen"}),l.jsx("span",{children:"Vollständige Compliance"})]})]})]});default:return null}};return s?l.jsx("div",{className:"fixed inset-0 bg-white z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl p-6 space-y-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Fn,{className:"h-10 w-10 text-green-500"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Herzlichen Glückwunsch!"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Sie haben die Grundlagen für Ihre LKG-Compliance erfolgreich geschaffen."})]}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-left border border-blue-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Ihre nächsten Schritte:"}),l.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:"Sehen Sie sich Ihr personalisiertes Dashboard an"}),l.jsx("li",{children:"Starten Sie mit dem ersten Punkt Ihres Aktionsplans"}),l.jsx("li",{children:"Laden Sie Ihre erste Lieferanten-Selbstauskunft hoch"})]})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-left border border-green-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Quick-Win für sofortige Verbesserung"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Nutzen Sie unsere Vorlage, um heute noch die erste Selbstauskunft an Ihren wichtigsten Lieferanten zu senden."}),l.jsxs("button",{className:"mt-3 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 flex items-center gap-1 mx-auto",onClick:()=>alert("Vorlage wird heruntergeladen..."),children:[l.jsx(Oi,{size:16})," Selbstauskunft-Vorlage herunterladen"]})]}),l.jsxs("button",{onClick:n,className:"mt-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto",children:["Zum Dashboard ",l.jsx(Oi,{size:18})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-gray-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:["Schritt ",t," von ",d]}),l.jsx("div",{className:"text-sm text-gray-500",children:"LKG-Onboarding"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>v(t),className:"text-gray-500 hover:text-blue-600 p-1",title:"Hilfe zu diesem Schritt",children:l.jsx(Di,{size:20})}),l.jsxs("button",{onClick:p,className:"text-gray-500 hover:text-blue-600 flex items-center gap-1 p-1",title:"Onboarding überspringen",children:[l.jsx(F_,{size:18})," ",l.jsx("span",{className:"text-sm",children:"Überspringen"})]})]})]}),l.jsx("div",{className:"mb-6",children:l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${t/d*100}%`}})})}),l.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-200px)] pr-2 -mr-2",children:X()}),l.jsxs("div",{className:"mt-6 flex justify-between",children:[t>1?l.jsx("button",{onClick:g,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Zurück"}):l.jsx("div",{}),l.jsxs("button",{onClick:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[t===d?"Abschließen":"Weiter"," ",l.jsx(Oi,{size:16})]})]})]})})}function j3({user:n}){const[e,t]=re.useState([]),[r,s]=re.useState(""),i=As();re.useEffect(()=>{const o=async()=>{try{const{data:c,error:u}=await Te.from("messages").select("*, suppliers(name)").eq("user_id",n.id).order("timestamp",{ascending:!1});if(u)throw u;t(c||[])}catch(c){console.error("Fehler beim Laden der Nachrichten:",c),s("Fehler beim Laden der Nachrichten.")}};n?.id&&o()},[n]);const a=async o=>{try{const{error:c}=await Te.from("messages").update({is_read:!0}).eq("id",o);if(c)throw c;t(e.map(u=>u.id===o?{...u,is_read:!0}:u))}catch(c){console.error("Fehler beim Markieren als gelesen:",c),s("Fehler beim Markieren als gelesen.")}};return l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h1",{className:"text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(hu,{size:24,className:"text-blue-600"}),"Nachrichten"]}),l.jsx("button",{onClick:()=>i("/dashboard"),className:"text-sm text-blue-600 hover:text-blue-800",children:"Zurück zum Dashboard"})]}),r&&l.jsxs("div",{className:"mb-4 bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Nn,{size:16,className:"mr-2"}),r]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.length>0?l.jsx("div",{className:"space-y-3",children:e.map(o=>l.jsx("div",{className:`p-3 border rounded-lg ${o.is_read?"border-gray-200":"border-blue-200 bg-blue-50"}`,children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.content}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Von: ",o.sender_name," | An: ",o.suppliers?.name||"Team"," |"," ",new Date(o.timestamp).toLocaleString("de-DE")]})]}),!o.is_read&&l.jsx("button",{onClick:()=>a(o.id),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Gelesen"})]})},o.id))}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-6",children:"Keine Nachrichten vorhanden."})})]})}function k3({user:n}){const[e,t]=re.useState([]),[r,s]=re.useState(""),i=As();re.useEffect(()=>{const u=async()=>{try{const{data:d,error:f}=await Te.from("tasks").select("*").or(`assigned_to.eq.${n.id},created_by.eq.${n.id}`).order("due_date",{ascending:!0});if(f)throw f;t(d||[])}catch(d){console.error("Fehler beim Laden der Aufgaben:",d),s("Fehler beim Laden der Aufgaben.")}};n?.id&&u()},[n]);const a=async(u,d)=>{try{switch(u){case"evaluate_supplier":i("/suppliers/evaluate");break;case"update_documents":i("/documents");break;case"schedule_training":i("/training/schedule");break;case"add_supplier":i("/dashboard");break;default:break}const{error:f}=await Te.from("tasks").update({status:"completed"}).eq("id",d);if(f)throw f;t(e.filter(g=>g.id!==d))}catch(f){console.error("Fehler beim Verarbeiten der Aufgabe:",f),s("Fehler beim Verarbeiten der Aufgabe.")}},o=u=>{switch(u){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},c=u=>{switch(u){case"high":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"});case"medium":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-yellow-500"});case"low":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-blue-500"});default:return null}};return l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h1",{className:"text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(Fn,{size:24,className:"text-blue-600"}),"Aufgaben"]}),l.jsx("button",{onClick:()=>i("/dashboard"),className:"text-sm text-blue-600 hover:text-blue-800",children:"Zurück zum Dashboard"})]}),r&&l.jsxs("div",{className:"mb-4 bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Nn,{size:16,className:"mr-2"}),r]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.length>0?l.jsx("div",{className:"space-y-3",children:e.map(u=>l.jsxs("div",{className:`p-3 border rounded-lg ${o(u.priority)} flex justify-between items-center`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[c(u.priority),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:u.title}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Fällig: ",new Date(u.due_date).toLocaleDateString("de-DE")]})]})]}),l.jsx("button",{onClick:()=>a(u.action,u.id),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs",children:"Erledigen"})]},u.id))}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-6",children:"Keine Aufgaben vorhanden."})})]})}function S3({user:n}){const[e,t]=re.useState([]),[r,s]=re.useState(""),i=As();re.useEffect(()=>{const o=async()=>{try{const{data:c,error:u}=await Te.from("quick_wins").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(u)throw u;t(c||[])}catch(c){console.error("Fehler beim Laden der Quick Wins:",c),s("Fehler beim Laden der Quick Wins.")}};n?.id&&o()},[n]);const a=async(o,c)=>{try{switch(o){case"complete_supplier_data":i("/suppliers/edit");break;case"enable_auto_reports":i("/settings/reports");break;default:break}const{error:u}=await Te.from("quick_wins").update({status:"completed"}).eq("id",c);if(u)throw u;t(e.filter(d=>d.id!==c))}catch(u){console.error("Fehler beim Verarbeiten des Quick Wins:",u),s("Fehler beim Verarbeiten des Quick Wins.")}};return l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h1",{className:"text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(Fn,{size:24,className:"text-green-600"}),"Quick Wins"]}),l.jsx("button",{onClick:()=>i("/dashboard"),className:"text-sm text-blue-600 hover:text-blue-800",children:"Zurück zum Dashboard"})]}),r&&l.jsxs("div",{className:"mb-4 bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Nn,{size:16,className:"mr-2"}),r]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.length>0?l.jsx("div",{className:"space-y-3",children:e.map(o=>l.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{size:16,className:"text-green-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.title}),l.jsx("p",{className:"text-xs text-gray-500",children:o.impact})]})]}),l.jsx("button",{onClick:()=>a(o.action,o.id),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-xs",children:"Umsetzen"})]},o.id))}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-6",children:"Keine Quick Wins vorhanden."})})]})}function A3({user:n}){const[e,t]=re.useState([]),[r,s]=re.useState(""),i=As();re.useEffect(()=>{const d=async()=>{try{const{data:f,error:g}=await Te.from("notifications").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(g)throw g;t(f||[])}catch(f){console.error("Fehler beim Laden der Benachrichtigungen:",f),s("Fehler beim Laden der Benachrichtigungen.")}};n?.id&&d()},[n]);const a=async d=>{try{const{error:f}=await Te.from("notifications").update({is_read:!0}).eq("id",d);if(f)throw f;t(e.map(g=>g.id===d?{...g,is_read:!0}:g))}catch(f){console.error("Fehler beim Markieren der Benachrichtigung als gelesen:",f),s("Fehler beim Markieren der Benachrichtigung als gelesen.")}},o=async d=>{try{const{error:f}=await Te.from("notifications").delete().eq("id",d);if(f)throw f;t(e.filter(g=>g.id!==d))}catch(f){console.error("Fehler beim Entfernen der Benachrichtigung:",f),s("Fehler beim Entfernen der Benachrichtigung.")}},c=d=>{switch(d){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},u=d=>{switch(d){case"high":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"});case"medium":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-yellow-500"});case"low":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-blue-500"});default:return null}};return l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h1",{className:"text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(si,{size:24,className:"text-blue-600"}),"Benachrichtigungen"]}),l.jsx("button",{onClick:()=>i("/dashboard"),className:"text-sm text-blue-600 hover:text-blue-800",children:"Zurück zum Dashboard"})]}),r&&l.jsxs("div",{className:"mb-4 bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Nn,{size:16,className:"mr-2"}),r]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.length>0?l.jsx("div",{className:"space-y-3",children:e.map(d=>l.jsxs("div",{className:`p-3 border rounded-lg ${d.is_read?"border-gray-200":c(d.priority)}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[!d.is_read&&u(d.priority),l.jsx("h3",{className:`text-sm font-medium ${d.is_read?"text-gray-600":"text-gray-800"}`,children:d.title})]}),l.jsx("button",{onClick:()=>o(d.id),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:14})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.description}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500",children:[l.jsx("span",{children:new Date(d.created_at).toLocaleString("de-DE")}),!d.is_read&&l.jsx("button",{onClick:()=>a(d.id),className:"text-blue-600 hover:text-blue-800",children:"Gelesen"})]})]},d.id))}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-6",children:"Keine Benachrichtigungen vorhanden."})})]})}var _c={},om;function L3(){if(om)return _c;om=1;var n=N0();return _c.createRoot=n.createRoot,_c.hydrateRoot=n.hydrateRoot,_c}var C3=L3();const P3=Lh(C3);function D3(){const[n,e]=re.useState(""),[t,r]=re.useState(""),[s,i]=re.useState(!0),[a,o]=re.useState(""),[c,u]=re.useState(!1),d=As(),f=async g=>{if(g.preventDefault(),o(""),u(!0),s){const{data:p,error:y}=await Te.auth.signInWithPassword({email:n,password:t}),v=await Te.auth.getSession();y||!v.data.session?o("❌ Fehler: Login nicht erfolgreich."):(o("✅ Login erfolgreich."),d("/dashboard"))}else{const{data:p,error:y}=await Te.auth.signUp({email:n,password:t});o(y?"❌ Fehler: "+y.message:"✅ Registrierung erfolgreich. Bitte bestätige deine E-Mail.")}u(!1)};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-md",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:s?"Login":"Registrieren"}),l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsx("input",{type:"email",placeholder:"E-Mail",value:n,onChange:g=>e(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-700",required:!0}),l.jsx("input",{type:"password",placeholder:"Passwort",value:t,onChange:g=>r(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-700",required:!0}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold disabled:opacity-50",disabled:c,children:c?s?"Einloggen...":"Registrieren...":s?"Einloggen":"Registrieren"})]}),l.jsxs("p",{className:"text-sm mt-4 text-center",children:[s?"Noch kein Konto?":"Schon registriert?"," "," ",l.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>i(!s),children:s?"Jetzt registrieren":"Zum Login wechseln"})]}),a&&l.jsx("p",{className:`mt-4 text-sm text-center ${a.startsWith("✅")?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:a})]})})}function M3({user:n,newSupplier:e,setNewSupplier:t,fetchSuppliers:r,setSuccessMessage:s}){const[i,a]=re.useState(""),[o,c]=re.useState(!1),[u,d]=re.useState(!1),f=async g=>{if(g.preventDefault(),!n)return;d(!0),a("");const{id:p,...y}=e,v={...y,user_id:n.id};let w;if(e.id?{error:w}=await Te.from("suppliers").update(v).eq("id",e.id):{error:w}=await Te.from("suppliers").insert([v]),w){a("❌ Fehler beim Speichern. Bitte versuche es erneut."),d(!1);return}t({name:"",country:"",industry:"",risk_level:"",risk_category:"",note:""}),r(n.id);const N=e.id?"✅ Lieferant aktualisiert!":"✅ Lieferant hinzugefügt!";s(N),a(N),d(!1)};return re.useEffect(()=>{if(i){const g=setTimeout(()=>a(""),3e3);return()=>clearTimeout(g)}},[i]),re.useEffect(()=>{e?.id&&c(!0)},[e]),l.jsxs("form",{onSubmit:f,className:"max-w-4xl",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",id:"name",placeholder:"Name des Lieferanten",required:!0,value:e.name,onChange:g=>t({...e,name:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Land"}),l.jsxs("select",{id:"country",required:!0,value:e.country,onChange:g=>t({...e,country:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all",children:[l.jsx("option",{value:"",children:"Land wählen..."}),l.jsx("option",{value:"DE",children:"Deutschland"}),l.jsx("option",{value:"AT",children:"Österreich"}),l.jsx("option",{value:"CH",children:"Schweiz"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Branche"}),l.jsx("input",{type:"text",id:"industry",placeholder:"z.B. Elektronik, Textil, Lebensmittel",required:!0,value:e.industry,onChange:g=>t({...e,industry:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"riskLevel",className:"block text-sm font-medium text-gray-700 mb-1",children:"Risikostufe"}),l.jsxs("select",{id:"riskLevel",required:!0,value:e.riskLevel,onChange:g=>t({...e,riskLevel:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all",children:[l.jsx("option",{value:"",children:"Risikostufe wählen"}),l.jsx("option",{value:"Niedrig",children:"Niedrig"}),l.jsx("option",{value:"Mittel",children:"Mittel"}),l.jsx("option",{value:"Hoch",children:"Hoch"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"riskCategory",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gefährdungskategorie"}),l.jsxs("select",{id:"riskCategory",value:e.risk_category||"",onChange:g=>t({...e,risk_category:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all",children:[l.jsx("option",{value:"",children:"Kategorie wählen"}),l.jsx("option",{value:"Menschenrechte",children:"Menschenrechte"}),l.jsx("option",{value:"Kinderarbeit",children:"Kinderarbeit"}),l.jsx("option",{value:"Umweltrisiken",children:"Umweltrisiken"}),l.jsx("option",{value:"Korruption",children:"Korruption"}),l.jsx("option",{value:"Diskriminierung",children:"Diskriminierung"})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notiz (optional)"}),l.jsx("textarea",{id:"notes",placeholder:"Zusätzliche Informationen zum Lieferanten...",value:e.notes,onChange:g=>t({...e,notes:g.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",rows:"4"})]}),l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("input",{type:"checkbox",id:"dsgvo",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsxs("label",{htmlFor:"dsgvo",className:"ml-2 block text-sm text-gray-700",children:["Ich bestätige, dass die Angaben den ",l.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800",children:"DSGVO-Richtlinien"})," entsprechen."]})]}),l.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white font-medium rounded-lg shadow-md transition-all duration-300 hover:shadow-lg flex items-center gap-2",children:[l.jsx("span",{children:"Hinzufügen"}),l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})]})]})}function O3({suppliers:n,filteredSuppliers:e,searchTerm:t,setSearchTerm:r,riskFilter:s,setRiskFilter:i,industryFilter:a,setIndustryFilter:o,riskStats:c,isAdmin:u,user:d,fetchSuppliers:f,setSelectedSupplier:g}){const[p,y]=re.useState(null),[v,w]=re.useState(""),[N,P]=re.useState(""),[M,W]=re.useState(null),[K,le]=re.useState(!1),[X,j]=re.useState(null),[D,H]=re.useState(""),[A,S]=re.useState(null),q=re.useRef(null),O=50;[...new Set(n.map(I=>I.industry).filter(Boolean))];const V=I=>{y({id:I.id,name:I.name,country:I.country,industry:I.industry,risk_level:I.risk_level,note:I.note,last_updated:new Date().toISOString()}),g(I)},ee=async(I,Y)=>{if(window.confirm(`Möchtest du den Lieferanten ${Y} wirklich löschen?`)){const{error:Q}=await Te.from("suppliers").delete().eq("id",I);Q?(console.error("Error deleting supplier:",Q),w("❌ Fehler beim Löschen des Lieferanten."),P("error")):(f(d.id),w("✅ Lieferant erfolgreich gelöscht."),P("success"),W(null)),setTimeout(()=>{w(""),P("")},5e3)}},B=(I,Y)=>{q.current=I.touches[0].clientX},Z=(I,Y)=>{if(!q.current)return;const Q=I.touches[0].clientX,fe=q.current-Q;fe>O?W(Y):fe<-50&&M===Y&&W(null)},ne=()=>{q.current=null},de=I=>{M!==I.id&&g(I)},xe=()=>{M!==null&&W(null)},k=()=>{const Q=[["Name","Country","Industry","Risk Level","Note"].join(","),...e.map(ke=>[ke.name,ke.country,ke.industry,ke.risk_level,ke.note?`"${ke.note.replace(/"/g,'""')}"`:""].join(","))].join(`
`),fe=new Blob([Q],{type:"text/csv"}),ce=window.URL.createObjectURL(fe),ue=document.createElement("a");ue.setAttribute("href",ce),ue.setAttribute("download","suppliers.csv"),ue.click()},T=()=>{console.log("PDF export not implemented yet")};return l.jsxs("div",{children:[e.length===0?l.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📋"}),l.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"Keine Lieferanten gefunden"}),l.jsx("p",{className:"text-gray-500",children:"Es wurden keine Lieferanten mit den gewählten Filterkriterien gefunden."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full bg-white rounded-xl overflow-hidden",onClick:xe,children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Land"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branche"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risikostufe"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aktionen"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(I=>{const Y=I.last_updated&&ry(new Date,new Date(I.last_updated))>=12;return l.jsxs("tr",{className:`hover:bg-blue-50 transition-colors relative ${M===I.id?"bg-blue-50":""} ${Y?"border-l-4 border-red-500 bg-red-50":""}`,onClick:()=>de(I),onTouchStart:Q=>B(Q,I.id),onTouchMove:Q=>Z(Q,I.id),onTouchEnd:ne,children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[I.name,Y&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"⚠️ nicht aktualisiert seit über 12 Monaten"})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.country}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.industry}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium ${I.risk_level==="Hoch"?"bg-red-100 text-red-800":I.risk_level==="Mittel"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:I.risk_level})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{onClick:Q=>{Q.stopPropagation(),g(I)},className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Details anzeigen",children:l.jsx(js,{size:16})}),l.jsx("button",{onClick:Q=>{Q.stopPropagation(),V(I)},className:"text-gray-600 hover:text-gray-900 transition-colors",title:"Bearbeiten",children:l.jsx(im,{size:16})}),l.jsx("button",{onClick:Q=>{Q.stopPropagation(),S(I.id),le(!0)},className:"text-indigo-600 hover:text-indigo-800 transition-colors",title:"Dokument hochladen",children:"Dokument"}),u&&l.jsx("button",{onClick:Q=>{Q.stopPropagation(),ee(I.id,I.name)},className:"text-red-600 hover:text-red-900 transition-colors",title:"Lieferant löschen",children:l.jsx(gh,{size:16})})]}),l.jsxs("div",{className:`absolute right-0 top-0 bottom-0 flex items-center bg-white shadow-lg transform transition-transform ${M===I.id?"translate-x-0":"translate-x-full"}`,style:{width:"150px"},onClick:Q=>Q.stopPropagation(),children:[l.jsxs("button",{onClick:Q=>{Q.stopPropagation(),V(I)},className:"flex-1 h-full flex items-center justify-center bg-blue-500 text-white hover:bg-blue-600 transition-colors",title:"Bearbeiten",children:[l.jsx(im,{size:18,className:"mr-1"}),l.jsx("span",{children:"Bearbeiten"})]}),u&&l.jsxs("button",{onClick:Q=>{Q.stopPropagation(),ee(I.id,I.name)},className:"flex-1 h-full flex items-center justify-center bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Löschen",children:[l.jsx(gh,{size:18,className:"mr-1"}),l.jsx("span",{children:"Löschen"})]})]})]})]},I.id)})})]})}),v&&l.jsx("div",{className:`fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg text-white animate-slideInRight flex items-center ${N==="success"?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"}`,children:v}),l.jsxs("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-500",children:[l.jsxs("span",{children:["Zeige ",e.length," von ",n.length," Lieferanten"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{className:"flex items-center gap-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",onClick:k,children:[l.jsx(ll,{size:16}),"CSV Export"]}),l.jsxs("button",{className:"flex items-center gap-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",onClick:T,children:[l.jsx(ll,{size:16}),"PDF Export"]})]})]}),K&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Dokument hochladen"}),l.jsx("input",{type:"file",onChange:I=>j(I.target.files[0]),className:"mb-4"}),l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gültig bis"}),l.jsx("input",{type:"date",value:D,onChange:I=>H(I.target.value),className:"mb-4 w-full border px-3 py-2 rounded"}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:async()=>{if(!X||!D||!A)return;const I=`${A}/${X.name}`,{data:Y,error:Q}=await Te.storage.from("supplier-documents").upload(I,X,{upsert:!0});if(Q){console.error("Upload-Fehler:",Q);return}const{error:fe}=await Te.from("supplier_documents").insert([{supplier_id:A,name:X.name,path:I,valid_until:D}]);if(fe){console.error("Datenbankfehler:",fe);return}le(!1),j(null),H(""),S(null)},children:"Speichern"}),l.jsx("button",{className:"text-gray-600 px-4 py-2",onClick:()=>{le(!1),j(null),H(""),S(null)},children:"Abbrechen"})]})]})})]})}function E3({auditLogs:n,logActionFilter:e,setLogActionFilter:t,logUserFilter:r,setLogUserFilter:s,handleAuditLogCSVExport:i,handleAuditLogPDFExport:a}){return l.jsxs("div",{className:"bg-white p-6 rounded shadow mt-10",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Audit-Log"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-2",children:[l.jsxs("select",{value:e,onChange:o=>t(o.target.value),className:"w-full sm:w-1/4 px-4 py-2 border rounded",children:[l.jsx("option",{value:"",children:"Alle Aktionen"}),[...new Set(n.map(o=>o.action))].map(o=>l.jsx("option",{value:o,children:o},o))]}),l.jsxs("select",{value:r,onChange:o=>s(o.target.value),className:"w-full sm:w-1/4 px-4 py-2 border rounded",children:[l.jsx("option",{value:"",children:"Alle Benutzer"}),[...new Set(n.map(o=>o.user_id))].map(o=>l.jsx("option",{value:o,children:o.slice(0,8)},o))]})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("button",{onClick:i,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"CSV exportieren"}),l.jsx("button",{onClick:a,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded",children:"PDF exportieren"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-200",children:[l.jsx("th",{className:"p-2 border",children:"Aktion"}),l.jsx("th",{className:"p-2 border",children:"Benutzer"}),l.jsx("th",{className:"p-2 border",children:"Zeitpunkt"}),l.jsx("th",{className:"p-2 border",children:"Details"})]})}),l.jsx("tbody",{children:n.filter(o=>(!e||o.action===e)&&(!r||o.user_id===r)).map(o=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 border",children:o.action}),l.jsx("td",{className:"p-2 border",children:o.user_id.slice(0,8)}),l.jsx("td",{className:"p-2 border",children:new Date(o.timestamp).toLocaleString("de-DE")}),l.jsx("td",{className:"p-2 border text-xs break-all",children:JSON.stringify(o.details)})]},o.id))})]})})]})}function T3({selectedSupplier:n,setSelectedSupplier:e,fileUpload:t,setFileUpload:r}){const[s,i]=re.useState("details"),[a,o]=re.useState([]),[c,u]=re.useState(!1),[d,f]=re.useState(""),[g,p]=re.useState("selbstauskunft"),[y,v]=re.useState(""),[w,N]=re.useState(""),[P,M]=re.useState(""),[W,K]=re.useState(!1),[le,X]=re.useState(""),[j,D]=re.useState("success"),[H,A]=re.useState({humanRights:{score:0,note:""},environmental:{score:0,note:""},safety:{score:0,note:""},corruption:{score:0,note:""}}),[S,q]=re.useState([]),[O,V]=re.useState({type:"preventive",description:"",deadline:"",responsible:""}),[ee,B]=re.useState([]),[Z,ne]=re.useState({date:"",checklist:"",findings:""}),[de,xe]=re.useState([]),[k,T]=re.useState({type:"document_request",message:"",date:""}),I=re.useRef(null),Y=re.useRef(null),Q=[{id:"selbstauskunft",name:"Selbstauskunft"},{id:"zertifikat",name:"Zertifikat"},{id:"audit",name:"Audit/Prüfbericht"},{id:"nachweis",name:"Compliance-Nachweis"},{id:"vertrag",name:"Vertrag"},{id:"sonstiges",name:"Sonstiges"}];re.useEffect(()=>{n&&(fe(),ce(),ue(),ke(),we());const oe=_e=>{Y.current&&!Y.current.contains(_e.target)&&e(null)};return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[n]);const fe=async()=>{try{const{data:oe,error:_e}=await Te.from("supplier_documents").select("*").eq("supplier_id",n.id).order("created_at",{ascending:!1});if(_e)throw _e;o(oe||[])}catch(oe){console.error("Fehler beim Laden der Dokumente:",oe)}},ce=async()=>{try{const{data:oe,error:_e}=await Te.from("risk_assessments").select("*").eq("supplier_id",n.id).single();if(_e&&_e.code!=="PGRST116")throw _e;A(oe||{humanRights:{score:0,note:""},environmental:{score:0,note:""},safety:{score:0,note:""},corruption:{score:0,note:""}})}catch(oe){console.error("Fehler beim Laden der Risikoanalyse:",oe)}},ue=async()=>{try{const{data:oe,error:_e}=await Te.from("measures").select("*").eq("supplier_id",n.id).order("created_at",{ascending:!1});if(_e)throw _e;q(oe||[])}catch(oe){console.error("Fehler beim Laden der Maßnahmen:",oe)}},ke=async()=>{try{const{data:oe,error:_e}=await Te.from("audits").select("*").eq("supplier_id",n.id).order("date",{ascending:!1});if(_e)throw _e;B(oe||[])}catch(oe){console.error("Fehler beim Laden der Audits:",oe)}},we=async()=>{try{const{data:oe,error:_e}=await Te.from("communications").select("*").eq("supplier_id",n.id).order("date",{ascending:!1});if(_e)throw _e;xe(oe||[])}catch(oe){console.error("Fehler beim Laden der Kommunikation:",oe)}},Fe=oe=>{const _e=oe.target.files[0];if(_e){if(_e.size>10*1024*1024){f("Die Datei ist zu groß (max. 10MB)");return}if(!["application/pdf","image/jpeg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(_e.type)){f("Nicht unterstütztes Dateiformat. Erlaubt sind PDF, JPG, PNG, DOC, DOCX, XLS, XLSX");return}r(_e),v(_e.name),f("")}},Le=async()=>{if(!t){f("Bitte wählen Sie eine Datei aus");return}if(!g){f("Bitte wählen Sie einen Dokumenttyp");return}try{u(!0);const oe=t.name.split(".").pop(),ze=`supplier_documents/${`${n.id}_${Date.now()}.${oe}`}`,{error:Ke}=await Te.storage.from("documents").upload(ze,t);if(Ke)throw Ke;const{error:He}=await Te.from("supplier_documents").insert([{supplier_id:n.id,file_path:ze,document_type:g,document_name:y||t.name,valid_until:w||null,note:P,version:1,created_at:new Date}]);if(He)throw He;r(null),v(""),p("selbstauskunft"),N(""),M(""),I.current&&(I.current.value=""),fe(),$e("Dokument erfolgreich hochgeladen","success")}catch(oe){console.error("Fehler beim Hochladen:",oe),f("Fehler beim Hochladen: "+oe.message),$e("Fehler beim Hochladen","error")}finally{u(!1)}},qe=async oe=>{try{const{data:_e,error:ze}=await Te.storage.from("documents").download(oe.file_path);if(ze)throw ze;const Ke=URL.createObjectURL(_e),He=oe.createElement("a");He.href=Ke,He.download=oe.document_name,oe.body.appendChild(He),He.click(),oe.body.removeChild(He),URL.revokeObjectURL(Ke)}catch(_e){console.error("Fehler beim Download:",_e),$e("Fehler beim Download","error")}},me=async(oe,_e)=>{try{const{error:ze}=await Te.from("supplier_documents").update({valid_until:_e}).eq("id",oe);if(ze)throw ze;fe(),$e("Gültigkeitsdatum aktualisiert","success")}catch(ze){console.error("Fehler beim Aktualisieren:",ze),$e("Fehler beim Aktualisieren","error")}},U=async(oe,_e)=>{try{u(!0);const ze=_e.name.split(".").pop(),He=`supplier_documents/${`${n.id}_${Date.now()}.${ze}`}`,{error:Ge}=await Te.storage.from("documents").upload(He,_e);if(Ge)throw Ge;const{error:Pe}=await Te.from("supplier_documents").insert([{supplier_id:n.id,file_path:He,document_type:oe.document_type,document_name:oe.document_name,valid_until:oe.valid_until,note:oe.note,version:oe.version+1,previous_version_id:oe.id,created_at:new Date}]);if(Pe)throw Pe;fe(),$e("Neue Version hochgeladen","success")}catch(ze){console.error("Fehler beim Hochladen der neuen Version:",ze),$e("Fehler beim Hochladen der neuen Version","error")}finally{u(!1)}},$e=(oe,_e="success")=>{X(oe),D(_e),K(!0),setTimeout(()=>K(!1),3e3)},Ee=oe=>{if(!oe)return!1;const _e=new Date,Ke=new Date(oe).getTime()-_e.getTime(),He=Math.ceil(Ke/(1e3*60*60*24));return He<=60&&He>0},Ne=oe=>{if(!oe)return!1;const _e=new Date;return new Date(oe)<_e},te=oe=>Ne(oe.valid_until)?{text:"Abgelaufen",color:"text-red-600 bg-red-50 border-red-200"}:Ee(oe.valid_until)?{text:"Läuft bald ab",color:"text-yellow-600 bg-yellow-50 border-yellow-200"}:oe.valid_until?{text:"Gültig",color:"text-green-600 bg-green-50 border-green-200"}:{text:"Unbefristet",color:"text-blue-600 bg-blue-50 border-blue-200"},Ae=oe=>{if(!oe)return"-";try{return Vt(new Date(oe),"dd.MM.yyyy",{locale:_3})}catch{return oe}},G=()=>{const oe={};return a.forEach(_e=>{const ze=`${_e.document_type}-${_e.document_name}`;(!oe[ze]||new Date(_e.created_at)>new Date(oe[ze].created_at))&&(oe[ze]=_e)}),Object.values(oe)},ve=(oe,_e)=>a.filter(ze=>ze.document_name===oe&&ze.document_type===_e).sort((ze,Ke)=>new Date(Ke.created_at)-new Date(ze.created_at)),Be=oe=>{const _e=Q.find(ze=>ze.id===oe);return _e?_e.name:oe};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:l.jsxs("div",{ref:Y,className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden relative animate-fadeIn",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[n.name,l.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 Rounded-full ${n.risk_level==="Hoch"?"bg-red-100 text-red-700":n.risk_level==="Mittel"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:n.risk_level})]}),l.jsx("button",{onClick:()=>e(null),className:"text-gray-500 hover:text-gray-700 transition-colors",children:l.jsx(Nn,{size:20})})]}),l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("div",{className:"flex px-6 overflow-x-auto",children:[{id:"details",label:"Lieferantendetails"},{id:"documents",label:"Dokumente",badge:a.length},{id:"risk",label:"Risikoanalyse"},{id:"measures",label:"Maßnahmen",badge:S.length},{id:"audits",label:"Audits",badge:ee.length},{id:"communication",label:"Kommunikation",badge:de.length},{id:"diligence",label:"Sorgfaltspflichten"}].map(oe=>l.jsxs("button",{onClick:()=>i(oe.id),className:`py-3 px-4 border-b-2 text-sm font-medium flex items-center gap-1 whitespace-nowrap ${s===oe.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[oe.label,oe.badge>0&&l.jsx("span",{className:"bg-blue-100 text-blue-600 text-xs px-2 rounded-full",children:oe.badge})]},oe.id))})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s==="details"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Name"}),l.jsx("p",{className:"text-gray-900",children:n.name})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Land"}),l.jsx("p",{className:"text-gray-900",children:n.country})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Branche"}),l.jsx("p",{className:"text-gray-900",children:n.industry})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Risikostufe"}),l.jsx("p",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.risk_level==="Hoch"?"bg-red-100 text-red-800":n.risk_level==="Mittel"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:n.risk_level})]}),l.jsxs("div",{className:"col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"LKG-relevante Informationen"}),l.jsx("p",{className:"text-gray-900",children:n.note||"Keine Informationen vorhanden"})]})]}),s==="documents"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Neues Dokument hochladen"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Dokument auswählen"}),l.jsx("div",{className:"flex items-center",children:l.jsxs("label",{className:"flex-1 cursor-pointer px-3 py-2 border border-gray-300 rounded-lg text-sm text-center hover:bg-gray-50",children:[l.jsx("input",{type:"file",ref:I,onChange:Fe,className:"hidden"}),l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx(xh,{size:16}),t?t.name:"Datei auswählen"]})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Dokumenttyp"}),l.jsx("select",{value:g,onChange:oe=>p(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Q.map(oe=>l.jsx("option",{value:oe.id,children:oe.name},oe.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Dokumentname"}),l.jsx("input",{type:"text",value:y,onChange:oe=>v(oe.target.value),placeholder:"Dokumentname",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Gültig bis (optional)"}),l.jsx("input",{type:"date",value:w,onChange:oe=>N(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"col-span-1 md:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notiz (optional)"}),l.jsx("textarea",{value:P,onChange:oe=>M(oe.target.value),placeholder:"Zusätzliche Informationen zum Dokument",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"2"})]})]}),d&&l.jsxs("div",{className:"mt-2 text-sm text-red-600",children:[l.jsx(Ri,{size:12,className:"inline mr-1"})," ",d]}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{onClick:Le,disabled:c||!t,className:`px-4 py-2 rounded-lg text-white font-medium ${c||!t?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} flex items-center gap-2`,children:c?l.jsxs(l.Fragment,{children:[l.jsx(Xg,{size:16,className:"animate-spin"}),"Hochladen..."]}):l.jsxs(l.Fragment,{children:[l.jsx(xh,{size:16}),"Dokument hochladen"]})})})]}),l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Dokumentenübersicht"}),G().length>0?l.jsx("div",{className:"space-y-4",children:G().map(oe=>{const _e=te(oe),ze=ve(oe.document_name,oe.document_type),Ke=ze.length>1;return l.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 p-3 border-b border-gray-200 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(js,{size:18,className:"text-blue-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:oe.document_name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[Be(oe.document_type)," • Version ",oe.version]})]})]}),l.jsx("div",{children:l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${_e.color}`,children:_e.text})})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(Jg,{size:12}),"Hochgeladen am:"]}),l.jsx("p",{className:"text-sm text-gray-900",children:Ae(oe.created_at)})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(Zo,{size:12}),"Gültig bis:"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-sm text-gray-900",children:Ae(oe.valid_until)}),l.jsx("button",{onClick:()=>{const He=prompt("Neues Gültigkeitsdatum (YYYY-MM-DD):",oe.valid_until||"");He&&me(oe.id,He)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Ändern"})]})]})]}),oe.note&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Notiz:"}),l.jsx("p",{className:"text-sm text-gray-900",children:oe.note})]}),l.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[l.jsx("div",{children:Ke&&l.jsxs("details",{className:"text-xs",children:[l.jsxs("summary",{className:"text-blue-600 cursor-pointer",children:["Alle Versionen (",ze.length,")"]}),l.jsx("div",{className:"mt-2 pl-2 border-l-2 border-gray-100 space-y-1",children:ze.map((He,Ge)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{children:["V",He.version]}),l.jsx("span",{className:"text-gray-500",children:Ae(He.created_at)}),l.jsx("button",{onClick:()=>qe(He),className:"text-blue-600 hover:underline",children:"Download"})]},He.id))})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"file",id:`new-version-${oe.id}`,className:"hidden",onChange:He=>{const Ge=He.target.files[0];Ge&&(U(oe,Ge),He.target.value=null)}}),l.jsx("label",{htmlFor:`new-version-${oe.id}`,className:"text-xs px-3 py-1 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded border border-gray-300 cursor-pointer",children:"Neue Version"}),l.jsx("button",{onClick:()=>qe(oe),className:"text-xs px-3 py-1 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded border border-blue-200",children:"Download"})]})]})]}),Ee(oe.valid_until)&&l.jsxs("div",{className:"px-3 py-2 bg-yellow-50 text-yellow-700 border-t border-yellow-200 text-xs flex items-center gap-2",children:[l.jsx(Bi,{size:14}),"Dieses Dokument läuft in weniger als 60 Tagen ab. Bitte planen Sie rechtzeitig die Erneuerung."]}),Ne(oe.valid_until)&&l.jsxs("div",{className:"px-3 py-2 bg-red-50 text-red-700 border-t border-red-200 text-xs flex items-center gap-2",children:[l.jsx(Bi,{size:14}),"Dieses Dokument ist abgelaufen. Bitte laden Sie eine neue Version hoch."]})]},oe.id)})}):l.jsx("p",{className:"text-gray-500 text-sm",children:"Keine Dokumente vorhanden."})]})]})]})})}var Hc={exports:{}},F3=Hc.exports,lm;function I3(){return lm||(lm=1,function(n,e){(function(t,r){r()})(F3,function(){function t(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,d,f){var g=new XMLHttpRequest;g.open("GET",u),g.responseType="blob",g.onload=function(){c(g.response,d,f)},g.onerror=function(){console.error("could not download file")},g.send()}function s(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof oc=="object"&&oc.global===oc?oc:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,d,f){var g=a.URL||a.webkitURL,p=document.createElement("a");d=d||u.name||"download",p.download=d,p.rel="noopener",typeof u=="string"?(p.href=u,p.origin===location.origin?i(p):s(p.href)?r(u,d,f):i(p,p.target="_blank")):(p.href=g.createObjectURL(u),setTimeout(function(){g.revokeObjectURL(p.href)},4e4),setTimeout(function(){i(p)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,f){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,f),d);else if(s(u))r(u,d,f);else{var g=document.createElement("a");g.href=u,g.target="_blank",setTimeout(function(){i(g)})}}:function(u,d,f,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof u=="string")return r(u,d,f);var p=u.type==="application/octet-stream",y=/constructor/i.test(a.HTMLElement)||a.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||p&&y||o)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var M=w.result;M=v?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=M:location=M,g=null},w.readAsDataURL(u)}else{var N=a.URL||a.webkitURL,P=N.createObjectURL(u);g?g.location=P:location.href=P,g=null,setTimeout(function(){N.revokeObjectURL(P)},4e4)}});a.saveAs=c.saveAs=c,n.exports=c})}(Hc)),Hc.exports}var R3=I3();function B3(n){const[e,t]=re.useState([]),[r,s]=re.useState(""),[i,a]=re.useState("");return re.useEffect(()=>{n&&(async()=>{const{data:d,error:f}=await Te.from("audit_log").select("*").order("timestamp",{ascending:!1});!f&&d&&t(d)})()},[n]),{auditLogs:e,logActionFilter:r,setLogActionFilter:s,logUserFilter:i,setLogUserFilter:a,handleAuditLogCSVExport:()=>{const u=[["Aktion","Benutzer","Zeitpunkt","Details"]];e.filter(g=>(!r||g.action===r)&&(!i||g.user_id===i)).forEach(g=>{u.push([g.action,g.user_id,new Date(g.timestamp).toLocaleString("de-DE"),JSON.stringify(g.details)])});const d=u.map(g=>g.join(",")).join(`
`),f=new Blob([d],{type:"text/csv;charset=utf-8;"});R3.saveAs(f,"audit_logs.csv")},handleAuditLogPDFExport:()=>{const u=new nt;u.setFontSize(16),u.text("Audit-Log Export",105,15,{align:"center"}),u.setFontSize(10);let d=25;e.filter(f=>(!r||f.action===r)&&(!i||f.user_id===i)).forEach(f=>{const g=new Date(f.timestamp).toLocaleString("de-DE"),p=u.splitTextToSize(`• ${f.action} – ${f.user_id.slice(0,8)} – ${g}
${JSON.stringify(f.details)}`,180);d+p.length*6>280&&(u.addPage(),d=20),u.text(p,10,d),d+=p.length*6+4}),u.save("audit_logs.pdf")}}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function gl(n){return n+.5|0}const Zs=(n,e,t)=>Math.max(Math.min(n,t),e);function Wo(n){return Zs(gl(n*2.55),0,255)}function ei(n){return Zs(gl(n*255),0,255)}function ws(n){return Zs(gl(n/2.55)/100,0,1)}function cm(n){return Zs(gl(n*100),0,100)}const xr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yh=[..."0123456789ABCDEF"],z3=n=>yh[n&15],q3=n=>yh[(n&240)>>4]+yh[n&15],Nc=n=>(n&240)>>4===(n&15),H3=n=>Nc(n.r)&&Nc(n.g)&&Nc(n.b)&&Nc(n.a);function U3(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&xr[n[1]]*17,g:255&xr[n[2]]*17,b:255&xr[n[3]]*17,a:e===5?xr[n[4]]*17:255}:(e===7||e===9)&&(t={r:xr[n[1]]<<4|xr[n[2]],g:xr[n[3]]<<4|xr[n[4]],b:xr[n[5]]<<4|xr[n[6]],a:e===9?xr[n[7]]<<4|xr[n[8]]:255})),t}const W3=(n,e)=>n<255?e(n):"";function $3(n){var e=H3(n)?z3:q3;return n?"#"+e(n.r)+e(n.g)+e(n.b)+W3(n.a,e):void 0}const V3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zg(n,e,t){const r=e*Math.min(t,1-t),s=(i,a=(i+n/30)%12)=>t-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function G3(n,e,t){const r=(s,i=(s+n/60)%6)=>t-t*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Y3(n,e,t){const r=Zg(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)r[s]*=1-e-t,r[s]+=e;return r}function K3(n,e,t,r,s){return n===s?(e-t)/r+(e<t?6:0):e===s?(t-n)/r+2:(n-e)/r+4}function $h(n){const t=n.r/255,r=n.g/255,s=n.b/255,i=Math.max(t,r,s),a=Math.min(t,r,s),o=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=o>.5?d/(2-i-a):d/(i+a),c=K3(t,r,s,d,i),c=c*60+.5),[c|0,u||0,o]}function Vh(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(ei)}function Gh(n,e,t){return Vh(Zg,n,e,t)}function J3(n,e,t){return Vh(Y3,n,e,t)}function X3(n,e,t){return Vh(G3,n,e,t)}function e1(n){return(n%360+360)%360}function Q3(n){const e=V3.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Wo(+e[5]):ei(+e[5]));const s=e1(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=J3(s,i,a):e[1]==="hsv"?r=X3(s,i,a):r=Gh(s,i,a),{r:r[0],g:r[1],b:r[2],a:t}}function Z3(n,e){var t=$h(n);t[0]=e1(t[0]+e),t=Gh(t),n.r=t[0],n.g=t[1],n.b=t[2]}function eN(n){if(!n)return;const e=$h(n),t=e[0],r=cm(e[1]),s=cm(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${s}%, ${ws(n.a)})`:`hsl(${t}, ${r}%, ${s}%)`}const um={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tN(){const n={},e=Object.keys(dm),t=Object.keys(um);let r,s,i,a,o;for(r=0;r<e.length;r++){for(a=o=e[r],s=0;s<t.length;s++)i=t[s],o=o.replace(i,um[i]);i=parseInt(dm[a],16),n[o]=[i>>16&255,i>>8&255,i&255]}return n}let jc;function nN(n){jc||(jc=tN(),jc.transparent=[0,0,0,0]);const e=jc[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const rN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sN(n){const e=rN.exec(n);let t=255,r,s,i;if(e){if(e[7]!==r){const a=+e[7];t=e[8]?Wo(a):Zs(a*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Wo(r):Zs(r,0,255)),s=255&(e[4]?Wo(s):Zs(s,0,255)),i=255&(e[6]?Wo(i):Zs(i,0,255)),{r,g:s,b:i,a:t}}}function iN(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ws(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Fd=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ma=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function aN(n,e,t){const r=Ma(ws(n.r)),s=Ma(ws(n.g)),i=Ma(ws(n.b));return{r:ei(Fd(r+t*(Ma(ws(e.r))-r))),g:ei(Fd(s+t*(Ma(ws(e.g))-s))),b:ei(Fd(i+t*(Ma(ws(e.b))-i))),a:n.a+t*(e.a-n.a)}}function kc(n,e,t){if(n){let r=$h(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=Gh(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function t1(n,e){return n&&Object.assign(e||{},n)}function hm(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ei(n[3]))):(e=t1(n,{r:0,g:0,b:0,a:1}),e.a=ei(e.a)),e}function oN(n){return n.charAt(0)==="r"?sN(n):Q3(n)}class cl{constructor(e){if(e instanceof cl)return e;const t=typeof e;let r;t==="object"?r=hm(e):t==="string"&&(r=U3(e)||nN(e)||oN(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=t1(this._rgb);return e&&(e.a=ws(e.a)),e}set rgb(e){this._rgb=hm(e)}rgbString(){return this._valid?iN(this._rgb):void 0}hexString(){return this._valid?$3(this._rgb):void 0}hslString(){return this._valid?eN(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,s=e.rgb;let i;const a=t===i?.5:t,o=2*a-1,c=r.a-s.a,u=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=aN(this._rgb,e._rgb,t)),this}clone(){return new cl(this.rgb)}alpha(e){return this._rgb.a=ei(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=gl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return kc(this._rgb,2,e),this}darken(e){return kc(this._rgb,2,-e),this}saturate(e){return kc(this._rgb,1,e),this}desaturate(e){return kc(this._rgb,1,-e),this}rotate(e){return Z3(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gs(){}const lN=(()=>{let n=0;return()=>n++})();function zt(n){return n==null}function jn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function kt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function vr(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Vr(n,e){return vr(n)?n:e}function bt(n,e){return typeof n>"u"?e:n}const cN=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function qt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Pt(n,e,t,r){let s,i,a;if(jn(n))for(i=n.length,s=0;s<i;s++)e.call(t,n[s],s);else if(kt(n))for(a=Object.keys(n),i=a.length,s=0;s<i;s++)e.call(t,n[a[s]],a[s])}function Zc(n,e){let t,r,s,i;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(s=n[t],i=e[t],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function eu(n){if(jn(n))return n.map(eu);if(kt(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let s=0;for(;s<r;++s)e[t[s]]=eu(n[t[s]]);return e}return n}function n1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function uN(n,e,t,r){if(!n1(n))return;const s=e[n],i=t[n];kt(s)&&kt(i)?ul(s,i,r):e[n]=eu(i)}function ul(n,e,t){const r=jn(e)?e:[e],s=r.length;if(!kt(n))return n;t=t||{};const i=t.merger||uN;let a;for(let o=0;o<s;++o){if(a=r[o],!kt(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],n,a,t)}return n}function el(n,e){return ul(n,e,{merger:dN})}function dN(n,e,t){if(!n1(n))return;const r=e[n],s=t[n];kt(r)&&kt(s)?el(r,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=eu(s))}const fm={"":n=>n,x:n=>n.x,y:n=>n.y};function hN(n){const e=n.split("."),t=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function fN(n){const e=hN(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function tu(n,e){return(fm[e]||(fm[e]=fN(e)))(n)}function Yh(n){return n.charAt(0).toUpperCase()+n.slice(1)}const nu=n=>typeof n<"u",ii=n=>typeof n=="function",pm=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function pN(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const kn=Math.PI,rs=2*kn,mN=rs+kn,ru=Number.POSITIVE_INFINITY,gN=kn/180,Tr=kn/2,wi=kn/4,mm=kn*2/3,r1=Math.log10,Ya=Math.sign;function tl(n,e,t){return Math.abs(n-e)<t}function gm(n){const e=Math.round(n);n=tl(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(r1(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function xN(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((s,i)=>s-i).pop(),e}function bN(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function dl(n){return!bN(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function yN(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function vN(n,e,t){let r,s,i;for(r=0,s=n.length;r<s;r++)i=n[r][t],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Ei(n){return n*(kn/180)}function wN(n){return n*(180/kn)}function xm(n){if(!vr(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function _N(n,e){const t=e.x-n.x,r=e.y-n.y,s=Math.sqrt(t*t+r*r);let i=Math.atan2(r,t);return i<-.5*kn&&(i+=rs),{angle:i,distance:s}}function vh(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function NN(n,e){return(n-e+mN)%rs-kn}function Ys(n){return(n%rs+rs)%rs}function s1(n,e,t,r){const s=Ys(n),i=Ys(e),a=Ys(t),o=Ys(i-s),c=Ys(a-s),u=Ys(s-i),d=Ys(s-a);return s===i||s===a||r&&i===a||o>c&&u<d}function br(n,e,t){return Math.max(e,Math.min(t,n))}function jN(n){return br(n,-32768,32767)}function $o(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function Kh(n,e,t){t=t||(a=>n[a]<e);let r=n.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,t(i)?s=i:r=i;return{lo:s,hi:r}}const Ti=(n,e,t,r)=>Kh(n,t,r?s=>{const i=n[s][e];return i<t||i===t&&n[s+1][e]===t}:s=>n[s][e]<t),kN=(n,e,t)=>Kh(n,t,r=>n[r][e]>=t);function SN(n,e,t){let r=0,s=n.length;for(;r<s&&n[r]<e;)r++;for(;s>r&&n[s-1]>t;)s--;return r>0||s<n.length?n.slice(r,s):n}const i1=["push","pop","shift","splice","unshift"];function AN(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),i1.forEach(t=>{const r="_onData"+Yh(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),a}})})}function bm(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(i1.forEach(i=>{delete n[i]}),delete n._chartjs)}function LN(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const a1=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function o1(n,e){let t=[],r=!1;return function(...s){t=s,r||(r=!0,a1.call(window,()=>{r=!1,n.apply(e,t)}))}}function CN(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const Jh=n=>n==="start"?"left":n==="end"?"right":"center",Tn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,PN=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function DN(n,e,t){const r=e.length;let s=0,i=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=a.axis,{min:f,max:g,minDefined:p,maxDefined:y}=a.getUserBounds();if(p){if(s=Math.min(Ti(c,d,f).lo,t?r:Ti(e,d,a.getPixelForValue(f)).lo),u){const v=c.slice(0,s+1).reverse().findIndex(w=>!zt(w[o.axis]));s-=Math.max(0,v)}s=br(s,0,r-1)}if(y){let v=Math.max(Ti(c,a.axis,g,!0).hi+1,t?0:Ti(e,d,a.getPixelForValue(g),!0).hi+1);if(u){const w=c.slice(v-1).findIndex(N=>!zt(N[o.axis]));v+=Math.max(0,w)}i=br(v,s,r)-s}else i=r-s}return{start:s,count:i}}function MN(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,s),i}const Sc=n=>n===0||n===1,ym=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*rs/t)),vm=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*rs/t)+1,nl={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Tr)+1,easeOutSine:n=>Math.sin(n*Tr),easeInOutSine:n=>-.5*(Math.cos(kn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Sc(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Sc(n)?n:ym(n,.075,.3),easeOutElastic:n=>Sc(n)?n:vm(n,.075,.3),easeInOutElastic(n){return Sc(n)?n:n<.5?.5*ym(n*2,.1125,.45):.5+.5*vm(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-nl.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?nl.easeInBounce(n*2)*.5:nl.easeOutBounce(n*2-1)*.5+.5};function Xh(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function wm(n){return Xh(n)?n:new cl(n)}function Id(n){return Xh(n)?n:new cl(n).saturate(.5).darken(.1).hexString()}const ON=["x","y","borderWidth","radius","tension"],EN=["color","borderColor","backgroundColor"];function TN(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:EN},numbers:{type:"number",properties:ON}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function FN(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _m=new Map;function IN(n,e){e=e||{};const t=n+JSON.stringify(e);let r=_m.get(t);return r||(r=new Intl.NumberFormat(n,e),_m.set(t,r)),r}function l1(n,e,t){return IN(e,t).format(n)}const RN={values(n){return jn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let s,i=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=BN(n,t)}const a=r1(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),l1(n,r,c)}};function BN(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var c1={formatters:RN};function zN(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:c1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zi=Object.create(null),wh=Object.create(null);function rl(n,e){if(!e)return n;const t=e.split(".");for(let r=0,s=t.length;r<s;++r){const i=t[r];n=n[i]||(n[i]=Object.create(null))}return n}function Rd(n,e,t){return typeof e=="string"?ul(rl(n,e),t):ul(rl(n,""),e)}class qN{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Id(s.backgroundColor),this.hoverBorderColor=(r,s)=>Id(s.borderColor),this.hoverColor=(r,s)=>Id(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Rd(this,e,t)}get(e){return rl(this,e)}describe(e,t){return Rd(wh,e,t)}override(e,t){return Rd(zi,e,t)}route(e,t,r,s){const i=rl(this,e),a=rl(this,r),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[o],u=a[s];return kt(c)?Object.assign({},u,c):bt(c,u)},set(c){this[o]=c}}})}apply(e){e.forEach(t=>t(this))}}var un=new qN({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[TN,FN,zN]);function HN(n){return!n||zt(n.size)||zt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Nm(n,e,t,r,s){let i=e[s];return i||(i=e[s]=n.measureText(s).width,t.push(s)),i>r&&(r=i),r}function _i(n,e,t){const r=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*r)/r+s}function jm(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function _h(n,e,t,r){u1(n,e,t,r,null)}function u1(n,e,t,r,s){let i,a,o,c,u,d,f,g;const p=e.pointStyle,y=e.rotation,v=e.radius;let w=(y||0)*gN;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(w),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),p){default:s?n.ellipse(t,r,s/2,v,0,0,rs):n.arc(t,r,v,0,rs),n.closePath();break;case"triangle":d=s?s/2:v,n.moveTo(t+Math.sin(w)*d,r-Math.cos(w)*v),w+=mm,n.lineTo(t+Math.sin(w)*d,r-Math.cos(w)*v),w+=mm,n.lineTo(t+Math.sin(w)*d,r-Math.cos(w)*v),n.closePath();break;case"rectRounded":u=v*.516,c=v-u,a=Math.cos(w+wi)*c,f=Math.cos(w+wi)*(s?s/2-u:c),o=Math.sin(w+wi)*c,g=Math.sin(w+wi)*(s?s/2-u:c),n.arc(t-f,r-o,u,w-kn,w-Tr),n.arc(t+g,r-a,u,w-Tr,w),n.arc(t+f,r+o,u,w,w+Tr),n.arc(t-g,r+a,u,w+Tr,w+kn),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*v,d=s?s/2:c,n.rect(t-d,r-c,2*d,2*c);break}w+=wi;case"rectRot":f=Math.cos(w)*(s?s/2:v),a=Math.cos(w)*v,o=Math.sin(w)*v,g=Math.sin(w)*(s?s/2:v),n.moveTo(t-f,r-o),n.lineTo(t+g,r-a),n.lineTo(t+f,r+o),n.lineTo(t-g,r+a),n.closePath();break;case"crossRot":w+=wi;case"cross":f=Math.cos(w)*(s?s/2:v),a=Math.cos(w)*v,o=Math.sin(w)*v,g=Math.sin(w)*(s?s/2:v),n.moveTo(t-f,r-o),n.lineTo(t+f,r+o),n.moveTo(t+g,r-a),n.lineTo(t-g,r+a);break;case"star":f=Math.cos(w)*(s?s/2:v),a=Math.cos(w)*v,o=Math.sin(w)*v,g=Math.sin(w)*(s?s/2:v),n.moveTo(t-f,r-o),n.lineTo(t+f,r+o),n.moveTo(t+g,r-a),n.lineTo(t-g,r+a),w+=wi,f=Math.cos(w)*(s?s/2:v),a=Math.cos(w)*v,o=Math.sin(w)*v,g=Math.sin(w)*(s?s/2:v),n.moveTo(t-f,r-o),n.lineTo(t+f,r+o),n.moveTo(t+g,r-a),n.lineTo(t-g,r+a);break;case"line":a=s?s/2:Math.cos(w)*v,o=Math.sin(w)*v,n.moveTo(t-a,r-o),n.lineTo(t+a,r+o);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(w)*(s?s/2:v),r+Math.sin(w)*v);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function hl(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Qh(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Zh(n){n.restore()}function UN(n,e,t,r,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const i=(e.x+t.x)/2;n.lineTo(i,e.y),n.lineTo(i,t.y)}else s==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function WN(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function $N(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),zt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function VN(n,e,t,r,s){if(s.strikethrough||s.underline){const i=n.measureText(r),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,c=t-i.actualBoundingBoxAscent,u=t+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(a,d),n.lineTo(o,d),n.stroke()}}function GN(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function fl(n,e,t,r,s,i={}){const a=jn(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(n.save(),n.font=s.string,$N(n,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&GN(n,i.backdrop),o&&(i.strokeColor&&(n.strokeStyle=i.strokeColor),zt(i.strokeWidth)||(n.lineWidth=i.strokeWidth),n.strokeText(u,t,r,i.maxWidth)),n.fillText(u,t,r,i.maxWidth),VN(n,t,r,u,i),r+=Number(s.lineHeight);n.restore()}function Nh(n,e){const{x:t,y:r,w:s,h:i,radius:a}=e;n.arc(t+a.topLeft,r+a.topLeft,a.topLeft,1.5*kn,kn,!0),n.lineTo(t,r+i-a.bottomLeft),n.arc(t+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,kn,Tr,!0),n.lineTo(t+s-a.bottomRight,r+i),n.arc(t+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Tr,0,!0),n.lineTo(t+s,r+a.topRight),n.arc(t+s-a.topRight,r+a.topRight,a.topRight,0,-Tr,!0),n.lineTo(t+a.topLeft,r)}const YN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,KN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JN(n,e){const t=(""+n).match(YN);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const XN=n=>+n||0;function d1(n,e){const t={},r=kt(e),s=r?Object.keys(e):e,i=kt(n)?r?a=>bt(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of s)t[a]=XN(i(a));return t}function QN(n){return d1(n,{top:"y",right:"x",bottom:"y",left:"x"})}function sl(n){return d1(n,["topLeft","topRight","bottomLeft","bottomRight"])}function wr(n){const e=QN(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Rn(n,e){n=n||{},e=e||un.font;let t=bt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=bt(n.style,e.style);r&&!(""+r).match(KN)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:bt(n.family,e.family),lineHeight:JN(bt(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:bt(n.weight,e.weight),string:""};return s.string=HN(s),s}function Ac(n,e,t,r){let s,i,a;for(s=0,i=n.length;s<i;++s)if(a=n[s],a!==void 0&&a!==void 0)return a}function ZN(n,e,t){const{min:r,max:s}=n,i=cN(e,(s-r)/2),a=(o,c)=>t&&o===0?0:o+c;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function Ui(n,e){return Object.assign(Object.create(n),e)}function ef(n,e=[""],t,r,s=()=>n[0]){const i=t||n;typeof r>"u"&&(r=m1("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:i,_fallback:r,_getTarget:s,override:o=>ef([o,...n],e,i,r)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete n[0][c],!0},get(o,c){return f1(o,c,()=>o4(c,e,n,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,c){return Sm(o).includes(c)},ownKeys(o){return Sm(o)},set(o,c,u){const d=o._storage||(o._storage=s());return o[c]=d[c]=u,delete o._keys,!0}})}function Ka(n,e,t,r){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:h1(n,r),setContext:i=>Ka(n,i,t,r),override:i=>Ka(n.override(i),e,t,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete n[a],!0},get(i,a,o){return f1(i,a,()=>t4(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(i,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(i,a,o){return n[a]=o,delete i[a],!0}})}function h1(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:r,isScriptable:ii(t)?t:()=>t,isIndexable:ii(r)?r:()=>r}}const e4=(n,e)=>n?n+Yh(e):e,tf=(n,e)=>kt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function f1(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function t4(n,e,t){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=n;let o=r[e];return ii(o)&&a.isScriptable(e)&&(o=n4(e,o,n,t)),jn(o)&&o.length&&(o=r4(e,o,n,a.isIndexable)),tf(e,o)&&(o=Ka(o,s,i&&i[e],a)),o}function n4(n,e,t,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let c=e(i,a||r);return o.delete(n),tf(n,c)&&(c=nf(s._scopes,s,n,c)),c}function r4(n,e,t,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=t;if(typeof i.index<"u"&&r(n))return e[i.index%e.length];if(kt(e[0])){const c=e,u=s._scopes.filter(d=>d!==c);e=[];for(const d of c){const f=nf(u,s,n,d);e.push(Ka(f,i,a&&a[n],o))}}return e}function p1(n,e,t){return ii(n)?n(e,t):n}const s4=(n,e)=>n===!0?e:typeof n=="string"?tu(e,n):void 0;function i4(n,e,t,r,s){for(const i of e){const a=s4(t,i);if(a){n.add(a);const o=p1(a._fallback,t,s);if(typeof o<"u"&&o!==t&&o!==r)return o}else if(a===!1&&typeof r<"u"&&t!==r)return null}return!1}function nf(n,e,t,r){const s=e._rootScopes,i=p1(e._fallback,t,r),a=[...n,...s],o=new Set;o.add(r);let c=km(o,a,t,i||t,r);return c===null||typeof i<"u"&&i!==t&&(c=km(o,a,i,c,r),c===null)?!1:ef(Array.from(o),[""],s,i,()=>a4(e,t,r))}function km(n,e,t,r,s){for(;t;)t=i4(n,e,t,r,s);return t}function a4(n,e,t){const r=n._getTarget();e in r||(r[e]={});const s=r[e];return jn(s)&&kt(t)?t:s||{}}function o4(n,e,t,r){let s;for(const i of e)if(s=m1(e4(i,n),t),typeof s<"u")return tf(n,s)?nf(t,r,n,s):s}function m1(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function Sm(n){let e=n._keys;return e||(e=n._keys=l4(n._scopes)),e}function l4(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const c4=Number.EPSILON||1e-14,Ja=(n,e)=>e<n.length&&!n[e].skip&&n[e],g1=n=>n==="x"?"y":"x";function u4(n,e,t,r){const s=n.skip?e:n,i=e,a=t.skip?e:t,o=vh(i,s),c=vh(a,i);let u=o/(o+c),d=c/(o+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=r*u,g=r*d;return{previous:{x:i.x-f*(a.x-s.x),y:i.y-f*(a.y-s.y)},next:{x:i.x+g*(a.x-s.x),y:i.y+g*(a.y-s.y)}}}function d4(n,e,t){const r=n.length;let s,i,a,o,c,u=Ja(n,0);for(let d=0;d<r-1;++d)if(c=u,u=Ja(n,d+1),!(!c||!u)){if(tl(e[d],0,c4)){t[d]=t[d+1]=0;continue}s=t[d]/e[d],i=t[d+1]/e[d],o=Math.pow(s,2)+Math.pow(i,2),!(o<=9)&&(a=3/Math.sqrt(o),t[d]=s*a*e[d],t[d+1]=i*a*e[d])}}function h4(n,e,t="x"){const r=g1(t),s=n.length;let i,a,o,c=Ja(n,0);for(let u=0;u<s;++u){if(a=o,o=c,c=Ja(n,u+1),!o)continue;const d=o[t],f=o[r];a&&(i=(d-a[t])/3,o[`cp1${t}`]=d-i,o[`cp1${r}`]=f-i*e[u]),c&&(i=(c[t]-d)/3,o[`cp2${t}`]=d+i,o[`cp2${r}`]=f+i*e[u])}}function f4(n,e="x"){const t=g1(e),r=n.length,s=Array(r).fill(0),i=Array(r);let a,o,c,u=Ja(n,0);for(a=0;a<r;++a)if(o=c,c=u,u=Ja(n,a+1),!!c){if(u){const d=u[e]-c[e];s[a]=d!==0?(u[t]-c[t])/d:0}i[a]=o?u?Ya(s[a-1])!==Ya(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}d4(n,s,i),h4(n,i,e)}function Lc(n,e,t){return Math.max(Math.min(n,t),e)}function p4(n,e){let t,r,s,i,a,o=hl(n[0],e);for(t=0,r=n.length;t<r;++t)a=i,i=o,o=t<r-1&&hl(n[t+1],e),i&&(s=n[t],a&&(s.cp1x=Lc(s.cp1x,e.left,e.right),s.cp1y=Lc(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=Lc(s.cp2x,e.left,e.right),s.cp2y=Lc(s.cp2y,e.top,e.bottom)))}function m4(n,e,t,r,s){let i,a,o,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")f4(n,s);else{let u=r?n[n.length-1]:n[0];for(i=0,a=n.length;i<a;++i)o=n[i],c=u4(u,o,n[Math.min(i+1,a-(r?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,u=o}e.capBezierPoints&&p4(n,t)}function rf(){return typeof window<"u"&&typeof document<"u"}function sf(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function su(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const fu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function g4(n,e){return fu(n).getPropertyValue(e)}const x4=["top","right","bottom","left"];function Ii(n,e,t){const r={};t=t?"-"+t:"";for(let s=0;s<4;s++){const i=x4[s];r[i]=parseFloat(n[e+"-"+i+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const b4=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function y4(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:s,offsetY:i}=r;let a=!1,o,c;if(b4(s,i,n.target))o=s,c=i;else{const u=e.getBoundingClientRect();o=r.clientX-u.left,c=r.clientY-u.top,a=!0}return{x:o,y:c,box:a}}function Ai(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,s=fu(t),i=s.boxSizing==="border-box",a=Ii(s,"padding"),o=Ii(s,"border","width"),{x:c,y:u,box:d}=y4(n,t),f=a.left+(d&&o.left),g=a.top+(d&&o.top);let{width:p,height:y}=e;return i&&(p-=a.width+o.width,y-=a.height+o.height),{x:Math.round((c-f)/p*t.width/r),y:Math.round((u-g)/y*t.height/r)}}function v4(n,e,t){let r,s;if(e===void 0||t===void 0){const i=n&&sf(n);if(!i)e=n.clientWidth,t=n.clientHeight;else{const a=i.getBoundingClientRect(),o=fu(i),c=Ii(o,"border","width"),u=Ii(o,"padding");e=a.width-u.width-c.width,t=a.height-u.height-c.height,r=su(o.maxWidth,i,"clientWidth"),s=su(o.maxHeight,i,"clientHeight")}}return{width:e,height:t,maxWidth:r||ru,maxHeight:s||ru}}const Cc=n=>Math.round(n*10)/10;function w4(n,e,t,r){const s=fu(n),i=Ii(s,"margin"),a=su(s.maxWidth,n,"clientWidth")||ru,o=su(s.maxHeight,n,"clientHeight")||ru,c=v4(n,e,t);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const g=Ii(s,"border","width"),p=Ii(s,"padding");u-=p.width+g.width,d-=p.height+g.height}return u=Math.max(0,u-i.width),d=Math.max(0,r?u/r:d-i.height),u=Cc(Math.min(u,a,c.maxWidth)),d=Cc(Math.min(d,o,c.maxHeight)),u&&!d&&(d=Cc(u/2)),(e!==void 0||t!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=Cc(Math.floor(d*r))),{width:u,height:d}}function Am(n,e,t){const r=e||1,s=Math.floor(n.height*r),i=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(n.currentDevicePixelRatio=r,a.height=s,a.width=i,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const _4=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};rf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Lm(n,e){const t=g4(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Li(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function N4(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function j4(n,e,t,r){const s={x:n.cp2x,y:n.cp2y},i={x:e.cp1x,y:e.cp1y},a=Li(n,s,t),o=Li(s,i,t),c=Li(i,e,t),u=Li(a,o,t),d=Li(o,c,t);return Li(u,d,t)}const k4=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},S4=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function $a(n,e,t){return n?k4(e,t):S4()}function x1(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function b1(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function y1(n){return n==="angle"?{between:s1,compare:NN,normalize:Ys}:{between:$o,compare:(e,t)=>e-t,normalize:e=>e}}function Cm({start:n,end:e,count:t,loop:r,style:s}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:s}}function A4(n,e,t){const{property:r,start:s,end:i}=t,{between:a,normalize:o}=y1(r),c=e.length;let{start:u,end:d,loop:f}=n,g,p;if(f){for(u+=c,d+=c,g=0,p=c;g<p&&a(o(e[u%c][r]),s,i);++g)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:n.style}}function L4(n,e,t){if(!t)return[n];const{property:r,start:s,end:i}=t,a=e.length,{compare:o,between:c,normalize:u}=y1(r),{start:d,end:f,loop:g,style:p}=A4(n,e,t),y=[];let v=!1,w=null,N,P,M;const W=()=>c(s,M,N)&&o(s,M)!==0,K=()=>o(i,N)===0||c(i,M,N),le=()=>v||W(),X=()=>!v||K();for(let j=d,D=d;j<=f;++j)P=e[j%a],!P.skip&&(N=u(P[r]),N!==M&&(v=c(N,s,i),w===null&&le()&&(w=o(N,s)===0?j:D),w!==null&&X()&&(y.push(Cm({start:w,end:j,loop:g,count:a,style:p})),w=null),D=j,M=N));return w!==null&&y.push(Cm({start:w,end:f,loop:g,count:a,style:p})),y}function C4(n,e){const t=[],r=n.segments;for(let s=0;s<r.length;s++){const i=L4(r[s],n.points,e);i.length&&t.push(...i)}return t}function P4(n,e,t,r){let s=0,i=e-1;if(t&&!r)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(i+=s);i>s&&n[i%e].skip;)i--;return i%=e,{start:s,end:i}}function D4(n,e,t,r){const s=n.length,i=[];let a=e,o=n[e],c;for(c=e+1;c<=t;++c){const u=n[c%s];u.skip||u.stop?o.skip||(r=!1,i.push({start:e%s,end:(c-1)%s,loop:r}),e=a=u.stop?c:null):(a=c,o.skip&&(e=c)),o=u}return a!==null&&i.push({start:e%s,end:a%s,loop:r}),i}function M4(n,e){const t=n.points,r=n.options.spanGaps,s=t.length;if(!s)return[];const i=!!n._loop,{start:a,end:o}=P4(t,s,i,r);if(r===!0)return Pm(n,[{start:a,end:o,loop:i}],t,e);const c=o<a?o+s:o,u=!!n._fullLoop&&a===0&&o===s-1;return Pm(n,D4(t,a,c,u),t,e)}function Pm(n,e,t,r){return!r||!r.setContext||!t?e:O4(n,e,t,r)}function O4(n,e,t,r){const s=n._chart.getContext(),i=Dm(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,c=t.length,u=[];let d=i,f=e[0].start,g=f;function p(y,v,w,N){const P=o?-1:1;if(y!==v){for(y+=c;t[y%c].skip;)y-=P;for(;t[v%c].skip;)v+=P;y%c!==v%c&&(u.push({start:y%c,end:v%c,loop:w,style:N}),d=N,f=v%c)}}for(const y of e){f=o?f:y.start;let v=t[f%c],w;for(g=f+1;g<=y.end;g++){const N=t[g%c];w=Dm(r.setContext(Ui(s,{type:"segment",p0:v,p1:N,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:a}))),E4(w,d)&&p(f,g-1,y.loop,d),v=N,d=w}f<g-1&&p(f,g-1,y.loop,d)}return u}function Dm(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function E4(n,e){if(!e)return!1;const t=[],r=function(s,i){return Xh(i)?(t.includes(i)||t.push(i),t.indexOf(i)):i};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function Pc(n,e,t){return n.options.clip?n[t]:e[t]}function T4(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:Pc(t,e,"left"),right:Pc(t,e,"right"),top:Pc(r,e,"top"),bottom:Pc(r,e,"bottom")}:e}function F4(n,e){const t=e._clip;if(t.disabled)return!1;const r=T4(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class I4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,s){const i=t.listeners[s],a=t.duration;i.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(r-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=a1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,o=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),t+=i.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xs=new I4;const Mm="transparent",R4={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=wm(n||Mm),s=r.valid&&wm(e||Mm);return s&&s.valid?s.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class B4{constructor(e,t,r,s){const i=t[r];s=Ac([e.to,s,i,e.from]);const a=Ac([e.from,i,s]);this._active=!0,this._fn=e.fn||R4[e.type||typeof a],this._easing=nl[e.easing]||nl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ac([e.to,t,s,e.from]),this._from=Ac([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,o=this._to;let c;if(this._active=i!==o&&(a||t<r),!this._active){this._target[s]=o,this._notify(!0);return}if(t<0){this._target[s]=i;return}c=t/r%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][t]()}}class v1{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!kt(e))return;const t=Object.keys(un.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!kt(i))return;const a={};for(const o of t)a[o]=i[o];(jn(i.properties)&&i.properties||[s]).forEach(o=>{(o===s||!r.has(o))&&r.set(o,a)})})}_animateOptions(e,t){const r=t.options,s=q4(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&z4(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,t){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,t));continue}const d=t[u];let f=i[u];const g=r.get(u);if(f)if(g&&f.active()){f.update(g,d,o);continue}else f.cancel();if(!g||!g.duration){e[u]=d;continue}i[u]=f=new B4(g,e,u,d),s.push(f)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return xs.add(this._chart,r),!0}}function z4(n,e){const t=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=n[r[s]];i&&i.active()&&t.push(i.wait())}return Promise.all(t)}function q4(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Om(n,e){const t=n&&n.options||{},r=t.reverse,s=t.min===void 0?e:0,i=t.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function H4(n,e,t){if(t===!1)return!1;const r=Om(n,t),s=Om(e,t);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function U4(n){let e,t,r,s;return kt(n)?(e=n.top,t=n.right,r=n.bottom,s=n.left):e=t=r=s=n,{top:e,right:t,bottom:r,left:s,disabled:n===!1}}function w1(n,e){const t=[],r=n._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)t.push(r[s].index);return t}function Em(n,e,t,r={}){const s=n.keys,i=r.mode==="single";let a,o,c,u;if(e===null)return;let d=!1;for(a=0,o=s.length;a<o;++a){if(c=+s[a],c===t){if(d=!0,r.all)continue;break}u=n.values[c],vr(u)&&(i||e===0||Ya(e)===Ya(u))&&(e+=u)}return!d&&!r.all?0:e}function W4(n,e){const{iScale:t,vScale:r}=e,s=t.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],o[c]={[s]:d,[i]:n[d]};return o}function Bd(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function $4(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function V4(n){const{min:e,max:t,minDefined:r,maxDefined:s}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function G4(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function Tm(n,e,t,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=n[s.index];if(t&&i>0||!t&&i<0)return s.index}return null}function Fm(n,e){const{chart:t,_cachedMeta:r}=n,s=t._stacks||(t._stacks={}),{iScale:i,vScale:a,index:o}=r,c=i.axis,u=a.axis,d=$4(i,a,r),f=e.length;let g;for(let p=0;p<f;++p){const y=e[p],{[c]:v,[u]:w}=y,N=y._stacks||(y._stacks={});g=N[u]=G4(s,d,v),g[o]=w,g._top=Tm(g,a,!0,r.type),g._bottom=Tm(g,a,!1,r.type);const P=g._visualValues||(g._visualValues={});P[o]=w}}function zd(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Y4(n,e){return Ui(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function K4(n,e,t){return Ui(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ro(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][t]===void 0)return;delete i[r][t],i[r]._visualValues!==void 0&&i[r]._visualValues[t]!==void 0&&delete i[r]._visualValues[t]}}}const qd=n=>n==="reset"||n==="none",Im=(n,e)=>e?n:Object.assign({},n),J4=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:w1(t,!0),values:null};class _1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ro(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),s=(f,g,p,y)=>f==="x"?g:f==="r"?y:p,i=t.xAxisID=bt(r.xAxisID,zd(e,"x")),a=t.yAxisID=bt(r.yAxisID,zd(e,"y")),o=t.rAxisID=bt(r.rAxisID,zd(e,"r")),c=t.indexAxis,u=t.iAxisID=s(c,i,a,o),d=t.vAxisID=s(c,a,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&bm(this._data,this),e._stacked&&Ro(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(kt(t)){const s=this._cachedMeta;this._data=W4(t,s)}else if(r!==t){if(r){bm(r,this);const s=this._cachedMeta;Ro(s),s._parsed=[]}t&&Object.isExtensible(t)&&AN(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=t._stacked;t._stacked=Bd(t.vScale,t),t.stack!==r.stack&&(s=!0,Ro(t),t.stack=r.stack),this._resyncElements(e),(s||i!==t._stacked)&&(Fm(this,t._parsed),t._stacked=Bd(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,o=i.axis;let c=e===0&&t===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],d,f,g;if(this._parsing===!1)r._parsed=s,r._sorted=!0,g=s;else{jn(s[e])?g=this.parseArrayData(r,s,e,t):kt(s[e])?g=this.parseObjectData(r,s,e,t):g=this.parsePrimitiveData(r,s,e,t);const p=()=>f[o]===null||u&&f[o]<u[o];for(d=0;d<t;++d)r._parsed[d+e]=f=g[d],c&&(p()&&(c=!1),u=f);r._sorted=c}a&&Fm(this,g)}parsePrimitiveData(e,t,r,s){const{iScale:i,vScale:a}=e,o=i.axis,c=a.axis,u=i.getLabels(),d=i===a,f=new Array(s);let g,p,y;for(g=0,p=s;g<p;++g)y=g+r,f[g]={[o]:d||i.parse(u[y],y),[c]:a.parse(t[y],y)};return f}parseArrayData(e,t,r,s){const{xScale:i,yScale:a}=e,o=new Array(s);let c,u,d,f;for(c=0,u=s;c<u;++c)d=c+r,f=t[d],o[c]={x:i.parse(f[0],d),y:a.parse(f[1],d)};return o}parseObjectData(e,t,r,s){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,f,g,p;for(d=0,f=s;d<f;++d)g=d+r,p=t[g],u[d]={x:i.parse(tu(p,o),g),y:a.parse(tu(p,c),g)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const s=this.chart,i=this._cachedMeta,a=t[e.axis],o={keys:w1(s,!0),values:t._stacks[e.axis]._visualValues};return Em(o,a,i.index,{mode:r})}updateRangeFromParsed(e,t,r,s){const i=r[t.axis];let a=i===null?NaN:i;const o=s&&r._stacks[t.axis];s&&o&&(s.values=o,a=Em(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,a=s.length,o=this._getOtherScale(e),c=J4(t,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=V4(o);let g,p;function y(){p=s[g];const v=p[o.axis];return!vr(p[e.axis])||d>v||f<v}for(g=0;g<a&&!(!y()&&(this.updateRangeFromParsed(u,e,p,c),i));++g);if(i){for(g=a-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=t.length;s<i;++s)a=t[s][e.axis],vr(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,s=t.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=U4(bt(this.options.clip,H4(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,s=r.data||[],i=t.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||s.length-o,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,i,o,c),d=o;d<o+c;++d){const f=s[d];f.hidden||(f.active&&u?a.push(f):f.draw(e,i))}for(d=0;d<a.length;++d)a[d].draw(e,i)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=K4(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Y4(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const s=t==="active",i=this._cachedDataOpts,a=e+"-"+t,o=i[a],c=this.enableOptionSharing&&nu(r);if(o)return Im(o,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],g=u.getOptionScopes(this.getDataset(),d),p=Object.keys(un.elements[e]),y=()=>this.getContext(r,s,t),v=u.resolveNamedOptions(g,p,y,f);return v.$shared&&(v.$shared=c,i[a]=Object.freeze(Im(v,c))),v}_resolveAnimations(e,t,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${t}`,o=i[a];if(o)return o;let c;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,t),g=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(g,this.getContext(e,r,t))}const u=new v1(s,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||qd(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(t,i)||i!==s;return this.updateSharedOptions(i,t,r),{sharedOptions:i,includeOptions:a}}updateElement(e,t,r,s){qd(s)?Object.assign(e,r):this._resolveAnimations(t,s).update(e,r)}updateSharedOptions(e,t,r){e&&!qd(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,s){e.active=s;const i=this.getStyle(t,s);this._resolveAnimations(t,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[o,c,u]of this._syncList)this[o](c,u);this._syncList=[];const s=r.length,i=t.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,t,r=!0){const s=this._cachedMeta,i=s.data,a=e+t;let o;const c=u=>{for(u.length+=t,o=u.length-1;o>=a;o--)u[o]=u[o-t]};for(c(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}updateElements(e,t,r,s){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,t);r._stacked&&Ro(r,s)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,s]=e;this[t](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class X4 extends _1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=t,a=this.chart._animationsDisabled;let{start:o,count:c}=DN(t,s,a);this._drawStart=o,this._drawCount=c,MN(t)&&(o=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(s,o,c,e)}updateElements(e,t,r,s){const i=s==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,s),g=a.axis,p=o.axis,{spanGaps:y,segment:v}=this.options,w=dl(y)?y:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||i||s==="none",P=t+r,M=e.length;let W=t>0&&this.getParsed(t-1);for(let K=0;K<M;++K){const le=e[K],X=N?le:{};if(K<t||K>=P){X.skip=!0;continue}const j=this.getParsed(K),D=zt(j[p]),H=X[g]=a.getPixelForValue(j[g],K),A=X[p]=i||D?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,j,c):j[p],K);X.skip=isNaN(H)||isNaN(A)||D,X.stop=K>0&&Math.abs(j[g]-W[g])>w,v&&(X.parsed=j,X.raw=u.data[K]),f&&(X.options=d||this.resolveDataElementOptions(K,le.active?"active":s)),N||this.updateElement(le,K,X,s),W=j}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class af{static override(e){Object.assign(af.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ni()}parse(){return Ni()}format(){return Ni()}add(){return Ni()}diff(){return Ni()}startOf(){return Ni()}endOf(){return Ni()}}var Q4={_date:af};function Z4(n,e,t,r){const{controller:s,data:i,_sorted:a}=n,o=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const u=o._reversePixels?kN:Ti;if(r){if(s._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const g=u(i,e,t-f),p=u(i,e,t+f);return{lo:g.lo,hi:p.hi}}}}else{const d=u(i,e,t);if(c){const{vScale:f}=s._cachedMeta,{_parsed:g}=n,p=g.slice(0,d.lo+1).reverse().findIndex(v=>!zt(v[f.axis]));d.lo-=Math.max(0,p);const y=g.slice(d.hi).findIndex(v=>!zt(v[f.axis]));d.hi+=Math.max(0,y)}return d}}return{lo:0,hi:i.length-1}}function pu(n,e,t,r,s){const i=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,c=i.length;o<c;++o){const{index:u,data:d}=i[o],{lo:f,hi:g}=Z4(i[o],e,a,s);for(let p=f;p<=g;++p){const y=d[p];y.skip||r(y,u,p)}}}function ej(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,a=t?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function Hd(n,e,t,r,s){const i=[];return!s&&!n.isPointInArea(e)||pu(n,t,e,function(o,c,u){!s&&!hl(o,n.chartArea,0)||o.inRange(e.x,e.y,r)&&i.push({element:o,datasetIndex:c,index:u})},!0),i}function tj(n,e,t,r){let s=[];function i(a,o,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:f}=_N(a,{x:e.x,y:e.y});s1(f,u,d)&&s.push({element:a,datasetIndex:o,index:c})}return pu(n,t,e,i),s}function nj(n,e,t,r,s,i){let a=[];const o=ej(t);let c=Number.POSITIVE_INFINITY;function u(d,f,g){const p=d.inRange(e.x,e.y,s);if(r&&!p)return;const y=d.getCenterPoint(s);if(!(!!i||n.isPointInArea(y))&&!p)return;const w=o(e,y);w<c?(a=[{element:d,datasetIndex:f,index:g}],c=w):w===c&&a.push({element:d,datasetIndex:f,index:g})}return pu(n,t,e,u),a}function Ud(n,e,t,r,s,i){return!i&&!n.isPointInArea(e)?[]:t==="r"&&!r?tj(n,e,t,s):nj(n,e,t,r,s,i)}function Rm(n,e,t,r,s){const i=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return pu(n,t,e,(c,u,d)=>{c[a]&&c[a](e[t],s)&&(i.push({element:c,datasetIndex:u,index:d}),o=o||c.inRange(e.x,e.y,s))}),r&&!o?[]:i}var rj={modes:{index(n,e,t,r){const s=Ai(e,n),i=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?Hd(n,s,i,r,a):Ud(n,s,i,!1,r,a),c=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const d=o[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(n,e,t,r){const s=Ai(e,n),i=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?Hd(n,s,i,r,a):Ud(n,s,i,!1,r,a);if(o.length>0){const c=o[0].datasetIndex,u=n.getDatasetMeta(c).data;o=[];for(let d=0;d<u.length;++d)o.push({element:u[d],datasetIndex:c,index:d})}return o},point(n,e,t,r){const s=Ai(e,n),i=t.axis||"xy",a=t.includeInvisible||!1;return Hd(n,s,i,r,a)},nearest(n,e,t,r){const s=Ai(e,n),i=t.axis||"xy",a=t.includeInvisible||!1;return Ud(n,s,i,t.intersect,r,a)},x(n,e,t,r){const s=Ai(e,n);return Rm(n,s,"x",t.intersect,r)},y(n,e,t,r){const s=Ai(e,n);return Rm(n,s,"y",t.intersect,r)}}};const N1=["left","top","right","bottom"];function Bo(n,e){return n.filter(t=>t.pos===e)}function Bm(n,e){return n.filter(t=>N1.indexOf(t.pos)===-1&&t.box.axis===e)}function zo(n,e){return n.sort((t,r)=>{const s=e?r:t,i=e?t:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function sj(n){const e=[];let t,r,s,i,a,o;for(t=0,r=(n||[]).length;t<r;++t)s=n[t],{position:i,options:{stack:a,stackWeight:o=1}}=s,e.push({index:t,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return e}function ij(n){const e={};for(const t of n){const{stack:r,pos:s,stackWeight:i}=t;if(!r||!N1.includes(s))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function aj(n,e){const t=ij(n),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,a,o;for(i=0,a=n.length;i<a;++i){o=n[i];const{fullSize:c}=o.box,u=t[o.stack],d=u&&o.stackWeight/u.weight;o.horizontal?(o.width=d?d*r:c&&e.availableWidth,o.height=s):(o.width=r,o.height=d?d*s:c&&e.availableHeight)}return t}function oj(n){const e=sj(n),t=zo(e.filter(u=>u.box.fullSize),!0),r=zo(Bo(e,"left"),!0),s=zo(Bo(e,"right")),i=zo(Bo(e,"top"),!0),a=zo(Bo(e,"bottom")),o=Bm(e,"x"),c=Bm(e,"y");return{fullSize:t,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(a).concat(o),chartArea:Bo(e,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(a).concat(o)}}function zm(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function j1(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function lj(n,e,t,r){const{pos:s,box:i}=t,a=n.maxPadding;if(!kt(s)){t.size&&(n[s]-=t.size);const f=r[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?i.height:i.width),t.size=f.size/f.count,n[s]+=t.size}i.getPadding&&j1(a,i.getPadding());const o=Math.max(0,e.outerWidth-zm(a,n,"left","right")),c=Math.max(0,e.outerHeight-zm(a,n,"top","bottom")),u=o!==n.w,d=c!==n.h;return n.w=o,n.h=c,t.horizontal?{same:u,other:d}:{same:d,other:u}}function cj(n){const e=n.maxPadding;function t(r){const s=Math.max(e[r]-n[r],0);return n[r]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function uj(n,e){const t=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],t[a])}),i}return r(n?["left","right"]:["top","bottom"])}function Vo(n,e,t,r){const s=[];let i,a,o,c,u,d;for(i=0,a=n.length,u=0;i<a;++i){o=n[i],c=o.box,c.update(o.width||e.w,o.height||e.h,uj(o.horizontal,e));const{same:f,other:g}=lj(e,t,o,r);u|=f&&s.length,d=d||g,c.fullSize||s.push(o)}return u&&Vo(s,e,t,r)||d}function Dc(n,e,t,r,s){n.top=t,n.left=e,n.right=e+r,n.bottom=t+s,n.width=r,n.height=s}function qm(n,e,t,r){const s=t.padding;let{x:i,y:a}=e;for(const o of n){const c=o.box,u=r[o.stack]||{placed:0,weight:1},d=o.stackWeight/u.weight||1;if(o.horizontal){const f=e.w*d,g=u.size||c.height;nu(u.start)&&(a=u.start),c.fullSize?Dc(c,s.left,a,t.outerWidth-s.right-s.left,g):Dc(c,e.left+u.placed,a,f,g),u.start=a,u.placed+=f,a=c.bottom}else{const f=e.h*d,g=u.size||c.width;nu(u.start)&&(i=u.start),c.fullSize?Dc(c,i,s.top,g,t.outerHeight-s.bottom-s.top):Dc(c,i,e.top+u.placed,g,f),u.start=i,u.placed+=f,i=c.right}}e.x=i,e.y=a}var yr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const s=wr(n.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(t-s.height,0),o=oj(n.boxes),c=o.vertical,u=o.horizontal;Pt(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const d=c.reduce((v,w)=>w.box.options&&w.box.options.display===!1?v:v+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),g=Object.assign({},s);j1(g,wr(r));const p=Object.assign({maxPadding:g,w:i,h:a,x:s.left,y:s.top},s),y=aj(c.concat(u),f);Vo(o.fullSize,p,f,y),Vo(c,p,f,y),Vo(u,p,f,y)&&Vo(c,p,f,y),cj(p),qm(o.leftAndTop,p,f,y),p.x+=p.w,p.y+=p.h,qm(o.rightAndBottom,p,f,y),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Pt(o.chartArea,v=>{const w=v.box;Object.assign(w,n.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class k1{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,s){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):r)}}isAttached(e){return!0}updateConfig(e){}}class dj extends k1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Uc="$chartjs",hj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hm=n=>n===null||n==="";function fj(n,e){const t=n.style,r=n.getAttribute("height"),s=n.getAttribute("width");if(n[Uc]={initial:{height:r,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Hm(s)){const i=Lm(n,"width");i!==void 0&&(n.width=i)}if(Hm(r))if(n.style.height==="")n.height=n.width/(e||2);else{const i=Lm(n,"height");i!==void 0&&(n.height=i)}return n}const S1=_4?{passive:!0}:!1;function pj(n,e,t){n&&n.addEventListener(e,t,S1)}function mj(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,S1)}function gj(n,e){const t=hj[n.type]||n.type,{x:r,y:s}=Ai(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:s!==void 0?s:null}}function iu(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function xj(n,e,t){const r=n.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||iu(o.addedNodes,r),a=a&&!iu(o.removedNodes,r);a&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function bj(n,e,t){const r=n.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||iu(o.removedNodes,r),a=a&&!iu(o.addedNodes,r);a&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const pl=new Map;let Um=0;function A1(){const n=window.devicePixelRatio;n!==Um&&(Um=n,pl.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function yj(n,e){pl.size||window.addEventListener("resize",A1),pl.set(n,e)}function vj(n){pl.delete(n),pl.size||window.removeEventListener("resize",A1)}function wj(n,e,t){const r=n.canvas,s=r&&sf(r);if(!s)return;const i=o1((o,c)=>{const u=s.clientWidth;t(o,c),u<s.clientWidth&&t()},window),a=new ResizeObserver(o=>{const c=o[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(s),yj(n,i),a}function Wd(n,e,t){t&&t.disconnect(),e==="resize"&&vj(n)}function _j(n,e,t){const r=n.canvas,s=o1(i=>{n.ctx!==null&&t(gj(i,n))},n);return pj(r,e,s),s}class Nj extends k1{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(fj(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Uc])return!1;const r=t[Uc].initial;["height","width"].forEach(i=>{const a=r[i];zt(a)?t.removeAttribute(i):t.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{t.style[i]=s[i]}),t.width=t.width,delete t[Uc],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),a={attach:xj,detach:bj,resize:wj}[t]||_j;s[t]=a(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),s=r[t];if(!s)return;({attach:Wd,detach:Wd,resize:Wd}[t]||mj)(e,t,s),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,s){return w4(e,t,r,s)}isAttached(e){const t=e&&sf(e);return!!(t&&t.isConnected)}}function jj(n){return!rf()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?dj:Nj}class Wi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return dl(this.x)&&dl(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}function kj(n,e){const t=n.options.ticks,r=Sj(n),s=Math.min(t.maxTicksLimit||r,r),i=t.major.enabled?Lj(e):[],a=i.length,o=i[0],c=i[a-1],u=[];if(a>s)return Cj(e,u,i,a/s),u;const d=Aj(i,e,s);if(a>0){let f,g;const p=a>1?Math.round((c-o)/(a-1)):null;for(Mc(e,u,d,zt(p)?0:o-p,o),f=0,g=a-1;f<g;f++)Mc(e,u,d,i[f],i[f+1]);return Mc(e,u,d,c,zt(p)?e.length:c+p),u}return Mc(e,u,d),u}function Sj(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(r,s))}function Aj(n,e,t){const r=Pj(n),s=e.length/t;if(!r)return Math.max(s,1);const i=xN(r);for(let a=0,o=i.length-1;a<o;a++){const c=i[a];if(c>s)return c}return Math.max(s,1)}function Lj(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Cj(n,e,t,r){let s=0,i=t[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===i&&(e.push(n[a]),s++,i=t[s*r])}function Mc(n,e,t,r,s){const i=bt(r,0),a=Math.min(bt(s,n.length),n.length);let o=0,c,u,d;for(t=Math.ceil(t),s&&(c=s-r,t=c/Math.floor(c/t)),d=i;d<0;)o++,d=Math.round(i+o*t);for(u=Math.max(i,0);u<a;u++)u===d&&(e.push(n[u]),o++,d=Math.round(i+o*t))}function Pj(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const Dj=n=>n==="left"?"right":n==="right"?"left":n,Wm=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,$m=(n,e)=>Math.min(e||n,n);function Vm(n,e){const t=[],r=n.length/e,s=n.length;let i=0;for(;i<s;i+=r)t.push(n[Math.floor(i)]);return t}function Mj(n,e,t){const r=n.ticks.length,s=Math.min(e,r-1),i=n._startPixel,a=n._endPixel,o=1e-6;let c=n.getPixelForTick(s),u;if(!(t&&(r===1?u=Math.max(c-i,a-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<i-o||c>a+o)))return c}function Oj(n,e){Pt(n,t=>{const r=t.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete t.data[r[i]];r.splice(0,s)}})}function qo(n){return n.drawTicks?n.tickLength:0}function Gm(n,e){if(!n.display)return 0;const t=Rn(n.font,e),r=wr(n.padding);return(jn(n.text)?n.text.length:1)*t.lineHeight+r.height}function Ej(n,e){return Ui(n,{scale:e,type:"scale"})}function Tj(n,e,t){return Ui(n,{tick:t,index:e,type:"tick"})}function Fj(n,e,t){let r=Jh(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Dj(r)),r}function Ij(n,e,t,r){const{top:s,left:i,bottom:a,right:o,chart:c}=n,{chartArea:u,scales:d}=c;let f=0,g,p,y;const v=a-s,w=o-i;if(n.isHorizontal()){if(p=Tn(r,i,o),kt(t)){const N=Object.keys(t)[0],P=t[N];y=d[N].getPixelForValue(P)+v-e}else t==="center"?y=(u.bottom+u.top)/2+v-e:y=Wm(n,t,e);g=o-i}else{if(kt(t)){const N=Object.keys(t)[0],P=t[N];p=d[N].getPixelForValue(P)-w+e}else t==="center"?p=(u.left+u.right)/2-w+e:p=Wm(n,t,e);y=Tn(r,a,s),f=t==="left"?-Tr:Tr}return{titleX:p,titleY:y,maxWidth:g,rotation:f}}class Za extends Wi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:s}=this;return e=Vr(e,Number.POSITIVE_INFINITY),t=Vr(t,Number.NEGATIVE_INFINITY),r=Vr(r,Number.POSITIVE_INFINITY),s=Vr(s,Number.NEGATIVE_INFINITY),{min:Vr(e,r),max:Vr(t,s),minDefined:vr(e),maxDefined:vr(t)}}getMinMax(e){let{min:t,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:t,max:r};const o=this.getMatchingVisibleMetas();for(let c=0,u=o.length;c<u;++c)a=o[c].controller.getMinMax(this,e),s||(t=Math.min(t,a.min)),i||(r=Math.max(r,a.max));return t=i&&t>r?r:t,r=s&&t>r?t:r,{min:Vr(t,Vr(r,t)),max:Vr(r,Vr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qt(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ZN(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?Vm(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=kj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qt(this.options.afterUpdate,[this])}beforeSetDimensions(){qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=qt(t.callback,[i.value,r,e],this)}afterTickToLabelConversion(){qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=$m(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,i=t.maxRotation;let a=s,o,c,u;if(!this._isVisible()||!t.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,g=d.highest.height,p=br(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/r:p/(r-1),f+6>o&&(o=p/(r-(e.offset?.5:1)),c=this.maxHeight-qo(e.grid)-t.padding-Gm(e.title,this.chart.options.font),u=Math.sqrt(f*f+g*g),a=wN(Math.min(Math.asin(br((d.highest.height+6)/o,-1,1)),Math.asin(br(c/u,-1,1))-Math.asin(br(g/u,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=Gm(s,t.options.font);if(o?(e.width=this.maxWidth,e.height=qo(i)+c):(e.height=this.maxHeight,e.width=qo(i)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:g}=this._getLabelSizes(),p=r.padding*2,y=Ei(this.labelRotation),v=Math.cos(y),w=Math.sin(y);if(o){const N=r.mirror?0:w*f.width+v*g.height;e.height=Math.min(this.maxHeight,e.height+N+p)}else{const N=r.mirror?0:v*f.width+w*g.height;e.width=Math.min(this.maxWidth,e.width+N+p)}this._calculatePadding(u,d,w,v)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,s){const{ticks:{align:i,padding:a},position:o}=this.options,c=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,p=0;c?u?(g=s*e.width,p=r*t.height):(g=r*e.height,p=s*t.width):i==="start"?p=t.width:i==="end"?g=e.width:i!=="inner"&&(g=e.width/2,p=t.width/2),this.paddingLeft=Math.max((g-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-f+a)*this.width/(this.width-f),0)}else{let d=t.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=t.height,f=0),this.paddingTop=d+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)zt(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Vm(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:s,_longestTextCache:i}=this,a=[],o=[],c=Math.floor(t/$m(t,r));let u=0,d=0,f,g,p,y,v,w,N,P,M,W,K;for(f=0;f<t;f+=c){if(y=e[f].label,v=this._resolveTickFontOptions(f),s.font=w=v.string,N=i[w]=i[w]||{data:{},gc:[]},P=v.lineHeight,M=W=0,!zt(y)&&!jn(y))M=Nm(s,N.data,N.gc,M,y),W=P;else if(jn(y))for(g=0,p=y.length;g<p;++g)K=y[g],!zt(K)&&!jn(K)&&(M=Nm(s,N.data,N.gc,M,K),W+=P);a.push(M),o.push(W),u=Math.max(M,u),d=Math.max(W,d)}Oj(i,t);const le=a.indexOf(u),X=o.indexOf(d),j=D=>({width:a[D]||0,height:o[D]||0});return{first:j(0),last:j(t-1),widest:j(le),highest:j(X),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return jN(this._alignToPixels?_i(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=Tj(this.getContext(),e,r))}return this.$context||(this.$context=Ej(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ei(this.labelRotation),r=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*r>o*s?o/r:c/s:c*s<o*r?c/r:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:o}=s,c=i.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),g=qo(i),p=[],y=o.setContext(this.getContext()),v=y.display?y.width:0,w=v/2,N=function(ee){return _i(r,ee,v)};let P,M,W,K,le,X,j,D,H,A,S,q;if(a==="top")P=N(this.bottom),X=this.bottom-g,D=P-w,A=N(e.top)+w,q=e.bottom;else if(a==="bottom")P=N(this.top),A=e.top,q=N(e.bottom)-w,X=P+w,D=this.top+g;else if(a==="left")P=N(this.right),le=this.right-g,j=P-w,H=N(e.left)+w,S=e.right;else if(a==="right")P=N(this.left),H=e.left,S=N(e.right)-w,le=P+w,j=this.left+g;else if(t==="x"){if(a==="center")P=N((e.top+e.bottom)/2+.5);else if(kt(a)){const ee=Object.keys(a)[0],B=a[ee];P=N(this.chart.scales[ee].getPixelForValue(B))}A=e.top,q=e.bottom,X=P+w,D=X+g}else if(t==="y"){if(a==="center")P=N((e.left+e.right)/2);else if(kt(a)){const ee=Object.keys(a)[0],B=a[ee];P=N(this.chart.scales[ee].getPixelForValue(B))}le=P-w,j=le-g,H=e.left,S=e.right}const O=bt(s.ticks.maxTicksLimit,f),V=Math.max(1,Math.ceil(f/O));for(M=0;M<f;M+=V){const ee=this.getContext(M),B=i.setContext(ee),Z=o.setContext(ee),ne=B.lineWidth,de=B.color,xe=Z.dash||[],k=Z.dashOffset,T=B.tickWidth,I=B.tickColor,Y=B.tickBorderDash||[],Q=B.tickBorderDashOffset;W=Mj(this,M,c),W!==void 0&&(K=_i(r,W,ne),u?le=j=H=S=K:X=D=A=q=K,p.push({tx1:le,ty1:X,tx2:j,ty2:D,x1:H,y1:A,x2:S,y2:q,width:ne,color:de,borderDash:xe,borderDashOffset:k,tickWidth:T,tickColor:I,tickBorderDash:Y,tickBorderDashOffset:Q}))}return this._ticksLength=f,this._borderValue=P,p}_computeLabelItems(e){const t=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=i,g=qo(r.grid),p=g+d,y=f?-d:p,v=-Ei(this.labelRotation),w=[];let N,P,M,W,K,le,X,j,D,H,A,S,q="middle";if(s==="top")le=this.bottom-y,X=this._getXAxisLabelAlignment();else if(s==="bottom")le=this.top+y,X=this._getXAxisLabelAlignment();else if(s==="left"){const V=this._getYAxisLabelAlignment(g);X=V.textAlign,K=V.x}else if(s==="right"){const V=this._getYAxisLabelAlignment(g);X=V.textAlign,K=V.x}else if(t==="x"){if(s==="center")le=(e.top+e.bottom)/2+p;else if(kt(s)){const V=Object.keys(s)[0],ee=s[V];le=this.chart.scales[V].getPixelForValue(ee)+p}X=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")K=(e.left+e.right)/2-p;else if(kt(s)){const V=Object.keys(s)[0],ee=s[V];K=this.chart.scales[V].getPixelForValue(ee)}X=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(c==="start"?q="top":c==="end"&&(q="bottom"));const O=this._getLabelSizes();for(N=0,P=o.length;N<P;++N){M=o[N],W=M.label;const V=i.setContext(this.getContext(N));j=this.getPixelForTick(N)+i.labelOffset,D=this._resolveTickFontOptions(N),H=D.lineHeight,A=jn(W)?W.length:1;const ee=A/2,B=V.color,Z=V.textStrokeColor,ne=V.textStrokeWidth;let de=X;a?(K=j,X==="inner"&&(N===P-1?de=this.options.reverse?"left":"right":N===0?de=this.options.reverse?"right":"left":de="center"),s==="top"?u==="near"||v!==0?S=-A*H+H/2:u==="center"?S=-O.highest.height/2-ee*H+H:S=-O.highest.height+H/2:u==="near"||v!==0?S=H/2:u==="center"?S=O.highest.height/2-ee*H:S=O.highest.height-A*H,f&&(S*=-1),v!==0&&!V.showLabelBackdrop&&(K+=H/2*Math.sin(v))):(le=j,S=(1-A)*H/2);let xe;if(V.showLabelBackdrop){const k=wr(V.backdropPadding),T=O.heights[N],I=O.widths[N];let Y=S-k.top,Q=0-k.left;switch(q){case"middle":Y-=T/2;break;case"bottom":Y-=T;break}switch(X){case"center":Q-=I/2;break;case"right":Q-=I;break;case"inner":N===P-1?Q-=I:N>0&&(Q-=I/2);break}xe={left:Q,top:Y,width:I+k.width,height:T+k.height,color:V.backdropColor}}w.push({label:W,font:D,textOffset:S,options:{rotation:v,color:B,strokeColor:Z,strokeWidth:ne,textAlign:de,textBaseline:q,translation:[K,le],backdrop:xe}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ei(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,c=a.widest.width;let u,d;return t==="left"?s?(d=this.right+i,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-o,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):t==="right"?s?(d=this.left+i,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+o,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:s,width:i,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,s,i,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(i=0,a=s.length;i<a;++i){const c=s[i];t.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,g;this.isHorizontal()?(u=_i(e,this.left,a)-a/2,d=_i(e,this.right,o)+o/2,f=g=c):(f=_i(e,this.top,a)-a/2,g=_i(e,this.bottom,o)+o/2,u=d=c),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(u,f),t.lineTo(d,g),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Qh(r,s);const i=this.getLabelItems(e);for(const a of i){const o=a.options,c=a.font,u=a.label,d=a.textOffset;fl(r,u,0,d,c,o)}s&&Zh(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:s}}=this;if(!r.display)return;const i=Rn(r.font),a=wr(r.padding),o=r.align;let c=i.lineHeight/2;t==="bottom"||t==="center"||kt(t)?(c+=a.bottom,jn(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:f,rotation:g}=Ij(this,c,t,o);fl(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:g,textAlign:Fj(o,t,s),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=bt(e.grid&&e.grid.z,-1),s=bt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Za.prototype.draw?[{z:t,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=t.length;i<a;++i){const o=t[i];o[r]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Rn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Oc{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;zj(t)&&(r=this.register(t));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,Rj(e,a,r),this.override&&un.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,s=this.scope;r in t&&delete t[r],s&&r in un[s]&&(delete un[s][r],this.override&&delete zi[r])}}function Rj(n,e,t){const r=ul(Object.create(null),[t?un.get(t):{},un.get(e),n.defaults]);un.set(e,r),n.defaultRoutes&&Bj(e,n.defaultRoutes),n.descriptors&&un.describe(e,n.descriptors)}function Bj(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),s=r.pop(),i=[n].concat(r).join("."),a=e[t].split("."),o=a.pop(),c=a.join(".");un.route(i,s,c,o)})}function zj(n){return"id"in n&&"defaults"in n}class qj{constructor(){this.controllers=new Oc(_1,"datasets",!0),this.elements=new Oc(Wi,"elements"),this.plugins=new Oc(Object,"plugins"),this.scales=new Oc(Za,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Pt(s,a=>{const o=r||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,r){const s=Yh(e);qt(r["before"+s],[],r),t[e](r),qt(r["after"+s],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Jr=new qj;class Hj{constructor(){this._init=[]}notify(e,t,r,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,t,r);return t==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,r,s){s=s||{};for(const i of e){const a=i.plugin,o=a[r],c=[t,s,i.options];if(qt(o,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){zt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,s=bt(r.options&&r.options.plugins,{}),i=Uj(r);return s===!1&&!t?[]:$j(e,i,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(s(t,r),e,"stop"),this._notify(s(r,t),e,"start")}}function Uj(n){const e={},t=[],r=Object.keys(Jr.plugins.items);for(let i=0;i<r.length;i++)t.push(Jr.getPlugin(r[i]));const s=n.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function Wj(n,e){return!e&&n===!1?null:n===!0?{}:n}function $j(n,{plugins:e,localIds:t},r,s){const i=[],a=n.getContext();for(const o of e){const c=o.id,u=Wj(r[c],s);u!==null&&i.push({plugin:o,options:Vj(n.config,{plugin:o,local:t[c]},u,a)})}return i}function Vj(n,{plugin:e,local:t},r,s){const i=n.pluginScopeKeys(e),a=n.getOptionScopes(r,i);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jh(n,e){const t=un.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Gj(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Yj(n,e){return n===e?"_index_":"_value_"}function Ym(n){if(n==="x"||n==="y"||n==="r")return n}function Kj(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function kh(n,...e){if(Ym(n))return n;for(const t of e){const r=t.axis||Kj(t.position)||n.length>1&&Ym(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Km(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Jj(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return Km(n,"x",t[0])||Km(n,"y",t[0])}return{}}function Xj(n,e){const t=zi[n.type]||{scales:{}},r=e.scales||{},s=jh(n.type,e),i=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!kt(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=kh(a,o,Jj(a,n),un.scales[o.type]),u=Yj(c,s),d=t.scales||{};i[a]=el(Object.create(null),[{axis:c},o,d[c],d[u]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,c=a.indexAxis||jh(o,e),d=(zi[o]||{}).scales||{};Object.keys(d).forEach(f=>{const g=Gj(f,c),p=a[g+"AxisID"]||g;i[p]=i[p]||Object.create(null),el(i[p],[{axis:g},r[p],d[f]])})}),Object.keys(i).forEach(a=>{const o=i[a];el(o,[un.scales[o.type],un.scale])}),i}function L1(n){const e=n.options||(n.options={});e.plugins=bt(e.plugins,{}),e.scales=Xj(n,e)}function C1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Qj(n){return n=n||{},n.data=C1(n.data),L1(n),n}const Jm=new Map,P1=new Set;function Ec(n,e){let t=Jm.get(n);return t||(t=e(),Jm.set(n,t),P1.add(t)),t}const Ho=(n,e,t)=>{const r=tu(e,t);r!==void 0&&n.add(r)};class Zj{constructor(e){this._config=Qj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=C1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),L1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ec(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Ec(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Ec(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return Ec(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let s=r.get(e);return(!s||t)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,t,r){const{options:s,type:i}=this,a=this._cachedScopes(e,r),o=a.get(t);if(o)return o;const c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(f=>Ho(c,e,f))),d.forEach(f=>Ho(c,s,f)),d.forEach(f=>Ho(c,zi[i]||{},f)),d.forEach(f=>Ho(c,un,f)),d.forEach(f=>Ho(c,wh,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),P1.has(t)&&a.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,zi[t]||{},un.datasets[t]||{},{type:t},un,wh]}resolveNamedOptions(e,t,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=Xm(this._resolverCache,e,s);let c=a;if(tk(a,t)){i.$shared=!1,r=ii(r)?r():r;const u=this.createResolver(e,r,o);c=Ka(a,r,u)}for(const u of t)i[u]=c[u];return i}createResolver(e,t,r=[""],s){const{resolver:i}=Xm(this._resolverCache,e,r);return kt(t)?Ka(i,t,void 0,s):i}}function Xm(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const s=t.join();let i=r.get(s);return i||(i={resolver:ef(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},r.set(s,i)),i}const ek=n=>kt(n)&&Object.getOwnPropertyNames(n).some(e=>ii(n[e]));function tk(n,e){const{isScriptable:t,isIndexable:r}=h1(n);for(const s of e){const i=t(s),a=r(s),o=(a||i)&&n[s];if(i&&(ii(o)||ek(o))||a&&jn(o))return!0}return!1}var nk="4.4.9";const rk=["top","bottom","left","right","chartArea"];function Qm(n,e){return n==="top"||n==="bottom"||rk.indexOf(n)===-1&&e==="x"}function Zm(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function e0(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),qt(t&&t.onComplete,[n],e)}function sk(n){const e=n.chart,t=e.options.animation;qt(t&&t.onProgress,[n],e)}function D1(n){return rf()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Wc={},t0=n=>{const e=D1(n);return Object.values(Wc).filter(t=>t.canvas===e).pop()};function ik(n,e,t){const r=Object.keys(n);for(const s of r){const i=+s;if(i>=e){const a=n[s];delete n[s],(t>0||i>e)&&(n[i+t]=a)}}}function ak(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let mu=class{static defaults=un;static instances=Wc;static overrides=zi;static registry=Jr;static version=nk;static getChart=t0;static register(...e){Jr.add(...e),n0()}static unregister(...e){Jr.remove(...e),n0()}constructor(e,t){const r=this.config=new Zj(t),s=D1(e),i=t0(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||jj(s)),this.platform.updateConfig(r);const o=this.platform.acquireContext(s,a.aspectRatio),c=o&&o.canvas,u=c&&c.height,d=c&&c.width;if(this.id=lN(),this.ctx=o,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=CN(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],Wc[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}xs.listen(this,"complete",e0),xs.listen(this,"progress",sk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:s,_aspectRatio:i}=this;return zt(e)?t&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Jr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Am(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jm(this.canvas,this.ctx),this}stop(){return xs.stop(this),this}resize(e,t){xs.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,t,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Am(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),qt(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Pt(t,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,s=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let i=[];t&&(i=i.concat(Object.keys(t).map(a=>{const o=t[a],c=kh(a,o),u=c==="r",d=c==="x";return{options:o,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Pt(i,a=>{const o=a.options,c=o.id,u=kh(c,o),d=bt(o.type,a.dtype);(o.position===void 0||Qm(o.position,u)!==Qm(a.dposition))&&(o.position=a.dposition),s[c]=!0;let f=null;if(c in r&&r[c].type===d)f=r[c];else{const g=Jr.getScale(d);f=new g({id:c,type:d,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(o,e)}),Pt(s,(a,o)=>{a||delete r[o]}),Pt(r,a=>{yr.configure(this,a,a.options),yr.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>t){for(let s=t;s<r;++s)this._destroyDatasetMeta(s);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Zm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,s)=>{t.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=t.length;r<s;r++){const i=t[r];let a=this.getDatasetMeta(r);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=i.indexAxis||jh(o,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=Jr.getController(o),{datasetElementType:u,dataElementType:d}=un.datasets[o];Object.assign(c,{dataElementType:Jr.getElement(d),datasetElementType:u&&Jr.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Pt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),g=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(g),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Pt(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zm("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Pt(this.scales,e=>{yr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!pm(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of t){const a=r==="_removeElements"?-i:i;ik(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<t;i++)if(!pm(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;yr.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Pt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,ii(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xs.has(this)?this.attached&&!xs.running(this)&&xs.start(this):(this.draw(),e0({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let s,i;for(s=0,i=t.length;s<i;++s){const a=t[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=F4(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Qh(t,s),e.controller.draw(),s&&Zh(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return hl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,s){const i=rj.modes[t];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ui(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);nu(t)?(i.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(i,{visible:r}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),xs.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),jm(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Wc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(i,a)=>{t.addEventListener(this,i,a),e[i]=a},s=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};Pt(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){Pt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Pt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const s=r?"set":"remove";let i,a,o,c;for(t==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){a=e[o];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!Zc(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),a=i(t,e),o=r?e:i(e,t);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:s=[],options:i}=this,a=t,o=this._getActiveElements(e,s,r,a),c=pN(e),u=ak(e,this._lastEvent,r,c);r&&(this._lastEvent=null,qt(i.onHover,[e,o,this],this),c&&qt(i.onClick,[e,o,this],this));const d=!Zc(o,s);return(d||t)&&(this._active=o,this._updateHoverStyles(o,s,t)),this._lastEvent=u,d}_getActiveElements(e,t,r,s){if(e.type==="mouseout")return[];if(!r)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function n0(){return Pt(mu.instances,n=>n._plugins.invalidate())}function M1(n,e,t=e){n.lineCap=bt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(bt(t.borderDash,e.borderDash)),n.lineDashOffset=bt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=bt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=bt(t.borderWidth,e.borderWidth),n.strokeStyle=bt(t.borderColor,e.borderColor)}function ok(n,e,t){n.lineTo(t.x,t.y)}function lk(n){return n.stepped?UN:n.tension||n.cubicInterpolationMode==="monotone"?WN:ok}function O1(n,e,t={}){const r=n.length,{start:s=0,end:i=r-1}=t,{start:a,end:o}=e,c=Math.max(s,a),u=Math.min(i,o),d=s<a&&i<a||s>o&&i>o;return{count:r,start:c,loop:e.loop,ilen:u<c&&!d?r+u-c:u-c}}function ck(n,e,t,r){const{points:s,options:i}=e,{count:a,start:o,loop:c,ilen:u}=O1(s,t,r),d=lk(i);let{move:f=!0,reverse:g}=r||{},p,y,v;for(p=0;p<=u;++p)y=s[(o+(g?u-p:p))%a],!y.skip&&(f?(n.moveTo(y.x,y.y),f=!1):d(n,v,y,g,i.stepped),v=y);return c&&(y=s[(o+(g?u:0))%a],d(n,v,y,g,i.stepped)),!!c}function uk(n,e,t,r){const s=e.points,{count:i,start:a,ilen:o}=O1(s,t,r),{move:c=!0,reverse:u}=r||{};let d=0,f=0,g,p,y,v,w,N;const P=W=>(a+(u?o-W:W))%i,M=()=>{v!==w&&(n.lineTo(d,w),n.lineTo(d,v),n.lineTo(d,N))};for(c&&(p=s[P(0)],n.moveTo(p.x,p.y)),g=0;g<=o;++g){if(p=s[P(g)],p.skip)continue;const W=p.x,K=p.y,le=W|0;le===y?(K<v?v=K:K>w&&(w=K),d=(f*d+W)/++f):(M(),n.lineTo(W,K),y=le,f=0,v=w=K),N=K}M()}function Sh(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?uk:ck}function dk(n){return n.stepped?N4:n.tension||n.cubicInterpolationMode==="monotone"?j4:Li}function hk(n,e,t,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,r)&&s.closePath()),M1(n,e.options),n.stroke(s)}function fk(n,e,t,r){const{segments:s,options:i}=e,a=Sh(e);for(const o of s)M1(n,i,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const pk=typeof Path2D=="function";function mk(n,e,t,r){pk&&!e.options.segment?hk(n,e,t,r):fk(n,e,t,r)}class gk extends Wi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;m4(this._points,r,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=M4(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,s=e[t],i=this.points,a=C4(this,{property:t,start:s,end:s});if(!a.length)return;const o=[],c=dk(r);let u,d;for(u=0,d=a.length;u<d;++u){const{start:f,end:g}=a[u],p=i[f],y=i[g];if(p===y){o.push(p);continue}const v=Math.abs((s-p[t])/(y[t]-p[t])),w=c(p,y,v,r.stepped);w[t]=e[t],o.push(w)}return o.length===1?o[0]:o}pathSegment(e,t,r){return Sh(this)(e,this,t,r)}path(e,t,r){const s=this.segments,i=Sh(this);let a=this._loop;t=t||0,r=r||this.points.length-t;for(const o of s)a&=i(e,this,o,{start:t,end:t+r-1});return!!a}draw(e,t,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),mk(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function r0(n,e,t,r){const s=n.options,{[t]:i}=n.getProps([t],r);return Math.abs(e-i)<s.radius+s.hitRadius}class xk extends Wi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const s=this.options,{x:i,y:a}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(t-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return r0(this,e,"x",t)}inYRange(e,t){return r0(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!hl(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,_h(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const s0=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},bk=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class i0 extends Wi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=qt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Rn(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=s0(r,i);let u,d;t.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,o,c)+10):(d=this.maxHeight,u=this._fitCols(a,s,o,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+o;let f=e;i.textAlign="left",i.textBaseline="middle";let g=-1,p=-d;return this.legendItems.forEach((y,v)=>{const w=r+t/2+i.measureText(y.text).width;(v===0||u[u.length-1]+w+2*o>a)&&(f+=d,u[u.length-(v>0?0:1)]=0,p+=d,g++),c[v]={left:0,top:p,row:g,width:w,height:s},u[u.length-1]+=w+o}),f}_fitCols(e,t,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-e;let f=o,g=0,p=0,y=0,v=0;return this.legendItems.forEach((w,N)=>{const{itemWidth:P,itemHeight:M}=yk(r,t,i,w,s);N>0&&p+M+2*o>d&&(f+=g+o,u.push({width:g,height:p}),y+=g+o,v++,g=p=0),c[N]={left:y,top:p,col:v,width:P,height:M},g=Math.max(g,P),p+=M+o}),f+=g,u.push({width:g,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:s},rtl:i}}=this,a=$a(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=Tn(r,this.left+s,this.right-this.lineWidths[o]);for(const u of t)o!==u.row&&(o=u.row,c=Tn(r,this.left+s,this.right-this.lineWidths[o])),u.top+=this.top+e+s,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+s}else{let o=0,c=Tn(r,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const u of t)u.col!==o&&(o=u.col,c=Tn(r,this.top+e+s,this.bottom-this.columnSizes[o].height)),u.top=c,u.left+=this.left+s,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Qh(e,this),this._draw(),Zh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:s}=this,{align:i,labels:a}=e,o=un.color,c=$a(e.rtl,this.left,this.width),u=Rn(a.font),{padding:d}=a,f=u.size,g=f/2;let p;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:y,boxHeight:v,itemHeight:w}=s0(a,f),N=function(le,X,j){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;s.save();const D=bt(j.lineWidth,1);if(s.fillStyle=bt(j.fillStyle,o),s.lineCap=bt(j.lineCap,"butt"),s.lineDashOffset=bt(j.lineDashOffset,0),s.lineJoin=bt(j.lineJoin,"miter"),s.lineWidth=D,s.strokeStyle=bt(j.strokeStyle,o),s.setLineDash(bt(j.lineDash,[])),a.usePointStyle){const H={radius:v*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:D},A=c.xPlus(le,y/2),S=X+g;u1(s,H,A,S,a.pointStyleWidth&&y)}else{const H=X+Math.max((f-v)/2,0),A=c.leftForLtr(le,y),S=sl(j.borderRadius);s.beginPath(),Object.values(S).some(q=>q!==0)?Nh(s,{x:A,y:H,w:y,h:v,radius:S}):s.rect(A,H,y,v),s.fill(),D!==0&&s.stroke()}s.restore()},P=function(le,X,j){fl(s,j.text,le,X+w/2,u,{strikethrough:j.hidden,textAlign:c.textAlign(j.textAlign)})},M=this.isHorizontal(),W=this._computeTitleHeight();M?p={x:Tn(i,this.left+d,this.right-r[0]),y:this.top+d+W,line:0}:p={x:this.left+d,y:Tn(i,this.top+W+d,this.bottom-t[0].height),line:0},x1(this.ctx,e.textDirection);const K=w+d;this.legendItems.forEach((le,X)=>{s.strokeStyle=le.fontColor,s.fillStyle=le.fontColor;const j=s.measureText(le.text).width,D=c.textAlign(le.textAlign||(le.textAlign=a.textAlign)),H=y+g+j;let A=p.x,S=p.y;c.setWidth(this.width),M?X>0&&A+H+d>this.right&&(S=p.y+=K,p.line++,A=p.x=Tn(i,this.left+d,this.right-r[p.line])):X>0&&S+K>this.bottom&&(A=p.x=A+t[p.line].width+d,p.line++,S=p.y=Tn(i,this.top+W+d,this.bottom-t[p.line].height));const q=c.x(A);if(N(q,S,le),A=PN(D,A+y+g,M?A+H:this.right,e.rtl),P(c.x(A),S,le),M)p.x+=H+d;else if(typeof le.text!="string"){const O=u.lineHeight;p.y+=E1(le,O)+d}else p.y+=K}),b1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Rn(t.font),s=wr(t.padding);if(!t.display)return;const i=$a(e.rtl,this.left,this.width),a=this.ctx,o=t.position,c=r.size/2,u=s.top+c;let d,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),d=this.top+u,f=Tn(e.align,f,this.right-g);else{const y=this.columnSizes.reduce((v,w)=>Math.max(v,w.height),0);d=u+Tn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Tn(o,f,f+g);a.textAlign=i.textAlign(Jh(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=r.string,fl(a,t.text,p,d,r)}_computeTitleHeight(){const e=this.options.title,t=Rn(e.font),r=wr(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,s,i;if($o(e,this.left,this.right)&&$o(t,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],$o(e,s.left,s.left+s.width)&&$o(t,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!_k(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=bk(s,r);s&&!i&&qt(t.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&qt(t.onHover,[e,r,this],this)}else r&&qt(t.onClick,[e,r,this],this)}}function yk(n,e,t,r,s){const i=vk(r,n,e,t),a=wk(s,r,e.lineHeight);return{itemWidth:i,itemHeight:a}}function vk(n,e,t,r){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+t.size/2+r.measureText(s).width}function wk(n,e,t){let r=n;return typeof e.text!="string"&&(r=E1(e,t)),r}function E1(n,e){const t=n.text?n.text.length:0;return e*t}function _k(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Nk={id:"legend",_element:i0,start(n,e,t){const r=n.legend=new i0({ctx:n.ctx,options:t,chart:n});yr.configure(n,r,t),yr.addBox(n,r)},stop(n){yr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;yr.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,s=t.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(t?0:void 0),d=wr(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:a&&(o||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class T1 extends Wi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=jn(r.text)?r.text.length:1;this._padding=wr(r.padding);const i=s*Rn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:s,right:i,options:a}=this,o=a.align;let c=0,u,d,f;return this.isHorizontal()?(d=Tn(o,r,i),f=t+e,u=i-r):(a.position==="left"?(d=r+e,f=Tn(o,s,t),c=kn*-.5):(d=i-e,f=Tn(o,t,s),c=kn*.5),u=s-t),{titleX:d,titleY:f,maxWidth:u,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Rn(t.font),i=r.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:u}=this._drawArgs(i);fl(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:u,textAlign:Jh(t.align),textBaseline:"middle",translation:[a,o]})}}function jk(n,e){const t=new T1({ctx:n.ctx,options:e,chart:n});yr.configure(n,t,e),yr.addBox(n,t),n.titleBlock=t}var kk={id:"title",_element:T1,start(n,e,t){jk(n,t)},stop(n){const e=n.titleBlock;yr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;yr.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Go={average(n){if(!n.length)return!1;let e,t,r=new Set,s=0,i=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((o,c)=>o+c)/r.size,y:s/i}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=n.length;i<a;++i){const c=n[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=vh(e,u);d<s&&(s=d,o=c)}}if(o){const c=o.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function Kr(n,e){return e&&(jn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function bs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Sk(n,e){const{element:t,datasetIndex:r,index:s}=e,i=n.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:n,label:a,parsed:i.getParsed(s),raw:n.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:t}}function a0(n,e){const t=n.chart.ctx,{body:r,footer:s,title:i}=n,{boxWidth:a,boxHeight:o}=e,c=Rn(e.bodyFont),u=Rn(e.titleFont),d=Rn(e.footerFont),f=i.length,g=s.length,p=r.length,y=wr(e.padding);let v=y.height,w=0,N=r.reduce((W,K)=>W+K.before.length+K.lines.length+K.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,f&&(v+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),N){const W=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;v+=p*W+(N-p)*c.lineHeight+(N-1)*e.bodySpacing}g&&(v+=e.footerMarginTop+g*d.lineHeight+(g-1)*e.footerSpacing);let P=0;const M=function(W){w=Math.max(w,t.measureText(W).width+P)};return t.save(),t.font=u.string,Pt(n.title,M),t.font=c.string,Pt(n.beforeBody.concat(n.afterBody),M),P=e.displayColors?a+2+e.boxPadding:0,Pt(r,W=>{Pt(W.before,M),Pt(W.lines,M),Pt(W.after,M)}),P=0,t.font=d.string,Pt(n.footer,M),t.restore(),w+=y.width,{width:w,height:v}}function Ak(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function Lk(n,e,t,r){const{x:s,width:i}=r,a=t.caretSize+t.caretPadding;if(n==="left"&&s+i+a>e.width||n==="right"&&s-i-a<0)return!0}function Ck(n,e,t,r){const{x:s,width:i}=t,{width:a,chartArea:{left:o,right:c}}=n;let u="center";return r==="center"?u=s<=(o+c)/2?"left":"right":s<=i/2?u="left":s>=a-i/2&&(u="right"),Lk(u,n,e,t)&&(u="center"),u}function o0(n,e,t){const r=t.yAlign||e.yAlign||Ak(n,t);return{xAlign:t.xAlign||e.xAlign||Ck(n,e,t,r),yAlign:r}}function Pk(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Dk(n,e,t){let{y:r,height:s}=n;return e==="top"?r+=t:e==="bottom"?r-=s+t:r-=s/2,r}function l0(n,e,t,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=n,{xAlign:o,yAlign:c}=t,u=s+i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:p}=sl(a);let y=Pk(e,o);const v=Dk(e,c,u);return c==="center"?o==="left"?y+=u:o==="right"&&(y-=u):o==="left"?y-=Math.max(d,g)+s:o==="right"&&(y+=Math.max(f,p)+s),{x:br(y,0,r.width-e.width),y:br(v,0,r.height-e.height)}}function Tc(n,e,t){const r=wr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function c0(n){return Kr([],bs(n))}function Mk(n,e,t){return Ui(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function u0(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const F1={beforeTitle:gs,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:gs,beforeBody:gs,beforeLabel:gs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return zt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:gs,afterBody:gs,beforeFooter:gs,footer:gs,afterFooter:gs};function Kn(n,e,t,r){const s=n[e].call(t,r);return typeof s>"u"?F1[e].call(t,r):s}class d0 extends Wi{static positioners=Go;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&t.options.animation&&r.animations,i=new v1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Mk(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,s=Kn(r,"beforeTitle",this,e),i=Kn(r,"title",this,e),a=Kn(r,"afterTitle",this,e);let o=[];return o=Kr(o,bs(s)),o=Kr(o,bs(i)),o=Kr(o,bs(a)),o}getBeforeBody(e,t){return c0(Kn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,s=[];return Pt(e,i=>{const a={before:[],lines:[],after:[]},o=u0(r,i);Kr(a.before,bs(Kn(o,"beforeLabel",this,i))),Kr(a.lines,Kn(o,"label",this,i)),Kr(a.after,bs(Kn(o,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,t){return c0(Kn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,s=Kn(r,"beforeFooter",this,e),i=Kn(r,"footer",this,e),a=Kn(r,"afterFooter",this,e);let o=[];return o=Kr(o,bs(s)),o=Kr(o,bs(i)),o=Kr(o,bs(a)),o}_createItems(e){const t=this._active,r=this.chart.data,s=[],i=[],a=[];let o=[],c,u;for(c=0,u=t.length;c<u;++c)o.push(Sk(this.chart,t[c]));return e.filter&&(o=o.filter((d,f,g)=>e.filter(d,f,g,r))),e.itemSort&&(o=o.sort((d,f)=>e.itemSort(d,f,r))),Pt(o,d=>{const f=u0(e.callbacks,d);s.push(Kn(f,"labelColor",this,d)),i.push(Kn(f,"labelPointStyle",this,d)),a.push(Kn(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const o=Go[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=a0(this,r),u=Object.assign({},o,c),d=o0(this.chart,r,u),f=l0(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,s){const i=this.getCaretPosition(e,r,s);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=sl(o),{x:g,y:p}=e,{width:y,height:v}=t;let w,N,P,M,W,K;return i==="center"?(W=p+v/2,s==="left"?(w=g,N=w-a,M=W+a,K=W-a):(w=g+y,N=w+a,M=W-a,K=W+a),P=w):(s==="left"?N=g+Math.max(c,d)+a:s==="right"?N=g+y-Math.max(u,f)-a:N=this.caretX,i==="top"?(M=p,W=M-a,w=N-a,P=N+a):(M=p+v,W=M+a,w=N+a,P=N-a),K=M),{x1:w,x2:N,x3:P,y1:M,y2:W,y3:K}}drawTitle(e,t,r){const s=this.title,i=s.length;let a,o,c;if(i){const u=$a(r.rtl,this.x,this.width);for(e.x=Tc(this,r.titleAlign,r),t.textAlign=u.textAlign(r.titleAlign),t.textBaseline="middle",a=Rn(r.titleFont),o=r.titleSpacing,t.fillStyle=r.titleColor,t.font=a.string,c=0;c<i;++c)t.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,c+1===i&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,t,r,s,i){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,d=Rn(i.bodyFont),f=Tc(this,"left",i),g=s.x(f),p=c<d.lineHeight?(d.lineHeight-c)/2:0,y=t.y+p;if(i.usePointStyle){const v={radius:Math.min(u,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},w=s.leftForLtr(g,u)+u/2,N=y+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,_h(e,v,w,N),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,_h(e,v,w,N)}else{e.lineWidth=kt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const v=s.leftForLtr(g,u),w=s.leftForLtr(s.xPlus(g,1),u-2),N=sl(a.borderRadius);Object.values(N).some(P=>P!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Nh(e,{x:v,y,w:u,h:c,radius:N}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Nh(e,{x:w,y:y+1,w:u-2,h:c-2,radius:N}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,y,u,c),e.strokeRect(v,y,u,c),e.fillStyle=a.backgroundColor,e.fillRect(w,y+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:u,boxPadding:d}=r,f=Rn(r.bodyFont);let g=f.lineHeight,p=0;const y=$a(r.rtl,this.x,this.width),v=function(j){t.fillText(j,y.x(e.x+p),e.y+g/2),e.y+=g+i},w=y.textAlign(a);let N,P,M,W,K,le,X;for(t.textAlign=a,t.textBaseline="middle",t.font=f.string,e.x=Tc(this,w,r),t.fillStyle=r.bodyColor,Pt(this.beforeBody,v),p=o&&w!=="right"?a==="center"?u/2+d:u+2+d:0,W=0,le=s.length;W<le;++W){for(N=s[W],P=this.labelTextColors[W],t.fillStyle=P,Pt(N.before,v),M=N.lines,o&&M.length&&(this._drawColorBox(t,e,W,y,r),g=Math.max(f.lineHeight,c)),K=0,X=M.length;K<X;++K)v(M[K]),g=f.lineHeight;Pt(N.after,v)}p=0,g=f.lineHeight,Pt(this.afterBody,v),e.y-=i}drawFooter(e,t,r){const s=this.footer,i=s.length;let a,o;if(i){const c=$a(r.rtl,this.x,this.width);for(e.x=Tc(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",a=Rn(r.footerFont),t.fillStyle=r.footerColor,t.font=a.string,o=0;o<i;++o)t.fillText(s[o],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,t,r,s){const{xAlign:i,yAlign:a}=this,{x:o,y:c}=e,{width:u,height:d}=r,{topLeft:f,topRight:g,bottomLeft:p,bottomRight:y}=sl(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(o+f,c),a==="top"&&this.drawCaret(e,t,r,s),t.lineTo(o+u-g,c),t.quadraticCurveTo(o+u,c,o+u,c+g),a==="center"&&i==="right"&&this.drawCaret(e,t,r,s),t.lineTo(o+u,c+d-y),t.quadraticCurveTo(o+u,c+d,o+u-y,c+d),a==="bottom"&&this.drawCaret(e,t,r,s),t.lineTo(o+p,c+d),t.quadraticCurveTo(o,c+d,o,c+d-p),a==="center"&&i==="left"&&this.drawCaret(e,t,r,s),t.lineTo(o,c+f),t.quadraticCurveTo(o,c,o+f,c),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=Go[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=a0(this,e),c=Object.assign({},a,this._size),u=o0(t,e,c),d=l0(e,c,u,t);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=wr(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,t),x1(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),b1(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,s=e.map(({datasetIndex:o,index:c})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[c],index:c}}),i=!Zc(r,s),a=this._positionChanged(s,t);(i||a)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,r),o=this._positionChanged(a,e),c=t||!Zc(a,i)||o;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:r,caretY:s,options:i}=this,a=Go[i.position].call(this,e,t);return a!==!1&&(r!==a.x||s!==a.y)}}var Ok={id:"tooltip",_element:d0,positioners:Go,afterInit(n,e,t){t&&(n.tooltip=new d0({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:F1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ek=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Tk(n,e,t,r){const s=n.indexOf(e);if(s===-1)return Ek(n,e,t,r);const i=n.lastIndexOf(e);return s!==i?t:s}const Fk=(n,e)=>n===null?null:br(Math.round(n),0,e);function h0(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Ik extends Za{static id="category";static defaults={ticks:{callback:h0}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:s,label:i}of t)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(zt(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:Tk(r,e,bt(t,e),this._addedLabels),Fk(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=t;a++)s.push({value:a});return s}getLabelForValue(e){return h0.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Rk(n,e){const t=[],{bounds:s,step:i,min:a,max:o,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:g}=n,p=i||1,y=d-1,{min:v,max:w}=e,N=!zt(a),P=!zt(o),M=!zt(u),W=(w-v)/(f+1);let K=gm((w-v)/y/p)*p,le,X,j,D;if(K<1e-14&&!N&&!P)return[{value:v},{value:w}];D=Math.ceil(w/K)-Math.floor(v/K),D>y&&(K=gm(D*K/y/p)*p),zt(c)||(le=Math.pow(10,c),K=Math.ceil(K*le)/le),s==="ticks"?(X=Math.floor(v/K)*K,j=Math.ceil(w/K)*K):(X=v,j=w),N&&P&&i&&yN((o-a)/i,K/1e3)?(D=Math.round(Math.min((o-a)/K,d)),K=(o-a)/D,X=a,j=o):M?(X=N?a:X,j=P?o:j,D=u-1,K=(j-X)/D):(D=(j-X)/K,tl(D,Math.round(D),K/1e3)?D=Math.round(D):D=Math.ceil(D));const H=Math.max(xm(K),xm(X));le=Math.pow(10,zt(c)?H:c),X=Math.round(X*le)/le,j=Math.round(j*le)/le;let A=0;for(N&&(g&&X!==a?(t.push({value:a}),X<a&&A++,tl(Math.round((X+A*K)*le)/le,a,f0(a,W,n))&&A++):X<a&&A++);A<D;++A){const S=Math.round((X+A*K)*le)/le;if(P&&S>o)break;t.push({value:S})}return P&&g&&j!==o?t.length&&tl(t[t.length-1].value,o,f0(o,W,n))?t[t.length-1].value=o:t.push({value:o}):(!P||j===o)&&t.push({value:j}),t}function f0(n,e,{horizontal:t,minRotation:r}){const s=Ei(r),i=(t?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+n).length;return Math.min(e/i,a)}class Bk extends Za{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return zt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const a=c=>s=t?s:c,o=c=>i=r?i:c;if(e){const c=Ya(s),u=Ya(i);c<0&&u<0?o(0):c>0&&u>0&&a(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);o(i+c),e||a(s-c)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},i=this._range||this,a=Rk(s,i);return e.bounds==="ticks"&&vN(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-t)/Math.max(e.length-1,1)/2;t-=s,r+=s}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return l1(e,this.chart.options.locale,this.options.ticks.format)}}class zk extends Bk{static id="linear";static defaults={ticks:{callback:c1.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=vr(e)?e:0,this.max=vr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Ei(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const gu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(gu);function p0(n,e){return n-e}function m0(n,e){if(zt(e))return null;const t=n._adapter,{parser:r,round:s,isoWeekday:i}=n._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),vr(a)||(a=typeof r=="string"?t.parse(a,r):t.parse(a)),a===null?null:(s&&(a=s==="week"&&(dl(i)||i===!0)?t.startOf(a,"isoWeek",i):t.startOf(a,s)),+a)}function g0(n,e,t,r){const s=Jn.length;for(let i=Jn.indexOf(n);i<s-1;++i){const a=gu[Jn[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=r)return Jn[i]}return Jn[s-1]}function qk(n,e,t,r,s){for(let i=Jn.length-1;i>=Jn.indexOf(t);i--){const a=Jn[i];if(gu[a].common&&n._adapter.diff(s,r,a)>=e-1)return a}return Jn[t?Jn.indexOf(t):0]}function Hk(n){for(let e=Jn.indexOf(n)+1,t=Jn.length;e<t;++e)if(gu[Jn[e]].common)return Jn[e]}function x0(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:s}=Kh(t,e),i=t[r]>=e?t[r]:t[s];n[i]=!0}}function Uk(n,e,t,r){const s=n._adapter,i=+s.startOf(e[0].value,r),a=e[e.length-1].value;let o,c;for(o=i;o<=a;o=+s.add(o,1,r))c=t[o],c>=0&&(e[c].major=!0);return e}function b0(n,e,t){const r=[],s={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],s[o]=a,r.push({value:o,major:!1});return i===0||!t?r:Uk(n,r,s,t)}class y0 extends Za{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),s=this._adapter=new Q4._date(e.adapters.date);s.init(t),el(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:m0(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!o&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=vr(s)&&!isNaN(s)?s:+t.startOf(Date.now(),r),i=vr(i)&&!isNaN(i)?i:+t.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,o=SN(s,i,a);return this._unit=t.unit||(r.autoSkip?g0(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):qk(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Hk(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),b0(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=br(t,0,a),r=br(r,0,a),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||g0(i.minUnit,t,r,this._getLabelCapacity(t)),o=bt(s.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=dl(c)||c===!0,d={};let f=t,g,p;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":a),e.diff(r,t,a)>1e5*o)throw new Error(t+" and "+r+" are too far apart with stepSize of "+o+" "+a);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(g=f,p=0;g<r;g=+e.add(g,o,a),p++)x0(d,g,y);return(g===r||s.bounds==="ticks"||p===1)&&x0(d,g,y),Object.keys(d).sort(p0).map(v=>+v)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,i=this._unit,a=t||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,s){const i=this.options,a=i.ticks.callback;if(a)return qt(a,[e,t,r],this);const o=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&o[c],f=u&&o[u],g=r[t],p=u&&f&&g&&g.major;return this._adapter.format(e,s||(p?f:d))}generateTickLabels(e){let t,r,s;for(t=0,r=e.length;t<r;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,s=Ei(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*a,h:r*a+o*i}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,s=r[t.unit]||r.millisecond,i=this._tickFormatFunction(e,0,b0(this,[e],this._majorUnit),s),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,r=s.length;t<r;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const s=this.getLabels();for(t=0,r=s.length;t<r;++t)e.push(m0(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return LN(e.sort(p0))}}function Fc(n,e,t){let r=0,s=n.length-1,i,a,o,c;t?(e>=n[r].pos&&e<=n[s].pos&&({lo:r,hi:s}=Ti(n,"pos",e)),{pos:i,time:o}=n[r],{pos:a,time:c}=n[s]):(e>=n[r].time&&e<=n[s].time&&({lo:r,hi:s}=Ti(n,"time",e)),{time:i,pos:o}=n[r],{time:a,pos:c}=n[s]);const u=a-i;return u?o+(c-o)*(e-i)/u:o}class b6 extends y0{static id="timeseries";static defaults=y0.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Fc(t,this.min),this._tableRange=Fc(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,s=[],i=[];let a,o,c,u,d;for(a=0,o=e.length;a<o;++a)u=e[a],u>=t&&u<=r&&s.push(u);if(s.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(a=0,o=s.length;a<o;++a)d=s[a+1],c=s[a-1],u=s[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(o-1)});return i}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Fc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Fc(this._table,r*this._tableRange+this._minPos,!0)}}const I1="label";function v0(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function Wk(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function R1(n,e){n.labels=e}function B1(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I1;const r=[];n.datasets=e.map(s=>{const i=n.datasets.find(a=>a[t]===s[t]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function $k(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:I1;const t={labels:[],datasets:[]};return R1(t,n.labels),B1(t,n.datasets,e),t}function Vk(n,e){const{height:t=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:a,data:o,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...g}=n,p=re.useRef(null),y=re.useRef(null),v=()=>{p.current&&(y.current=new mu(p.current,{type:a,data:$k(o,i),options:c&&{...c},plugins:u}),v0(e,y.current))},w=()=>{v0(e,null),y.current&&(y.current.destroy(),y.current=null)};return re.useEffect(()=>{!s&&y.current&&c&&Wk(y.current,c)},[s,c]),re.useEffect(()=>{!s&&y.current&&R1(y.current.config.data,o.labels)},[s,o.labels]),re.useEffect(()=>{!s&&y.current&&o.datasets&&B1(y.current.config.data,o.datasets,i)},[s,o.datasets]),re.useEffect(()=>{y.current&&(s?(w(),setTimeout(v)):y.current.update(f))},[s,c,o.labels,o.datasets,f]),re.useEffect(()=>{y.current&&(w(),setTimeout(v))},[a]),re.useEffect(()=>(v(),()=>w()),[]),Ch.createElement("canvas",{ref:p,role:"img",height:t,width:r,...g},d)}const Gk=re.forwardRef(Vk);function Yk(n,e){return mu.register(e),re.forwardRef((t,r)=>Ch.createElement(Gk,{...t,ref:r,type:n}))}const Kk=Yk("line",X4);var $c={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Jk=$c.exports,w0;function Xk(){return w0||(w0=1,function(n,e){((t,r)=>{n.exports=r()})(Jk,function t(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},c=0,u={};function d(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(D){var H=K(D);H.chunkSize=parseInt(H.chunkSize),D.step||D.chunk||(H.chunkSize=null),this._handle=new v(H),(this._handle.streamer=this)._config=H}.call(this,j),this.parseChunk=function(D,H){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let q=this._config.newline;q||(S=this._config.quoteChar||'"',q=this._handle.guessLineEndings(D,S)),D=[...D.split(q).slice(A)].join(q)}this.isFirstChunk&&X(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(D))!==void 0&&(D=S),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+D,S=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(D=S.meta.cursor,A=(this._finished||(this._partialLine=A.substring(D-this._baseIndex),this._baseIndex=D),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:S,workerId:u.WORKER_ID,finished:A});else if(X(this._config.chunk)&&!H){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!A||!X(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(D){X(this._config.error)?this._config.error(D):a&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:D,finished:!1})}}function f(j){var D;(j=j||{}).chunkSize||(j.chunkSize=u.RemoteChunkSize),d.call(this,j),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(H){this._input=H,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(D=new XMLHttpRequest,this._config.withCredentials&&(D.withCredentials=this._config.withCredentials),i||(D.onload=le(this._chunkLoaded,this),D.onerror=le(this._chunkError,this)),D.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var H,A=this._config.downloadRequestHeaders;for(H in A)D.setRequestHeader(H,A[H])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,D.setRequestHeader("Range","bytes="+this._start+"-"+S));try{D.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}i&&D.status===0&&this._chunkError()}},this._chunkLoaded=function(){D.readyState===4&&(D.status<200||400<=D.status?this._chunkError():(this._start+=this._config.chunkSize||D.responseText.length,this._finished=!this._config.chunkSize||this._start>=(H=>(H=H.getResponseHeader("Content-Range"))!==null?parseInt(H.substring(H.lastIndexOf("/")+1)):-1)(D),this.parseChunk(D.responseText)))},this._chunkError=function(H){H=D.statusText||H,this._sendError(new Error(H))}}function g(j){(j=j||{}).chunkSize||(j.chunkSize=u.LocalChunkSize),d.call(this,j);var D,H,A=typeof FileReader<"u";this.stream=function(S){this._input=S,H=S.slice||S.webkitSlice||S.mozSlice,A?((D=new FileReader).onload=le(this._chunkLoaded,this),D.onerror=le(this._chunkError,this)):D=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),S=H.call(S,this._start,q)),D.readAsText(S,this._config.encoding));A||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(D.error)}}function p(j){var D;d.call(this,j=j||{}),this.stream=function(H){return D=H,this._nextChunk()},this._nextChunk=function(){var H,A;if(!this._finished)return H=this._config.chunkSize,D=H?(A=D.substring(0,H),D.substring(H)):(A=D,""),this._finished=!D,this.parseChunk(A)}}function y(j){d.call(this,j=j||{});var D=[],H=!0,A=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&D.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),D.length?this.parseChunk(D.shift()):H=!0},this._streamData=le(function(S){try{D.push(typeof S=="string"?S:S.toString(this._config.encoding)),H&&(H=!1,this._checkIsFinished(),this.parseChunk(D.shift()))}catch(q){this._streamError(q)}},this),this._streamError=le(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=le(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=le(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(j){var D,H,A,S,q=Math.pow(2,53),O=-q,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ee=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,Z=0,ne=0,de=!1,xe=!1,k=[],T={data:[],errors:[],meta:{}};function I(ce){return j.skipEmptyLines==="greedy"?ce.join("").trim()==="":ce.length===1&&ce[0].length===0}function Y(){if(T&&A&&(fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),A=!1),j.skipEmptyLines&&(T.data=T.data.filter(function(we){return!I(we)})),Q()){let we=function(Fe,Le){X(j.transformHeader)&&(Fe=j.transformHeader(Fe,Le)),k.push(Fe)};if(T)if(Array.isArray(T.data[0])){for(var ce=0;Q()&&ce<T.data.length;ce++)T.data[ce].forEach(we);T.data.splice(0,1)}else T.data.forEach(we)}function ue(we,Fe){for(var Le=j.header?{}:[],qe=0;qe<we.length;qe++){var me=qe,U=we[qe],U=(($e,Ee)=>(Ne=>(j.dynamicTypingFunction&&j.dynamicTyping[Ne]===void 0&&(j.dynamicTyping[Ne]=j.dynamicTypingFunction(Ne)),(j.dynamicTyping[Ne]||j.dynamicTyping)===!0))($e)?Ee==="true"||Ee==="TRUE"||Ee!=="false"&&Ee!=="FALSE"&&((Ne=>{if(V.test(Ne)&&(Ne=parseFloat(Ne),O<Ne&&Ne<q))return 1})(Ee)?parseFloat(Ee):ee.test(Ee)?new Date(Ee):Ee===""?null:Ee):Ee)(me=j.header?qe>=k.length?"__parsed_extra":k[qe]:me,U=j.transform?j.transform(U,me):U);me==="__parsed_extra"?(Le[me]=Le[me]||[],Le[me].push(U)):Le[me]=U}return j.header&&(qe>k.length?fe("FieldMismatch","TooManyFields","Too many fields: expected "+k.length+" fields but parsed "+qe,ne+Fe):qe<k.length&&fe("FieldMismatch","TooFewFields","Too few fields: expected "+k.length+" fields but parsed "+qe,ne+Fe)),Le}var ke;T&&(j.header||j.dynamicTyping||j.transform)&&(ke=1,!T.data.length||Array.isArray(T.data[0])?(T.data=T.data.map(ue),ke=T.data.length):T.data=ue(T.data,0),j.header&&T.meta&&(T.meta.fields=k),ne+=ke)}function Q(){return j.header&&k.length===0}function fe(ce,ue,ke,we){ce={type:ce,code:ue,message:ke},we!==void 0&&(ce.row=we),T.errors.push(ce)}X(j.step)&&(S=j.step,j.step=function(ce){T=ce,Q()?Y():(Y(),T.data.length!==0&&(Z+=ce.data.length,j.preview&&Z>j.preview?H.abort():(T.data=T.data[0],S(T,B))))}),this.parse=function(ce,ue,ke){var we=j.quoteChar||'"',we=(j.newline||(j.newline=this.guessLineEndings(ce,we)),A=!1,j.delimiter?X(j.delimiter)&&(j.delimiter=j.delimiter(ce),T.meta.delimiter=j.delimiter):((we=((Fe,Le,qe,me,U)=>{var $e,Ee,Ne,te;U=U||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Ae=0;Ae<U.length;Ae++){for(var G,ve=U[Ae],Be=0,oe=0,_e=0,ze=(Ne=void 0,new N({comments:me,delimiter:ve,newline:Le,preview:10}).parse(Fe)),Ke=0;Ke<ze.data.length;Ke++)qe&&I(ze.data[Ke])?_e++:(G=ze.data[Ke].length,oe+=G,Ne===void 0?Ne=G:0<G&&(Be+=Math.abs(G-Ne),Ne=G));0<ze.data.length&&(oe/=ze.data.length-_e),(Ee===void 0||Be<=Ee)&&(te===void 0||te<oe)&&1.99<oe&&(Ee=Be,$e=ve,te=oe)}return{successful:!!(j.delimiter=$e),bestDelimiter:$e}})(ce,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=we.bestDelimiter:(A=!0,j.delimiter=u.DefaultDelimiter),T.meta.delimiter=j.delimiter),K(j));return j.preview&&j.header&&we.preview++,D=ce,H=new N(we),T=H.parse(D,ue,ke),Y(),de?{meta:{paused:!0}}:T||{meta:{paused:!1}}},this.paused=function(){return de},this.pause=function(){de=!0,H.abort(),D=X(j.chunk)?"":D.substring(H.getCharIndex())},this.resume=function(){B.streamer._halted?(de=!1,B.streamer.parseChunk(D,!0)):setTimeout(B.resume,3)},this.aborted=function(){return xe},this.abort=function(){xe=!0,H.abort(),T.meta.aborted=!0,X(j.complete)&&j.complete(T),D=""},this.guessLineEndings=function(Fe,we){Fe=Fe.substring(0,1048576);var we=new RegExp(w(we)+"([^]*?)"+w(we),"gm"),ke=(Fe=Fe.replace(we,"")).split("\r"),we=Fe.split(`
`),Fe=1<we.length&&we[0].length<ke[0].length;if(ke.length===1||Fe)return`
`;for(var Le=0,qe=0;qe<ke.length;qe++)ke[qe][0]===`
`&&Le++;return Le>=ke.length/2?`\r
`:"\r"}}function w(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function N(j){var D=(j=j||{}).delimiter,H=j.newline,A=j.comments,S=j.step,q=j.preview,O=j.fastMode,V=null,ee=!1,B=j.quoteChar==null?'"':j.quoteChar,Z=B;if(j.escapeChar!==void 0&&(Z=j.escapeChar),(typeof D!="string"||-1<u.BAD_DELIMITERS.indexOf(D))&&(D=","),A===D)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<u.BAD_DELIMITERS.indexOf(A))&&(A=!1),H!==`
`&&H!=="\r"&&H!==`\r
`&&(H=`
`);var ne=0,de=!1;this.parse=function(xe,k,T){if(typeof xe!="string")throw new Error("Input must be a string");var I=xe.length,Y=D.length,Q=H.length,fe=A.length,ce=X(S),ue=[],ke=[],we=[],Fe=ne=0;if(!xe)return Be();if(O||O!==!1&&xe.indexOf(B)===-1){for(var Le=xe.split(H),qe=0;qe<Le.length;qe++){if(we=Le[qe],ne+=we.length,qe!==Le.length-1)ne+=H.length;else if(T)return Be();if(!A||we.substring(0,fe)!==A){if(ce){if(ue=[],te(we.split(D)),oe(),de)return Be()}else te(we.split(D));if(q&&q<=qe)return ue=ue.slice(0,q),Be(!0)}}return Be()}for(var me=xe.indexOf(D,ne),U=xe.indexOf(H,ne),$e=new RegExp(w(Z)+w(B),"g"),Ee=xe.indexOf(B,ne);;)if(xe[ne]===B)for(Ee=ne,ne++;;){if((Ee=xe.indexOf(B,Ee+1))===-1)return T||ke.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ue.length,index:ne}),G();if(Ee===I-1)return G(xe.substring(ne,Ee).replace($e,B));if(B===Z&&xe[Ee+1]===Z)Ee++;else if(B===Z||Ee===0||xe[Ee-1]!==Z){me!==-1&&me<Ee+1&&(me=xe.indexOf(D,Ee+1));var Ne=Ae((U=U!==-1&&U<Ee+1?xe.indexOf(H,Ee+1):U)===-1?me:Math.min(me,U));if(xe.substr(Ee+1+Ne,Y)===D){we.push(xe.substring(ne,Ee).replace($e,B)),xe[ne=Ee+1+Ne+Y]!==B&&(Ee=xe.indexOf(B,ne)),me=xe.indexOf(D,ne),U=xe.indexOf(H,ne);break}if(Ne=Ae(U),xe.substring(Ee+1+Ne,Ee+1+Ne+Q)===H){if(we.push(xe.substring(ne,Ee).replace($e,B)),ve(Ee+1+Ne+Q),me=xe.indexOf(D,ne),Ee=xe.indexOf(B,ne),ce&&(oe(),de))return Be();if(q&&ue.length>=q)return Be(!0);break}ke.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ue.length,index:ne}),Ee++}}else if(A&&we.length===0&&xe.substring(ne,ne+fe)===A){if(U===-1)return Be();ne=U+Q,U=xe.indexOf(H,ne),me=xe.indexOf(D,ne)}else if(me!==-1&&(me<U||U===-1))we.push(xe.substring(ne,me)),ne=me+Y,me=xe.indexOf(D,ne);else{if(U===-1)break;if(we.push(xe.substring(ne,U)),ve(U+Q),ce&&(oe(),de))return Be();if(q&&ue.length>=q)return Be(!0)}return G();function te(_e){ue.push(_e),Fe=ne}function Ae(_e){var ze=0;return ze=_e!==-1&&(_e=xe.substring(Ee+1,_e))&&_e.trim()===""?_e.length:ze}function G(_e){return T||(_e===void 0&&(_e=xe.substring(ne)),we.push(_e),ne=I,te(we),ce&&oe()),Be()}function ve(_e){ne=_e,te(we),we=[],U=xe.indexOf(H,ne)}function Be(_e){if(j.header&&!k&&ue.length&&!ee){var ze=ue[0],Ke={},He=new Set(ze);let Ge=!1;for(let Pe=0;Pe<ze.length;Pe++){let ot=ze[Pe];if(Ke[ot=X(j.transformHeader)?j.transformHeader(ot,Pe):ot]){let tt,Ft=Ke[ot];for(;tt=ot+"_"+Ft,Ft++,He.has(tt););He.add(tt),ze[Pe]=tt,Ke[ot]++,Ge=!0,(V=V===null?{}:V)[tt]=ot}else Ke[ot]=1,ze[Pe]=ot;He.add(ot)}Ge&&console.warn("Duplicate headers found and renamed."),ee=!0}return{data:ue,errors:ke,meta:{delimiter:D,linebreak:H,aborted:de,truncated:!!_e,cursor:Fe+(k||0),renamedHeaders:V}}}function oe(){S(Be()),ue=[],ke=[]}},this.abort=function(){de=!0},this.getCharIndex=function(){return ne}}function P(j){var D=j.data,H=o[D.workerId],A=!1;if(D.error)H.userError(D.error,D.file);else if(D.results&&D.results.data){var S={abort:function(){A=!0,M(D.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(X(H.userStep)){for(var q=0;q<D.results.data.length&&(H.userStep({data:D.results.data[q],errors:D.results.errors,meta:D.results.meta},S),!A);q++);delete D.results}else X(H.userChunk)&&(H.userChunk(D.results,S,D.file),delete D.results)}D.finished&&!A&&M(D.workerId,D.results)}function M(j,D){var H=o[j];X(H.userComplete)&&H.userComplete(D),H.terminate(),delete o[j]}function W(){throw new Error("Not implemented.")}function K(j){if(typeof j!="object"||j===null)return j;var D,H=Array.isArray(j)?[]:{};for(D in j)H[D]=K(j[D]);return H}function le(j,D){return function(){j.apply(D,arguments)}}function X(j){return typeof j=="function"}return u.parse=function(j,D){var H=(D=D||{}).dynamicTyping||!1;if(X(H)&&(D.dynamicTypingFunction=H,H={}),D.dynamicTyping=H,D.transform=!!X(D.transform)&&D.transform,!D.worker||!u.WORKERS_SUPPORTED)return H=null,u.NODE_STREAM_INPUT,typeof j=="string"?(j=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(j),H=new(D.download?f:p)(D)):j.readable===!0&&X(j.read)&&X(j.on)?H=new y(D):(r.File&&j instanceof File||j instanceof Object)&&(H=new g(D)),H.stream(j);(H=(()=>{var A;return!!u.WORKERS_SUPPORTED&&(A=(()=>{var S=r.URL||r.webkitURL||null,q=t.toString();return u.BLOB_URL||(u.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),(A=new r.Worker(A)).onmessage=P,A.id=c++,o[A.id]=A)})()).userStep=D.step,H.userChunk=D.chunk,H.userComplete=D.complete,H.userError=D.error,D.step=X(D.step),D.chunk=X(D.chunk),D.complete=X(D.complete),D.error=X(D.error),delete D.worker,H.postMessage({input:j,config:D,workerId:H.id})},u.unparse=function(j,D){var H=!1,A=!0,S=",",q=`\r
`,O='"',V=O+O,ee=!1,B=null,Z=!1,ne=((()=>{if(typeof D=="object"){if(typeof D.delimiter!="string"||u.BAD_DELIMITERS.filter(function(k){return D.delimiter.indexOf(k)!==-1}).length||(S=D.delimiter),typeof D.quotes!="boolean"&&typeof D.quotes!="function"&&!Array.isArray(D.quotes)||(H=D.quotes),typeof D.skipEmptyLines!="boolean"&&typeof D.skipEmptyLines!="string"||(ee=D.skipEmptyLines),typeof D.newline=="string"&&(q=D.newline),typeof D.quoteChar=="string"&&(O=D.quoteChar),typeof D.header=="boolean"&&(A=D.header),Array.isArray(D.columns)){if(D.columns.length===0)throw new Error("Option columns is empty");B=D.columns}D.escapeChar!==void 0&&(V=D.escapeChar+O),D.escapeFormulae instanceof RegExp?Z=D.escapeFormulae:typeof D.escapeFormulae=="boolean"&&D.escapeFormulae&&(Z=/^[=+\-@\t\r].*$/)}})(),new RegExp(w(O),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return de(null,j,ee);if(typeof j[0]=="object")return de(B||Object.keys(j[0]),j,ee)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||B),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),de(j.fields||[],j.data||[],ee);throw new Error("Unable to serialize unrecognized input");function de(k,T,I){var Y="",Q=(typeof k=="string"&&(k=JSON.parse(k)),typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(k)&&0<k.length),fe=!Array.isArray(T[0]);if(Q&&A){for(var ce=0;ce<k.length;ce++)0<ce&&(Y+=S),Y+=xe(k[ce],ce);0<T.length&&(Y+=q)}for(var ue=0;ue<T.length;ue++){var ke=(Q?k:T[ue]).length,we=!1,Fe=Q?Object.keys(T[ue]).length===0:T[ue].length===0;if(I&&!Q&&(we=I==="greedy"?T[ue].join("").trim()==="":T[ue].length===1&&T[ue][0].length===0),I==="greedy"&&Q){for(var Le=[],qe=0;qe<ke;qe++){var me=fe?k[qe]:qe;Le.push(T[ue][me])}we=Le.join("").trim()===""}if(!we){for(var U=0;U<ke;U++){0<U&&!Fe&&(Y+=S);var $e=Q&&fe?k[U]:U;Y+=xe(T[ue][$e],U)}ue<T.length-1&&(!I||0<ke&&!Fe)&&(Y+=q)}}return Y}function xe(k,T){var I,Y;return k==null?"":k.constructor===Date?JSON.stringify(k).slice(1,25):(Y=!1,Z&&typeof k=="string"&&Z.test(k)&&(k="'"+k,Y=!0),I=k.toString().replace(ne,V),(Y=Y||H===!0||typeof H=="function"&&H(k,T)||Array.isArray(H)&&H[T]||((Q,fe)=>{for(var ce=0;ce<fe.length;ce++)if(-1<Q.indexOf(fe[ce]))return!0;return!1})(I,u.BAD_DELIMITERS)||-1<I.indexOf(S)||I.charAt(0)===" "||I.charAt(I.length-1)===" ")?O+I+O:I)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=N,u.ParserHandle=v,u.NetworkStreamer=f,u.FileStreamer=g,u.StringStreamer=p,u.ReadableStreamStreamer=y,r.jQuery&&((s=r.jQuery).fn.parse=function(j){var D=j.config||{},H=[];return this.each(function(q){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)H.push({file:this.files[O],inputElem:this,instanceConfig:s.extend({},D)})}),A(),this;function A(){if(H.length===0)X(j.complete)&&j.complete();else{var q,O,V,ee,B=H[0];if(X(j.before)){var Z=j.before(B.file,B.inputElem);if(typeof Z=="object"){if(Z.action==="abort")return q="AbortError",O=B.file,V=B.inputElem,ee=Z.reason,void(X(j.error)&&j.error({name:q},O,V,ee));if(Z.action==="skip")return void S();typeof Z.config=="object"&&(B.instanceConfig=s.extend(B.instanceConfig,Z.config))}else if(Z==="skip")return void S()}var ne=B.instanceConfig.complete;B.instanceConfig.complete=function(de){X(ne)&&ne(de,B.file,B.inputElem),S()},u.parse(B.file,B.instanceConfig)}}function S(){H.splice(0,1),A()}}),a&&(r.onmessage=function(j){j=j.data,u.WORKER_ID===void 0&&j&&(u.WORKER_ID=j.workerId),typeof j.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(j.input,j.config),finished:!0}):(r.File&&j.input instanceof File||j.input instanceof Object)&&(j=u.parse(j.input,j.config))&&r.postMessage({workerId:u.WORKER_ID,results:j,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(g.prototype=Object.create(d.prototype)).constructor=g,(p.prototype=Object.create(p.prototype)).constructor=p,(y.prototype=Object.create(d.prototype)).constructor=y,u})}($c)),$c.exports}var Qk=Xk();const Zk=Lh(Qk);mu.register(Ik,zk,gk,xk,kk,Ok,Nk);const e6=({user:n})=>{const[e,t]=re.useState([]),[r,s]=re.useState(!0),[i,a]=re.useState(""),o=As();return re.useEffect(()=>{const c=async()=>{try{s(!0),a(""),console.log("Fetching messages for user:",n.id);const{data:u,error:d}=await Te.from("messages").select("id, content, timestamp, user_id, sender_name, is_read").eq("user_id",n.id).order("timestamp",{ascending:!1}).limit(5);if(d)throw console.error("Supabase error (messages):",d),d;console.log("Messages fetched:",u),t(u||[])}catch(u){console.error("Error in fetchMessages:",u);const d=u.message||u.details&&JSON.stringify(u.details)||JSON.stringify(u,null,2);a("Fehler beim Laden der Nachrichten: "+d)}finally{s(!1)}};n?.id&&c()},[n]),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[l.jsx(hu,{size:18,className:"text-blue-600"}),"Nachrichten"]}),i&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-2 rounded-lg mb-3 text-sm flex items-center gap-2",children:[l.jsx(Ri,{size:16}),i]}),r?l.jsx("div",{className:"flex justify-center",children:l.jsx(mh,{size:24,className:"animate-spin text-gray-500"})}):e.length>0?l.jsx("div",{className:"space-y-3",children:e.map(c=>l.jsx("div",{className:`p-3 border rounded-lg ${c.is_read?"border-gray-200":"border-blue-200 bg-blue-50"}`,children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:c.content}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Von: ",c.sender_name||"Unbekannt"," | An: Team | ",new Date(c.timestamp).toLocaleString("de-DE")]})]}),!c.is_read&&l.jsx("button",{onClick:async()=>{try{const{error:u}=await Te.from("messages").update({is_read:!0}).eq("id",c.id);if(u)throw u;t(e.map(d=>d.id===c.id?{...d,is_read:!0}:d))}catch(u){console.error("Fehler beim Markieren als gelesen:",u)}},className:"text-blue-600 hover:text-blue-800 text-xs",children:"Gelesen"})]})},c.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Keine Nachrichten vorhanden."}),l.jsx("button",{onClick:()=>o("/messages"),className:"mt-3 text-sm text-blue-600 hover:text-blue-800",children:"Alle Nachrichten anzeigen"})]})};function t6(){const[n,e]=re.useState(null),[t,r]=re.useState(!1),[s,i]=re.useState([]),[a,o]=re.useState({name:"",country:"",industry:"",risk_level:"",note:""}),[c,u]=re.useState(""),[d,f]=re.useState(""),[g,p]=re.useState({Hoch:0,Mittel:0,Niedrig:0}),[y,v]=re.useState(""),[w,N]=re.useState("Alle"),[P,M]=re.useState("Alle"),[W,K]=re.useState(null),[le,X]=re.useState(null),[j,D]=re.useState(!1),[H,A]=re.useState(!1),[S,q]=re.useState(!1),[O,V]=re.useState([]),[ee,B]=re.useState([]),[Z,ne]=re.useState(0),[de,xe]=re.useState(0),[k,T]=re.useState(0),[I,Y]=re.useState(0),[Q,fe]=re.useState([]),[ce,ue]=re.useState([]),[ke,we]=re.useState(0),Fe=5,Le=As(),qe=re.useRef(null),me=re.useRef(null),U=j0();let $e="Dashboard";U.pathname.includes("suppliers")?$e="Lieferanten":U.pathname.includes("audit")?$e="Audit Log":U.pathname.includes("whistleblower")&&($e="Anonyme Meldung");const{auditLogs:Ee,logActionFilter:Ne,setLogActionFilter:te,logUserFilter:Ae,setLogUserFilter:G,handleAuditLogCSVExport:ve,handleAuditLogPDFExport:Be}=B3(t);re.useEffect(()=>{const Ce=JSON.parse(localStorage.getItem("filters"));Ce&&(v(Ce.searchTerm||""),N(Ce.riskFilter||"Alle"),M(Ce.industryFilter||"Alle"))},[]),re.useEffect(()=>{if(c||d){const Ce=setTimeout(()=>{u(""),f("")},3e3);return()=>clearTimeout(Ce)}},[c,d]),re.useEffect(()=>{localStorage.setItem("filters",JSON.stringify({searchTerm:y,riskFilter:w,industryFilter:P}))},[y,w,P]),re.useEffect(()=>{(async()=>{try{const{data:Ue,error:Ze}=await Te.auth.getUser();if(Ze)throw Ze;if(Ue?.user){e(Ue.user);const{data:Nt,error:Xe}=await Te.from("profiles").select("role").eq("id",Ue.user.id).single();if(Xe)throw Xe;r(Nt?.role==="admin"),await Promise.all([oe(Ue.user.id),_e(),ze(),Ke(Ue.user.id),He(Ue.user.id),Ge(Ue.user.id)])}else Le("/")}catch(Ue){console.error("Fehler beim Laden des Benutzers:",Ue),f("Fehler beim Laden des Benutzers."),Le("/")}})()},[Le]),re.useEffect(()=>{(()=>{const Ue=localStorage.getItem("onboardingComplete")==="true",Ze=localStorage.getItem("onboardingSkipped")==="true",Nt=JSON.parse(localStorage.getItem("onboardingData"))||{};if(Ue||Ze){D(!1),we(100);return}let Xe=0;Nt.companyName&&(Xe+=1),Nt.complianceAnswers?.length>0&&(Xe+=1),Nt.suppliers?.length>0&&(Xe+=1),Nt.documents?.length>0&&(Xe+=1),Nt.actionPlan&&(Xe+=1);const Yt=Xe/Fe*100;D(!0),we(Yt)})()},[]),re.useEffect(()=>{const Ce=Ue=>{me.current&&!me.current.contains(Ue.target)&&q(!1)};return document.addEventListener("mousedown",Ce),()=>{document.removeEventListener("mousedown",Ce)}},[]);const oe=async Ce=>{try{const{data:Ue,error:Ze}=await Te.from("suppliers").select("*").eq("user_id",Ce);if(Ze)throw Ze;i(Ue||[]);const Nt={Hoch:0,Mittel:0,Niedrig:0};Ue.forEach(Kt=>{Kt.risk_level&&Nt[Kt.risk_level]!==void 0&&Nt[Kt.risk_level]++}),p(Nt);const Xe=Ue.map(Kt=>Kt.risk_score||0),Yt=Xe.length>0?Math.round(Xe.reduce((Kt,en)=>Kt+en,0)/Xe.length):0;xe(Yt);const or=Math.round(Nt.Niedrig/(Ue.length||1)*100);T(or||0),Y(Nt.Hoch)}catch(Ue){console.error("Fehler beim Laden der Lieferanten:",Ue),f("Fehler beim Laden der Lieferanten.")}},_e=async()=>{try{const{data:Ce,error:Ue}=await Te.from("risk_trend").select("month, average_risk").order("month",{ascending:!0});if(Ue)throw Ue;B(Ce||[])}catch(Ce){console.error("Fehler beim Laden des Risikotrends:",Ce),f("Fehler beim Laden des Risikotrends.")}},ze=async()=>{try{const{data:Ce,error:Ue}=await Te.from("remedial_actions").select("status").eq("status","Offen");if(Ue)throw Ue;ne(Ce.length||0)}catch(Ce){console.error("Fehler beim Laden der offenen Maßnahmen:",Ce),f("Fehler beim Laden der offenen Maßnahmen.")}},Ke=async Ce=>{try{console.log("Fetching notifications for user:",Ce);const{data:Ue,error:Ze}=await Te.from("notifications").select("id, title, description, created_at, user_id, priority, is_read").eq("user_id",Ce).order("created_at",{ascending:!1}).limit(5);if(Ze)throw console.error("Supabase error (notifications):",Ze),Ze;console.log("Notifications fetched:",Ue),V(Ue||[])}catch(Ue){console.error("Error in fetchNotifications:",Ue);const Ze=Ue.message||Ue.details&&JSON.stringify(Ue.details)||JSON.stringify(Ue,null,2);f("Fehler beim Laden der Benachrichtigungen: "+Ze)}},He=async Ce=>{try{console.log("Fetching tasks for user:",Ce);const{data:Ue,error:Ze}=await Te.from("tasks").select("id, title, due_date, priority, action, assigned_to, created_by").or(`assigned_to.eq.${Ce},created_by.eq.${Ce}`).order("due_date",{ascending:!0}).limit(3);if(Ze)throw console.error("Supabase error (tasks):",Ze),Ze;console.log("Tasks fetched:",Ue),fe(Ue||[])}catch(Ue){console.error("Error in fetchTasks:",Ue);const Ze=Ue.message||Ue.details&&JSON.stringify(Ue.details)||JSON.stringify(Ue,null,2);f("Fehler beim Laden der Aufgaben: "+Ze)}},Ge=async Ce=>{try{const{data:Ue,error:Ze}=await Te.from("quick_wins").select("*").eq("user_id",Ce).limit(3);if(Ze)throw Ze;ue(Ue||[])}catch(Ue){console.error("Fehler beim Laden der Quick Wins:",Ue),f("Fehler beim Laden der Quick Wins.")}},Pe=async()=>{try{await Te.auth.signOut(),Le("/")}catch(Ce){console.error("Fehler beim Abmelden:",Ce),f("Fehler beim Abmelden.")}},ot=async Ce=>{try{const{error:Ue}=await Te.from("notifications").update({is_read:!0}).eq("id",Ce);if(Ue)throw Ue;V(O.map(Ze=>Ze.id===Ce?{...Ze,is_read:!0}:Ze))}catch(Ue){console.error("Fehler beim Markieren der Benachrichtigung als gelesen:",Ue),f("Fehler beim Markieren der Benachrichtigung als gelesen.")}},tt=async Ce=>{try{const{error:Ue}=await Te.from("notifications").delete().eq("id",Ce);if(Ue)throw Ue;V(O.filter(Ze=>Ze.id!==Ce))}catch(Ue){console.error("Fehler beim Entfernen der Benachrichtigung:",Ue),f("Fehler beim Entfernen der Benachrichtigung.")}},Ft=()=>{try{const Ce=Qn.map(Yt=>({Name:Yt.name,Land:Yt.country,Branche:Yt.industry,Risikostufe:Yt.risk_level,Notizen:Yt.note||"",Risikoscore:Yt.risk_score||0})),Ue=Zk.unparse(Ce),Ze=new Blob([Ue],{type:"text/csv;charset=utf-8;"}),Nt=URL.createObjectURL(Ze),Xe=document.createElement("a");Xe.setAttribute("href",Nt),Xe.setAttribute("download",`lieferanten_${new Date().toISOString()}.csv`),Xe.click(),URL.revokeObjectURL(Nt),u("CSV-Export erfolgreich.")}catch(Ce){console.error("Fehler beim Exportieren der Lieferanten als CSV:",Ce),f("Fehler beim Exportieren der Lieferanten als CSV.")}},ut=()=>{try{const Ce=new nt;Ce.setFontSize(16),Ce.text("Lieferkettengesetz (LkSG) Bericht",20,20),Ce.setFontSize(12),Ce.text(`Erstellt am: ${new Date().toLocaleDateString("de-DE")}`,20,30),Ce.text(`Compliance-Score: ${k}%`,20,40),Ce.text(`Durchschnittlicher Risikoscore: ${de}/100`,20,50),Ce.text(`Offene Maßnahmen: ${Z}`,20,60);const Ue=Qn.map(Ze=>[Ze.name,Ze.country,Ze.industry,Ze.risk_level,Ze.risk_score||0]);Ce.autoTable({startY:70,head:[["Name","Land","Branche","Risikostufe","Risikoscore"]],body:Ue}),Ce.save(`lksg_bericht_${new Date().toISOString()}.pdf`),u("PDF-Bericht erfolgreich erstellt.")}catch(Ce){console.error("Fehler beim Erstellen des PDF-Berichts:",Ce),f("Fehler beim Erstellen des PDF-Berichts.")}},wt=async(Ce,Ue)=>{try{switch(Ce){case"evaluate_supplier":Le("/suppliers/evaluate");break;case"update_documents":Le("/documents");break;case"schedule_training":Le("/training/schedule");break;case"add_supplier":A(!0);break;default:break}const{error:Ze}=await Te.from("tasks").update({status:"completed"}).eq("id",Ue);if(Ze)throw Ze;fe(Q.filter(Nt=>Nt.id!==Ue)),u("Aufgabe erfolgreich erledigt.")}catch(Ze){console.error("Fehler beim Verarbeiten der Aufgabe:",Ze),f("Fehler beim Verarbeiten der Aufgabe.")}},ar=async(Ce,Ue)=>{try{switch(Ce){case"complete_supplier_data":Le("/suppliers/edit");break;case"enable_auto_reports":Le("/settings/reports");break;default:break}const{error:Ze}=await Te.from("quick_wins").update({status:"completed"}).eq("id",Ue);if(Ze)throw Ze;ue(ce.filter(Nt=>Nt.id!==Ue)),u("Quick Win erfolgreich umgesetzt.")}catch(Ze){console.error("Fehler beim Verarbeiten des Quick Wins:",Ze),f("Fehler beim Verarbeiten des Quick Wins.")}},yt=Ce=>{switch(Ce){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},Rr=Ce=>{switch(Ce){case"high":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"});case"medium":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-yellow-500"});case"low":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-blue-500"});default:return null}},Ut=Ce=>Ce<40?"bg-red-500":Ce<70?"bg-yellow-500":"bg-green-500",Ln=O.filter(Ce=>!Ce.is_read).length,Qn=s.filter(Ce=>(Ce.name?.toLowerCase().includes(y.toLowerCase())||Ce.country?.toLowerCase().includes(y.toLowerCase())||Ce.industry?.toLowerCase().includes(y.toLowerCase())||Ce.risk_level?.toLowerCase().includes(y.toLowerCase()))&&(w==="Alle"||Ce.risk_level===w)&&(P==="Alle"||Ce.industry===P)),Wt=s.length>0?Math.round(g.Niedrig/s.length*100):0,it=s.length>0?Math.round(g.Hoch/s.length*100):0,_t={labels:ee.map(Ce=>Ce.month),datasets:[{label:"Durchschnittlicher Risikoscore",data:ee.map(Ce=>Ce.average_risk),fill:!1,borderColor:"rgb(59, 130, 246)",tension:.1}]};return l.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[l.jsx(Xs,{}),l.jsxs("div",{className:"flex-1 ml-72",children:[j&&l.jsx(Qg,{onComplete:()=>{D(!1),we(100)},onSkip:()=>{D(!1),we(100)}}),!j&&l.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[l.jsxs("header",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:$e}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Überblick und Verwaltung Ihrer Lieferkette"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[t&&l.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-600 rounded-full",children:"Admin"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>q(!S),className:"focus:outline-none",children:[l.jsx(si,{size:18,className:"text-gray-500 hover:text-blue-600"}),Ln>0&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:Ln})]}),S&&l.jsxs("div",{ref:me,className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 transform transition-all duration-300 ease-in-out origin-top-right scale-y-0 opacity-0 animate-[slideDown_0.3s_ease-in-out_forwards]",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[l.jsxs("h2",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(si,{size:16,className:"text-blue-600"}),"Benachrichtigungen",Ln>0&&l.jsxs("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-600 rounded-full",children:[Ln," neu"]})]}),l.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:14})})]}),l.jsx("div",{className:"p-4 max-h-64 overflow-y-auto",children:O.length>0?l.jsx("div",{className:"space-y-2",children:O.map(Ce=>l.jsxs("div",{className:`p-3 border rounded-lg ${Ce.is_read?"border-gray-200":yt(Ce.priority)}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[!Ce.is_read&&Rr(Ce.priority),l.jsx("h3",{className:`text-sm font-medium ${Ce.is_read?"text-gray-600":"text-gray-800"}`,children:Ce.title})]}),l.jsx("button",{onClick:()=>tt(Ce.id),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:14})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ce.description}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500",children:[l.jsx("span",{children:new Date(Ce.created_at).toLocaleString("de-DE")}),!Ce.is_read&&l.jsx("button",{onClick:()=>ot(Ce.id),className:"text-blue-600 hover:text-blue-800",children:"Gelesen"})]})]},Ce.id))}):l.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:"Keine Benachrichtigungen"})}),l.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:l.jsx("button",{onClick:()=>Le("/notifications"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium rounded-lg w-full text-center",children:"Alle anzeigen"})})]})]}),l.jsx("button",{onClick:Pe,className:"text-sm text-gray-600 hover:text-gray-800",children:"Abmelden"})]})]}),!localStorage.getItem("onboardingComplete")&&l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 mb-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Compliance Setup"}),l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${ke}%`}})}),l.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Fortschritt: ",Math.round(ke),"%"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{className:`h-4 w-4 ${JSON.parse(localStorage.getItem("onboardingData"))?.companyName?"text-green-500":"text-gray-300"}`}),l.jsx("span",{children:"Firmeneinrichtung"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{className:`h-4 w-4 ${JSON.parse(localStorage.getItem("onboardingData"))?.complianceAnswers?.length>0?"text-green-500":"text-gray-300"}`}),l.jsx("span",{children:"Compliance-Schnellstart"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{className:`h-4 w-4 ${JSON.parse(localStorage.getItem("onboardingData"))?.suppliers?.length>0?"text-green-500":"text-gray-300"}`}),l.jsx("span",{children:"Lieferantenerfassung"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{className:`h-4 w-4 ${JSON.parse(localStorage.getItem("onboardingData"))?.documents?.length>0?"text-green-500":"text-gray-300"}`}),l.jsx("span",{children:"Dokumenten-Basisset"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{className:`h-4 w-4 ${JSON.parse(localStorage.getItem("onboardingData"))?.actionPlan?"text-green-500":"text-gray-300"}`}),l.jsx("span",{children:"Compliance-Fahrplan"})]})]}),l.jsx("button",{onClick:()=>D(!0),className:"mt-3 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Fortsetzen"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 mb-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Übersicht"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-medium text-blue-700 uppercase",children:"Offene Maßnahmen"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:Z})]}),l.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-medium text-purple-700 uppercase",children:"Risikoscore"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:[de,"/100"]})]}),l.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-medium text-green-700 uppercase",children:"Compliance"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:[k,"%"]})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm",children:[l.jsx("span",{className:"font-medium text-gray-700",children:"LkSG-Compliance"}),l.jsxs("span",{className:"text-gray-500",children:[I," Sofortmaßnahmen"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${Ut(k)}`,style:{width:`${k}%`}})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Aufgaben"}),l.jsx("div",{className:"space-y-3",children:Q.length>0?Q.map(Ce=>l.jsxs("div",{className:`p-3 border rounded-lg ${yt(Ce.priority)} flex justify-between items-center`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[Rr(Ce.priority),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:Ce.title}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Fällig: ",new Date(Ce.due_date).toLocaleDateString("de-DE")]})]})]}),l.jsx("button",{onClick:()=>wt(Ce.action,Ce.id),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs",children:"Erledigen"})]},Ce.id)):l.jsx("p",{className:"text-sm text-gray-500",children:"Keine Aufgaben vorhanden."})}),l.jsx("button",{onClick:()=>Le("/tasks"),className:"mt-3 text-sm text-blue-600 hover:text-blue-800",children:"Alle Aufgaben anzeigen"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Quick Wins"}),l.jsx("div",{className:"space-y-3",children:ce.length>0?ce.map(Ce=>l.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{size:16,className:"text-green-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-800",children:Ce.title}),l.jsx("p",{className:"text-xs text-gray-500",children:Ce.impact})]})]}),l.jsx("button",{onClick:()=>ar(Ce.action,Ce.id),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 text-xs",children:"Umsetzen"})]},Ce.id)):l.jsx("p",{className:"text-sm text-gray-500",children:"Keine Quick Wins vorhanden."})}),l.jsx("button",{onClick:()=>Le("/quick-wins"),className:"mt-3 text-sm text-blue-600 hover:text-blue-800",children:"Alle Quick Wins anzeigen"})]}),l.jsx(e6,{user:n})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 mb-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Risikotrend"}),l.jsx("div",{className:"h-64",children:l.jsx(Kk,{data:_t,options:{maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Risikoscore"}},x:{title:{display:!0,text:"Monat"}}}}})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Lieferanten"}),l.jsxs("button",{onClick:()=>A(!H),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[H?"Schließen":"Lieferant hinzufügen",H?l.jsx(o_,{size:16}):l.jsx(ol,{size:16})]})]}),H&&l.jsx("div",{className:"p-5 bg-gray-50",children:l.jsx(M3,{newSupplier:a,setNewSupplier:o,user:n,fetchSuppliers:oe,setShowAddSupplier:A,setSuccessMessage:u,setErrorMessage:f})}),l.jsxs("div",{className:"p-5",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Wh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),l.jsx("input",{type:"text",placeholder:"Lieferant suchen...",value:y,onChange:Ce=>v(Ce.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:w,onChange:Ce=>N(Ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[l.jsx("option",{value:"Alle",children:"Alle Risiken"}),l.jsx("option",{value:"Hoch",children:"Hoch"}),l.jsx("option",{value:"Mittel",children:"Mittel"}),l.jsx("option",{value:"Niedrig",children:"Niedrig"})]}),l.jsxs("select",{value:P,onChange:Ce=>M(Ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[l.jsx("option",{value:"Alle",children:"Alle Branchen"}),l.jsx("option",{value:"Elektronik",children:"Elektronik"}),l.jsx("option",{value:"Textil",children:"Textil"}),l.jsx("option",{value:"Lebensmittel",children:"Lebensmittel"}),l.jsx("option",{value:"Automotive",children:"Automotive"})]}),l.jsxs("button",{onClick:Ft,className:"flex items-center gap-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:[l.jsx(ll,{size:16}),"CSV"]})]})]}),l.jsx(O3,{suppliers:s,filteredSuppliers:Qn,isAdmin:t,user:n,fetchSuppliers:oe,setSelectedSupplier:K})]})]}),t&&l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Audit-Log"}),l.jsx(E3,{auditLogs:Ee,logActionFilter:Ne,setLogActionFilter:te,logUserFilter:Ae,setLogUserFilter:G,handleAuditLogCSVExport:ve,handleAuditLogPDFExport:Be})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-5",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Berichte"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"LKG-Berichte"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Berichte gemäß Lieferkettengesetz erstellen."}),l.jsx("div",{className:"mt-2",children:l.jsxs("button",{onClick:ut,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:[l.jsx(js,{size:16}),"PDF"]})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Compliance"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-medium text-green-700",children:"Konform"}),l.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[Wt,"%"]})]}),l.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-medium text-red-700",children:"Nicht konform"}),l.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[it,"%"]})]})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-5",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Schulungen & Wissen"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Schulungen"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Schulungen für Teams und Lieferanten."}),l.jsx("button",{onClick:()=>Le("/training"),className:"mt-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Schulungsplan"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Wissensdatenbank"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Gesetzliche Anforderungen und Best Practices."}),l.jsx("button",{onClick:()=>Le("/knowledge-base"),className:"mt-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Durchsuchen"})]})]})]}),c&&l.jsxs("div",{ref:qe,className:"fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center",children:[l.jsx(Fn,{size:16,className:"mr-2"}),c]}),d&&l.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center",children:[l.jsx(Ri,{size:16,className:"mr-2"}),d]}),W&&l.jsx(T3,{selectedSupplier:W,setSelectedSupplier:K,fileUpload:le,setFileUpload:X})]})]}),l.jsx("style",{children:`
        @keyframes slideDown {
          from {
            transform: scaleY(0);
            opacity: 0;
          }
          to {
            transform: scaleY(1);
            opacity: 1;
          }
        }
      `})]})}function n6(){const[n,e]=re.useState(""),[t,r]=re.useState(!1),[s,i]=re.useState(!1),[a,o]=re.useState("home"),[c,u]=re.useState(!1);re.useEffect(()=>{const y=()=>{i(window.scrollY>100);const w=["home","about","features","demo","cta"].map(M=>{const W=document.getElementById(M);return W?{id:M,top:W.offsetTop-100}:null}).filter(Boolean),N=window.scrollY,P=w.reduce((M,W)=>N>=W.top?W.id:M,"home");o(P)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const d=y=>{y.preventDefault(),n&&r(!0)},f=y=>{const v=document.getElementById(y);v&&window.scrollTo({top:v.offsetTop-80,behavior:"smooth"}),u(!1)},g=[{icon:l.jsx(E_,{className:"h-6 w-6 text-blue-500"}),title:"Risikobewertung",description:"Automatische Bewertung deiner Lieferanten mit KI-basiertem Risikoscoring"},{icon:l.jsx(si,{className:"h-6 w-6 text-blue-500"}),title:"Frühwarnsystem",description:"Proaktive Benachrichtigungen bei potentiellen Risiken in deiner Lieferkette"},{icon:l.jsx(js,{className:"h-6 w-6 text-blue-500"}),title:"Dokumentation",description:"Automatisierte Dokumentationserstellung für Audits und Behörden"},{icon:l.jsx(e_,{className:"h-6 w-6 text-blue-500"}),title:"Reports",description:"Detaillierte Management-Reports auf Knopfdruck für deine Stakeholder"},{icon:l.jsx(Ri,{className:"h-6 w-6 text-blue-500"}),title:"Whistleblower",description:"Integriertes System für anonyme Hinweise gemäß gesetzlicher Vorgaben"},{icon:l.jsx(vi,{className:"h-6 w-6 text-blue-500"}),title:"Compliance",description:"Vollständige Einhaltung aller LkSG-Anforderungen ohne juristisches Fachwissen"}],p=[{quote:"ChainGuard hat uns den Einstieg in die LkSG-Compliance enorm erleichtert. Wir konnten unsere Prozesse in wenigen Wochen umstellen.",author:"Marie Schmidt",position:"Compliance Manager, TechGmbH"},{quote:"Das beste Tool für mittelständische Unternehmen! Die automatische Risikobewertung spart uns Hunderte Arbeitsstunden.",author:"Thomas Weber",position:"CEO, Weber Logistics"}];return l.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[l.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${s?"bg-white dark:bg-gray-900 shadow-md py-2":"bg-transparent py-4"}`,children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"flex items-center",children:l.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"ChainGuard"})}),l.jsxs("div",{className:"hidden md:flex space-x-8 items-center",children:[l.jsx("button",{onClick:()=>f("home"),className:`font-medium hover:text-blue-600 transition ${a==="home"?"text-blue-600":""}`,children:"Home"}),l.jsx("button",{onClick:()=>f("about"),className:`font-medium hover:text-blue-600 transition ${a==="about"?"text-blue-600":""}`,children:"Über LkSG"}),l.jsx("button",{onClick:()=>f("features"),className:`font-medium hover:text-blue-600 transition ${a==="features"?"text-blue-600":""}`,children:"Features"}),l.jsx("button",{onClick:()=>f("demo"),className:`font-medium hover:text-blue-600 transition ${a==="demo"?"text-blue-600":""}`,children:"Produkt"}),l.jsx("button",{onClick:()=>f("cta"),className:"ml-4 bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium transition",children:"Beta-Zugang"})]}),l.jsx("div",{className:"md:hidden",children:l.jsx("button",{onClick:()=>u(!c),className:"text-gray-600 dark:text-gray-200 focus:outline-none",children:c?l.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):l.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),c&&l.jsx("div",{className:"md:hidden bg-white dark:bg-gray-800 shadow-lg mt-2",children:l.jsxs("div",{className:"px-4 py-2 space-y-3",children:[l.jsx("button",{onClick:()=>f("home"),className:"block w-full text-left py-2 font-medium hover:text-blue-600",children:"Home"}),l.jsx("button",{onClick:()=>f("about"),className:"block w-full text-left py-2 font-medium hover:text-blue-600",children:"Über LkSG"}),l.jsx("button",{onClick:()=>f("features"),className:"block w-full text-left py-2 font-medium hover:text-blue-600",children:"Features"}),l.jsx("button",{onClick:()=>f("demo"),className:"block w-full text-left py-2 font-medium hover:text-blue-600",children:"Produkt"}),l.jsx("button",{onClick:()=>f("cta"),className:"block w-full text-center py-2 mt-4 bg-blue-600 text-white rounded-lg font-medium",children:"Beta-Zugang"})]})})]}),l.jsxs("section",{id:"home",className:"relative pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:[l.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-b from-blue-50 to-white dark:from-gray-800 dark:to-gray-900"}),l.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-20",children:[l.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-6 leading-tight",children:l.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-blue-400",children:["Sichere Lieferketten.",l.jsx("br",{}),"Einfache Compliance."]})}),l.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl max-w-3xl mx-auto text-gray-600 dark:text-gray-300 mb-12",children:["ChainGuard ist die digitale Plattform für LkSG-Compliance –",l.jsx("span",{className:"font-semibold",children:" speziell für Mittelstand und wachsende Unternehmen."})]}),l.jsxs("button",{onClick:()=>f("cta"),className:"inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition transform hover:scale-105 shadow-lg",children:["Beta-Zugang sichern",l.jsx(Oi,{className:"ml-2 h-5 w-5"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transform transition hover:translate-y-1 hover:shadow-xl",children:[l.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"3000+"}),l.jsx("div",{className:"font-medium",children:"Unternehmen betroffen"})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transform transition hover:translate-y-1 hover:shadow-xl",children:[l.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"2026"}),l.jsx("div",{className:"font-medium",children:"Jahr der vollen Umsetzung"})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transform transition hover:translate-y-1 hover:shadow-xl",children:[l.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"90%"}),l.jsx("div",{className:"font-medium",children:"Zeit- und Ressourceneinsparung"})]})]})]})]}),l.jsx("section",{id:"about",className:"py-24 px-4 sm:px-6 lg:px-8 bg-white dark:bg-gray-900",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Was ist das Lieferkettengesetz?"}),l.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto mb-8"})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-lg leading-relaxed mb-6 text-gray-700 dark:text-gray-300",children:["Das ",l.jsx("strong",{children:"Lieferkettensorgfaltspflichtengesetz (LkSG)"})," verpflichtet Unternehmen, menschenrechtliche und umweltbezogene Risiken in ihren globalen Lieferketten zu identifizieren, zu minimieren und transparent zu dokumentieren."]}),l.jsxs("p",{className:"text-lg leading-relaxed mb-6 text-gray-700 dark:text-gray-300",children:["Ab 2026 gilt das Gesetz verpflichtend für ",l.jsx("strong",{children:"alle Unternehmen ab 1.000 Mitarbeitenden"}),". Bei Verstößen drohen empfindliche Bußgelder von bis zu 2% des jährlichen Konzernumsatzes."]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(vi,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),l.jsx("span",{children:"Risikomanagement in der gesamten Lieferkette"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(vi,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),l.jsx("span",{children:"Umfangreiche Dokumentationspflichten"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(vi,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),l.jsx("span",{children:"Regelmäßige Berichterstattung"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(vi,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),l.jsx("span",{children:"Einrichtung eines Beschwerdeverfahrens"})]})]})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-gray-800 rounded-2xl p-8 shadow-xl",children:[l.jsx("h3",{className:"text-xl font-bold mb-6 text-blue-600",children:"Compliance-Terminplan"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-600 text-white rounded-full h-10 w-10 flex items-center justify-center mr-4 flex-shrink-0",children:l.jsx(vi,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold",children:"2023"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unternehmen ab 3.000 Mitarbeitenden"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-500 text-white rounded-full h-10 w-10 flex items-center justify-center mr-4 flex-shrink-0",children:l.jsx(vi,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold",children:"2024"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unternehmen ab 1.000 Mitarbeitenden"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-400 text-white rounded-full h-10 w-10 flex items-center justify-center mr-4 flex-shrink-0",children:l.jsx(Oi,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold",children:"2026"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"EU-Richtlinie: Ausweitung auf weitere Unternehmen"})]})]})]})]})]})]})}),l.jsx("section",{id:"features",className:"py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-blue-50 to-white dark:from-gray-800 dark:to-gray-900",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Warum ChainGuard?"}),l.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto mb-8"}),l.jsx("p",{className:"text-lg max-w-3xl mx-auto text-gray-700 dark:text-gray-300",children:"ChainGuard bietet alles, was du für eine reibungslose LkSG-Compliance brauchst – ganz ohne Vorwissen, hochskalierbar und mit minimalem Aufwand."})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map((y,v)=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transition transform hover:-translate-y-1 hover:shadow-xl",children:[l.jsx("div",{className:"bg-blue-50 dark:bg-gray-700 rounded-full p-3 inline-block mb-4",children:y.icon}),l.jsx("h3",{className:"text-xl font-bold mb-3",children:y.title}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:y.description})]},v))}),l.jsxs("div",{className:"mt-24",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Das sagen unsere Kunden"}),l.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:p.map((y,v)=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[l.jsx("div",{className:"text-yellow-400 flex mb-4",children:[...Array(5)].map((w,N)=>l.jsx("svg",{className:"h-5 w-5 fill-current",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},N))}),l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6 italic",children:['"',y.quote,'"']}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:y.author}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:y.position})]})]},v))})]})]})}),l.jsx("section",{id:"demo",className:"py-24 px-4 sm:px-6 lg:px-8 bg-white dark:bg-gray-900",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"So sieht ChainGuard aus"}),l.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto mb-8"}),l.jsx("p",{className:"text-lg max-w-3xl mx-auto text-gray-700 dark:text-gray-300",children:"Eine intuitive Oberfläche mit allen Tools, die du für die LkSG-Compliance benötigst."})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-blue-600 to-blue-400 rounded-3xl blur-lg opacity-20"}),l.jsxs("div",{className:"relative bg-white dark:bg-gray-800 shadow-2xl rounded-2xl overflow-hidden",children:[l.jsx("img",{src:"/chainguard-mockup.png",alt:"ChainGuard Dashboard",className:"w-full h-auto"}),l.jsx("div",{className:"absolute inset-0 bg-black opacity-5 dark:opacity-30 pointer-events-none"})]}),l.jsxs("div",{className:"mt-12 grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-blue-50 dark:bg-gray-800 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-blue-600 font-bold text-xl",children:"1"})}),l.jsx("h3",{className:"font-bold mb-2",children:"Übersichtliches Dashboard"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Alle wichtigen Kennzahlen auf einen Blick"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-blue-50 dark:bg-gray-800 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-blue-600 font-bold text-xl",children:"2"})}),l.jsx("h3",{className:"font-bold mb-2",children:"Lieferantenverwaltung"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Einfache Kategorisierung und Bewertung"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-blue-50 dark:bg-gray-800 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-blue-600 font-bold text-xl",children:"3"})}),l.jsx("h3",{className:"font-bold mb-2",children:"Risikomanagement"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Automatische Alerts bei potentiellen Problemen"})]})]})]})]})}),l.jsx("section",{id:"cta",className:"py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-blue-500 to-blue-600 text-white",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Bereit für deine LkSG-Compliance?"}),l.jsx("p",{className:"text-xl mb-12",children:"Sichere dir jetzt deinen exklusiven Beta-Zugang und sei einer der Ersten, die ChainGuard nutzen können."}),t?l.jsxs("div",{className:"bg-white text-blue-600 rounded-xl p-8 max-w-lg mx-auto shadow-lg",children:[l.jsx("div",{className:"text-3xl mb-4",children:"🎉"}),l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Danke für deine Anmeldung!"}),l.jsx("p",{children:"Wir melden uns in Kürze bei dir, sobald dein Beta-Zugang bereit ist. Schau derweil auch in deinem Posteingang nach."})]}):l.jsxs("form",{onSubmit:d,className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("input",{type:"email",required:!0,placeholder:"Deine E-Mail-Adresse",className:"px-5 py-4 rounded-xl text-gray-900 w-full text-lg",value:n,onChange:y=>e(y.target.value)}),l.jsx("button",{type:"submit",className:"bg-white text-blue-600 hover:bg-blue-50 px-8 py-4 rounded-xl font-semibold text-lg transition transform hover:scale-105 flex-shrink-0",children:"Beta-Zugang sichern"})]}),l.jsx("p",{className:"mt-4 text-sm text-blue-100",children:"Kein Spam. Du kannst dich jederzeit wieder abmelden."})]})]})}),l.jsx("section",{className:"py-24 px-4 sm:px-6 lg:px-8 bg-white dark:bg-gray-900",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Häufig gestellte Fragen"}),l.jsx("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Für wen ist ChainGuard geeignet?"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"ChainGuard ist ideal für mittelständische Unternehmen und wachsende Firmen, die vom Lieferkettengesetz betroffen sind oder sein werden. Besonders geeignet für Unternehmen ohne spezialisierte Compliance-Abteilung."})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Wie lange dauert die Implementierung?"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Die Ersteinrichtung dauert nur wenige Stunden. Die vollständige Integration deiner Lieferanten ist abhängig von deren Anzahl, typischerweise aber innerhalb von 1-2 Wochen abgeschlossen."})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Wie hoch sind die Kosten?"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"ChainGuard bietet flexible Preismodelle, die sich nach der Größe deines Unternehmens und der Anzahl deiner Lieferanten richten. Als Beta-Tester erhältst du besonders attraktive Konditionen."})]})]})]})}),l.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-blue-600 mb-4",children:"ChainGuard"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Die Plattform für einfache und effiziente LkSG-Compliance."}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:l.jsx("svg",{className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),l.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:l.jsx("svg",{className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),l.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:l.jsx("svg",{className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),l.jsx("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:l.jsx("svg",{className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold mb-4",children:"Links"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Über uns"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Funktionen"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Preise"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"Blog"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600",children:"FAQ"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold mb-4",children:"Kontakt"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("svg",{className:"h-6 w-6 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"info@chainguard.de"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("svg",{className:"h-6 w-6 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"+49 123 456789"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsxs("svg",{className:"h-6 w-6 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Mustergasse 123",l.jsx("br",{}),"10115 Berlin"]})]})]})]})]}),l.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 md:mb-0",children:"© 2025 ChainGuard. Alle Rechte vorbehalten. Made with ❤️ in Germany."}),l.jsxs("div",{className:"flex space-x-6",children:[l.jsx("a",{href:"/impressum",className:"text-gray-600 dark:text-gray-400 text-sm hover:text-blue-600",children:"Impressum"}),l.jsx("a",{href:"/datenschutz",className:"text-gray-600 dark:text-gray-400 text-sm hover:text-blue-600",children:"Datenschutz"}),l.jsx("a",{href:"/agb",className:"text-gray-600 dark:text-gray-400 text-sm hover:text-blue-600",children:"AGB"})]})]})})]})})]})}function r6(){return l.jsxs("div",{className:"max-w-3xl mx-auto p-6 text-sm text-gray-800",children:[l.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Datenschutzerklärung"}),l.jsx("p",{className:"mb-2",children:"Der Schutz Ihrer persönlichen Daten ist uns ein besonderes Anliegen. Wir verarbeiten Ihre Daten daher ausschließlich auf Grundlage der gesetzlichen Bestimmungen (DSGVO, TKG 2003)."}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Allgemeines zur Datenverarbeitung"}),l.jsx("p",{className:"mb-2",children:"Personenbezogene Daten werden nur im notwendigen Umfang gespeichert, verarbeitet und nicht ohne Ihre ausdrückliche Zustimmung weitergegeben."}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"2. Kontaktaufnahme"}),l.jsx("p",{className:"mb-2",children:"Bei Kontaktaufnahme mit uns (z. B. via Formular oder E-Mail) werden Ihre Angaben zwecks Bearbeitung der Anfrage gespeichert."}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Ihre Rechte"}),l.jsxs("ul",{className:"list-disc list-inside mb-4",children:[l.jsx("li",{children:"Auskunft über Ihre gespeicherten Daten"}),l.jsx("li",{children:"Berichtigung, Löschung oder Einschränkung der Verarbeitung"}),l.jsx("li",{children:"Widerspruch gegen die Verarbeitung"}),l.jsx("li",{children:"Datenübertragbarkeit"}),l.jsx("li",{children:"Beschwerde bei der Datenschutzbehörde"})]}),l.jsxs("p",{children:["Bei Fragen zum Datenschutz erreichen Sie uns unter"," ",l.jsx("a",{href:"mailto:kontakt@chainguard.de",className:"text-blue-600 underline",children:"kontakt@chainguard.de"}),"."]})]})}function s6(){return l.jsxs("div",{className:"max-w-3xl mx-auto p-6 text-sm text-gray-800",children:[l.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Impressum"}),l.jsx("p",{className:"mb-2",children:"Angaben gemäß § 5 TMG:"}),l.jsxs("p",{className:"mb-2",children:["ChainGuard GmbH",l.jsx("br",{}),"Musterstraße 123",l.jsx("br",{}),"12345 Berlin",l.jsx("br",{}),"Deutschland"]}),l.jsxs("p",{className:"mb-4",children:["Vertreten durch: Noah Meier",l.jsx("br",{}),"E-Mail: ",l.jsx("a",{href:"mailto:kontakt@chainguard.de",className:"text-blue-600 underline",children:"kontakt@chainguard.de"})]}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV:"}),l.jsxs("p",{children:["Noah Meier",l.jsx("br",{}),"Musterstraße 123",l.jsx("br",{}),"12345 Berlin"]}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"Haftungsausschluss"}),l.jsx("p",{className:"mb-2",children:"Trotz sorgfältiger inhaltlicher Kontrolle übernehmen wir keine Haftung für die Inhalte externer Links. Für den Inhalt der verlinkten Seiten sind ausschließlich deren Betreiber verantwortlich."}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"Streitschlichtung"}),l.jsxs("p",{className:"mb-2",children:["Die Europäische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit:"," ",l.jsx("a",{href:"https://ec.europa.eu/consumers/odr/",className:"text-blue-600 underline",target:"_blank",rel:"noreferrer",children:"https://ec.europa.eu/consumers/odr/"})]})]})}function i6(){const[n,e]=re.useState(""),[t,r]=re.useState(""),[s,i]=re.useState([]),[a,o]=re.useState(!1),[c,u]=re.useState(!1),[d,f]=re.useState(!1);re.useEffect(()=>{(async()=>{const{data:{user:w}}=await Te.auth.getUser();if(w){f(!0);const{data:N}=await Te.from("profiles").select("role").eq("id",w.id).single();o(N?.role==="admin"),N?.role==="admin"&&g()}})()},[]);const g=async()=>{const{data:v,error:w}=await Te.from("whistleblower_reports").select("*").order("created_at",{ascending:!1});w||i(v||[])},p=async v=>{if(v.preventDefault(),!n.trim()){r("Bitte gib eine Nachricht ein.");return}if(c){const{error:w}=await Te.from("whistleblower_reports").insert([{message:n,status:"Offen"}]);w?r("Fehler beim Absenden der Meldung. Bitte versuche es erneut."):(r("Vielen Dank für deine anonyme Meldung!"),e(""),u(!1),a&&g())}else u(!0)},y=async(v,w)=>{const{error:N}=await Te.from("whistleblower_reports").update({status:w,updated_at:new Date().toISOString()}).eq("id",v);N||g()};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-6",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-2xl w-full",children:[l.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Anonyme Meldung"}),l.jsxs("form",{onSubmit:p,className:"flex flex-col gap-4 mb-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{className:"w-full border border-gray-300 rounded-md p-4 resize-none focus:ring-2 focus:ring-blue-300 focus:border-transparent",rows:"6",placeholder:"Beschreibe hier den Vorfall...",value:n,onChange:v=>e(v.target.value),required:!0}),t&&!c&&l.jsx("p",{className:"mt-2 text-sm text-red-600",children:t})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded shadow-md transition disabled:bg-blue-400",disabled:!n.trim()&&!c,children:c?"Bestätigen und senden":"Sicher übermitteln"}),c&&l.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Bist du sicher? Diese Meldung wird anonym übermittelt und kann nicht zurückgezogen werden.",l.jsx("button",{type:"button",onClick:()=>u(!1),className:"ml-2 text-red-600 hover:text-red-800",children:"Abbrechen"})]}),t&&!c&&l.jsx("div",{className:"mt-4 text-center text-sm text-green-700",children:t})]}),d&&a&&s.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Eingereichte Meldungen"}),l.jsx("div",{className:"space-y-4",children:s.map(v=>l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[l.jsx("p",{className:"text-gray-700",children:v.message}),l.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[l.jsxs("span",{children:["Status: ",v.status]}),l.jsxs("span",{children:["Datum: ",new Date(v.created_at).toLocaleDateString()]}),v.updated_at&&l.jsxs("span",{children:["Letzte Änderung: ",new Date(v.updated_at).toLocaleDateString()]})]}),l.jsxs("select",{value:v.status,onChange:w=>y(v.id,w.target.value),className:"mt-2 p-2 border border-gray-300 rounded-lg",children:[l.jsx("option",{value:"Offen",children:"Offen"}),l.jsx("option",{value:"In Bearbeitung",children:"In Bearbeitung"}),l.jsx("option",{value:"Abgeschlossen",children:"Abgeschlossen"})]})]},v.id))})]}),d&&a&&s.length===0&&l.jsx("p",{className:"text-center text-gray-500 mt-4",children:"Keine Meldungen vorhanden."})]})})}function a6(){return l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-6",children:[l.jsx("h1",{className:"text-4xl font-bold text-green-600 mb-6",children:"Danke für deine Anmeldung!"}),l.jsx("p",{className:"text-lg text-gray-700 mb-8 text-center",children:"Wir haben deine Anfrage erhalten. Wir melden uns in Kürze bei dir."}),l.jsx(Ic,{to:"/",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-md shadow-md transition",children:"Zurück zur Startseite"})]})}function o6({user:n}){const[e,t]=re.useState("overview"),[r,s]=re.useState(!0),[i,a]=re.useState(!0),[o,c]=re.useState(!0),[u,d]=re.useState(!0),[f,g]=re.useState(!0),[p,y]=re.useState(null),[v,w]=re.useState([]),[N,P]=re.useState(null),[M,W]=re.useState([]),[K,le]=re.useState([]),[X,j]=re.useState([]),[D,H]=re.useState(!1),[A,S]=re.useState(""),[q,O]=re.useState(!0);As(),re.useEffect(()=>{const k=async()=>{console.log("Fetching suppliers for user:",n?.id);try{if(!n?.id)throw new Error("No user ID provided");const{data:T,error:I}=await Te.from("suppliers").select("id, name").eq("user_id",n.id).is("parent_supplier_id",null);if(console.log("Suppliers fetched:",T,"Error:",I),I)throw I;w(T||[]),T?.length>0?(console.log("Setting selectedSupplierId to:",T[0].id),P(T[0].id)):console.log("No suppliers found")}catch(T){console.error("Error fetching suppliers:",T),S(T.message||"Fehler beim Laden der Lieferanten.")}finally{O(!1)}};n?.id?k():(console.log("No user ID, cannot fetch suppliers"),S("Benutzer nicht authentifiziert."),O(!1))},[n]),re.useEffect(()=>{const k=async()=>{if(console.log("Fetching supplier data for supplier_id:",N),!N){console.log("No selectedSupplierId, skipping fetch");return}try{O(!0);const{data:T,error:I}=await Te.from("suppliers").select("id, name, country, industry, tier, risk_score, risk_level, last_updated, parent_supplier_id").eq("id",N).single();if(console.log("Supplier data:",T,"Error:",I),I)throw I;const{data:Y,error:Q}=await Te.from("suppliers").select("id, name, country, industry, tier, risk_score, risk_level, parent_supplier_id").eq("user_id",n.id).not("parent_supplier_id","is",null);if(console.log("Sub-suppliers:",Y,"Error:",Q),Q)throw Q;let fe=null;const{data:ce,error:ue}=await Te.from("risk_factors").select("country, industry, company, position").eq("supplier_id",T.id).single();if(console.log("Risk factors:",ce,"Error:",ue),ue&&ue.code!=="PGRST116")throw ue;fe=ce||{country:7.2,industry:6.5,company:5.4,position:3.8};const{data:ke,error:we}=await Te.from("recommendations").select("id, supplier_id, text, priority, effort, status").eq("supplier_id",T.id);if(console.log("Recommendations:",ke,"Error:",we),we)throw we;const{data:Fe,error:Le}=await Te.from("risk_history").select("risk_score, risk_level, updated_at").eq("supplier_id",T.id).order("updated_at",{ascending:!1});if(console.log("History:",Fe,"Error:",Le),Le)throw Le;const{data:qe,error:me}=await Te.from("documents").select("id, supplier_id, file_name, file_type, uploaded_at").eq("supplier_id",T.id);if(console.log("Documents:",qe,"Error:",me),me)throw me;const U=Ee=>(Y||[]).filter(Ne=>Ne.parent_supplier_id===Ee).map(Ne=>({...Ne,subSuppliers:U(Ne.id)})),$e={...T,subSuppliers:U(T.id),factors:fe,methodology:{weights:{country:40,industry:30,company:20,position:10},updateInterval:"Monatlich",description:"Die Risikobewertung basiert auf einer gewichteten Analyse von Länderrisiko (40%), Branchenrisiko (30%), Unternehmensrisiko (20%) und Positionsrisiko (10%). Datenquellen umfassen globale Indizes und Lieferantendaten. Aktualisierung erfolgt monatlich."}};console.log("Setting supplier:",$e),y($e),W(ke||[]),le(Fe||[]),j(qe||[])}catch(T){console.error("Error fetching supplier data:",T),S(T.message||"Fehler beim Laden der Analyse-Daten.")}finally{O(!1)}};n?.id&&N?k():(console.log("Skipping fetchSupplierData - user.id:",n?.id,"selectedSupplierId:",N),O(!1))},[n,N]),re.useEffect(()=>{if(!p)return;const k=Te.channel("recommendations").on("postgres_changes",{event:"INSERT",schema:"public",table:"recommendations",filter:`supplier_id=eq.${p.id}`},T=>{W([T.new,...M])}).subscribe();return()=>Te.removeChannel(k)},[M,p]);const V=async(k,T)=>{try{const{error:I}=await Te.from("recommendations").update({status:T}).eq("id",k);if(I)throw I;W(M.map(Y=>Y.id===k?{...Y,status:T}:Y))}catch(I){console.error("Fehler beim Aktualisieren der Empfehlung:",I),S(I.message||"Fehler beim Aktualisieren der Empfehlung.")}},ee=()=>{if(!p)return;H(!0);const k=new nt;k.setFontSize(16),k.text("Lieferanten-Risikobewertung",20,20),k.setFontSize(12),k.text(`Lieferant: ${p.name}`,20,30),k.text(`Land: ${p.country}`,20,40),k.text(`Branche: ${p.industry}`,20,50),k.text(`Tier: ${p.tier}`,20,60),k.text(`Risikopunktzahl: ${p.risk_score}/100 (${p.risk_level})`,20,70),k.text(`Letzte Aktualisierung: ${new Date(p.last_updated).toLocaleDateString("de-DE")}`,20,80),k.setFontSize(14),k.text("Risikofaktoren",20,100),k.setFontSize(12),k.text(`Länderrisiko: ${p.factors.country}/10`,20,110),k.text(`Branchenrisiko: ${p.factors.industry}/10`,20,120),k.text(`Unternehmensrisiko: ${p.factors.company}/10`,20,130),k.text(`Positionsrisiko: ${p.factors.position}/10`,20,140),k.setFontSize(14),k.text("Handlungsempfehlungen",20,160);let T=170;M.forEach((I,Y)=>{k.setFontSize(12),k.text(`${Y+1}. ${I.text} (${I.priority}, ${I.effort}) - Status: ${I.status}`,20,T),T+=10}),k.save(`${p.name}_RiskAssessment.pdf`),H(!1)},B={Hoch:"text-red-600 bg-red-50 border-red-200",Mittel:"text-amber-600 bg-amber-50 border-amber-200",Niedrig:"text-green-600 bg-green-50 border-green-200"},Z={high:"bg-red-50 text-red-700 border-red-200",medium:"bg-amber-50 text-amber-700 border-amber-200",low:"bg-blue-50 text-blue-700 border-blue-200"},ne={high:"bg-gray-100 text-gray-700",medium:"bg-gray-50 text-gray-600",low:"bg-white text-gray-500"},de={Offen:"bg-gray-100 text-gray-700","In Bearbeitung":"bg-yellow-100 text-yellow-700",Abgeschlossen:"bg-green-100 text-green-700"},xe=(k,T=0)=>l.jsxs("div",{className:`ml-${T*4}`,children:[l.jsxs("div",{className:`flex items-center gap-2 p-2 border border-gray-200 rounded-lg ${B[k.risk_level]}`,children:[l.jsx("span",{className:"font-medium",children:k.name}),l.jsxs("span",{className:"text-xs",children:["(",k.tier,", ",k.risk_score,"/100)"]})]}),k.subSuppliers&&k.subSuppliers.length>0&&l.jsx("div",{className:"mt-2",children:k.subSuppliers.map(I=>xe(I,T+1))})]},k.id);return q?l.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[l.jsx(Xs,{}),l.jsxs("div",{className:"flex-1 ml-72 p-10 text-center text-gray-600",children:[l.jsx(mh,{size:24,className:"animate-spin mx-auto"}),l.jsx("p",{className:"mt-2",children:"Lade Analyse-Daten..."})]})]}):A?l.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[l.jsx(Xs,{}),l.jsx("div",{className:"flex-1 ml-72 p-6",children:l.jsx("div",{className:"max-w-6xl mx-auto",children:l.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Nn,{size:16,className:"mr-2"}),A]})})})]}):v.length?p?l.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[l.jsx(Xs,{}),l.jsx("div",{className:"flex-1 ml-72",children:l.jsx("div",{className:"max-w-6xl mx-auto p-6",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4 text-white",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"Lieferanten-Risikobewertung"}),l.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Automatisierte LKG-konforme Risikoanalyse"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${B[p.risk_level]}`,children:[p.risk_score,"/100 - ",p.risk_level,"es Risiko"]}),l.jsx("button",{className:"p-2 hover:bg-blue-700 rounded-full",children:l.jsx(M_,{size:18})})]})]})}),l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsxs("select",{value:N||"",onChange:k=>P(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm w-full max-w-xs",children:[l.jsx("option",{value:"",children:"Lieferant auswählen"}),v.map(k=>l.jsx("option",{value:k.id,children:k.name},k.id))]})}),l.jsxs("div",{className:"border-b border-gray-200 px-6 flex",children:[l.jsx("button",{className:`py-3 px-4 font-medium text-sm border-b-2 ${e==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>t("overview"),children:"Übersicht"}),l.jsx("button",{className:`py-3 px-4 font-medium text-sm border-b-2 ${e==="factors"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>t("factors"),children:"Risikofaktoren"}),l.jsx("button",{className:`py-3 px-4 font-medium text-sm border-b-2 ${e==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>t("history"),children:"Historischer Verlauf"}),l.jsx("button",{className:`py-3 px-4 font-medium text-sm border-b-2 ${e==="documents"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>t("documents"),children:"Nachweise"})]}),e==="overview"&&l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:p.name}),l.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full",children:p.tier})]}),l.jsxs("p",{className:"text-gray-600 text-sm",children:[p.industry," • ",p.country]}),l.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["Letzte Bewertung: ",new Date(p.last_updated).toLocaleDateString("de-DE")]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{className:"text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg flex items-center gap-2",children:[l.jsx(G_,{size:16}),"Neu bewerten"]}),l.jsx("button",{className:"text-sm font-medium text-gray-600 border border-gray-300 hover:bg-gray-50 px-4 py-2 rounded-lg",children:"Details"}),l.jsxs("button",{onClick:ee,disabled:D,className:"text-sm font-medium text-white bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg flex items-center gap-2 disabled:bg-green-400",children:[D?l.jsx(mh,{size:16,className:"animate-spin"}):l.jsx(js,{size:16}),"PDF exportieren"]})]})]}),l.jsxs("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mi,{size:18,className:"text-blue-500"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Lieferketten-Hierarchie"}),l.jsxs("div",{className:"group relative cursor-help",children:[l.jsx(Di,{size:14,className:"text-gray-400"}),l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-800 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none",children:"Hierarchie der Lieferkette, einschließlich Tier-2- und Tier-3-Lieferanten."})]})]}),l.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>d(!u),children:l.jsx(_s,{size:18,className:`transform transition-transform ${u?"rotate-180":""}`})})]}),u&&l.jsx("div",{className:"p-4 space-y-2",children:xe(p)})]}),l.jsxs("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bi,{size:18,className:"text-amber-500"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Risikofaktoren"}),l.jsxs("div",{className:"group relative cursor-help",children:[l.jsx(Di,{size:14,className:"text-gray-400"}),l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-800 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none",children:"Die wichtigsten Faktoren, die zu dieser Risikobewertung beitragen"})]})]}),l.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>s(!r),children:l.jsx(_s,{size:18,className:`transform transition-transform ${r?"rotate-180":""}`})})]}),r&&l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("div",{children:l.jsx("div",{className:"aspect-square bg-gray-50 rounded-lg border border-gray-200 flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full h-full relative rounded-full bg-blue-50 border border-blue-100 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-2 rounded-full bg-blue-100 border border-blue-200"}),l.jsx("div",{className:"absolute inset-8 rounded-full bg-blue-200 border border-blue-300"}),l.jsx("div",{className:"absolute inset-14 rounded-full bg-blue-300 border border-blue-400"}),l.jsx("div",{className:"absolute inset-20 rounded-full bg-blue-400 border border-blue-500 flex items-center justify-center text-white font-bold text-xl",children:p.risk_score}),l.jsx("div",{className:"absolute top-10 right-16 w-3 h-3 bg-amber-500 rounded-full"}),l.jsx("div",{className:"absolute top-1/4 left-10 w-3 h-3 bg-red-500 rounded-full"}),l.jsx("div",{className:"absolute bottom-10 left-1/4 w-3 h-3 bg-amber-500 rounded-full"}),l.jsx("div",{className:"absolute bottom-1/4 right-10 w-3 h-3 bg-green-500 rounded-full"})]})})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 border border-red-100 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Länderrisiko"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Menschenrechte, Korruption, Stabilität"})]}),l.jsxs("div",{className:"w-16 text-center",children:[l.jsx("span",{className:"text-lg font-bold text-red-600",children:p.factors.country}),l.jsx("span",{className:"text-xs text-gray-400",children:"/10"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-amber-50 border border-amber-100 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Branchenrisiko"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Ressourcen, Arbeitsintensität"})]}),l.jsxs("div",{className:"w-16 text-center",children:[l.jsx("span",{className:"text-lg font-bold text-amber-600",children:p.factors.industry}),l.jsx("span",{className:"text-xs text-gray-400",children:"/10"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-amber-50 border border-amber-100 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Unternehmensrisiko"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Größe, Zertifizierungen, Historie"})]}),l.jsxs("div",{className:"w-16 text-center",children:[l.jsx("span",{className:"text-lg font-bold text-amber-600",children:p.factors.company}),l.jsx("span",{className:"text-xs text-gray-400",children:"/10"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 border border-green-100 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Positionsrisiko"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Tier-Level, Strategische Bedeutung"})]}),l.jsxs("div",{className:"w-16 text-center",children:[l.jsx("span",{className:"text-lg font-bold text-green-600",children:p.factors.position}),l.jsx("span",{className:"text-xs text-gray-400",children:"/10"})]})]})]})]})})]}),l.jsxs("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mi,{size:18,className:"text-blue-500"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Risikoanalyse-Methodik"}),l.jsxs("div",{className:"group relative cursor-help",children:[l.jsx(Di,{size:14,className:"text-gray-400"}),l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-800 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none",children:"Methodik zur Berechnung der Risikobewertung"})]})]}),l.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>g(!f),children:l.jsx(_s,{size:18,className:`transform transition-transform ${f?"rotate-180":""}`})})]}),f&&l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsx("p",{className:"text-sm text-gray-600",children:p.methodology.description}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Länderrisiko-Gewichtung"}),l.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.methodology.weights.country,"%"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Branchenrisiko-Gewichtung"}),l.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.methodology.weights.industry,"%"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Unternehmensrisiko-Gewichtung"}),l.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.methodology.weights.company,"%"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Positionsrisiko-Gewichtung"}),l.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.methodology.weights.position,"%"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Aktualisierungsintervall"}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.methodology.updateInterval})]})]})]})]}),l.jsxs("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mi,{size:18,className:"text-blue-500"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"LKG-Bewertung"}),l.jsxs("div",{className:"group relative cursor-help",children:[l.jsx(Di,{size:14,className:"text-gray-400"}),l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-800 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none",children:"Einordnung gemäß Lieferkettengesetz-Anforderungen"})]})]}),l.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>a(!i),children:l.jsx(_s,{size:18,className:`transform transition-transform ${i?"rotate-180":""}`})})]}),i&&l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bi,{size:18,className:"text-amber-500"}),l.jsx("span",{className:"font-medium text-amber-800",children:"Mittleres LKG-Risiko"})]}),l.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-amber-100 text-amber-800",children:"Prüfung erforderlich"})]}),l.jsx("p",{className:"text-sm text-amber-700 mt-2",children:"Dieser Lieferant benötigt weitere Überprüfungen und Dokumentation, um vollständige LKG-Konformität zu gewährleisten."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Menschenrechte"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:"65%"}})}),l.jsx("span",{className:"text-xs text-gray-500",children:"65%"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Risiken bzgl. Arbeitsbedingungen und Vereinigungsfreiheit"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Umweltschutz"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-red-500 h-2.5 rounded-full",style:{width:"78%"}})}),l.jsx("span",{className:"text-xs text-gray-500",children:"78%"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Hohe Umweltbelastung in der Elektronikfertigung"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Korruptionsbekämpfung"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:"60%"}})}),l.jsx("span",{className:"text-xs text-gray-500",children:"60%"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Mittleres Risiko aufgrund regionaler Faktoren"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Transparenz"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:"40%"}})}),l.jsx("span",{className:"text-xs text-gray-500",children:"40%"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Ausreichende Berichts- und Nachverfolgungsdaten"})]})]})]})]}),l.jsxs("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fn,{size:18,className:"text-green-500"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Handlungsempfehlungen"}),l.jsxs("div",{className:"group relative cursor-help",children:[l.jsx(Di,{size:14,className:"text-gray-400"}),l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-800 rounded text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none",children:"Maßnahmen zur Risikominimierung"})]})]}),l.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>c(!o),children:l.jsx(_s,{size:18,className:`transform transition-transform ${o?"rotate-180":""}`})})]}),o&&l.jsx("div",{className:"p-4 space-y-3",children:M.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Keine Empfehlungen verfügbar."}):M.map(k=>l.jsxs("div",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-900",children:k.text}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Z[k.priority]}`,children:["Priorität: ",k.priority]}),l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${ne[k.effort]}`,children:["Aufwand: ",k.effort]}),l.jsxs("select",{value:k.status,onChange:T=>V(k.id,T.target.value),className:`text-xs px-2 py-0.5 rounded border-0 ${de[k.status]}`,children:[l.jsx("option",{value:"Offen",children:"Offen"}),l.jsx("option",{value:"In Bearbeitung",children:"In Bearbeitung"}),l.jsx("option",{value:"Abgeschlossen",children:"Abgeschlossen"})]})]})]}),l.jsx("button",{className:"text-gray-500 hover:text-blue-600",children:l.jsx(Oi,{size:16})})]},k.id))})]})]}),e==="factors"&&l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detaillierte Risikofaktoren"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Länderrisiko: ",p.factors.country,"/10"]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Basierend auf Menschenrechtsindizes, Korruptionswahrnehmung und politischer Stabilität in ",p.country,"."]})]}),l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Branchenrisiko: ",p.factors.industry,"/10"]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Berücksichtigt Arbeitsintensität und Ressourcenabhängigkeit in der ",p.industry,"-Branche."]})]}),l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Unternehmensrisiko: ",p.factors.company,"/10"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bewertet Unternehmensgröße, Zertifizierungen und bisherige Compliance-Historie."})]}),l.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Positionsrisiko: ",p.factors.position,"/10"]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Abhängig von der Position in der Lieferkette (Tier ",p.tier,") und strategischer Bedeutung."]})]})]})]}),e==="history"&&l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Historischer Risikoverlauf"}),K.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Kein Verlauf verfügbar."}):l.jsx("div",{className:"space-y-3",children:K.map((k,T)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${B[k.risk_level]}`}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm text-gray-900",children:["Risikopunktzahl: ",k.risk_score,"/100 (",k.risk_level,")"]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Aktualisiert am: ",new Date(k.updated_at).toLocaleDateString("de-DE")]})]})]},T))})]}),e==="documents"&&l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nachweise und Dokumente"}),X.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Keine Dokumente verfügbar."}):l.jsx("div",{className:"space-y-3",children:X.map(k=>l.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[l.jsx(b_,{size:16,className:"text-gray-500"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-900",children:k.file_name}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Hochgeladen am: ",new Date(k.uploaded_at).toLocaleDateString("de-DE")," (",k.file_type,")"]})]}),l.jsx("button",{className:"text-gray-500 hover:text-blue-600",children:l.jsx(ArrowDown,{size:16})})]},k.id))})]})]})})})]}):l.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[l.jsx(Xs,{}),l.jsx("div",{className:"flex-1 ml-72 p-6",children:l.jsx("div",{className:"max-w-6xl mx-auto",children:l.jsxs("div",{className:"bg-yellow-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Mi,{size:16,className:"mr-2"}),"Keine Lieferantendaten verfügbar. Bitte wählen Sie einen anderen Lieferanten oder aktualisieren Sie die Daten."]})})})]}):l.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[l.jsx(Xs,{}),l.jsx("div",{className:"flex-1 ml-72 p-6",children:l.jsx("div",{className:"max-w-6xl mx-auto",children:l.jsxs("div",{className:"bg-yellow-600 text-white px-4 py-2 rounded-lg flex items-center",children:[l.jsx(Mi,{size:16,className:"mr-2"}),"Keine Lieferanten gefunden. Bitte fügen Sie einen Lieferanten hinzu."]})})})]})}function l6(){const[n,e]=re.useState(null),[t,r]=re.useState(!1),[s,i]=re.useState([]),[a,o]=re.useState(null),[c,u]=re.useState(""),[d,f]=re.useState(""),[g,p]=re.useState(""),[y,v]=re.useState(()=>localStorage.getItem("chainguard_kommunikation_onboarding")!=="dismissed"),[w,N]=re.useState([]),[P,M]=re.useState([]),[W,K]=re.useState([]),[le,X]=re.useState(!1),[j,D]=re.useState({title:"",assignedTo:"",dueDate:"",priority:"medium",status:"pending"}),[H,A]=re.useState(!1),[S,q]=re.useState({title:"",fileType:"PDF",status:"Entwurf",version:"1.0",file:null}),[O,V]=re.useState("Alle"),[ee,B]=re.useState("Alle"),[Z,ne]=re.useState("Alle"),de=re.useRef(null),xe=re.useRef(null);re.useEffect(()=>{(async()=>{const{data:Ae,error:G}=await Te.auth.getUser();if(Ae?.user){e(Ae.user);const{data:ve}=await Te.from("profiles").select("role").eq("id",Ae.user.id).single();r(ve?.role==="admin")}})()},[]),re.useEffect(()=>{(async()=>{if(!n)return;const{data:Ae,error:G}=await Te.from("suppliers").select("id, name");G&&(console.error("Error fetching suppliers:",G),p("Fehler beim Laden der Lieferantendaten"));const{data:ve,error:Be}=await Te.from("messages").select("*, supplier:supplier_id(name)").order("timestamp",{ascending:!0});if(Be&&console.error("Error fetching messages:",Be),ve&&Ae){const Pe=Ae.map(ot=>{const tt=ve.filter(ut=>ut.supplier_id===ot.id).map(ut=>({id:ut.id,sender:ut.user_id===n.id?"me":"them",content:ut.content,timestamp:Vt(vs(ut.timestamp),"dd.MM.yyyy HH:mm"),senderName:ut.sender_name,isRead:ut.is_read})),Ft=tt[tt.length-1];return{id:ot.id,supplier:ot.name,lastMessage:Ft?.content||"",timestamp:Ft?.timestamp||"",date:Ft?Vt(vs(Ft.timestamp),"dd. MMMM yyyy"):"",unread:tt.filter(ut=>!ut.isRead&&ut.sender==="them").length,avatar:ot.name.slice(0,2).toUpperCase(),status:"offline",messages:tt}}).filter(ot=>ot.messages.length>0);i(Pe)}else i([{id:1,supplier:"TechComp AG",lastMessage:"Wir benötigen noch Ihre aktualisierten Zertifikate bis Ende des Monats.",timestamp:"10:23",date:"03. Mai 2025",unread:2,avatar:"TC",status:"online",messages:[{id:1,sender:"them",content:"Guten Tag, wir haben Ihre Anfrage erhalten und werden die Informationen zusammenstellen.",timestamp:"02.05.2025 14:30",senderName:"Maria Schmidt, TechComp AG"},{id:2,sender:"me",content:"Vielen Dank! Bitte achten Sie darauf, dass alle Zertifikate nach ISO 14001 aktualisiert sind.",timestamp:"02.05.2025 15:45",senderName:"Ich"},{id:3,sender:"them",content:"Wir werden sicherstellen, dass alle Unterlagen vollständig sind. Gibt es eine Frist, die wir einhalten müssen?",timestamp:"02.05.2025 16:20",senderName:"Maria Schmidt, TechComp AG"},{id:4,sender:"me",content:"Wir benötigen noch Ihre aktualisierten Zertifikate bis Ende des Monats.",timestamp:"03.05.2025 10:23",senderName:"Ich"}]}]);const{data:oe,error:_e}=await Te.from("tasks").select("*");_e&&console.error("Error fetching tasks:",_e),N(oe?oe.map(Pe=>({id:Pe.id,title:Pe.title,assignedTo:Pe.assigned_to_name,dueDate:Vt(vs(Pe.due_date),"dd. MMMM yyyy"),priority:Pe.priority,status:Pe.status})):[{id:1,title:"Lieferantenbewertung TechComp AG",assignedTo:"Ich",dueDate:"10. Mai 2025",priority:"high",status:"pending"}]);const{data:ze,error:Ke}=await Te.from("documents").select("*");Ke&&console.error("Error fetching documents:",Ke),M(ze?ze.map(Pe=>({id:Pe.id,title:Pe.title,type:Pe.file_type,modifiedBy:Pe.modified_by_name,modifiedDate:Vt(vs(Pe.modified_date),"dd. MMMM yyyy"),status:Pe.status,version:Pe.version,fileUrl:Pe.file_url})):[{id:1,title:"Lieferkettengesetz - Leitfaden 2025",type:"PDF",modifiedBy:"Lisa Bauer",modifiedDate:"01. Mai 2025",status:"Freigegeben",version:"2.1"}]);const{data:He,error:Ge}=await Te.from("notifications").select("*").eq("user_id",n.id);Ge&&console.error("Error fetching notifications:",Ge),K(He?He.map(Pe=>({id:Pe.id,title:Pe.title,description:Pe.description,date:Vt(vs(Pe.created_at),"dd. MMMM yyyy"),isRead:Pe.is_read,priority:Pe.priority||"medium"})):[{id:1,title:"Neue Nachricht von TechComp AG",description:"Maria Schmidt hat auf Ihre Anfrage geantwortet.",date:"03. Mai 2025",isRead:!1,priority:"medium"}]),await Te.from("audit_logs").insert([{user_id:n.id,action:"viewed_kommunikation_page",details:"Accessed supplier communication page",created_at:new Date}])})()},[n]),re.useEffect(()=>{a&&k()},[a]),re.useEffect(()=>{if(g){const te=setTimeout(()=>p(""),3e3);return()=>clearTimeout(te)}},[g]),re.useEffect(()=>{y||localStorage.setItem("chainguard_kommunikation_onboarding","dismissed")},[y]);const k=()=>{de.current?.scrollIntoView({behavior:"smooth"})},T=async()=>{if(c.trim()==="")return;let te=a?.id||crypto.randomUUID(),Ae=a?.id;const{data:G,error:ve}=await Te.from("messages").insert([{conversation_id:te,supplier_id:Ae,user_id:n.id,content:c,sender_name:"Ich",timestamp:new Date,is_read:!1}]).select().single();if(ve){console.error("Error sending message:",ve),p("Fehler beim Senden der Nachricht");return}if(a){const Be=s.map(oe=>{if(oe.id===a.id){const _e=[...oe.messages,{id:G.id,sender:"me",content:c,timestamp:Vt(new Date,"dd.MM.yyyy HH:mm"),senderName:"Ich",isRead:!0}];return{...oe,messages:_e,lastMessage:c,timestamp:Vt(new Date,"HH:mm"),date:Vt(new Date,"dd. MMMM yyyy"),unread:0}}return oe});i(Be),o({...a,messages:[...a.messages,{id:G.id,sender:"me",content:c,timestamp:Vt(new Date,"dd.MM.yyyy HH:mm"),senderName:"Ich",isRead:!0}],lastMessage:c,timestamp:Vt(new Date,"HH:mm"),date:Vt(new Date,"dd. MMMM yyyy")})}u(""),p("Nachricht gesendet"),setTimeout(k,100),await Te.from("audit_logs").insert([{user_id:n.id,action:"sent_message",details:`Sent message to ${a.supplier}`,created_at:new Date}])},I=async te=>{const Ae=s.map(G=>G.id===te.id?{...G,unread:0}:G);i(Ae),o({...te,unread:0}),await Te.from("messages").update({is_read:!0}).eq("conversation_id",te.id).eq("is_read",!1)},Y=async()=>{if(!j.title||!j.assignedTo||!j.dueDate){p("Bitte alle Pflichtfelder ausfüllen");return}const{data:te,error:Ae}=await Te.from("tasks").insert([{title:j.title,assigned_to:n.id,assigned_to_name:j.assignedTo,due_date:j.dueDate,priority:j.priority,status:j.status,created_by:n.id}]).select().single();if(Ae){console.error("Error creating task:",Ae),p("Fehler beim Erstellen der Aufgabe");return}N([...w,{id:te.id,title:j.title,assignedTo:j.assignedTo,dueDate:Vt(vs(j.dueDate),"dd. MMMM yyyy"),priority:j.priority,status:j.status}]),D({title:"",assignedTo:"",dueDate:"",priority:"medium",status:"pending"}),X(!1),p("Aufgabe erfolgreich erstellt"),await Te.from("audit_logs").insert([{user_id:n.id,action:"created_task",details:`Created task: ${j.title}`,created_at:new Date}])},Q=async()=>{if(!S.title||!S.file){p("Bitte alle Pflichtfelder ausfüllen");return}const te=`${Date.now()}_${S.file.name}`,{error:Ae}=await Te.storage.from("documents").upload(te,S.file);if(Ae){console.error("Error uploading document:",Ae),p("Fehler beim Hochladen des Dokuments");return}const{data:G,error:ve}=await Te.from("documents").insert([{title:S.title,file_type:S.fileType,modified_by:n.id,modified_by_name:"Ich",modified_date:new Date,status:S.status,version:S.version,file_url:`${Te.storage.from("documents").getPublicUrl(te).data.publicUrl}`}]).select().single();if(ve){console.error("Error creating document:",ve),p("Fehler beim Erstellen des Dokuments");return}M([...P,{id:G.id,title:S.title,type:S.fileType,modifiedBy:"Ich",modifiedDate:Vt(new Date,"dd. MMMM yyyy"),status:S.status,version:S.version,fileUrl:G.file_url}]),q({title:"",fileType:"PDF",status:"Entwurf",version:"1.0",file:null}),A(!1),p("Dokument erfolgreich hochgeladen"),await Te.from("audit_logs").insert([{user_id:n.id,action:"uploaded_document",details:`Uploaded document: ${S.title}`,created_at:new Date}])},fe=async(te,Ae)=>{const{error:G}=await Te.from("tasks").update({status:Ae}).eq("id",te);if(G){console.error("Error updating task:",G),p("Fehler beim Aktualisieren der Aufgabe");return}N(w.map(ve=>ve.id===te?{...ve,status:Ae}:ve)),p("Aufgabenstatus aktualisiert"),await Te.from("audit_logs").insert([{user_id:n.id,action:"updated_task_status",details:`Updated task ${te} to status: ${Ae}`,created_at:new Date}])},ce=async(te,Ae)=>{const{error:G}=await Te.from("documents").update({status:Ae,modified_date:new Date,modified_by:n.id,modified_by_name:"Ich"}).eq("id",te);if(G){console.error("Error updating document:",G),p("Fehler beim Aktualisieren des Dokuments");return}M(P.map(ve=>ve.id===te?{...ve,status:Ae,modifiedDate:Vt(new Date,"dd. MMMM yyyy"),modifiedBy:"Ich"}:ve)),p("Dokumentstatus aktualisiert"),await Te.from("audit_logs").insert([{user_id:n.id,action:"updated_document_status",details:`Updated document ${te} to status: ${Ae}`,created_at:new Date}])},ue=async te=>{const{error:Ae}=await Te.from("notifications").update({is_read:!0}).eq("id",te);if(Ae){console.error("Error marking notification as read:",Ae);return}K(W.map(G=>G.id===te?{...G,isRead:!0}:G))},ke=async te=>{const{error:Ae}=await Te.from("notifications").delete().eq("id",te);if(Ae){console.error("Error dismissing notification:",Ae);return}K(W.filter(G=>G.id!==te))},we=te=>{switch(te){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},Fe=te=>{switch(te){case"high":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"});case"medium":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-yellow-500"});case"low":return l.jsx("span",{className:"block w-2 h-2 rounded-full bg-blue-500"});default:return null}},Le=te=>{switch(te){case"high":return"text-red-700 bg-red-50 border-red-100";case"medium":return"text-yellow-700 bg-yellow-50 border-yellow-100";case"low":return"text-green-700 bg-green-50 border-green-100";default:return"text-gray-700 bg-gray-50 border-gray-100"}},qe=te=>{switch(te){case"completed":return"text-green-700 bg-green-50 border-green-100";case"in-progress":return"text-blue-700 bg-blue-50 border-blue-100";case"pending":return"text-gray-700 bg-gray-50 border-gray-100";default:return"text-gray-700 bg-gray-50 border-gray-100"}},me=te=>{switch(te){case"Freigegeben":return"text-green-700 bg-green-50 border-green-100";case"In Prüfung":return"text-blue-700 bg-blue-50 border-blue-100";case"Entwurf":return"text-gray-700 bg-gray-50 border-gray-100";default:return"text-gray-700 bg-gray-50 border-gray-100"}},U=s.filter(te=>te.supplier.toLowerCase().includes(d.toLowerCase())),$e=w.filter(te=>(O==="Alle"||O==="Zu erledigen"&&te.status==="pending"||O==="In Bearbeitung"&&te.status==="in-progress"||O==="Abgeschlossen"&&te.status==="completed")&&(ee==="Alle"||ee==="Mir zugewiesen"&&te.assignedTo==="Ich")),Ee=P.filter(te=>Z==="Alle"||te.status===Z),Ne=W.filter(te=>!te.isRead).length;return l.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[l.jsx(Xs,{}),l.jsx("div",{className:"flex-1 ml-72",children:l.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[l.jsxs("header",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Lieferantenkommunikation"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Effiziente Kommunikation mit Ihren Lieferanten"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[t&&l.jsx("span",{className:"text-xs px-3 py-1 bg-blue-100 text-blue-700 font-medium rounded-full",children:"Admin-Modus"}),l.jsxs("div",{className:"relative",children:[l.jsx(si,{size:20,className:"text-gray-600 hover:text-blue-600 cursor-pointer"}),Ne>0&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:Ne})]})]})]}),y&&l.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-lg shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Ri,{className:"h-5 w-5 text-blue-500 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:"Willkommen bei der Lieferantenkommunikation"}),l.jsx("p",{className:"text-sm mt-1",children:"Hier können Sie einfach mit Ihren Lieferanten kommunizieren, Aufgaben verwalten und Dokumente zur Freigabe teilen."})]})]}),l.jsx("button",{onClick:()=>v(!1),className:"p-1 hover:bg-blue-100 rounded-full transition-colors",children:l.jsx(Nn,{size:16,className:"text-blue-500"})})]})}),l.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8 overflow-hidden",children:[l.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(hu,{size:18}),"Lieferantenkommunikation"]})}),l.jsxs("div",{className:"flex h-[600px]",children:[l.jsxs("div",{className:"w-1/3 border-r border-gray-200",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("div",{className:"relative",children:[l.jsx(Wh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),l.jsx("input",{type:"text",placeholder:"Lieferant suchen...",value:d,onChange:te=>f(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l.jsx("div",{className:"overflow-y-auto h-[535px]",children:U.length>0?U.map(te=>l.jsx("div",{className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${a?.id===te.id?"bg-blue-50":""}`,onClick:()=>I(te),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-medium ${te.status==="online"?"bg-green-500":te.status==="away"?"bg-yellow-500":"bg-gray-400"}`,children:te.avatar}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-medium text-gray-900 truncate",children:te.supplier}),l.jsx("span",{className:"text-xs text-gray-500",children:te.timestamp})]}),l.jsx("p",{className:"text-sm text-gray-600 truncate",children:te.lastMessage}),l.jsxs("div",{className:"flex justify-between items-center mt-1",children:[l.jsx("span",{className:"text-xs text-gray-500",children:te.date}),te.unread>0&&l.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:te.unread})]})]})]})},te.id)):l.jsx("p",{className:"text-center text-gray-500 py-8",children:"Keine Gespräche gefunden"})})]}),l.jsx("div",{className:"flex-1 flex flex-col",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:a.supplier})}),l.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[a.messages.map(te=>l.jsx("div",{className:`mb-4 flex ${te.sender==="me"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${te.sender==="me"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:[l.jsx("p",{className:"text-sm font-medium",children:te.senderName}),l.jsx("p",{className:"text-sm mt-1",children:te.content}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:te.timestamp})]})},te.id)),l.jsx("div",{ref:de})]}),l.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{value:c,onChange:te=>u(te.target.value),placeholder:"Nachricht schreiben...",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}),l.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:l.jsx(P_,{size:18})})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Wählen Sie ein Gespräch aus"})})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(Jg,{size:18,className:"text-blue-600"}),"Aufgaben"]}),l.jsxs("button",{onClick:()=>X(!0),className:"flex items-center gap-2 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(ol,{size:16}),"Neue Aufgabe"]})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex gap-4 mb-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(sm,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsxs("select",{value:O,onChange:te=>V(te.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{children:"Alle"}),l.jsx("option",{children:"Zu erledigen"}),l.jsx("option",{children:"In Bearbeitung"}),l.jsx("option",{children:"Abgeschlossen"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(q_,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsxs("select",{value:ee,onChange:te=>B(te.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{children:"Alle"}),l.jsx("option",{children:"Mir zugewiesen"})]})]})]}),l.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:$e.length>0?$e.map(te=>l.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:te.title}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Zugewiesen an: ",te.assignedTo]}),l.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[l.jsx(Zo,{size:14}),"Fällig: ",te.dueDate]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${Le(te.priority)}`,children:te.priority==="high"?"Hoch":te.priority==="medium"?"Mittel":"Niedrig"}),l.jsxs("select",{value:te.status,onChange:Ae=>fe(te.id,Ae.target.value),className:`text-xs px-2 py-1 rounded-full font-medium ${qe(te.status)}`,children:[l.jsx("option",{value:"pending",children:"Zu erledigen"}),l.jsx("option",{value:"in-progress",children:"In Bearbeitung"}),l.jsx("option",{value:"completed",children:"Abgeschlossen"})]})]})]})},te.id)):l.jsx("p",{className:"text-center text-gray-500 py-8",children:"Keine Aufgaben gefunden"})})]})]})]}),l.jsx("div",{className:"col-span-1",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden sticky top-8",children:[l.jsx("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-100",children:l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(si,{size:18,className:"text-blue-600"}),"Benachrichtigungen",Ne>0&&l.jsxs("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 font-medium rounded-full",children:[Ne," neu"]})]})})}),l.jsx("div",{className:"p-4 max-h-[300px] overflow-y-auto",children:W.length>0?l.jsx("div",{className:"space-y-3",children:W.map(te=>l.jsxs("div",{className:`p-3 border rounded-lg ${te.isRead?"border-gray-200":we(te.priority)} relative transition-all hover:shadow-sm ${te.isRead?"opacity-75":"opacity-100"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[!te.isRead&&Fe(te.priority),l.jsx("h3",{className:`font-medium ${te.isRead?"text-gray-700":"text-gray-900"}`,children:te.title})]}),l.jsx("button",{onClick:()=>ke(te.id),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:14})})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:te.description}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500",children:[l.jsx("span",{children:te.date}),!te.isRead&&l.jsx("button",{onClick:()=>ue(te.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Als gelesen markieren"})]})]},te.id))}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"Keine Benachrichtigungen vorhanden"})})}),l.jsxs("div",{className:"px-6 py-4 border-t border-gray-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[l.jsx(js,{size:18,className:"text-yellow-600"}),"Dokumente"]}),l.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(ol,{size:16}),"Neues Dokument"]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(sm,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsxs("select",{value:Z,onChange:te=>ne(te.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full",children:[l.jsx("option",{children:"Alle"}),l.jsx("option",{children:"Entwurf"}),l.jsx("option",{children:"In Prüfung"}),l.jsx("option",{children:"Freigegeben"})]})]}),l.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:Ee.length>0?Ee.map(te=>l.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900",children:te.title}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Geändert von: ",te.modifiedBy]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Version: ",te.version]}),l.jsx("p",{className:"text-sm text-gray-600",children:te.modifiedDate})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${me(te.status)}`,children:te.status}),te.fileUrl&&l.jsx("a",{href:te.fileUrl,download:!0,className:"text-blue-600 hover:text-blue-800",children:l.jsx(ll,{size:16})})]})]}),t&&l.jsxs("select",{value:te.status,onChange:Ae=>ce(te.id,Ae.target.value),className:`text-xs px-2 py-1 rounded-full font-medium mt-2 ${me(te.status)}`,children:[l.jsx("option",{value:"Entwurf",children:"Entwurf"}),l.jsx("option",{value:"In Prüfung",children:"In Prüfung"}),l.jsx("option",{value:"Freigegeben",children:"Freigegeben"})]})]},te.id)):l.jsx("p",{className:"text-center text-gray-500 py-8",children:"Keine Dokumente gefunden"})})]})]})})]}),le&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Neue Aufgabe erstellen"}),l.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titel"}),l.jsx("input",{type:"text",value:j.title,onChange:te=>D({...j,title:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zugewiesen an"}),l.jsx("input",{type:"text",value:j.assignedTo,onChange:te=>D({...j,assignedTo:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fälligkeitsdatum"}),l.jsx("input",{type:"date",value:j.dueDate,onChange:te=>D({...j,dueDate:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priorität"}),l.jsxs("select",{value:j.priority,onChange:te=>D({...j,priority:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"high",children:"Hoch"}),l.jsx("option",{value:"medium",children:"Mittel"}),l.jsx("option",{value:"low",children:"Niedrig"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),l.jsxs("select",{value:j.status,onChange:te=>D({...j,status:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"pending",children:"Zu erledigen"}),l.jsx("option",{value:"in-progress",children:"In Bearbeitung"}),l.jsx("option",{value:"completed",children:"Abgeschlossen"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Abbrechen"}),l.jsx("button",{onClick:Y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Erstellen"})]})]})}),H&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Neues Dokument hochladen"}),l.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(Nn,{size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titel"}),l.jsx("input",{type:"text",value:S.title,onChange:te=>q({...S,title:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dateityp"}),l.jsxs("select",{value:S.fileType,onChange:te=>q({...S,fileType:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"PDF",children:"PDF"}),l.jsx("option",{value:"DOCX",children:"DOCX"}),l.jsx("option",{value:"XLSX",children:"XLSX"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),l.jsxs("select",{value:S.status,onChange:te=>q({...S,status:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"Entwurf",children:"Entwurf"}),l.jsx("option",{value:"In Prüfung",children:"In Prüfung"}),l.jsx("option",{value:"Freigegeben",children:"Freigegeben"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Version"}),l.jsx("input",{type:"text",value:S.version,onChange:te=>q({...S,version:te.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Datei"}),l.jsx("input",{type:"file",accept:".pdf,.docx,.xlsx",onChange:te=>q({...S,file:te.target.files[0]}),className:"w-full p-2 border border-gray-300 rounded-lg"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Abbrechen"}),l.jsx("button",{onClick:Q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Hochladen"})]})]})}),g&&l.jsxs("div",{ref:xe,className:"fixed bottom-4 right-4 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 transform animate-slideInRight flex items-center",children:[l.jsx(Fn,{size:16,className:"mr-2"}),g]})]})})]})}function c6(){const[n,e]=re.useState(!1);re.useEffect(()=>{localStorage.getItem("cookieConsent")||e(!0)},[]);const t=()=>{localStorage.setItem("cookieConsent","true"),e(!1)};return n?l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white px-4 py-3 flex flex-col md:flex-row items-center justify-between z-50 text-sm",children:[l.jsx("p",{className:"mb-2 md:mb-0",children:"Diese Website verwendet nur funktionale Cookies, um dir das bestmögliche Erlebnis zu bieten."}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded text-sm",children:"Verstanden"})]}):null}function Oa({children:n}){const[e,t]=re.useState(null),[r,s]=re.useState(!0),[i,a]=re.useState(!1);return re.useEffect(()=>{Te.auth.getSession().then(({data:c})=>{t(c.session),c.session&&!localStorage.getItem("onboardingComplete")&&!localStorage.getItem("onboardingSkipped")&&a(!0),s(!1)});const{data:o}=Te.auth.onAuthStateChange((c,u)=>{t(u),u&&!localStorage.getItem("onboardingComplete")&&!localStorage.getItem("onboardingSkipped")&&a(!0)});return()=>{o.subscription.unsubscribe()}},[]),r?l.jsx("div",{className:"p-10 text-center text-gray-600",children:"Lade..."}):!e||!e.user.email_confirmed_at?l.jsx("div",{className:"p-10 text-center text-red-600",children:"Zugriff verweigert. Bitte bestätige deine E-Mail-Adresse."}):l.jsxs(l.Fragment,{children:[i&&l.jsx(Qg,{onComplete:()=>{localStorage.setItem("onboardingComplete","true"),a(!1)},onSkip:()=>{localStorage.setItem("onboardingSkipped","true"),a(!1)}}),n]})}P3.createRoot(document.getElementById("root")).render(l.jsx(Ch.StrictMode,{children:l.jsx(Nx,{children:l.jsxs("div",{className:"flex flex-col min-h-screen",children:[l.jsx(c6,{}),l.jsx("div",{className:"flex-grow",children:l.jsxs(jx,{children:[l.jsx(Hn,{path:"/",element:l.jsx(n6,{})}),l.jsx(Hn,{path:"/auth",element:l.jsx(D3,{})}),l.jsx(Hn,{path:"/dashboard",element:l.jsx(Oa,{children:l.jsx(t6,{})})}),l.jsx(Hn,{path:"/measures",element:l.jsx(Oa,{children:l.jsx(Hw,{})})}),l.jsx(Hn,{path:"/messages",element:l.jsx(Oa,{children:l.jsx(j3,{})})}),l.jsx(Hn,{path:"/tasks",element:l.jsx(Oa,{children:l.jsx(k3,{})})}),l.jsx(Hn,{path:"/quick-wins",element:l.jsx(Oa,{children:l.jsx(S3,{})})}),l.jsx(Hn,{path:"/notifications",element:l.jsx(Oa,{children:l.jsx(A3,{})})}),l.jsx(Hn,{path:"/whistleblower",element:l.jsx(i6,{})}),l.jsx(Hn,{path:"/datenschutz",element:l.jsx(r6,{})}),l.jsx(Hn,{path:"/impressum",element:l.jsx(s6,{})}),l.jsx(Hn,{path:"/danke",element:l.jsx(a6,{})}),l.jsx(Hn,{path:"/analyse",element:l.jsx(o6,{})}),l.jsx(Hn,{path:"/lkg-compliance",element:l.jsx(N3,{})}),l.jsx(Hn,{path:"/kommunikation",element:l.jsx(l6,{})})]})}),l.jsxs("footer",{className:"px-6 py-12 text-center text-sm text-gray-500 dark:text-gray-400",children:["© 2025 ChainGuard. Made with ❤️ in Germany. |",l.jsx(Ic,{to:"/impressum",className:"mx-1 underline hover:text-gray-700 dark:hover:text-gray-200",children:"Impressum"}),"|",l.jsx(Ic,{to:"/datenschutz",className:"mx-1 underline hover:text-gray-700 dark:hover:text-gray-200",children:"Datenschutz"}),"|",l.jsx(Ic,{to:"/whistleblower",className:"mx-1 underline hover:text-gray-700 dark:hover:text-gray-200",children:"Whistleblower"})]})]})})}));export{Dt as _};
